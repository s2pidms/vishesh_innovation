"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7418],{67418:(x,b,c)=>{c.r(b),c.d(b,{DirectCostModule:()=>R});var e=c(96814),o=c(1076),f=c(43818),A=c(25116),T=c(65129),t=c(65879),U=c(98977),M=c(99007),v=c(88059),S=c(37285),N=c(53421),k=c(83344);function _(p,g){if(1&p){const h=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",25)(14,"div",26)(15,"span",27),t._uU(16),t.ALo(17,"companyCurrency"),t._UZ(18,"div",28),t.qZA(),t.TgZ(19,"span",29),t._uU(20),t.ALo(21,"number"),t.qZA()()(),t.TgZ(22,"td",25)(23,"div",26)(24,"span",27),t._uU(25),t.ALo(26,"companyCurrency"),t._UZ(27,"div",28),t.qZA(),t.TgZ(28,"span",29),t._uU(29),t.ALo(30,"number"),t.qZA()()(),t.TgZ(31,"td",25)(32,"div",26)(33,"span",27),t._uU(34),t.ALo(35,"companyCurrency"),t._UZ(36,"div",28),t.qZA(),t.TgZ(37,"span",29),t._uU(38),t.ALo(39,"number"),t.qZA()()(),t.TgZ(40,"td",25)(41,"div",26)(42,"span",27),t._uU(43),t.ALo(44,"companyCurrency"),t._UZ(45,"div",28),t.qZA(),t.TgZ(46,"span",29),t._uU(47),t.ALo(48,"number"),t.qZA()()(),t.TgZ(49,"td")(50,"div",30),t._UZ(51,"button",31),t.TgZ(52,"div",32)(53,"a",33),t.NdJ("click",function(){const n=t.CHM(h).$implicit,l=t.oxw();return t.KtG(l.navigateTo("../form",n,"view"))}),t._UZ(54,"i",34),t._uU(55," View "),t.qZA(),t.TgZ(56,"a",33),t.NdJ("click",function(){const n=t.CHM(h).$implicit,l=t.oxw();return t.KtG(l.navigateTo("../form",n,"edit"))}),t._UZ(57,"i",35),t._uU(58," Edit "),t.qZA()()()()()}if(2&p){const h=g.$implicit,s=t.MAs(4),r=t.MAs(8),n=t.oxw();t.xp6(2),t.Oqu(h.SKUNo),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("positionTarget",s)("ngbTooltip",h.SKUName),t.xp6(1),t.hij(" ",h.SKUName?h.SKUName:null," "),t.xp6(1),t.Udp("width",r.clientWidth),t.xp6(2),t.Q6J("positionTarget",r)("ngbTooltip",h.SKUDescription),t.xp6(1),t.hij(" ",h.SKUDescription?h.SKUDescription:null," "),t.xp6(2),t.Oqu(h.UOM),t.xp6(4),t.hij(" ",t.lcZ(17,22,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(21,24,null==h?null:h.totalLabourCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(26,27,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(30,29,null==h?null:h.totalAssetCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(35,32,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(39,34,null==h?null:h.totalToolingCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(44,37,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(48,39,null==h?null:h.totalCostPerUnit,"1.2-2")," "),t.xp6(6),t.Q6J("accessType",n.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",n.rolePermissionActions.editAction)}}const y=function(p,g,h,s){return{page:p,pageSize:g,collection:h,search:s,type:"list"}};let u=(()=>{var p;class g{constructor(s,r,n,l,P,K){this.exportExcelService=s,this.router=r,this.spinner=n,this.activatedRoute=l,this.directCostService=P,this.exportToPDFService=K,this.page=1,this.pageSize=8,this.collection=0,this.column="processId",this.direction=-1,this.search="",this.tableData=[],this.rolePermissionActions=A.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(s=!1,r=""){this.spinner.show();let n={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:s};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.directCostService.getAll(n).subscribe(l=>{"EXCEL"==r?this.excelDownload(l.rows):"PDF"==r?this.pdfDownload(l.rows):(this.tableData=l.rows,this.collection=l.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(s,r,n){this.router.navigate([s],{relativeTo:this.activatedRoute,queryParams:{id:r?._id,action:n}})}eventHeader(s){switch(s.key){case"SEARCH":this.search=s.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=s.value,this.getAll()}}trackByFn(s,r){return r?._id}pdfDownload(s){let r=(0,T.sm)(s);this.exportToPDFService.generatePdf(r.tableData,r.title)}excelDownload(s){this.exportExcelService.exportExcel((0,T.t8)(s))}onSort({column:s,direction:r}){this.headers.forEach(n=>{n.sortable!==s&&(n.direction="")}),this.column=s,this.direction="asc"==r?1:-1,this.getAll()}}return(p=g).\u0275fac=function(s){return new(s||p)(t.Y36(U.Ol),t.Y36(o.F0),t.Y36(U.V),t.Y36(o.gz),t.Y36(M.m$),t.Y36(U.$L))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-list"]],viewQuery:function(s,r){if(1&s&&t.Gf(f.j,5),2&s){let n;t.iGM(n=t.CRH())&&(r.headers=n)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-3",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","totalLabourCostPerUnit",3,"sort"],["sortable","totalAssetCostPerUnit",3,"sort"],["sortable","totalToolingCostPerUnit",3,"sort"],["sortable","totalCostPerUnit",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],[1,"py-0","text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],[1,"vr","ms-3"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(s,r){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Direct Cost Summary (by SKU)"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return r.navigateTo("../form",{},"create")}),t._uU(7," Direct Cost "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(l){return r.eventHeader(l)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(17,"SKU Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(19,"SKU Description"),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(23,"Labour Cost/Unit"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(25,"Asset Cost/Unit"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(27,"Tooling Cost/Unit"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(l){return r.onSort(l)}),t._uU(29,"Total Direct Process Cost/Unit"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,_,59,42,"tr",20),t.qZA()()()()),2&s&&(t.xp6(4),t.Q6J("accessType",r.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,y,r.page,r.pageSize,r.collection,r.search)),t.xp6(23),t.Q6J("ngForOf",r.tableData)("ngForTrackBy",r.trackByFn))},dependencies:[e.sg,v.P,S._L,f.j,N.J,e.JJ,k.f],encapsulation:2}),g})();var i=c(60095),d=c(21631),m=c(22096),C=c(35469),D=c(9013),Z=c(6244),O=c(16897),w=c(50363);function I(p,g){if(1&p){const h=t.EpF();t.TgZ(0,"div",35)(1,"button",36),t.NdJ("click",function(){t.CHM(h);const r=t.oxw();return t.KtG(r.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(){t.CHM(h);const r=t.oxw();return t.KtG(r.submit())}),t._uU(4,"Save"),t.qZA()()}}let L=(()=>{var p;class g{get f(){return this.form.controls}constructor(s,r,n,l,P,K,E,F){this.activatedRoute=s,this.spinner=r,this.toastService=n,this.directCostService=l,this.validationService=P,this.modalService=K,this.location=E,this.utilityService=F,this.oldAssetAllocationData=[],this.labourOldAllocationData=[],this.SKUList=[],this.ESCPreviewArr=[],this.toolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.oldToolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.submitted=!1,this.action="create",this.toolingCAQty=0,this.masterData={autoIncrementNo:"",productCategories:[],processList:[]},this.form=new i.nJ({_id:new i.p4(null),directCostNo:new i.p4(null),productCategory:new i.p4(null,[i.kI.required]),SKU:new i.p4(null),SKUNo:new i.p4(null,[i.kI.required]),SKUName:new i.p4(null,[i.kI.required]),SKUDescription:new i.p4(null),UOM:new i.p4(null),totalLabourCostPerUnit:new i.p4(null,[i.kI.required]),totalAssetCostPerUnit:new i.p4(null,[i.kI.required]),totalToolingCostPerUnit:new i.p4(null,[i.kI.required]),totalCostPerUnit:new i.p4(null),directCostDetails:new i.p4([]),toolingCostDetails:new i.p4([])})}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.getInitialData()}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,C._r))return;this.form.enable();let s=this.form.value;s.directCostDetails=this.masterData?.processList,s.toolingCostDetails=this.toolingCostDetails,s._id?this.update(s):(delete s._id,this.create(s))}create(s){this.spinner.show(),this.directCostService.create(s).subscribe(r=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(r.message),this.location.back()})}update(s){this.spinner.show(),this.directCostService.update(s._id,s).subscribe(r=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(r.message),this.location.back()})}getInitialData(){this.spinner.show(),this.directCostService.getAllMasterData({}).subscribe(s=>{this.masterData=s,this.form.controls.directCostNo.setValue(this.masterData.autoIncrementNo),this.masterData.processList&&(this.labourOldAllocationData=JSON.parse(JSON.stringify(this.masterData.processList)),this.oldAssetAllocationData=JSON.parse(JSON.stringify(this.masterData.processList))),this.activatedRoute.queryParams.pipe((0,d.z)(r=>(this.action=r.action,this.utilityService.accessDenied(this.action),r.id?this.directCostService.getById(r.id):(0,m.of)({})))).subscribe(r=>{if(this.spinner.hide(),0==Object.keys(r).length)return;r.directCostDetails=r.directCostDetails;let n=this.masterData?.processList;this.masterData.processList=r.directCostDetails;for(const l of r.directCostDetails)n=n.filter(P=>P.processId!=l.processId),this.ESCPreviewArr=[...r.directCostDetails,...n],this.oldAssetAllocationData=[...r.directCostDetails,...n];this.toolingCostDetails=r.toolingCostDetails,this.form.patchValue(r),this.form.controls.productCategory.disable(),this.form.controls.SKUNo.disable(),this.form.controls.SKUName.disable(),"view"==this.action&&this.form.disable()})})}getSKUData(){this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.form.controls.SKU.setValue(null),this.form.controls.SKUNo.setValue(null),this.form.controls.SKUName.setValue(null),this.form.controls.SKUDescription.setValue(null),this.form.controls.UOM.setValue(null),this.form.controls.totalLabourCostPerUnit.setValue(null),this.form.controls.totalAssetCostPerUnit.setValue(null),this.form.controls.totalToolingCostPerUnit.setValue(null),this.form.controls.totalCostPerUnit.setValue(null);let s=this.form.controls.productCategory.value;this.spinner.show(),this.directCostService.getSKUData({category:s}).subscribe(r=>{r&&(this.SKUList=r?.SKUObj),this.masterData.processList=r.processList.length>0?JSON.parse(JSON.stringify(r?.processList)):JSON.parse(JSON.stringify(this.oldAssetAllocationData)),this.spinner.hide()})}setSKUDetails(s){this.form.controls.SKU.setValue(s?._id),this.directCostService.checkSKUExistsBySKUId(s?._id).subscribe(),this.form.controls.SKUNo.setValue(s?.SKUNo),this.form.controls.SKUName.setValue(s?.SKUName),this.form.controls.SKUDescription.setValue(s?.SKUDescription),this.form.controls.UOM.setValue(s?.primaryUnit),this.toolingCAQty=s?.toolingCAQty||0,this.masterData.processList=this.masterData?.processList.map(r=>(r.CAUnits=s?.processCAQty||0,r)),this.toolingCostDetails=this.toolingCostDetails.map(r=>(r.CAUnits=s?.toolingCAQty||0,r))}calTotalCostPerUnit(){this.form.controls.totalCostPerUnit.setValue(+((+this.form.controls.totalLabourCostPerUnit.value||0)+(+this.form.controls.totalAssetCostPerUnit.value||0)+(+this.form.controls.totalToolingCostPerUnit.value||0)).toFixed(2))}openLabourCostModal(){const s=this.modalService.open(D.Fm,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});s.componentInstance.action=this.action,s.componentInstance.processList=this.masterData?.processList,s.componentInstance.ESCPreviewArr=this.ESCPreviewArr,s.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,s.componentInstance.labourOldAllocationData=this.labourOldAllocationData,s.componentInstance.totalLabourCostPerUnit=this.form.controls.totalLabourCostPerUnit.value,s.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,s.result.then(r=>{r&&(this.masterData.processList=r?.processList,this.oldAssetAllocationData=r?.oldAssetAllocationData,this.form.controls.totalLabourCostPerUnit.setValue(r?.totalLabourCostPerUnit),this.form.controls.totalAssetCostPerUnit.setValue(r?.totalAssetCostPerUnit),this.calTotalCostPerUnit())},r=>{})}openAssetCostModal(){const s=this.modalService.open(D.Wo,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});s.componentInstance.action=this.action,s.componentInstance.processList=this.masterData?.processList,s.componentInstance.ESCPreviewArr=this.ESCPreviewArr,s.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,s.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,s.result.then(r=>{r&&(this.masterData.processList=r?.processList,this.oldAssetAllocationData=r?.oldAssetAllocationData,this.form.controls.totalAssetCostPerUnit.setValue(r?.totalAssetCostPerUnit),this.form.controls.totalLabourCostPerUnit.setValue(r?.totalLabourCostPerUnit),this.calTotalCostPerUnit())},r=>{})}openToolingCostModal(){const s=this.modalService.open(D.$6,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.toolingCostDetails=this.toolingCostDetails,s.componentInstance.ESCPreviewArr=this.ESCPreviewArr,s.componentInstance.toolingCAQty=this.toolingCAQty,s.componentInstance.totalToolingCostPerUnit=this.form.controls.totalToolingCostPerUnit.value,s.result.then(r=>{r&&(this.toolingCostDetails=r?.toolingCostDetails,this.form.controls.totalToolingCostPerUnit.setValue(r?.totalToolingCostPerUnit),this.calTotalCostPerUnit())},r=>{})}openProductCategoryModal(){const s=this.modalService.open(Z.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.productCategoryList=this.masterData?.productCategories,s.componentInstance.productCategory=this.form.controls.productCategory.value,s.result.then(r=>{r&&(this.form.controls.productCategory.setValue(r?.selectedProductCategory),this.getSKUData())},r=>{})}}return(p=g).\u0275fac=function(s){return new(s||p)(t.Y36(o.gz),t.Y36(U.V),t.Y36(U.kl),t.Y36(M.m$),t.Y36(O.RJ),t.Y36(S.FF),t.Y36(e.Ye),t.Y36(U.tI))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-form"]],decls:96,vars:20,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-5"],[1,"col-8","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","fs-4","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-4","ps-0"],["bindLabel","SKUNo","bindValue","SKUNo","formControlName","SKUNo",3,"items","clearable","change"],[1,"col-7","ps-0"],[1,"col-5","pe-1"],["bindLabel","SKUName","bindValue","SKUName","formControlName","SKUName",3,"items","clearable","change"],[1,"col-5","ps-4"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control"],[1,"col-2","ps-0"],["type","text","formControlName","UOM","readonly","",1,"form-control"],[1,"row","line-border"],[1,"row","mb-4","justify-content-center"],[1,"col-3"],[1,"input-group-text","text-secondary","combine-INR"],[1,"vr","ms-3"],["type","number","formControlName","totalLabourCostPerUnit","readonly","",1,"form-control","border-start-0"],[1,"plusIconSvg","btn","btn-primary","ms-1",2,"padding","1.4rem 1.4rem 1.4rem 1.4rem",3,"click"],["type","number","formControlName","totalAssetCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalToolingCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalCostPerUnit","readonly","",1,"form-control","border-start-0"],["class","col-12 text-center",4,"ngIf"],[1,"col-12","text-center"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(s,r){1&s&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Direct Cost (Labour, Asset & Tooling)"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",5)(10,"div",7)(11,"label",8),t._uU(12,"Product Category "),t.TgZ(13,"span",9),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11)(17,"ng-select",12),t.NdJ("change",function(){return r.getSKUData()}),t.qZA()(),t.TgZ(18,"div",13),t.NdJ("click",function(){return r.openProductCategoryModal()}),t._UZ(19,"i",14),t.qZA()()(),t.TgZ(20,"div",15)(21,"label",8),t._uU(22,"SKU No. "),t.TgZ(23,"span",9),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"ng-select",16),t.NdJ("change",function(l){return r.setSKUDetails(l)}),t.qZA()()()(),t.TgZ(26,"div",17)(27,"div",5)(28,"div",18)(29,"label",8),t._uU(30,"SKU Name "),t.TgZ(31,"span",9),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"ng-select",19),t.NdJ("change",function(l){return r.setSKUDetails(l)}),t.qZA()(),t.TgZ(34,"div",20)(35,"label",8),t._uU(36," SKU Description "),t._UZ(37,"span",9),t.qZA(),t._UZ(38,"input",21),t.qZA(),t.TgZ(39,"div",22)(40,"label",8),t._uU(41," UoM "),t._UZ(42,"span",9),t.qZA(),t._UZ(43,"input",23),t.qZA()()()()(),t._UZ(44,"hr",24),t.TgZ(45,"div",25)(46,"div",26)(47,"label",8),t._uU(48,"Total Labour Cost/Unit "),t.TgZ(49,"span",9),t._uU(50,"*"),t.qZA()(),t.TgZ(51,"div",10)(52,"span",27),t._uU(53),t.ALo(54,"companyCurrency"),t._UZ(55,"div",28),t.qZA(),t._UZ(56,"input",29),t.TgZ(57,"button",30),t.NdJ("click",function(){return r.openLabourCostModal()}),t.qZA()()(),t.TgZ(58,"div",26)(59,"label",8),t._uU(60,"Total Asset Cost/Unit "),t.TgZ(61,"span",9),t._uU(62,"*"),t.qZA()(),t.TgZ(63,"div",10)(64,"span",27),t._uU(65),t.ALo(66,"companyCurrency"),t._UZ(67,"div",28),t.qZA(),t._UZ(68,"input",31),t.TgZ(69,"button",30),t.NdJ("click",function(){return r.openAssetCostModal()}),t.qZA()()(),t.TgZ(70,"div",26)(71,"label",8),t._uU(72,"Total Tooling Cost/Unit "),t.TgZ(73,"span",9),t._uU(74,"*"),t.qZA()(),t.TgZ(75,"div",10)(76,"span",27),t._uU(77),t.ALo(78,"companyCurrency"),t._UZ(79,"div",28),t.qZA(),t._UZ(80,"input",32),t.TgZ(81,"button",30),t.NdJ("click",function(){return r.openToolingCostModal()}),t.qZA()()(),t.TgZ(82,"div",26)(83,"label",8),t._uU(84,"Total Direct Process Cost/Unit "),t.TgZ(85,"span",9),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"div",10)(88,"span",27),t._uU(89),t.ALo(90,"companyCurrency"),t._UZ(91,"div",28),t.qZA(),t._UZ(92,"input",33),t.qZA()()(),t._UZ(93,"hr",24),t.TgZ(94,"div",5),t.YNc(95,I,5,0,"div",34),t.qZA()()()),2&s&&(t.Q6J("formGroup",r.form),t.xp6(17),t.Q6J("items",r.masterData.productCategories)("clearable",!1),t.xp6(8),t.Q6J("items",r.SKUList)("clearable",!1),t.xp6(8),t.Q6J("items",r.SKUList)("clearable",!1),t.xp6(20),t.hij(" ",t.lcZ(54,12,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(66,14,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(78,16,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(90,18,"INR")," "),t.xp6(6),t.Q6J("ngIf","view"!==r.action))},dependencies:[e.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,w.w9,k.f],encapsulation:2}),g})();var q=c(19964),B=c(56208);const J=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:u},{path:"form",component:L,resolve:{accessScreen:q.xr}}];let R=(()=>{var p;class g{}return(p=g).\u0275fac=function(s){return new(s||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[e.ez,o.Bz.forChild(J),B.m]}),g})()},6244:(x,b,c)=>{c.d(b,{Z:()=>k});var e=c(43818),o=c(65879),f=c(37285),A=c(96814),T=c(88059),t=c(95346);const U=function(){return["view","edit"]};function M(_,y){if(1&_){const u=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",24)(8,"span",25),o._uU(9),o.qZA()(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td")(13,"input",26),o.NdJ("change",function(){const m=o.CHM(u).$implicit,C=o.oxw();return o.KtG(C.setSelectData(m))}),o.qZA()()()}if(2&_){const u=y.$implicit,i=y.index,d=o.oxw();o.xp6(2),o.Oqu(1+i+(d.page-1)*d.pageSize),o.xp6(2),o.Oqu(null==u?null:u.productNumber),o.xp6(2),o.Oqu(null==u?null:u.productCode),o.xp6(2),o.Q6J("ngbTooltip",null==u?null:u.label),o.xp6(1),o.hij(" ",null!=u&&u.label?null==u?null:u.label:null," "),o.xp6(2),o.Oqu(null==u?null:u.application),o.xp6(2),o.MGl("name","formValue",d.productCategoryList[i],""),o.Q6J("disabled",o.DdM(9,U).includes(d.action))("checked",u.select)}}function v(_,y){1&_&&o._UZ(0,"hr",27)}function S(_,y){if(1&_){const u=o.EpF();o.TgZ(0,"div",28)(1,"button",29),o.NdJ("click",function(){o.CHM(u);const d=o.oxw();return o.KtG(d.dismissModel())}),o._uU(2,"Save & Close"),o.qZA()()}}const N=function(_,y,u,i){return{page:_,pageSize:y,collection:u,search:i,excelDisplay:"none"}};let k=(()=>{var _;class y{constructor(i){this.activeModal=i,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(i=>(i.select=!1,i.value==this.productCategory&&(i.select=!0),i))),this.collection=this.productCategoryList.length}setSelectData(i){this.selectedProductCategory=i?.value}dismissModel(){let i={};i.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(i)}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value;break;case"EXCEL":default:break;case"PAGE":this.page=i.value}}onSort({column:i,direction:d}){this.headers.forEach(m=>{m.sortable!==i&&(m.direction="")}),this.productCategoryList=""===d||""===i?this.productCategoryList:[...this.productCategoryList].sort((m,C)=>{let D="string"==typeof m[i]?m[i].toLowerCase():m[i],Z="string"==typeof C[i]?C[i].toLowerCase():C[i];const O=D<Z?-1:D>Z?1:0;return"asc"===d?O:-O})}}return(_=y).\u0275fac=function(i){return new(i||_)(o.Y36(f.Kz))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-product-category-modal"]],viewQuery:function(i,d){if(1&i&&o.Gf(e.j,5),2&i){let m;o.iGM(m=o.CRH())&&(d.headers=m)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(i,d){1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Product Category"),o.qZA(),o.TgZ(4,"div")(5,"button",3),o.NdJ("click",function(){return d.activeModal.close()}),o._UZ(6,"i",4),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),o.NdJ("dataChange",function(C){return d.eventHeader(C)}),o.qZA()(),o.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),o._uU(18,"Sr. No."),o.qZA(),o.TgZ(19,"th",15),o.NdJ("sort",function(C){return d.onSort(C)}),o._uU(20,"Product No."),o.qZA(),o.TgZ(21,"th",16),o.NdJ("sort",function(C){return d.onSort(C)}),o._uU(22,"Product Code"),o.qZA(),o.TgZ(23,"th",17),o.NdJ("sort",function(C){return d.onSort(C)}),o._uU(24," Display Name "),o.qZA(),o.TgZ(25,"th",18),o.NdJ("sort",function(C){return d.onSort(C)}),o._uU(26,"Application"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Select"),o.qZA()()(),o.TgZ(29,"tbody"),o.YNc(30,M,14,10,"tr",19),o.ALo(31,"slice"),o.ALo(32,"searchFi1ter"),o.qZA()()()()(),o.TgZ(33,"div",20)(34,"div",21),o.YNc(35,v,1,0,"hr",22),o.qZA()(),o.YNc(36,S,3,0,"div",23),o.qZA()()()),2&i&&(o.xp6(12),o.Q6J("data",o.l5B(11,N,d.page,d.pageSize,d.collection,d.search)),o.xp6(18),o.Q6J("ngForOf",o.Dn7(31,4,o.xi3(32,8,d.productCategoryList,d.search),(d.page-1)*d.pageSize,(d.page-1)*d.pageSize+d.pageSize)),o.xp6(5),o.Q6J("ngIf",!o.DdM(16,U).includes(d.action)),o.xp6(1),o.Q6J("ngIf",!o.DdM(17,U).includes(d.action)))},dependencies:[A.sg,A.O5,T.P,f._L,e.j,A.OU,t.G],encapsulation:2}),y})()},65129:(x,b,c)=>{c.d(b,{o7:()=>U,W0:()=>t,_D:()=>gt,xD:()=>Ct,TN:()=>k,CE:()=>N,cz:()=>d,Xg:()=>i,B7:()=>pt,cX:()=>O,W5:()=>Z,FY:()=>h,t_:()=>g,sm:()=>Tt,t8:()=>ft,KY:()=>P,lX:()=>l,e7:()=>Dt,Do:()=>Ut,PQ:()=>dt,OX:()=>ct,rw:()=>nt,EW:()=>at,Tf:()=>bt,$k:()=>Pt});var e=c(13107),o=c(28402);let f=["*","*","*","*","*","*","*","*","*"],A="Bill of Material (BoM) of Child Item",T=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Item Code",key:"childItemCode",...e.t},{header:"Item Name",key:"childItemName",...e.t},{header:"Item Description",key:"childItemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const t=a=>({title:A,csvData:a,headers:T}),U=a=>(0,o.J)({data:a,headers:T,widths:f,title:A});let M=["*","*","*","*","*","*","*","*"],v="Bill of Material (BoM) of Gr. Child Item",S=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Item Code",key:"grandChildItemCode",...e.t},{header:"Item Name",key:"grandChildItemName",...e.t},{header:"Item Description",key:"grandChildItemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const N=a=>({title:v,csvData:a,headers:S}),k=a=>(0,o.J)({data:a,headers:S,widths:M,title:v});let _=["*","*","*","*","*","*","*","*","*","*"],y="Bill of Material (BoM) of Product",u=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Product No.",key:"productNo",...e.t},{header:"Product Category",key:"productCategory",...e.t},{header:"Product Name",key:"productName",...e.t},{header:"Product Description",key:"productDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const i=a=>({title:y,csvData:a,headers:u}),d=a=>(0,o.J)({data:a,headers:u,widths:_,title:y});let m=["*","*","*","*","*","*","*","*","*"],C="Bill of Material (BoM) of SKU",D=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"SKU Code",key:"SKUCode",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Total Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const Z=a=>({title:C,csvData:a,headers:D}),O=a=>(0,o.J)({data:a,headers:D,widths:m,title:C});let J=["*","*","*","*","*","*","*","*","*","*"],R="Child Item Master",p=[{header:"Child Item Category ",key:"childItemCategory",...e.t},{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"unitOfMeasurement",...e.t},{header:"HSN Code",key:"HSNCode",...e.t},{header:"Item Cost",key:"itemCost",...e.t},{header:"Source of mfg.",key:"sourceOfManufacturing",...e.t},{header:"Shelf Life (Months)",key:"shelfLife",...e.t},{header:"Status",key:"status",...e.t}];const g=a=>({title:R,csvData:a,headers:p}),h=a=>(0,o.J)({data:a,headers:p,widths:J,title:R});let s=["*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*"],r="Gr. Child Item Master",n=[{header:"Gr. Child Item Category ",key:"childItemCategory",...e.t},{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"unitOfMeasurement",...e.t},{header:"HSN Code",key:"HSNCode",...e.t},{header:"Item Cost",key:"itemCost",...e.t},{header:"Shelf Life (M) ",key:"shelfLife",...e.t},{header:"Source of mfg.",key:"sourceOfManufacturing",...e.t},{header:"Status",key:"status",...e.t}];const l=a=>({title:r,csvData:a,headers:n}),P=a=>(0,o.J)({data:a,headers:n,widths:s,title:r});let K=["*","*","*","*","*","*","*","*","*","*","*","*"],E="Product Master",F=[{header:"Product No.",key:"productNo",...e.t},{header:"Product Category/Code",key:"productCategory",...e.t},{header:"Product Name",key:"productName",...e.t},{header:"Product Description",key:"productDescription",...e.t},{header:"HSN Code",key:"hsn",...e.t},{header:"UoM",key:"primaryUnit",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Source Of MFG.",key:"sourceOfMFG",...e.t},{header:"Shelf Life [Months]",key:"shelfLife",...e.t},{header:"Storage Temperature",key:"storageTemp",...e.t},{header:"Storage Humidity",key:"storageHumidity",...e.t}];const at=a=>({title:E,csvData:a,headers:F}),nt=a=>(0,o.J)({data:a,headers:F,widths:K,title:E});let lt=["*","*","*","*","*","*","*","*","*"],G="Process Resource Management",H=[{header:"Process Name",key:"processName",...e.t},{header:"Work Centre/Machine Name",key:"machineName",...e.t},{header:"# of Manpower",key:"noOfManpower",...e.t},{header:"Output/hr",key:"outputPerHr",...e.t},{header:"Labour Cost/hr",key:"labourCostPerHr",...e.t},{header:"Power consumption cost/hr",key:"powerConsumptionPerHr",...e.t}];const ct=a=>({title:G,csvData:a,headers:H}),dt=a=>(0,o.J)({data:a,headers:H,widths:lt,title:G});let Y=[{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const pt=a=>({title:"Bill of Material (BoM) of SKU",csvData:a,headers:Y});let X=[{header:"Item Code<",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const Ct=a=>({title:"BOM Of Grand Child Part",csvData:a,headers:X});let $=[{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const gt=a=>({title:"Bill of Material (BoM) of D-SKU",csvData:a,headers:$});let yt=["*","*","*","*","*","*","*"],tt="Process Master",et=[{header:"Process ID",key:"processId",...e.t},{header:"Process Name",key:"processName",...e.t},{header:"Source",key:"sourceOfManufacturing",...e.t},{header:"Primary Assets/Allocation",key:"primaryAssetAllocation",...e.t},{header:"Std.Output/H",key:"unitProcessOutput",...e.t},{header:"Labour Rate/Hr",key:"totalRatePerHr",...e.t},{header:"Asset Rate/Hr",key:"totalAllocatedAssetCostPerHr",...e.t}];const Ut=a=>({title:tt,csvData:a,headers:et}),Dt=a=>(0,o.J)({data:a,headers:et,widths:yt,title:tt});let At=["*","*","*","*","*","*","*","*","*","*","*"],ot="Direct Cost",rt=[{header:"Product Category",key:"productCategory",...e.t},{header:"SKU No.",key:"SKUNo",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Labour Cost/Unit",key:"totalLabourCostPerUnit",...e.t},{header:"Asset Cost/Unit",key:"totalAssetCostPerUnit",...e.t},{header:"Tooling Cost/Unit",key:"totalToolingCostPerUnit",...e.t},{header:"Total Direct Process Cost/Unit",key:"totalCostPerUnit",...e.t}];const ft=a=>({title:ot,csvData:a,headers:rt}),Tt=a=>(0,o.J)({data:a,headers:rt,widths:At,title:ot});let St=["*","*","*","*","*","*","*","*","*","*","*","*"],st="SKU Cost Sheet",it=[{header:"SKU No",key:"SKUNo",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"COGS",key:"costOfGoodsSold",...e.t},{header:"OPEX",key:"operatingExpenses",...e.t},{header:"Total COO",key:"totalCostOfOperation",...e.t},{header:"Profit",key:"profit",...e.t},{header:"Selling Price",key:"sellingPrice",...e.t}];const Pt=a=>({title:st,csvData:a,headers:it}),bt=a=>(0,o.J)({data:a,headers:it,widths:St,title:st})}}]);