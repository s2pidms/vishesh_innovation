"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8975],{28975:(w,d,o)=>{o.r(d),o.d(d,{SupplierUploadDataModule:()=>x});var s=o(96814),u=o(1076),m=o(25116),g=o(10217),f=o(97344);const h=[{value:"supplierName",label:"Supplier Name",class:"text-start"},{value:"supplierGST",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}];var v=o(77609),e=o(65879),p=o(98977),b=o(74659),C=o(37285),P=o(53421);function M(i,U){1&i&&e._UZ(0,"img",27)}function O(i,U){1&i&&(e.TgZ(0,"div",28)(1,"div",29),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"div",31)(4,"span"),e._uU(5,"Upload Successful"),e.qZA()()())}let S=(()=>{class i{constructor(t,n,a,r){this.spinner=t,this.suppliersService=n,this.toastService=a,this.modalService=r,this.file=null,this.date="",this.fileName="",this.fileSuccessUpload=!1,this.dataSuccessUpload=!1,this.approvedFlag=!1,this.data=[],this.rolePermissionActions=m.a1,this.inValidRecords=[],this.validRecords=[],this.tableHead=h}ngOnInit(){}fileChosen(t){if(t.target.value){if(t.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 2MB");this.file=t.target.files[0],this.fileName=this.file.name}}removeFile(){this.fileName="",this.file="",this.inValidRecords=[],this.validRecords=[]}submit(){let t=new FormData;this.file&&"object"==typeof this.file?(t.append("key","excelData"),t.append("collectionName","Supplier"),t.append("uploadFile",this.file,this.file.name),this.spinner.show(),this.suppliersService.uploadAndCheckCSVFile(t).subscribe(n=>{this.inValidRecords=n?.inValidRecords,this.validRecords=n?.validRecords,this.inValidRecords.length>0?this.openInvalidSupplierRecordsModal():this.openValidRecordsModal(),this.spinner.hide()})):this.toastService.warning("Please Upload File")}uploadData(){this.spinner.show(),this.suppliersService.bulkInsertByCSVFile({collectionName:"Supplier",validRecords:this.validRecords}).subscribe(n=>{console.log("success",n),this.toastService.success(n.message),this.removeFile(),this.spinner.hide()})}downloadCSVFormat(t){g.saveAs(t)}openInvalidSupplierRecordsModal(){const t=this.modalService.open(f.a,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.title="Invalid Supplier Records",t.componentInstance.tableHead=this.tableHead,t.componentInstance.inValidRecords=this.inValidRecords,t.result.then(n=>{},n=>{})}openValidRecordsModal(){const t=this.modalService.open(v.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});t.componentInstance.heading="Upload Data",t.componentInstance.cancelText="Do You Want to Upload Supplier Records ?",t.result.then(n=>{"Yes"==n&&this.uploadData()},n=>{})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(p.V),e.Y36(b.RA),e.Y36(p.kl),e.Y36(C.FF))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-supplier-upload-data"]],decls:37,vars:7,consts:[[1,"row","justify-content-center","biometricAttendancePage"],[1,"col-md-8","mt-3"],[3,"ngClass"],[1,"biometricContainer"],[1,"row","my-2","justify-content-center"],[1,"col-md-10","px-5"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["appAccessControl","",1,"align-self-end",3,"accessType"],["type","button",1,"btn","btn-primary","px-4","btn-width",3,"click"],[1,"row","row-box","mb-5"],[1,"col-12","data-box","text-center","blue-text"],[1,"row","mb-5"],[1,"col-md-12"],[1,"d-flex","justify-content-center"],[1,"me-3","align-self-end","align-items-baseline"],["type","button",1,"btn","btn-primary","px-4",3,"click"],["type","file","hidden","","accept",".csv",3,"change"],["fileInput",""],[1,"me-3","w-50"],[1,"text-center"],[1,"text-primary","mb-2"],[1,"d-flex","inputGroup"],["type","text","readonly","",1,"form-control","iBASInput-field",3,"value"],[1,"input-group-text","pe-4",3,"click"],["class","closeIcon","src","../../../../../assets/new_icons/remove_attachment.svg","alt","",4,"ngIf"],["class","row mb-4 row-3",4,"ngIf"],["src","../../../../../assets/new_icons/remove_attachment.svg","alt","",1,"closeIcon"],[1,"row","mb-4","row-3"],[1,"col-auto"],["src","../../../../../assets/new_icons/successful_icon.svg","alt","successImg",1,"successImg"],[1,"col-auto","align-self-center"]],template:function(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._uU(8,"Download Supplier.csv File Sample Template"),e.qZA(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){return a.downloadCSVFormat("./assets/supplier.csv")}),e._uU(11," Download "),e.qZA()()()()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"div",10)(15,"div",11),e._uU(16,"Upload Supplier"),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"button",16),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(24);return e.KtG(l.click())}),e._uU(22," Select File "),e.qZA(),e.TgZ(23,"input",17,18),e.NdJ("change",function(l){return a.fileChosen(l)}),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"label",21),e._uU(28," Upload Supplier in Excel format [.csv] "),e.qZA()(),e.TgZ(29,"div",22),e._UZ(30,"input",23),e.TgZ(31,"span",24),e.NdJ("click",function(){return a.removeFile()}),e.YNc(32,M,1,0,"img",25),e.qZA()()(),e.TgZ(33,"div",8)(34,"button",9),e.NdJ("click",function(){return a.submit()}),e._uU(35," Upload "),e.qZA()()()()(),e.YNc(36,O,6,0,"div",26),e.qZA()()()()}2&n&&(e.xp6(2),e.Q6J("ngClass",a.fileSuccessUpload?"card activeCard mb-4":"card mb-4"),e.xp6(7),e.Q6J("accessType",a.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngClass",a.fileSuccessUpload?"card activeCard":"card"),e.xp6(18),e.Q6J("value",a.fileName),e.xp6(2),e.Q6J("ngIf",a.fileName),e.xp6(1),e.Q6J("accessType",a.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngIf",a.fileSuccessUpload))},dependencies:[s.mk,s.O5,P.J],styles:[".biometricAttendancePage[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #fff!important;border-radius:0!important}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{font-size:1.2rem;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow:0 0 7px #0006}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .biometricContainer[_ngcontent-%COMP%]{--bs-gutter-x: 3.7rem;--bs-gutter-y: 0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .row-box[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .data-box[_ngcontent-%COMP%]{align-self:center;vertical-align:middle!important;padding:.2rem 0 .2rem .9rem;color:#5a5a5a;background-color:#eaecf2;border-radius:2px}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue-text[_ngcontent-%COMP%]{background-color:#007daf!important;color:#fff;font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .btn-width[_ngcontent-%COMP%]{width:7.5vw}.biometricAttendancePage[_ngcontent-%COMP%]   .arrowDownImg[_ngcontent-%COMP%]{width:4vh;height:4vh}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{display:flex;justify-content:center}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%]{padding:.5rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .successImg[_ngcontent-%COMP%]{width:3rem;height:3rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .closeIcon[_ngcontent-%COMP%]{width:2vh}.biometricAttendancePage[_ngcontent-%COMP%]   .iBASInput-field[_ngcontent-%COMP%]{width:100%;padding:10px}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]{background-color:#f2f8fb}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}"]})}return i})();var _=o(56208);const A=[{path:"form/:uploadParameter",component:S}];let x=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[s.ez,u.Bz.forChild(A),_.m]})}return i})()}}]);