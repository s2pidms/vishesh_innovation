"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4687],{74687:(A,u,l)=>{l.r(u),l.d(u,{ShortPOModule:()=>C});var t=l(96814),d=l(1076),S=l(43818),y=l(99279),m=l(25116),_=l(79250),e=l(65879),c=l(99328),D=l(59840),p=l(37285),k=l(88059),g=l(53421),v=l(14906);function T(h,N){if(1&h){const a=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",19,20)(11,"span",21),e._uU(12),e.qZA()(),e.TgZ(13,"td",19,22)(15,"span",21),e._uU(16),e.qZA()(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",19,23)(22,"span",21),e._uU(23),e.qZA()(),e.TgZ(24,"td")(25,"div",24),e._UZ(26,"button",25),e.TgZ(27,"div",26)(28,"a",27),e.NdJ("click",function(){const n=e.CHM(a).$implicit,i=e.oxw();return e.KtG(i.openSOLineModal(n))}),e._UZ(29,"i",28),e._uU(30," Cancel "),e.qZA()()()()()}if(2&h){const a=N.$implicit,s=e.MAs(10),o=e.MAs(14),n=e.MAs(21),i=e.oxw();e.xp6(2),e.Oqu(null==a?null:a.SODate),e.xp6(2),e.Oqu(null==a?null:a.SONumber),e.xp6(2),e.Oqu(null==a?null:a.SOLineNumber),e.xp6(2),e.Oqu(null==a?null:a.SKUNo),e.xp6(1),e.Udp("width",s.clientWidth),e.xp6(2),e.Q6J("positionTarget",s)("ngbTooltip",a.SKUName),e.xp6(1),e.hij(" ",a.SKUName," "),e.xp6(1),e.Udp("width",o.clientWidth),e.xp6(2),e.Q6J("positionTarget",o)("ngbTooltip",a.SKUDescription),e.xp6(1),e.hij(" ",a.SKUDescription," "),e.xp6(2),e.Oqu(e.xi3(19,21,a.balancedQty,"1.2-2")),e.xp6(2),e.Udp("width",n.clientWidth),e.xp6(2),e.Q6J("positionTarget",n)("ngbTooltip",a.customer),e.xp6(1),e.hij(" ",a.customer," "),e.xp6(5),e.Q6J("accessType",i.rolePermissionActions.approveAction)}}const O=function(h,N,a,s){return{page:h,pageSize:N,collection:a,search:s,type:"list"}};let R=(()=>{class h{constructor(a,s,o,n,i,E,I){this.exportExcelService=a,this.salesService=s,this.router=o,this.spinner=n,this.modalService=i,this.activatedRoute=E,this.exportToPDFService=I,this.page=1,this.pageSize=10,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.statusArray=["Created","Approved","Report Generated"],this.rolePermissionActions=m.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(a,s,o){this.router.navigate([a],{queryParams:{id:s?._id,action:o}})}trackByFn(a,s){return s?._id}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=a.value,this.getAll()}}getAll(a=!1,s=""){this.spinner.show();let o={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,statusArray:this.statusArray,excel:a};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.salesService.getAllShortSOForClosing(o).subscribe(n=>{"EXCEL"==s?this.excelDownload(n.rows):"PDF"==s?this.pdfDownload(n.rows):(this.tableData=n.rows,this.collection=n.count,this.spinner.hide())})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(a){let s=(0,_.zm)(a);this.exportToPDFService.generatePdf(s.tableData,s.title)}excelDownload(a){this.exportExcelService.exportExcel((0,_.ji)(a))}onSort({column:a,direction:s}){this.headers.forEach(o=>{o.sortable!==a&&(o.direction="")}),this.column=a,this.direction="asc"==s?1:-1,this.getAll()}openSOLineModal(a){const s=this.modalService.open(y._,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"modelPage"});s.componentInstance.tableData=a,s.result.then(o=>{this.getAll()},o=>{})}static#e=this.\u0275fac=function(s){return new(s||h)(e.Y36(c.Ol),e.Y36(D.VD),e.Y36(d.F0),e.Y36(c.V),e.Y36(p.FF),e.Y36(d.gz),e.Y36(c.$L))};static#t=this.\u0275cmp=e.Xpm({type:h,selectors:[["app-short-so"]],viewQuery:function(s,o){if(1&s&&e.Gf(S.j,5),2&s){let n;e.iGM(n=e.CRH())&&(o.headers=n)}},decls:32,vars:14,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SODate",3,"sort"],["sortable","SONumber",3,"sort"],["sortable","SOLineNumber",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","balancedQty",3,"sort"],["sortable","customer",1,"text-start",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],["customer",""],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa","fa-times","fa-lg","me-2","text-primary"]],template:function(s,o){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Short SO Closing"),e.qZA()(),e._UZ(4,"hr",3),e.TgZ(5,"div",4)(6,"app-setting-header",5),e.NdJ("dataChange",function(i){return o.eventHeader(i)}),e.qZA(),e.TgZ(7,"table",6)(8,"thead",7)(9,"tr",8)(10,"th",9),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(11,"SO Date"),e.qZA(),e.TgZ(12,"th",10),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(13,"SO #"),e.qZA(),e.TgZ(14,"th",11),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(15,"Line #"),e.qZA(),e.TgZ(16,"th",12),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(17,"SKU #"),e.qZA(),e.TgZ(18,"th",13),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(19),e.ALo(20,"labelTranslate"),e.qZA(),e.TgZ(21,"th",14),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(22),e.ALo(23,"labelTranslate"),e.qZA(),e.TgZ(24,"th",15),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(25,"Bal Qty"),e.qZA(),e.TgZ(26,"th",16),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(27,"Customer Name"),e.qZA(),e.TgZ(28,"th",17),e.NdJ("sort",function(i){return o.onSort(i)}),e._uU(29,"Action"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,T,31,24,"tr",18),e.qZA()()()()),2&s&&(e.xp6(6),e.Q6J("data",e.l5B(9,O,o.page,o.pageSize,o.collection,o.search)),e.xp6(13),e.hij(" ",e.lcZ(20,5,"SKU Name")," "),e.xp6(3),e.hij(" ",e.lcZ(23,7,"SKU Description")," "),e.xp6(9),e.Q6J("ngForOf",o.tableData)("ngForTrackBy",o.trackByFn))},dependencies:[t.sg,k.P,p._L,S.j,g.J,t.JJ,v.c],encapsulation:2})}return h})();var b=l(56208);const P=[{path:"",component:R}];let C=(()=>{class h{static#e=this.\u0275fac=function(s){return new(s||h)};static#t=this.\u0275mod=e.oAB({type:h});static#r=this.\u0275inj=e.cJS({imports:[t.ez,d.Bz.forChild(P),b.m]})}return h})()},13107:(A,u,l)=>{l.d(u,{t:()=>t});const t={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(A,u,l)=>{l.d(u,{J:()=>t});const t=({data:d,headers:S,widths:y,title:m})=>({tableData:{widths:y,headerRows:1,body:[S.map(c=>({text:c.header,style:"header"})),...d.map(c=>S.map(D=>({style:"subheader",text:c[D.key]})))]},title:m})},79250:(A,u,l)=>{l.d(u,{p3:()=>e,U$:()=>_,S$:()=>b,B6:()=>R,mx:()=>$,mI:()=>H,sb:()=>E,PW:()=>i,Kr:()=>g,n8:()=>k,TP:()=>X,_y:()=>j,i7:()=>ce,G4:()=>he,EY:()=>ye,X1:()=>Se,zF:()=>se,D$:()=>oe,ti:()=>le,_g:()=>ie,Rb:()=>te,xi:()=>ee,zm:()=>a,ji:()=>N});var t=l(13107),d=l(28402);let S=["*","*","*","*","*","*","*","*","*","*","*"],y="Book Sales Order",m=[{header:"SO No.",key:"SONumber",...t.t},{header:"SO Date",key:"SODateS",...t.t},{header:"Bill From Location",key:"billFromLocation",...t.t},{header:"Customer Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"PO Date.",key:"PODate",...t.t},{header:"Currency",key:"currency",...t.t},{header:"SO Type",key:"SOType",...t.t},{header:"SO Value",key:"SOTotalAmount",...t.t},{header:"Status",key:"SOStatus",...t.t}];const _=r=>({title:y,csvData:r,headers:m}),e=r=>(0,d.J)({data:r,headers:m,widths:S,title:y});let c=["*","*","*","*","*","*","*"],D="DispatchRequestNote Report",p=[{header:"DRN No.",key:"DRNNumber",...t.t},{header:"DRN Date",key:"DRNDateS",...t.t},{header:"Customer Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"DRN Status",key:"DRNStatus",...t.t}];const k=r=>({title:D,csvData:r,headers:p}),g=r=>(0,d.J)({data:r,headers:p,widths:c,title:D});let v=["*","*","*","*","*","*","*","*","*","*"],T="Cancel SO",O=[{header:"SO No.",key:"SONumber",...t.t},{header:"SO Date",key:"SODateS",...t.t},{header:"PO No.",key:"PONumber",...t.t},{header:"Sales Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Currency",key:"currency",...t.t},{header:"SO Value",key:"SOTotalAmount",...t.t},{header:"Status",key:"SOStatus",...t.t}];const R=r=>({title:T,csvData:r,headers:O}),b=r=>(0,d.J)({data:r,headers:O,widths:v,title:T});let P=["*","*","*","*","*","*","*","*","*","*","*","*"],C="Short SO Closing",h=[{header:"SO Date",key:"SODate",...t.t},{header:"SO #",key:"SONumber",...t.t},{header:"Line #",key:"SOLineNumber",...t.t},{header:"SKU #",key:"SKUNo",...t.t},{header:"SKU Name",key:"SKUName",...t.t},{header:"SKU Description",key:"SKUDescription",...t.t},{header:"Bal Qty",key:"balancedQty",...t.t},{header:"Customer Name",key:"customer",...t.t}];const N=r=>({title:C,csvData:r,headers:h}),a=r=>(0,d.J)({data:r,headers:h,widths:P,title:C});let s=["*","*","*","*","*","*","*","*","*"],o="Direct Tax Invoice",n=[{header:"Invoice #",key:"DTINumber",...t.t},{header:"Invoice Date",key:"salesInvoiceDateS",...t.t},{header:"Customer Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Product Value",key:"DTITotalAmount",...t.t},{header:"Invoice Value",key:"DTIValue",...t.t},{header:"Status",key:"DTIStatus",...t.t}];const i=r=>({title:o,csvData:r,headers:n}),E=r=>(0,d.J)({data:r,headers:n,widths:s,title:o});let I=["*","*","*","*","*","*","*","*","*","*","*","*","*"],U="Proforma Invoice",f=[{header:"PI No.",key:"PINumber",...t.t},{header:"PI Date",key:"PIDateS",...t.t},{header:"Bill From Location",key:"billFromLocation",...t.t},{header:"Customer Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"PO No.",key:"PONumber",...t.t},{header:"PO Date",key:"PODate",...t.t},{header:"Currency",key:"currency",...t.t},{header:"PI Validity Date",key:"PIValidityDate",...t.t},{header:"PI Amount",key:"PITotalAmount",...t.t},{header:"PI Status",key:"PIStatus",...t.t}];const j=r=>({title:U,csvData:r,headers:f}),X=r=>(0,d.J)({data:r,headers:f,widths:I,title:U});let Y=["*","*","*","*","*","*","*","*","*","*"],F="Credit Note",Z=[{header:"CN No.",key:"CNNumber",...t.t},{header:"CN Date",key:"CNDateS",...t.t},{header:"Customer Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Debit Note No.",key:"invoiceNo",...t.t},{header:"Invoice Date",key:"invoiceDateS",...t.t},{header:"Currency",key:"currency",...t.t},{header:"Net CN Value",key:"netCNValue",...t.t},{header:"Reason For CN",key:"reasonForCN",...t.t},{header:"CN Status.",key:"CNStatus",...t.t}];const H=r=>({title:F,csvData:r,headers:Z}),$=r=>(0,d.J)({data:r,headers:Z,widths:Y,title:F});let W=["*","*","*","*","*","*","*","*","*","*","*","*"],w="ServiceInvoice Report",x=[{header:"Invoice #",key:"serviceInvoiceNumber",...t.t},{header:"Invoice Date",key:"serviceInvoiceDate",...t.t},{header:"Customer Category",key:"customerCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"PO No.",key:"PONo",...t.t},{header:"PO Date",key:"PODate",...t.t},{header:"Currency",key:"currency",...t.t},{header:"Bill From Location",key:"billFromLocation",...t.t},{header:"Total Value",key:"totalValue",...t.t},{header:"Remarks",key:"remarks",...t.t},{header:"Status",key:"status",...t.t}];const ee=r=>({title:w,csvData:r,headers:x}),te=r=>(0,d.J)({data:r,headers:x,widths:W,title:w});let ae=["*","*","*","*","*","*","*","*"],L="Sales Forecast",q=[{header:"FC No.",key:"FCNo",...t.t},{header:"FC Date",key:"FCDate",...t.t},{header:"Customer Category",key:"customerCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Currency",key:"currency",...t.t},{header:"FC Type",key:"FCType",...t.t},{header:"FC Value",key:"netFCValue",...t.t},{header:"Status",key:"status",...t.t}];const oe=r=>({title:L,csvData:r,headers:q}),se=r=>(0,d.J)({data:r,headers:q,widths:ae,title:L});let ne=["*","*","*","*","*","*","*","*","*","*","*","*","*","*","*"],Q="Debit Note",V=[{header:"DN No.",key:"DNNumber",...t.t},{header:"DN Date",key:"DNDateS",...t.t},{header:"Sale Category",key:"salesCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Invoice No.",key:"invoiceNo",...t.t},{header:"Invoice Date",key:"invoiceDateS",...t.t},{header:"Currency",key:"currency",...t.t},{header:"DN Net Value",key:"netDNValue",...t.t},{header:"Reason For Debit Note",key:"reasonForDN",...t.t},{header:"DN Status",key:"DNStatus",...t.t}];const ie=r=>({title:Q,csvData:r,headers:V}),le=r=>(0,d.J)({data:r,headers:V,widths:ne,title:Q});let de=["*","*","*","*","*","*","*"],B="Quotation Of D-SKU",G=[{header:"Qtn. No.",key:"quotationNo",...t.t},{header:"Rev No.",key:"revNo",...t.t},{header:"Qtn. Date",key:"quotationDate",...t.t},{header:"Customer/Prospect Category",key:"customerCategory",...t.t},{header:"Customer/Prospect Name",key:"customerName",...t.t},{header:"Ccy",key:"currency",...t.t},{header:"Status",key:"status",...t.t}];const he=r=>({title:B,csvData:r,headers:G}),ce=r=>(0,d.J)({data:r,headers:G,widths:de,title:B});let ue=["*","*","*","*","*","*","*"],z="Quotation Of SKU",M=[{header:"Qtn. No.",key:"quotationNo",...t.t},{header:"Rev No.",key:"revNo",...t.t},{header:"Qtn. Date",key:"quotationDate",...t.t},{header:"Customer Category",key:"customerCategory",...t.t},{header:"Customer Name",key:"customerName",...t.t},{header:"Ccy",key:"currency",...t.t},{header:"Status",key:"status",...t.t}];const Se=r=>({title:z,csvData:r,headers:M}),ye=r=>(0,d.J)({data:r,headers:M,widths:ue,title:z})}}]);