"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9690],{22751:(F,A,d)=>{d.d(A,{B:()=>w});var t=d(43818),n=d(65879),O=d(37285),M=d(96814),p=d(60095),y=d(59103);function Z(h,b){1&h&&n._UZ(0,"div",26)}function T(h,b){1&h&&n._UZ(0,"div",27)}function v(h,b){1&h&&n._UZ(0,"div",28)}function S(h,b){if(1&h&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"UOMUnitsMaster"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"number"),n.qZA(),n.TgZ(12,"td")(13,"span",22),n.YNc(14,Z,1,0,"div",23),n.YNc(15,T,1,0,"div",24),n.YNc(16,v,1,0,"div",25),n.qZA()()()),2&h){const e=b.$implicit;n.xp6(2),n.Oqu(null==e?null:e.batchNo),n.xp6(2),n.hij(" ",null!=e&&e.batchDate?n.xi3(5,7,null==e?null:e.batchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",n.lcZ(8,10,null==e?null:e.UOM)," "),n.xp6(3),n.hij(" ",n.xi3(11,12,null==e?null:e.FGQty,"1.2-2")," "),n.xp6(4),n.Q6J("ngIf","green"==(null==e?null:e.aging)),n.xp6(1),n.Q6J("ngIf","red"==(null==e?null:e.aging)),n.xp6(1),n.Q6J("ngIf","yellow"==(null==e?null:e.aging))}}let w=(()=>{class h{constructor(e){this.activeModal=e,this.FGInventoryInfo=[],this.action="",this.totalFGQty=0,this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){}dismissModel(){let e={};e.FGInventoryInfo=this.FGInventoryInfo,e.totalFGQty=this.totalFGQty,this.activeModal.close(e)}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value;break;case"EXCEL":default:break;case"PAGE":this.page=e.value}}trackByFn(e,f){return f?._id}static#t=this.\u0275fac=function(f){return new(f||h)(n.Y36(O.Kz))};static#e=this.\u0275cmp=n.Xpm({type:h,selectors:[["app-fg-inventory-modal"]],viewQuery:function(f,C){if(1&f&&n.Gf(t.j,5),2&f){let D;n.iGM(D=n.CRH())&&(C.headers=D)}},inputs:{FGInventoryInfo:"FGInventoryInfo",action:"action",totalFGQty:"totalFGQty",customerContactInfoArray:"customerContactInfoArray"},decls:37,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-5"],[1,"table-responsive",2,"min-height","19rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-border","my-4"],[1,"row","px-5"],[1,"col-5","ps-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-7","text-end","mb-4","pe-5"],["type","button",1,"btn","bg-primary","px-5",3,"disabled","click"],[1,"d-flex","justify-content-center"],["class","flaggreen",4,"ngIf"],["class","flagred",4,"ngIf"],["class","flagYellow",4,"ngIf"],[1,"flaggreen"],[1,"flagred"],[1,"flagYellow"]],template:function(f,C){1&f&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"FG Inventory"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return C.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th"),n._uU(15,"Batch No."),n.qZA(),n.TgZ(16,"th"),n._uU(17,"Batch Date"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"UoM"),n.qZA(),n.TgZ(20,"th"),n._uU(21,"FG Qty"),n.qZA(),n.TgZ(22,"th"),n._uU(23,"Aging"),n.qZA()()(),n.TgZ(24,"tbody"),n.YNc(25,S,17,15,"tr",12),n.qZA()()()()(),n._UZ(26,"hr",13),n.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"div",17),n._uU(31," Total FG Qty. "),n._UZ(32,"i",18),n.qZA(),n.TgZ(33,"input",19),n.NdJ("ngModelChange",function(N){return C.totalFGQty=N}),n.qZA()()(),n.TgZ(34,"div",20)(35,"button",21),n.NdJ("click",function(){return C.dismissModel()}),n._uU(36," Save & Close "),n.qZA()()()()()),2&f&&(n.xp6(25),n.Q6J("ngForOf",C.FGInventoryInfo)("ngForTrackBy",C.trackByFn),n.xp6(8),n.Q6J("ngModel",C.totalFGQty)("disabled","view"==C.action),n.xp6(2),n.Q6J("disabled",C.btnDisable||"view"==C.action))},dependencies:[M.sg,M.O5,p.Fj,p.wV,p.JJ,p.On,M.JJ,M.uU,y.S],encapsulation:2})}return h})()},6573:(F,A,d)=>{d.d(A,{_0:()=>P,B$:()=>Q.B,tC:()=>q.t,$G:()=>r});var t=d(43818),O=d(99328);d(88059),d(65973);var e=d(65879),f=d(37285),C=d(96814),D=d(60095);function N(o,m){1&o&&e._UZ(0,"hr",19)}function I(o,m){if(1&o){const a=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(a);const c=e.oxw();return e.KtG(c.dismissModel())}),e._uU(1," Save & Close "),e.qZA()}}const J=function(){return["create","edit"]};let P=(()=>{class o{constructor(a,u){this.activeModal=a,this.utilityService=u,this.action="",this.totalBatchQuantity=null,this.batchInfo={},this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.manufacturingDate="",this.batchNumber="",this.customerContactInfoArray=[]}ngOnInit(){this.totalBatchQuantity=this.batchInfo?.totalBatchQuantity,this.manufacturingDate=this.batchInfo?.manufacturingDate,this.batchNumber=this.batchInfo?.batchNumber}dismissModel(){let a={};a.totalBatchQuantity=this.totalBatchQuantity,a.manufacturingDate=this.manufacturingDate,a.batchNumber=this.batchNumber,this.activeModal.close(a)}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value;break;case"EXCEL":default:break;case"PAGE":this.page=a.value}}trackByFn(a,u){return u?._id}static#t=this.\u0275fac=function(u){return new(u||o)(e.Y36(f.Kz),e.Y36(O.tI))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-batch-info-modal"]],viewQuery:function(u,c){if(1&u&&e.Gf(t.j,5),2&u){let _;e.iGM(_=e.CRH())&&(c.headers=_)}},inputs:{action:"action",totalBatchQuantity:"totalBatchQuantity",batchInfo:"batchInfo",customerContactInfoArray:"customerContactInfoArray"},decls:33,vars:13,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center"],[1,"col-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"row","justify-content-center","mt-4"],["type","date",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","line-border my-4",4,"ngIf"],[1,"row"],[1,"col","text-center","mb-4"],["class","btn bg-primary px-5","type","button",3,"click",4,"ngIf"],[1,"line-border","my-4"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(u,c){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Batch Info"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return c.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e._uU(12," Total Batch Qty. "),e._UZ(13,"i",10),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(U){return c.totalBatchQuantity=U}),e.qZA()()()(),e.TgZ(15,"div",12)(16,"div",7)(17,"div",8)(18,"div",9),e._uU(19," Batch/Mfg Date "),e._UZ(20,"i",10),e.qZA(),e.TgZ(21,"input",13),e.NdJ("ngModelChange",function(U){return c.manufacturingDate=U}),e.qZA()()()(),e.TgZ(22,"div",12)(23,"div",7)(24,"div",8)(25,"div",9),e._uU(26," Batch Number # "),e._UZ(27,"i",10),e.qZA(),e.TgZ(28,"input",14),e.NdJ("ngModelChange",function(U){return c.batchNumber=U}),e.qZA()()()(),e.YNc(29,N,1,0,"hr",15),e.TgZ(30,"div",16)(31,"div",17),e.YNc(32,I,2,0,"button",18),e.qZA()()()()),2&u&&(e.xp6(14),e.Q6J("ngModel",c.totalBatchQuantity)("disabled",!e.DdM(8,J).includes(c.action)),e.xp6(7),e.Q6J("ngModel",c.manufacturingDate)("disabled",!e.DdM(9,J).includes(c.action)),e.xp6(7),e.Q6J("ngModel",c.batchNumber)("disabled",!e.DdM(10,J).includes(c.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(11,J).includes(c.action)),e.xp6(3),e.Q6J("ngIf",e.DdM(12,J).includes(c.action)))},dependencies:[C.O5,D.Fj,D.wV,D.JJ,D.On],encapsulation:2})}return o})();var Q=d(22751),q=d(16250),K=d(95346);function B(o,m){1&o&&e._UZ(0,"img",28)}function g(o,m){1&o&&e._UZ(0,"img",29)}function x(o,m){if(1&o&&(e.TgZ(0,"li",31)(1,"span",32),e._uU(2),e.qZA()()),2&o){const a=e.oxw(),u=a.$implicit,c=a.pages;e.xp6(2),e.AsE(" Page ",u," of ",c[c.length-1]," ")}}function i(o,m){1&o&&e.YNc(0,x,3,2,"li",30),2&o&&e.Q6J("ngIf",m.pages.length>0)}function s(o,m){if(1&o){const a=e.EpF();e.TgZ(0,"ngb-pagination",24),e.NdJ("pageChange",function(c){e.CHM(a);const _=e.oxw();return e.KtG(_.page=c)}),e.YNc(1,B,1,0,"ng-template",25),e.YNc(2,g,1,0,"ng-template",26),e.YNc(3,i,1,1,"ng-template",27),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("collectionSize",a.tableData.length)("page",a.page)("pageSize",a.pageSize)("boundaryLinks",!1)}}function l(o,m){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",22,33)(5,"span",34),e._uU(6),e.qZA()(),e.TgZ(7,"td",22,35)(9,"span",34),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"number"),e.qZA()()),2&o){const a=m.$implicit,u=e.MAs(4),c=e.MAs(8);e.xp6(2),e.Oqu(null==a?null:a.itemCode),e.xp6(1),e.Udp("width",u.clientWidth),e.xp6(2),e.Q6J("positionTarget",u)("ngbTooltip",a.itemName),e.xp6(1),e.hij(" ",a.itemName," "),e.xp6(1),e.Udp("width",c.clientWidth),e.xp6(2),e.Q6J("positionTarget",c)("ngbTooltip",a.itemDescription),e.xp6(1),e.hij(" ",a.itemDescription," "),e.xp6(2),e.hij(" ",null==a?null:a.UOM," "),e.xp6(2),e.Oqu(null!=a&&a.partCount?e.xi3(15,13,null==a?null:a.partCount,"1.2-2"):null)}}let r=(()=>{class o{constructor(a){this.activeModal=a,this.itemDetailsList=[],this.action="",this.totalBatchQuantity=0,this.tableData=[],this.btnDisable=!1,this.page=1,this.pageSize=12,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){this.tableData=structuredClone(this.itemDetailsList),this.tableData.length>0&&(this.tableData=this.tableData?.map(a=>(a.partCount=a.partCount*this.totalBatchQuantity,a)))}dismissModel(){let a={};a.tableData=this.tableData,this.activeModal.close(a)}setPagination(){this.page=1}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value;break;case"EXCEL":default:break;case"PAGE":this.page=a.value}}trackByFn(a,u){return u?._id}static#t=this.\u0275fac=function(u){return new(u||o)(e.Y36(f.Kz))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-card-mrp-modal"]],viewQuery:function(u,c){if(1&u&&e.Gf(t.j,5),2&u){let _;e.iGM(_=e.CRH())&&(c.headers=_)}},inputs:{itemDetailsList:"itemDetailsList",action:"action",totalBatchQuantity:"totalBatchQuantity",customerContactInfoArray:"customerContactInfoArray"},decls:40,vars:11,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-4"],[1,"row","justify-content-between","mb-3"],[1,"col-4","d-flex","align-items-center"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"ms-1","me-2","col-form-label","text-nowrap"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange",4,"ngIf"],[1,"col-1"],[1,"col-3"],[1,"table-responsive",2,"min-height","44rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],["itemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["itemDescription",""]],template:function(u,c){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Material Requirement Planning (MRP)"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return c.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),e._uU(14," Total Batch Quantity "),e.TgZ(15,"span",12),e._uU(16,"\u25b6"),e.qZA()(),e.TgZ(17,"input",13),e.NdJ("ngModelChange",function(U){return c.totalBatchQuantity=U}),e.qZA()()(),e.TgZ(18,"div",14),e.YNc(19,s,4,4,"ngb-pagination",15),e.qZA(),e._UZ(20,"div",16)(21,"div",17),e.qZA(),e.TgZ(22,"div",18)(23,"table",19)(24,"thead",20)(25,"tr",21)(26,"th"),e._uU(27,"Item Code"),e.qZA(),e.TgZ(28,"th",22),e._uU(29,"Item Name"),e.qZA(),e.TgZ(30,"th",22),e._uU(31,"Item Description"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"UoM"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Qty/Part Count"),e.qZA()()(),e.TgZ(36,"tbody"),e.YNc(37,l,16,16,"tr",23),e.ALo(38,"slice"),e.ALo(39,"searchFi1ter"),e.qZA()()()()()()()),2&u&&(e.xp6(17),e.Q6J("ngModel",c.totalBatchQuantity),e.xp6(2),e.Q6J("ngIf",c.tableData.length>0),e.xp6(18),e.Q6J("ngForOf",e.Dn7(38,4,e.xi3(39,8,c.tableData,c.search),(c.page-1)*c.pageSize,(c.page-1)*c.pageSize+c.pageSize))("ngForTrackBy",c.trackByFn))},dependencies:[C.sg,C.O5,f.N9,f.GZ,f.ju,f.Qy,f._L,D.Fj,D.JJ,D.On,C.OU,C.JJ,K.G],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}"]})}return o})()},16250:(F,A,d)=>{d.d(A,{t:()=>v});var t=d(43818),n=d(65879),O=d(37285),M=d(99328),p=d(96814),y=d(60095);function Z(S,w){if(1&S&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"number"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"date"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"date"),n.qZA()()),2&S){const h=w.$implicit;n.xp6(2),n.Oqu(null==h?null:h.scheduleNo),n.xp6(2),n.hij(" ",n.xi3(5,5,null==h?null:h.quantity,"1.2-2")," "),n.xp6(3),n.Oqu(null==h?null:h.UOM),n.xp6(2),n.hij(" ",null!=h&&h.dispatchDate?n.xi3(10,8,null==h?null:h.dispatchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",null!=h&&h.PPICDate?n.xi3(13,11,null==h?null:h.PPICDate,"dd-MM-YYYY"):null," ")}}const T=function(){return["create","edit"]};let v=(()=>{class S{constructor(h,b){this.activeModal=h,this.toastService=b,this.action="edit",this.SOQty=0,this.deliveryCount=0,this.UOM=null,this.deliveryScheduleArr=[],this.btnDisable=!1,this.minDate=new Date}ngOnInit(){if(this.deliveryScheduleArr.length>0){this.deliveryScheduleArr=this.deliveryScheduleArr.map(b=>(b.UOM=this.UOM,b)),this.deliveryCount=this.deliveryScheduleArr.length;let h=this.deliveryScheduleArr.map(b=>b.quantity||0).reduce((b,e)=>+b+ +e,0);this.SOQty=h}}static#t=this.\u0275fac=function(b){return new(b||S)(n.Y36(O.Kz),n.Y36(M.kl))};static#e=this.\u0275cmp=n.Xpm({type:S,selectors:[["app-job-card-disp-modal"]],viewQuery:function(b,e){if(1&b&&n.Gf(t.j,5),2&b){let f;n.iGM(f=n.CRH())&&(e.headers=f)}},inputs:{action:"action",UOM:"UOM",deliveryScheduleArr:"deliveryScheduleArr"},decls:41,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","px-5","mt-5"],[1,"ps-0","col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-4","mx-1"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6","pe-0"],["for","deliveryCount",1,"col-form-label","text-nowrap"],["type","number","id","deliveryCount","name","deliveryCount","min","1","max","5","readonly","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"row"],[1,"col-12","my-3","px-0"],[1,"line-border"],[1,"row","px-5"],[1,"table-responsive","ps-0","pe-0",2,"min-height","25rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf"]],template:function(b,e){1&b&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"Dispatch Schedule"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return e.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),n._uU(12," Quantity "),n._UZ(13,"i",10),n.qZA(),n.TgZ(14,"input",11),n.NdJ("ngModelChange",function(C){return e.SOQty=C}),n.qZA()()(),n.TgZ(15,"div",12)(16,"div",8)(17,"div",13),n._uU(18," Delivery Count "),n._UZ(19,"i",10),n.qZA(),n.TgZ(20,"input",14),n.NdJ("ngModelChange",function(C){return e.deliveryCount=C}),n.qZA()()()(),n.TgZ(21,"div",15)(22,"div",16),n._UZ(23,"hr",17),n.qZA()(),n.TgZ(24,"div",18)(25,"div",19)(26,"table",20)(27,"thead",21)(28,"tr",22)(29,"th"),n._uU(30,"Schedule #"),n.qZA(),n.TgZ(31,"th"),n._uU(32,"Quantity"),n.qZA(),n.TgZ(33,"th"),n._uU(34,"UoM"),n.qZA(),n.TgZ(35,"th"),n._uU(36,"Expected Dispatch Date"),n.qZA(),n.TgZ(37,"th"),n._uU(38,"PPIC Date"),n.qZA()()(),n.TgZ(39,"tbody"),n.YNc(40,Z,14,14,"tr",23),n.qZA()()()()()()),2&b&&(n.xp6(14),n.Q6J("ngModel",e.SOQty),n.xp6(6),n.Q6J("disabled",!n.DdM(4,T).includes(e.action))("ngModel",e.deliveryCount),n.xp6(20),n.Q6J("ngForOf",e.deliveryScheduleArr))},dependencies:[p.sg,y.Fj,y.wV,y.JJ,y.qQ,y.Fd,y.On,p.JJ,p.uU],encapsulation:2})}return S})()},65973:(F,A,d)=>{d.d(A,{U:()=>B});var t=d(65879),n=d(43818),O=d(22751),M=d(16250),p=d(60095),y=d(25116),Z=d(37285),T=d(99328),v=d(96814);function S(g,x){if(1&g&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&g){const i=x.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function w(g,x){if(1&g&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&g){const i=x.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}let h=(()=>{class g{get f(){return this.form.controls}get actualDimensionsData(){return this.form.get("actualDimensions")}get layoutDimensionsData(){return this.form.get("layoutDimensions")}constructor(i,s){this.activeModal=i,this.toastService=s,this.action="",this.dimensionsDetails={},this.saveData=new t.vpe,this.actualUnits="",this.layoutUnits="",this.DimensionsUnitsObj=y.An,this.DimensionsUnits=this.DimensionsUnitsObj.getAllSKUMasterDimensionsUnit(),this.form=new p.nJ({actualDimensions:new p.nJ({unit:new p.p4("mm"),width:new p.p4(null),length:new p.p4(null),ups:new p.p4(1),area:new p.p4(null),mSqArea:new p.p4(null)}),layoutDimensions:new p.nJ({unit:new p.p4("mm"),width:new p.p4(null),length:new p.p4(null),ups:new p.p4(null),area:new p.p4(null),mSqArea:new p.p4(null),wastePercentage:new p.p4(null)})})}ngOnInit(){this.form.patchValue(this.dimensionsDetails),this.actualUnits=this.actualDimensionsData.controls.unit.value,this.layoutUnits=this.layoutDimensionsData.controls.unit.value,("view"==this.action||"Converted to SKU"==this.action)&&this.form.disable(),this.actualDimensionsData.controls.ups.disable()}setActualUnits(i){this.actualUnits=i.target.value,this.actualDimensionsData.controls.width.setValue(null),this.actualDimensionsData.controls.length.setValue(null),this.setActualArea()}setLayoutUnits(i){this.layoutUnits=i.target.value,this.layoutDimensionsData.controls.width.setValue(null),this.layoutDimensionsData.controls.length.setValue(null),this.layoutDimensionsData.controls.ups.setValue(null),this.setLayoutArea()}setActualArea(){let r=+(+this.actualDimensionsData.controls.width.value*+this.actualDimensionsData.controls.length.value/this.actualDimensionsData.controls.ups.value).toFixed(2);if(this.actualDimensionsData.controls.area.setValue(r),this.actualUnits==this.DimensionsUnitsObj.mm){let o=+(+r/1e6).toFixed(4);this.actualDimensionsData.controls.mSqArea.setValue(o)}if(this.actualUnits==this.DimensionsUnitsObj.cm){let o=+(+r/1e4).toFixed(4);this.actualDimensionsData.controls.mSqArea.setValue(o)}if(this.actualUnits==this.DimensionsUnitsObj.inch){let o=+(+r/1550).toFixed(4);this.actualDimensionsData.controls.mSqArea.setValue(o)}if(this.actualUnits==this.DimensionsUnitsObj.ft){let o=+(+r/10.764).toFixed(4);this.actualDimensionsData.controls.mSqArea.setValue(o)}this.actualUnits==this.DimensionsUnitsObj.m&&this.actualDimensionsData.controls.mSqArea.setValue(r),this.setLayoutArea()}setLayoutArea(){let r=this.actualDimensionsData.controls.mSqArea.value,o=+(+this.layoutDimensionsData.controls.width.value*+this.layoutDimensionsData.controls.length.value/this.layoutDimensionsData.controls.ups.value).toFixed(2);if(this.layoutDimensionsData.controls.area.setValue(o),this.layoutUnits==this.DimensionsUnitsObj.mm){let m=+(+o/1e6).toFixed(4);this.layoutDimensionsData.controls.mSqArea.setValue(m);let a=+((m-r)/m*100).toFixed(2);this.layoutDimensionsData.controls.wastePercentage.setValue(a)}if(this.layoutUnits==this.DimensionsUnitsObj.cm){let m=+(+o/1e4).toFixed(4);this.layoutDimensionsData.controls.mSqArea.setValue(m);let a=+((m-r)/m*100).toFixed(2);this.layoutDimensionsData.controls.wastePercentage.setValue(a)}if(this.layoutUnits==this.DimensionsUnitsObj.inch){let m=+(+o/1550).toFixed(4);this.layoutDimensionsData.controls.mSqArea.setValue(m);let a=+((m-r)/m*100).toFixed(2);this.layoutDimensionsData.controls.wastePercentage.setValue(a)}if(this.layoutUnits==this.DimensionsUnitsObj.ft){let m=+(+o/10.764).toFixed(4);this.layoutDimensionsData.controls.mSqArea.setValue(m);let a=+((m-r)/m*100).toFixed(2);this.layoutDimensionsData.controls.wastePercentage.setValue(a)}if(this.layoutUnits==this.DimensionsUnitsObj.m){this.layoutDimensionsData.controls.mSqArea.setValue(o);let a=+((o-r)/o*100).toFixed(2);this.layoutDimensionsData.controls.wastePercentage.setValue(a)}}reset(){this.form.reset(),this.actualDimensionsData.controls.ups.setValue(1),this.actualDimensionsData.controls.unit.setValue("mm"),this.layoutDimensionsData.controls.unit.setValue("mm"),this.actualUnits=this.actualDimensionsData.controls.unit.value,this.layoutUnits=this.layoutDimensionsData.controls.unit.value,this.form.patchValue(this.dimensionsDetails)}dismissModel(){let i=this.actualDimensionsData.value,s=this.layoutDimensionsData.value;i.width?i.length?s.width?s.length?s.ups?(this.saveData.emit({data:this.form.value,key:"dimensionsDetails"}),this.toastService.success("Dimensions Saved")):this.toastService.warning("Layout Dimensions Ups is required !"):this.toastService.warning("Layout Dimensions Length is required !"):this.toastService.warning("Layout Dimensions Width is required !"):this.toastService.warning("Actual Dimensions Length is required !"):this.toastService.warning("Actual Dimensions Width is required !")}static#t=this.\u0275fac=function(s){return new(s||g)(t.Y36(Z.Kz),t.Y36(T.kl))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-view-sku-dimension"]],inputs:{action:"action",dimensionsDetails:"dimensionsDetails"},outputs:{saveData:"saveData"},decls:154,vars:14,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[3,"formGroup"],[1,"container-fluid"],[1,"row","justify-content-center","mt-5",2,"min-height","30.8rem"],[1,"col-12","px-5"],["formGroupName","actualDimensions",1,"row","mt-4"],[1,"col-2","pe-0","setDimensionsBtnMargin"],[1,"bg-primary","text-white","pt-1","pb-2","px-4","fs-4"],[1,"col-auto","ps-0"],[1,"fa","fa-caret-right","text-secondary"],[1,"col-1","ps-0","setAclDmnsMargin"],[1,"form-label"],[1,"text-danger"],["formControlName","unit",1,"form-select",3,"change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4"],[1,"row"],[1,"col-5","ps-2"],[1,"px-0","setAclDmnsMargin"],[1,"d-flex"],["type","number","formControlName","width",1,"form-control","border-end-0","ps-2","pe-0",3,"input"],[1,"input-group-text","text-secondary","combine-INR","border","border-1","border-start-0"],[1,"vr","me-3"],[1,"pe-0","setAclDmnsMargin"],["type","number","formControlName","length",1,"form-control","border-end-0","ps-2","pe-0",3,"input"],[1,"col-2","px-0","setAclDmnsMargin"],["type","number","formControlName","ups",1,"form-control","ps-2","pe-0"],[1,"col-6","separate-row"],["type","number","formControlName","area","readonly","",1,"form-control","border-end-0","ps-2","pe-0"],[1,"set-position","fs-3"],[1,"col-6","pe-5"],["type","number","formControlName","mSqArea","readonly","",1,"form-control","border-end-0","ps-2","pe-0"],["formGroupName","layoutDimensions",1,"row","setLayoutMargin"],[1,"bg-primary","text-white","pt-1","pb-2","ps-3","pe-4","fs-4"],["type","number","formControlName","ups",1,"form-control","ps-2","pe-0",3,"input"],[1,"row","seperate-waste"],[1,"set-waste","col-3","pe-3"],["type","number","formControlName","wastePercentage","readonly","",1,"form-control","ps-2","pe-0"],[3,"value"]],template:function(s,l){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.TgZ(5,"div")(6,"button",3),t.NdJ("click",function(){return l.activeModal.close()}),t._UZ(7,"i",4),t.qZA()()(),t.TgZ(8,"form",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"span",11),t._uU(15,"Actual Dimensions"),t.qZA()(),t.TgZ(16,"div",12),t._UZ(17,"i",13),t.qZA(),t.TgZ(18,"div",14)(19,"label",15),t._uU(20,"Unit"),t.TgZ(21,"span",16),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"select",17),t.NdJ("change",function(o){return l.setActualUnits(o)}),t.TgZ(24,"option",18),t._uU(25,"Select Unit"),t.qZA(),t.YNc(26,S,2,2,"option",19),t.qZA()(),t.TgZ(27,"div",20)(28,"div",21)(29,"div",22)(30,"div",23)(31,"label",15),t._uU(32,"Width"),t.TgZ(33,"span",16),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"div",24)(36,"input",25),t.NdJ("input",function(){return l.setActualArea()}),t.qZA(),t.TgZ(37,"span",26),t._UZ(38,"div",27),t._uU(39),t.qZA()()()(),t.TgZ(40,"div",22)(41,"div",28)(42,"label",15),t._uU(43,"Length"),t.TgZ(44,"span",16),t._uU(45,"*"),t.qZA()(),t.TgZ(46,"div",24)(47,"input",29),t.NdJ("input",function(){return l.setActualArea()}),t.qZA(),t.TgZ(48,"span",26),t._UZ(49,"div",27),t._uU(50),t.qZA()()()(),t.TgZ(51,"div",30)(52,"label",15),t._uU(53,"Ups"),t.TgZ(54,"span",16),t._uU(55,"*"),t.qZA()(),t._UZ(56,"input",31),t.qZA()()(),t.TgZ(57,"div",20)(58,"div",21)(59,"div",32)(60,"div",23)(61,"label",15),t._uU(62,"Area"),t._UZ(63,"span",16),t.qZA(),t.TgZ(64,"div",24),t._UZ(65,"input",33),t.TgZ(66,"span",26),t._UZ(67,"div",27),t._uU(68),t.qZA()()(),t.TgZ(69,"div",34),t._uU(70,"="),t.qZA()(),t.TgZ(71,"div",35)(72,"div",23)(73,"label",15),t._uU(74,"Area"),t._UZ(75,"span",16),t.qZA(),t.TgZ(76,"div",24),t._UZ(77,"input",36),t.TgZ(78,"span",26),t._UZ(79,"div",27),t._uU(80," m\xb2 "),t.qZA()()()()()()(),t.TgZ(81,"div",37)(82,"div",10)(83,"span",38),t._uU(84,"Layout Dimensions"),t.qZA()(),t.TgZ(85,"div",12),t._UZ(86,"i",13),t.qZA(),t.TgZ(87,"div",14)(88,"label",15),t._uU(89,"Unit"),t.TgZ(90,"span",16),t._uU(91,"*"),t.qZA()(),t.TgZ(92,"select",17),t.NdJ("change",function(o){return l.setLayoutUnits(o)}),t.TgZ(93,"option",18),t._uU(94,"Select Unit"),t.qZA(),t.YNc(95,w,2,2,"option",19),t.qZA()(),t.TgZ(96,"div",20)(97,"div",21)(98,"div",22)(99,"div",23)(100,"label",15),t._uU(101,"Width"),t.TgZ(102,"span",16),t._uU(103,"*"),t.qZA()(),t.TgZ(104,"div",24)(105,"input",25),t.NdJ("input",function(){return l.setLayoutArea()}),t.qZA(),t.TgZ(106,"span",26),t._UZ(107,"div",27),t._uU(108),t.qZA()()()(),t.TgZ(109,"div",22)(110,"div",28)(111,"label",15),t._uU(112,"Length"),t.TgZ(113,"span",16),t._uU(114,"*"),t.qZA()(),t.TgZ(115,"div",24)(116,"input",29),t.NdJ("input",function(){return l.setLayoutArea()}),t.qZA(),t.TgZ(117,"span",26),t._UZ(118,"div",27),t._uU(119),t.qZA()()()(),t.TgZ(120,"div",30)(121,"label",15),t._uU(122,"Ups"),t.TgZ(123,"span",16),t._uU(124,"*"),t.qZA()(),t.TgZ(125,"input",39),t.NdJ("input",function(){return l.setLayoutArea()}),t.qZA()()()(),t.TgZ(126,"div",20)(127,"div",40)(128,"div",32)(129,"div",23)(130,"label",15),t._uU(131,"Area"),t._UZ(132,"span",16),t.qZA(),t.TgZ(133,"div",24),t._UZ(134,"input",33),t.TgZ(135,"span",26),t._UZ(136,"div",27),t._uU(137),t.qZA()()(),t.TgZ(138,"div",34),t._uU(139,"="),t.qZA()(),t.TgZ(140,"div",35)(141,"div",23)(142,"label",15),t._uU(143,"Area"),t._UZ(144,"span",16),t.qZA(),t.TgZ(145,"div",24),t._UZ(146,"input",36),t.TgZ(147,"span",26),t._UZ(148,"div",27),t._uU(149," m\xb2 "),t.qZA()()()(),t.TgZ(150,"div",41)(151,"label",15),t._uU(152,"Waste %"),t.qZA(),t._UZ(153,"input",42),t.qZA()()()()()()()()()),2&s&&(t.xp6(3),t.hij("SKU Dimensions ",t.lcZ(4,12,l.action),""),t.xp6(5),t.Q6J("formGroup",l.form),t.xp6(16),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",l.DimensionsUnits),t.xp6(13),t.hij(" ",l.actualUnits," "),t.xp6(11),t.hij(" ",l.actualUnits," "),t.xp6(18),t.hij(" ",l.actualUnits,"\xb2 "),t.xp6(25),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",l.DimensionsUnits),t.xp6(13),t.hij(" ",l.layoutUnits," "),t.xp6(11),t.hij(" ",l.layoutUnits," "),t.xp6(18),t.hij(" ",l.layoutUnits,"\xb2 "))},dependencies:[v.sg,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.sg,p.u,p.x0,v.rS],styles:[".fa-caret-right[_ngcontent-%COMP%]{font-size:2rem!important}.setAclDmnsMargin[_ngcontent-%COMP%]{margin-top:-2.5rem}.separate-row[_ngcontent-%COMP%]{position:relative}.separate-row[_ngcontent-%COMP%]   .set-position[_ngcontent-%COMP%]{position:absolute;top:-.5rem;right:-.5rem}.seperate-waste[_ngcontent-%COMP%]{position:relative}.seperate-waste[_ngcontent-%COMP%]   .set-waste[_ngcontent-%COMP%]{position:absolute;top:-2.5rem;right:-6.5rem}.setLayoutMargin[_ngcontent-%COMP%]{margin-top:4rem}.setDimensionsBtnMargin[_ngcontent-%COMP%]{margin-top:-.3rem}"]})}return g})();var b=d(99007),e=d(1076),f=d(88059),C=d(95346),D=d(14906),N=d(84231);function I(g,x){if(1&g&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&g){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.batchQty,"1.2-2")," ")}}const J=function(){return{standalone:!0}};function P(g,x){if(1&g){const i=t.EpF();t.TgZ(0,"input",30),t.NdJ("ngModelChange",function(l){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.batchQty=l)})("input",function(){t.CHM(i);const l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.setBatchQty(l))}),t.qZA()}if(2&g){const i=t.oxw().$implicit,s=t.oxw();t.Q6J("ngModel",i.batchQty)("ngModelOptions",t.DdM(3,J))("disabled",s.selectDSKU&&s.selectDSKU!=i.SKUNo)}}const Q=function(){return["approve","reject","view","generate","cancel"]};function q(g,x){if(1&g){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",15)(7,"div",16),t._UZ(8,"div"),t.qZA()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",15,17)(13,"span",18),t._uU(14),t.qZA()(),t.TgZ(15,"td",15,19)(17,"span",18),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"i",20),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.getSKUDimensionData(r))}),t.qZA()(),t.TgZ(21,"td",null,21)(23,"span",22)(24,"div",23),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openDrawing(r.drawing))}),t.qZA()()(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"number"),t.qZA(),t.TgZ(31,"td")(32,"span",24)(33,"div",25),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openFGInventoryModal(r))}),t.qZA()()(),t.TgZ(34,"td")(35,"div",26),t.YNc(36,I,3,4,"span",27),t.YNc(37,P,1,4,"input",28),t.qZA()(),t.TgZ(38,"td")(39,"span",24)(40,"div",29),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openSOScheduleModal(r))}),t.qZA()()()()}if(2&g){const i=x.$implicit,s=t.MAs(12),l=t.MAs(16),r=t.MAs(22),o=t.oxw();t.xp6(2),t.Oqu(null==i?null:i.SO_FCNumber),t.xp6(2),t.hij(" ",null!=i&&i.SO_FCDate?t.xi3(5,21,null==i?null:i.SO_FCDate,"dd-MM-YYYY"):null," "),t.xp6(4),t.Udp("background-color",null==i?null:i.code),t.xp6(2),t.hij(" ",null==i?null:i.SKUNo," "),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.SKUName)("positionTarget",s),t.xp6(1),t.hij(" ",null==i?null:i.SKUName," "),t.xp6(1),t.Udp("width",l.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.SKUDescription)("positionTarget",l),t.xp6(1),t.hij(" ",null==i?null:i.SKUDescription," "),t.xp6(5),t.Q6J("ngbTooltip",i.internalPartNo)("positionTarget",r),t.xp6(3),t.hij(" ",t.lcZ(27,24,null==i?null:i.UOM)," "),t.xp6(3),t.Oqu(t.xi3(30,26,null==i?null:i.balQty,"1.2-2")),t.xp6(7),t.Q6J("ngIf",t.DdM(29,Q).includes(o.action)),t.xp6(1),t.Q6J("ngIf",!t.DdM(30,Q).includes(o.action))}}const K=function(g,x,i,s){return{page:g,pageSize:x,collection:i,search:s,excelDisplay:"none"}};let B=(()=>{class g{constructor(i,s,l,r,o,m,a,u){this.activeModal=i,this.toastService=s,this.modalService=l,this.jobCardCreationService=r,this.spinner=o,this.router=m,this.activatedRoute=a,this.utilityService=u,this.action="",this.totalBatchQty=null,this.orderType=null,this.collection=0,this.SKUDetailsOfJC=[],this.btnDisable=!1,this.page=1,this.pageSize=5,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.dimensionsDetails={},this.SODetailsArray=[],this.selectDSKU=null,this.saveData=new t.vpe,this.customerContactInfoArray=[]}ngOnInit(){this.collection=this.SKUDetailsOfJC.length}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=i.value}}trackByFn(i,s){return s?._id}openDrawing(i){i?window.open(i,"_blank"):this.toastService.warning("Drawing File Not Present")}openFGInventoryModal(i){if(!this.selectDSKU||this.selectDSKU==i.SKUNo){const s=this.modalService.open(O.B,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.FGInventoryInfo=i?.FGInventoryInfo,s.componentInstance.totalFGQty=i?.totalFGQty,s.result.then(l=>{if(l&&["create","edit"].includes(this.action)){let r=-1;r=this.SKUDetailsOfJC.findIndex("SalesOrder"==i.referenceModel?o=>o.reference==i?.reference&&o.SKU==i.SKU&&o.SO_FCLineTargetDate==i?.SO_FCLineTargetDate:o=>o.reference==i?.reference&&o.SKU==i.SKU),this.SKUDetailsOfJC[r].FGInventoryInfo=l?.FGInventoryInfo,i.balQty>l.totalFGQty?(this.SKUDetailsOfJC[r].batchQty=+i.balQty-+l.totalFGQty,this.SKUDetailsOfJC[r].previousQty=+i.balQty-+l.totalFGQty):this.SKUDetailsOfJC[r].batchQty=0,this.selectDSKU="number"==typeof+i.batchQty&&+i.batchQty>0?i?.SKUNo:null,this.calTotalBatchQuantity()}},l=>{})}}openSOScheduleModal(i){if(i.dispatchSchedule&&i.dispatchSchedule.length>0&&(!this.selectDSKU||this.selectDSKU==i.SKUNo)){const s=this.modalService.open(M.t,{centered:!0,windowClass:"custom-modal-sm",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.UOM=i.UOM,s.componentInstance.deliveryScheduleArr=i?.dispatchSchedule,s.result.then(l=>{l&&["create","edit"].includes(this.action)},l=>{})}}setBatchQty(i){let s=-1;s=this.SKUDetailsOfJC.findIndex("SalesOrder"==i.referenceModel?l=>l.reference==i?.reference&&l.SKU==i.SKU&&l.SO_FCLineTargetDate==i?.SO_FCLineTargetDate:l=>l.reference==i?.reference&&l.SKU==i.SKU),i.balQty>i.totalFGQty&&(this.SKUDetailsOfJC[s].previousQty=+i.balQty-+i.totalFGQty),+i.batchQty<+i.previousQty&&(this.selectDSKU=null),this.selectDSKU="number"==typeof+i.batchQty&&+i.batchQty>0?i?.SKUNo:null,this.calTotalBatchQuantity(),this.collection=this.SKUDetailsOfJC.length}calTotalBatchQuantity(){let i=this.SKUDetailsOfJC.map(s=>s.batchQty||0).reduce((s,l)=>+s+ +l,0);this.saveData.emit({data:i,key:"totalBatchQuantitySKU"})}onSort({column:i,direction:s}){this.headers.forEach(l=>{l.sortable!==i&&(l.direction="")}),this.SKUDetailsOfJC=""===s||""===i?this.SKUDetailsOfJC:[...this.SKUDetailsOfJC].sort((l,r)=>{let o="string"==typeof l[i]?l[i].toLowerCase():l[i],m="string"==typeof r[i]?r[i].toLowerCase():r[i];const a=o<m?-1:o>m?1:0;return"asc"===s?a:-a})}getSKUDimensionData(i){this.spinner.show(),this.jobCardCreationService.getDimBySKU(i.SKU).subscribe(s=>{this.dimensionsDetails=s?.dimensionsDetails,this.spinner.hide(),this.openViewDimModal()})}openViewDimModal(){const i=this.modalService.open(h,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"modelPage"});i.componentInstance.action="view",i.componentInstance.dimensionsDetails=this.dimensionsDetails??{},i.result.then(s=>{},s=>{})}static#t=this.\u0275fac=function(s){return new(s||g)(t.Y36(Z.Kz),t.Y36(T.kl),t.Y36(Z.FF),t.Y36(b.s2),t.Y36(T.V),t.Y36(e.F0),t.Y36(e.gz),t.Y36(T.tI))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-job-card-sku-details-table"]],viewQuery:function(s,l){if(1&s&&t.Gf(n.j,5),2&s){let r;t.iGM(r=t.CRH())&&(l.headers=r)}},inputs:{action:"action",totalBatchQty:"totalBatchQty",orderType:"orderType",collection:"collection",SKUDetailsOfJC:"SKUDetailsOfJC",customerContactInfoArray:"customerContactInfoArray"},outputs:{saveData:"saveData"},decls:37,vars:24,consts:[[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","SO_FCNumber",3,"sort"],["sortable","SO_FCDate",3,"sort"],["sortable","code",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","balQty",3,"sort"],["sortable","batchQty",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],[1,"box"],["SKUName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["SKUDescription",""],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary","pointer",3,"click"],["internalPartNo",""],[1,"d-flex","justify-content-center","pointer",3,"ngbTooltip","positionTarget"],[1,"drawingIcon",3,"click"],[1,"d-flex","justify-content-center","pointer"],[1,"FGMip",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["type","number","class","form-control form-control-xs w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input",4,"ngIf"],[1,"assetCalendarTD",3,"click"],["type","number",1,"form-control","form-control-xs","w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input"]],template:function(s,l){1&s&&(t.TgZ(0,"div",0)(1,"app-setting-header",1),t.NdJ("dataChange",function(o){return l.eventHeader(o)}),t.qZA(),t.TgZ(2,"table",2)(3,"thead",3)(4,"tr",4)(5,"th",5),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(6),t.qZA(),t.TgZ(7,"th",6),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(8),t.qZA(),t.TgZ(9,"th",7),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(10,"Code"),t.qZA(),t.TgZ(11,"th",8),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(12,"SKU Code"),t.qZA(),t.TgZ(13,"th",9),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(14),t.ALo(15,"labelTranslate"),t.qZA(),t.TgZ(16,"th",10),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(17),t.ALo(18,"labelTranslate"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"View Dim"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"DWG"),t.qZA(),t.TgZ(23,"th",11),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(24,"UoM"),t.qZA(),t.TgZ(25,"th",12),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(26),t.qZA(),t.TgZ(27,"th"),t._uU(28,"FG Inv"),t.qZA(),t.TgZ(29,"th",13),t.NdJ("sort",function(o){return l.onSort(o)}),t._uU(30,"Batch Qty"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Disp."),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,q,41,31,"tr",14),t.ALo(35,"slice"),t.ALo(36,"searchFi1ter"),t.qZA()()()),2&s&&(t.xp6(1),t.Q6J("data",t.l5B(19,K,l.page,l.pageSize,l.collection,l.search)),t.xp6(5),t.hij(" ","All"===l.orderType?"SO/FC No.":"FC"===l.orderType?"FC No.":"SO"===l.orderType?"SO No.":"NPD"===l.orderType?"SR No.":"SO No."," "),t.xp6(2),t.hij(" ","All"===l.orderType?"SO/FC Date":"FC"===l.orderType?"FC Date":"SO"===l.orderType?"SO Date":"NPD"===l.orderType?"SR Date":"SO Date"," "),t.xp6(6),t.hij(" ",t.lcZ(15,8,"SKU Name")," "),t.xp6(3),t.hij(" ",t.lcZ(18,10,"SKU Description")," "),t.xp6(9),t.hij(" ","All"===l.orderType?"Bal SO/FC Qty":"FC"===l.orderType?"Bal FC Qty":"SO"===l.orderType?"Bal SO Qty":"NPD"===l.orderType?"Bal SR Qty":"Bal SO Qty"," "),t.xp6(8),t.Q6J("ngForOf",t.Dn7(35,12,t.xi3(36,16,l.SKUDetailsOfJC,l.search),(l.page-1)*l.pageSize,(l.page-1)*l.pageSize+l.pageSize))("ngForTrackBy",l.trackByFn))},dependencies:[v.sg,v.O5,f.P,Z._L,p.Fj,p.wV,p.JJ,p.On,n.j,v.OU,v.JJ,v.uU,C.G,D.c,N.Q],styles:[".box[_ngcontent-%COMP%]{display:grid;place-items:center}.box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:1rem;width:1rem}"]})}return g})()},13107:(F,A,d)=>{d.d(A,{t:()=>t});const t={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(F,A,d)=>{d.d(A,{J:()=>t});const t=({data:n,headers:O,widths:M,title:p})=>({tableData:{widths:M,headerRows:1,body:[O.map(T=>({text:T.header,style:"header"})),...n.map(T=>O.map(v=>({style:"subheader",text:T[v.key]})))]},title:p})}}]);