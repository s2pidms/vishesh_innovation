"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1844],{81844:(S,m,e)=>{e.r(m),e.d(m,{TransactionsModule:()=>C});var v=e(96814),l=e(1076),t=e(65879);let u=(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-transactions"]],decls:2,vars:0,consts:[[1,"main-content-wrapper"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[l.lC],encapsulation:2})}return n})();var o=e(60095),p=e(21631),f=e(22096),d=e(21821),g=e(25116),I=e(35747),r=e(98977),T=e(16897),Z=e(50363),y=e(53421);const b=[{path:"",component:u,children:[{path:"tax_invoice",component:(()=>{class n{get f(){return this.form.controls}constructor(i,s,a,c,h,N,x,A){this.router=i,this.salesInvoiceService=s,this.activatedRoute=a,this.spinner=c,this.toastService=h,this.validationService=N,this.storageService=x,this.utilityService=A,this.action="create",this.customerName="",this.shipmentIdArr=[],this.autoIncrementValues={},this.shipmentNameOptions=[],this.submitted=!1,this.rolePermissionActions=g.a1,this.form=new o.nJ({salesInvoiceNumber:new o.p4(null),salesInvoiceDate:new o.p4(this.utilityService.getTodayDate("YYYY-MM-DD")),shipmentPlanningId:new o.p4("",[o.kI.required]),customer:new o.p4(null)})}ngOnInit(){this.getInitialData()}navigateTo(){this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,d.l)||window.open(`${window.location.origin}/#/print/preview_tax_invoice?data=${JSON.stringify(this.form.value)}`,"_blank")}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,d.l))return;this.form.enable();let i=this.form.value;i._id?this.update(i):(delete i._id,this.create(i))}create(i){this.spinner.show(),this.salesInvoiceService.create(i).subscribe(s=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(s.message),this.form.reset(),this.getInitialData(),this.storageService.set("tab","REPORT"),window.open(`${window.location.origin}/#/default/sales/reports/sales_register_wo_tax`,"_blank")})}update(i){this.spinner.show(),this.salesInvoiceService.updateDirectTaxInvoice(i._id,i).subscribe(s=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(s.message),this.form.reset(),this.getInitialData(),window.open(`${window.location.origin}/#/default/sales/reports/sales_register_wo_tax`,"_blank")})}getInitialData(){this.spinner.show(),this.salesInvoiceService.getAllMasterData({}).subscribe(i=>{this.autoIncrementValues=i?.autoIncrementedValues,this.shipmentIdArr=i.shipmentList,this.activatedRoute.queryParams.pipe((0,p.z)(s=>(this.action=s.action,s.id?this.salesInvoiceService.getById(s.id):(0,f.of)({})))).subscribe(s=>{this.spinner.hide(),0!=Object.keys(s).length&&(this.form.patchValue(s),("edit"==this.action||"view"==this.action||"rejection"==this.action||"approval"==this.action)&&(this.form.disable(),this.form.controls.remarks.enable()))})})}setShipmentName(i){i.billFromLocation&&this.form.controls.salesInvoiceNumber.setValue(this.autoIncrementValues[i.billFromLocation]),this.shipmentNameOptions=[{customerName:i?.customer?.customerName,_id:i?.customer?._id}],this.f.customer.patchValue(i?.customer?._id),this.f.customer.disable()}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(l.F0),t.Y36(I.GC),t.Y36(l.gz),t.Y36(r.V),t.Y36(r.kl),t.Y36(T.RJ),t.Y36(r.V1),t.Y36(r.tI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tax-invoice"]],decls:35,vars:6,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading","ms-2"],[1,"form-body"],[1,"row"],[1,"col-3"],[1,"form-label"],[1,"text-danger"],["bindLabel","DRNId.DRNNumber","bindValue","_id","formControlName","shipmentPlanningId",3,"items","clearable","change"],["type","text","readonly","","formControlName","salesInvoiceNumber",1,"form-control"],["type","date","formControlName","salesInvoiceDate","readonly","",1,"form-control"],["bindLabel","customerName","bindValue","_id","formControlName","customer",3,"items","clearable"],[1,"row","line-border","my-4"],[1,"row","justify-content-center","mb-4"],["appAccessControl","",1,"col-6","d-flex","justify-content-center",3,"accessType"],["type","button",1,"btn","btn-primary","text-white","mx-4","px-3",3,"click"]],template:function(s,a){1&s&&(t.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Generate Tax Invoice"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),t._uU(10," DRN No. "),t._UZ(11,"span",8),t.qZA(),t.TgZ(12,"ng-select",9),t.NdJ("change",function(h){return a.setShipmentName(h)}),t.qZA()(),t.TgZ(13,"div",6)(14,"label",7),t._uU(15," Tax Invoice No. "),t._UZ(16,"span",8),t.qZA(),t._UZ(17,"input",10),t.qZA(),t.TgZ(18,"div",6)(19,"label",7),t._uU(20," Tax Invoice Date"),t._UZ(21,"span",8),t.qZA(),t._UZ(22,"input",11),t.qZA(),t.TgZ(23,"div",6)(24,"label",7),t._uU(25," Customer Name "),t._UZ(26,"span",8),t.qZA(),t._UZ(27,"ng-select",12),t.qZA()(),t._UZ(28,"hr",13),t.TgZ(29,"div",14)(30,"div",15)(31,"button",16),t.NdJ("click",function(){return a.navigateTo()}),t._uU(32," Preview Tax Invoice "),t.qZA(),t.TgZ(33,"button",16),t.NdJ("click",function(){return a.submit()}),t._uU(34," Generate Tax Invoice "),t.qZA()()()()()()),2&s&&(t.Q6J("formGroup",a.form),t.xp6(12),t.Q6J("items",a.shipmentIdArr)("clearable",!1),t.xp6(15),t.Q6J("items",a.shipmentNameOptions)("clearable",!1),t.xp6(3),t.Q6J("accessType",a.rolePermissionActions.createAction))},dependencies:[o.Fj,o.JJ,o.JL,o.sg,o.u,Z.w9,y.J],encapsulation:2})}return n})()},{path:"shipment_creation",loadChildren:()=>e.e(8862).then(e.bind(e,28862)).then(n=>n.ShipmentCreationModule)},{path:"asn",loadChildren:()=>e.e(1580).then(e.bind(e,61580)).then(n=>n.AsnModule)},{path:"grl",loadChildren:()=>Promise.all([e.e(4935),e.e(3270)]).then(e.bind(e,73270)).then(n=>n.GRLModule)},{path:"generate-e-invoice",loadChildren:()=>Promise.all([e.e(5692),e.e(3448)]).then(e.bind(e,63448)).then(n=>n.GenerateEInvoiceModule)},{path:"generate_e_way_bills",loadChildren:()=>Promise.all([e.e(7539),e.e(970)]).then(e.bind(e,70970)).then(n=>n.GenerateEWayBillsModule)},{path:"generate_export_e_invoice",loadChildren:()=>Promise.all([e.e(5692),e.e(7636)]).then(e.bind(e,17636)).then(n=>n.GenerateExportEInvoiceModule)},{path:"generate_export_e_way_bills",loadChildren:()=>Promise.all([e.e(7539),e.e(4243)]).then(e.bind(e,34243)).then(n=>n.GenerateExportEWayBillsModule)}]}];let C=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[v.ez,l.Bz.forChild(b)]})}return n})()}}]);