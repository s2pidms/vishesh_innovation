"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7418],{67418:(I,v,c)=>{c.r(v),c.d(v,{DirectCostModule:()=>V});var C=c(96814),o=c(1076),U=c(43818),f=c(25116),Z=c(61915),S=c(77609),t=c(65879),g=c(99328),y=c(99007),b=c(37285),P=c(88059),L=c(53421),h=c(83344),_=c(84231);function r(p,A){if(1&p){const e=t.EpF();t.TgZ(0,"a",37),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,n=t.oxw();return t.KtG(n.openConfirmModal(null==s?null:s._id,null==s?null:s.SKUNo))}),t._UZ(1,"i",38),t._uU(2," Delete "),t.qZA()}}function u(p,A){if(1&p){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(14,"td",25)(15,"div",26)(16,"span",27),t._uU(17),t.ALo(18,"companyCurrency"),t._UZ(19,"div",28),t.qZA(),t.TgZ(20,"span",29),t._uU(21),t.ALo(22,"number"),t.qZA()()(),t.TgZ(23,"td",25)(24,"div",26)(25,"span",27),t._uU(26),t.ALo(27,"companyCurrency"),t._UZ(28,"div",28),t.qZA(),t.TgZ(29,"span",29),t._uU(30),t.ALo(31,"number"),t.qZA()()(),t.TgZ(32,"td",25)(33,"div",26)(34,"span",27),t._uU(35),t.ALo(36,"companyCurrency"),t._UZ(37,"div",28),t.qZA(),t.TgZ(38,"span",29),t._uU(39),t.ALo(40,"number"),t.qZA()()(),t.TgZ(41,"td",25)(42,"div",26)(43,"span",27),t._uU(44),t.ALo(45,"companyCurrency"),t._UZ(46,"div",28),t.qZA(),t.TgZ(47,"span",29),t._uU(48),t.ALo(49,"number"),t.qZA()()(),t.TgZ(50,"td")(51,"div",30),t._UZ(52,"button",31),t.TgZ(53,"div",32)(54,"a",33),t.NdJ("click",function(){const n=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.navigateTo("../form",n,"view"))}),t._UZ(55,"i",34),t._uU(56," View "),t.qZA(),t.TgZ(57,"a",33),t.NdJ("click",function(){const n=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.navigateTo("../form",n,"edit"))}),t._UZ(58,"i",35),t._uU(59," Edit "),t.qZA(),t.YNc(60,r,3,0,"a",36),t.qZA()()()()}if(2&p){const e=A.$implicit,i=t.MAs(4),s=t.MAs(8),n=t.oxw();t.xp6(2),t.Oqu(e.SKUNo),t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",e.SKUName),t.xp6(1),t.hij(" ",e.SKUName?e.SKUName:null," "),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("positionTarget",s)("ngbTooltip",e.SKUDescription),t.xp6(1),t.hij(" ",e.SKUDescription?e.SKUDescription:null," "),t.xp6(2),t.Oqu(t.lcZ(13,23,e.UOM)),t.xp6(5),t.hij(" ",t.lcZ(18,25,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(22,27,null==e?null:e.totalLabourCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(27,30,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(31,32,null==e?null:e.totalAssetCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(36,35,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(40,37,null==e?null:e.totalToolingCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(45,40,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(49,42,null==e?null:e.totalCostPerUnit,"1.2-2")," "),t.xp6(6),t.Q6J("accessType",n.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",n.rolePermissionActions.editAction),t.xp6(3),t.Q6J("ngIf",n.user==n.superAdminId)}}const l=function(p,A,e,i){return{page:p,pageSize:A,collection:e,search:i,type:"list"}};let m=(()=>{class p{constructor(e,i,s,n,d,x,K,M,j){this.exportExcelService=e,this.router=i,this.spinner=s,this.activatedRoute=n,this.directCostService=d,this.exportToPDFService=x,this.storageService=K,this.toastService=M,this.modalService=j,this.page=1,this.pageSize=8,this.collection=0,this.column="processId",this.direction=-1,this.search="",this.tableData=[],this.superAdminId=f.dA,this.user="",this.rolePermissionActions=f.a1}ngOnInit(){this.user=this.storageService.get("IDMSAUser")?.roles?.find(e=>e==this.superAdminId),this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(e=!1,i=""){this.spinner.show();let s={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:e};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.directCostService.getAll(s).subscribe(n=>{"EXCEL"==i?this.excelDownload(n.rows):"PDF"==i?this.pdfDownload(n.rows):(this.tableData=n.rows,this.collection=n.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(e,i,s){this.router.navigate([e],{relativeTo:this.activatedRoute,queryParams:{id:i?._id,action:s}})}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=e.value,this.getAll()}}trackByFn(e,i){return i?._id}pdfDownload(e){let i=(0,Z.sm)(e);this.exportToPDFService.generatePdf(i.tableData,i.title)}excelDownload(e){this.exportExcelService.exportExcel((0,Z.t8)(e))}onSort({column:e,direction:i}){this.headers.forEach(s=>{s.sortable!==e&&(s.direction="")}),this.column=e,this.direction="asc"==i?1:-1,this.getAll()}delete(e){this.spinner.show(),this.directCostService.delete(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.getAll()})}openConfirmModal(e,i){const s=this.modalService.open(S.hn,{centered:!0,size:"md",backdrop:"static",keyboard:!1});s.componentInstance.heading="Confirm Deletion",s.componentInstance.confirmText=`Confirm Deletion of SKU No. ${i} ?`,s.result.then(n=>{"Yes"==n.title&&this.delete(e)},n=>{})}static#t=this.\u0275fac=function(i){return new(i||p)(t.Y36(g.Ol),t.Y36(o.F0),t.Y36(g.V),t.Y36(o.gz),t.Y36(y.m$),t.Y36(g.$L),t.Y36(g.V1),t.Y36(g.kl),t.Y36(b.FF))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-list"]],viewQuery:function(i,s){if(1&i&&t.Gf(U.j,5),2&i){let n;t.iGM(n=t.CRH())&&(s.headers=n)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-3",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","totalLabourCostPerUnit",3,"sort"],["sortable","totalAssetCostPerUnit",3,"sort"],["sortable","totalToolingCostPerUnit",3,"sort"],["sortable","totalCostPerUnit",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],[1,"py-0","text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],[1,"vr","ms-3"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-primary"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Direct Cost Summary (by SKU)"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return s.navigateTo("../form",{},"create")}),t._uU(7," Direct Cost "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(d){return s.eventHeader(d)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(17,"SKU Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(19,"SKU Description"),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(23,"Labour Cost/Unit"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(25,"Asset Cost/Unit"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(27,"Tooling Cost/Unit"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(d){return s.onSort(d)}),t._uU(29,"Total Direct Process Cost/Unit"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,u,61,45,"tr",20),t.qZA()()()()),2&i&&(t.xp6(4),t.Q6J("accessType",s.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,l,s.page,s.pageSize,s.collection,s.search)),t.xp6(23),t.Q6J("ngForOf",s.tableData)("ngForTrackBy",s.trackByFn))},dependencies:[C.sg,C.O5,P.P,b._L,U.j,L.J,C.JJ,h.f,_.Q],encapsulation:2})}return p})();var a=c(60095),T=c(21631),D=c(22096),J=c(35469),N=c(9013),q=c(6244),O=c(16897),w=c(50363);function E(p,A){if(1&p){const e=t.EpF();t.TgZ(0,"div",35)(1,"button",36),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submit())}),t._uU(4,"Save"),t.qZA()()}}let k=(()=>{class p{get f(){return this.form.controls}constructor(e,i,s,n,d,x,K,M){this.activatedRoute=e,this.spinner=i,this.toastService=s,this.directCostService=n,this.validationService=d,this.modalService=x,this.location=K,this.utilityService=M,this.oldAssetAllocationData=[],this.labourOldAllocationData=[],this.SKUList=[],this.ESCPreviewArr=[],this.toolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.oldToolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.submitted=!1,this.action="create",this.toolingCAQty=0,this.masterData={autoIncrementNo:"",productCategories:[],processList:[]},this.form=new a.nJ({_id:new a.p4(null),directCostNo:new a.p4(null),productCategory:new a.p4(null,[a.kI.required]),SKU:new a.p4(null),SKUNo:new a.p4(null,[a.kI.required]),SKUName:new a.p4(null,[a.kI.required]),SKUDescription:new a.p4(null),UOM:new a.p4(null),totalLabourCostPerUnit:new a.p4(null,[a.kI.required]),totalAssetCostPerUnit:new a.p4(null,[a.kI.required]),totalToolingCostPerUnit:new a.p4(null,[a.kI.required]),totalCostPerUnit:new a.p4(null),directCostDetails:new a.p4([]),toolingCostDetails:new a.p4([])})}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.getInitialData()}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,J._r))return;this.form.enable();let e=this.form.value;e.directCostDetails=this.masterData?.processList,e.toolingCostDetails=this.toolingCostDetails,e._id?this.update(e):(delete e._id,this.create(e))}create(e){this.spinner.show(),this.directCostService.create(e).subscribe(i=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(i.message),this.location.back()})}update(e){this.spinner.show(),this.directCostService.update(e._id,e).subscribe(i=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(i.message),this.location.back()})}getInitialData(){this.spinner.show(),this.directCostService.getAllMasterData({}).subscribe(e=>{this.masterData=e,this.form.controls.directCostNo.setValue(this.masterData.autoIncrementNo),this.masterData.processList&&(this.labourOldAllocationData=JSON.parse(JSON.stringify(this.masterData.processList)),this.oldAssetAllocationData=JSON.parse(JSON.stringify(this.masterData.processList))),this.activatedRoute.queryParams.pipe((0,T.z)(i=>(this.action=i.action,this.utilityService.accessDenied(this.action),i.id?this.directCostService.getById(i.id):(0,D.of)({})))).subscribe(i=>{if(this.spinner.hide(),0==Object.keys(i).length)return;i.directCostDetails=i.directCostDetails;let s=this.masterData?.processList;this.masterData.processList=i.directCostDetails;for(const n of i.directCostDetails)s=s.filter(d=>d.processId!=n.processId),this.ESCPreviewArr=[...i.directCostDetails,...s],this.oldAssetAllocationData=[...i.directCostDetails,...s];this.toolingCostDetails=i.toolingCostDetails,this.form.patchValue(i),this.form.controls.productCategory.disable(),this.form.controls.SKUNo.disable(),this.form.controls.SKUName.disable(),"view"==this.action&&this.form.disable()})})}getSKUData(){this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.form.controls.SKU.setValue(null),this.form.controls.SKUNo.setValue(null),this.form.controls.SKUName.setValue(null),this.form.controls.SKUDescription.setValue(null),this.form.controls.UOM.setValue(null),this.form.controls.totalLabourCostPerUnit.setValue(null),this.form.controls.totalAssetCostPerUnit.setValue(null),this.form.controls.totalToolingCostPerUnit.setValue(null),this.form.controls.totalCostPerUnit.setValue(null);let e=this.form.controls.productCategory.value;this.spinner.show(),this.directCostService.getSKUData({category:e}).subscribe(i=>{i&&(this.SKUList=i?.SKUObj),this.masterData.processList=i.processList.length>0?JSON.parse(JSON.stringify(i?.processList)):JSON.parse(JSON.stringify(this.oldAssetAllocationData)),this.spinner.hide()})}setSKUDetails(e){this.form.controls.SKU.setValue(e?._id),this.directCostService.checkSKUExistsBySKUId(e?._id).subscribe(),this.form.controls.SKUNo.setValue(e?.SKUNo),this.form.controls.SKUName.setValue(e?.SKUName),this.form.controls.SKUDescription.setValue(e?.SKUDescription),this.form.controls.UOM.setValue(e?.primaryUnit),this.toolingCAQty=e?.toolingCAQty||0,this.masterData.processList=this.masterData?.processList.map(i=>(i.CAUnits=e?.processCAQty||0,i)),this.toolingCostDetails=this.toolingCostDetails.map(i=>(i.CAUnits=e?.toolingCAQty||0,i))}calTotalCostPerUnit(){this.form.controls.totalCostPerUnit.setValue(+((+this.form.controls.totalLabourCostPerUnit.value||0)+(+this.form.controls.totalAssetCostPerUnit.value||0)+(+this.form.controls.totalToolingCostPerUnit.value||0)).toFixed(2))}openLabourCostModal(){const e=this.modalService.open(N.Fm,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});e.componentInstance.action=this.action,e.componentInstance.processList=this.masterData?.processList,e.componentInstance.ESCPreviewArr=this.ESCPreviewArr,e.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,e.componentInstance.labourOldAllocationData=this.labourOldAllocationData,e.componentInstance.totalLabourCostPerUnit=this.form.controls.totalLabourCostPerUnit.value,e.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,e.result.then(i=>{i&&(this.masterData.processList=i?.processList,this.oldAssetAllocationData=i?.oldAssetAllocationData,this.form.controls.totalLabourCostPerUnit.setValue(i?.totalLabourCostPerUnit),this.form.controls.totalAssetCostPerUnit.setValue(i?.totalAssetCostPerUnit),this.calTotalCostPerUnit())},i=>{})}openAssetCostModal(){const e=this.modalService.open(N.Wo,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});e.componentInstance.action=this.action,e.componentInstance.processList=this.masterData?.processList,e.componentInstance.ESCPreviewArr=this.ESCPreviewArr,e.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,e.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,e.result.then(i=>{i&&(this.masterData.processList=i?.processList,this.oldAssetAllocationData=i?.oldAssetAllocationData,this.form.controls.totalAssetCostPerUnit.setValue(i?.totalAssetCostPerUnit),this.form.controls.totalLabourCostPerUnit.setValue(i?.totalLabourCostPerUnit),this.calTotalCostPerUnit())},i=>{})}openToolingCostModal(){const e=this.modalService.open(N.$6,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.toolingCostDetails=this.toolingCostDetails,e.componentInstance.ESCPreviewArr=this.ESCPreviewArr,e.componentInstance.toolingCAQty=this.toolingCAQty,e.componentInstance.totalToolingCostPerUnit=this.form.controls.totalToolingCostPerUnit.value,e.result.then(i=>{i&&(this.toolingCostDetails=i?.toolingCostDetails,this.form.controls.totalToolingCostPerUnit.setValue(i?.totalToolingCostPerUnit),this.calTotalCostPerUnit())},i=>{})}openProductCategoryModal(){const e=this.modalService.open(q.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.productCategoryList=this.masterData?.productCategories,e.componentInstance.productCategory=this.form.controls.productCategory.value,e.result.then(i=>{i&&(this.form.controls.productCategory.setValue(i?.selectedProductCategory),this.getSKUData())},i=>{})}static#t=this.\u0275fac=function(i){return new(i||p)(t.Y36(o.gz),t.Y36(g.V),t.Y36(g.kl),t.Y36(y.m$),t.Y36(O.RJ),t.Y36(b.FF),t.Y36(C.Ye),t.Y36(g.tI))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-form"]],decls:97,vars:23,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-5"],[1,"col-8","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","fs-4","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-4","ps-0"],["bindLabel","SKUNo","bindValue","SKUNo","formControlName","SKUNo",3,"items","clearable","change"],[1,"col-7","ps-0"],[1,"col-5","pe-1"],["bindLabel","SKUName","bindValue","SKUName","formControlName","SKUName",3,"items","clearable","change"],[1,"col-5","ps-4"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control"],[1,"col-2","ps-0"],["type","text","readonly","",1,"form-control",3,"value"],[1,"row","line-border"],[1,"row","mb-4","justify-content-center"],[1,"col-3"],[1,"input-group-text","text-secondary","combine-INR"],[1,"vr","ms-3"],["type","number","formControlName","totalLabourCostPerUnit","readonly","",1,"form-control","border-start-0"],[1,"plusIconSvg","btn","btn-primary","ms-1",2,"padding","1.4rem 1.4rem 1.4rem 1.4rem",3,"click"],["type","number","formControlName","totalAssetCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalToolingCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalCostPerUnit","readonly","",1,"form-control","border-start-0"],["class","col-12 text-center",4,"ngIf"],[1,"col-12","text-center"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Direct Cost (Labour, Asset & Tooling)"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",5)(10,"div",7)(11,"label",8),t._uU(12,"Product Category "),t.TgZ(13,"span",9),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11)(17,"ng-select",12),t.NdJ("change",function(){return s.getSKUData()}),t.qZA()(),t.TgZ(18,"div",13),t.NdJ("click",function(){return s.openProductCategoryModal()}),t._UZ(19,"i",14),t.qZA()()(),t.TgZ(20,"div",15)(21,"label",8),t._uU(22,"SKU No. "),t.TgZ(23,"span",9),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"ng-select",16),t.NdJ("change",function(d){return s.setSKUDetails(d)}),t.qZA()()()(),t.TgZ(26,"div",17)(27,"div",5)(28,"div",18)(29,"label",8),t._uU(30,"SKU Name "),t.TgZ(31,"span",9),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"ng-select",19),t.NdJ("change",function(d){return s.setSKUDetails(d)}),t.qZA()(),t.TgZ(34,"div",20)(35,"label",8),t._uU(36," SKU Description "),t._UZ(37,"span",9),t.qZA(),t._UZ(38,"input",21),t.qZA(),t.TgZ(39,"div",22)(40,"label",8),t._uU(41," UoM "),t._UZ(42,"span",9),t.qZA(),t._UZ(43,"input",23),t.ALo(44,"SalesUOMUnitMaster"),t.qZA()()()()(),t._UZ(45,"hr",24),t.TgZ(46,"div",25)(47,"div",26)(48,"label",8),t._uU(49,"Total Labour Cost/Unit "),t.TgZ(50,"span",9),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"div",10)(53,"span",27),t._uU(54),t.ALo(55,"companyCurrency"),t._UZ(56,"div",28),t.qZA(),t._UZ(57,"input",29),t.TgZ(58,"button",30),t.NdJ("click",function(){return s.openLabourCostModal()}),t.qZA()()(),t.TgZ(59,"div",26)(60,"label",8),t._uU(61,"Total Asset Cost/Unit "),t.TgZ(62,"span",9),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"div",10)(65,"span",27),t._uU(66),t.ALo(67,"companyCurrency"),t._UZ(68,"div",28),t.qZA(),t._UZ(69,"input",31),t.TgZ(70,"button",30),t.NdJ("click",function(){return s.openAssetCostModal()}),t.qZA()()(),t.TgZ(71,"div",26)(72,"label",8),t._uU(73,"Total Tooling Cost/Unit "),t.TgZ(74,"span",9),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",10)(77,"span",27),t._uU(78),t.ALo(79,"companyCurrency"),t._UZ(80,"div",28),t.qZA(),t._UZ(81,"input",32),t.TgZ(82,"button",30),t.NdJ("click",function(){return s.openToolingCostModal()}),t.qZA()()(),t.TgZ(83,"div",26)(84,"label",8),t._uU(85,"Total Direct Process Cost/Unit "),t.TgZ(86,"span",9),t._uU(87,"*"),t.qZA()(),t.TgZ(88,"div",10)(89,"span",27),t._uU(90),t.ALo(91,"companyCurrency"),t._UZ(92,"div",28),t.qZA(),t._UZ(93,"input",33),t.qZA()()(),t._UZ(94,"hr",24),t.TgZ(95,"div",5),t.YNc(96,E,5,0,"div",34),t.qZA()()()),2&i&&(t.Q6J("formGroup",s.form),t.xp6(17),t.Q6J("items",s.masterData.productCategories)("clearable",!1),t.xp6(8),t.Q6J("items",s.SKUList)("clearable",!1),t.xp6(8),t.Q6J("items",s.SKUList)("clearable",!1),t.xp6(10),t.s9C("value",t.lcZ(44,13,s.form.controls.UOM.value)),t.xp6(11),t.hij(" ",t.lcZ(55,15,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(67,17,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(79,19,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(91,21,"INR")," "),t.xp6(6),t.Q6J("ngIf","view"!==s.action))},dependencies:[C.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,w.w9,h.f,_.Q],encapsulation:2})}return p})();var F=c(19964),Q=c(56208);const R=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:m},{path:"form",component:k,resolve:{accessScreen:F.xr}}];let V=(()=>{class p{static#t=this.\u0275fac=function(i){return new(i||p)};static#e=this.\u0275mod=t.oAB({type:p});static#o=this.\u0275inj=t.cJS({imports:[C.ez,o.Bz.forChild(R),Q.m]})}return p})()},6244:(I,v,c)=>{c.d(v,{Z:()=>L});var C=c(43818),o=c(65879),U=c(37285),f=c(96814),Z=c(88059),S=c(95346);const t=function(){return["view","edit"]};function g(h,_){if(1&h){const r=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",24)(8,"span",25),o._uU(9),o.qZA()(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td")(13,"input",26),o.NdJ("change",function(){const m=o.CHM(r).$implicit,a=o.oxw();return o.KtG(a.setSelectData(m))}),o.qZA()()()}if(2&h){const r=_.$implicit,u=_.index,l=o.oxw();o.xp6(2),o.Oqu(1+u+(l.page-1)*l.pageSize),o.xp6(2),o.Oqu(null==r?null:r.productNumber),o.xp6(2),o.Oqu(null==r?null:r.productCode),o.xp6(2),o.Q6J("ngbTooltip",null==r?null:r.label),o.xp6(1),o.hij(" ",null!=r&&r.label?null==r?null:r.label:null," "),o.xp6(2),o.Oqu(null==r?null:r.application),o.xp6(2),o.MGl("name","formValue",l.productCategoryList[u],""),o.Q6J("disabled",o.DdM(9,t).includes(l.action))("checked",r.select)}}function y(h,_){1&h&&o._UZ(0,"hr",27)}function b(h,_){if(1&h){const r=o.EpF();o.TgZ(0,"div",28)(1,"button",29),o.NdJ("click",function(){o.CHM(r);const l=o.oxw();return o.KtG(l.dismissModel())}),o._uU(2,"Save & Close"),o.qZA()()}}const P=function(h,_,r,u){return{page:h,pageSize:_,collection:r,search:u,excelDisplay:"none"}};let L=(()=>{class h{constructor(r){this.activeModal=r,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(r=>(r.select=!1,r.value==this.productCategory&&(r.select=!0),r))),this.collection=this.productCategoryList.length}setSelectData(r){this.selectedProductCategory=r?.value}dismissModel(){let r={};r.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(r)}eventHeader(r){switch(r.key){case"SEARCH":this.search=r.value;break;case"EXCEL":default:break;case"PAGE":this.page=r.value}}onSort({column:r,direction:u}){this.headers.forEach(l=>{l.sortable!==r&&(l.direction="")}),this.productCategoryList=""===u||""===r?this.productCategoryList:[...this.productCategoryList].sort((l,m)=>{let a="string"==typeof l[r]?l[r].toLowerCase():l[r],T="string"==typeof m[r]?m[r].toLowerCase():m[r];const D=a<T?-1:a>T?1:0;return"asc"===u?D:-D})}static#t=this.\u0275fac=function(u){return new(u||h)(o.Y36(U.Kz))};static#e=this.\u0275cmp=o.Xpm({type:h,selectors:[["app-product-category-modal"]],viewQuery:function(u,l){if(1&u&&o.Gf(C.j,5),2&u){let m;o.iGM(m=o.CRH())&&(l.headers=m)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(u,l){1&u&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Product Category"),o.qZA(),o.TgZ(4,"div")(5,"button",3),o.NdJ("click",function(){return l.activeModal.close()}),o._UZ(6,"i",4),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),o.NdJ("dataChange",function(a){return l.eventHeader(a)}),o.qZA()(),o.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),o._uU(18,"Sr. No."),o.qZA(),o.TgZ(19,"th",15),o.NdJ("sort",function(a){return l.onSort(a)}),o._uU(20,"Product No."),o.qZA(),o.TgZ(21,"th",16),o.NdJ("sort",function(a){return l.onSort(a)}),o._uU(22,"Product Code"),o.qZA(),o.TgZ(23,"th",17),o.NdJ("sort",function(a){return l.onSort(a)}),o._uU(24," Display Name "),o.qZA(),o.TgZ(25,"th",18),o.NdJ("sort",function(a){return l.onSort(a)}),o._uU(26,"Application"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Select"),o.qZA()()(),o.TgZ(29,"tbody"),o.YNc(30,g,14,10,"tr",19),o.ALo(31,"slice"),o.ALo(32,"searchFi1ter"),o.qZA()()()()(),o.TgZ(33,"div",20)(34,"div",21),o.YNc(35,y,1,0,"hr",22),o.qZA()(),o.YNc(36,b,3,0,"div",23),o.qZA()()()),2&u&&(o.xp6(12),o.Q6J("data",o.l5B(11,P,l.page,l.pageSize,l.collection,l.search)),o.xp6(18),o.Q6J("ngForOf",o.Dn7(31,4,o.xi3(32,8,l.productCategoryList,l.search),(l.page-1)*l.pageSize,(l.page-1)*l.pageSize+l.pageSize)),o.xp6(5),o.Q6J("ngIf",!o.DdM(16,t).includes(l.action)),o.xp6(1),o.Q6J("ngIf",!o.DdM(17,t).includes(l.action)))},dependencies:[f.sg,f.O5,Z.P,U._L,C.j,f.OU,S.G],encapsulation:2})}return h})()}}]);