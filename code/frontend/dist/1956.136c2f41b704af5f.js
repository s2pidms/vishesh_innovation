"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1956],{1956:(R,p,d)=>{d.r(p),d.d(p,{SubModuleManagementModule:()=>w});var u=d(96814),g=d(1076),e=d(65879),_=d(37285),c=d(2742),h=d(88059),a=d(60095),b=d(95346);function M(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"input",18),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.isChecked=t)}),e.qZA()()()}if(2&i){const o=s.$implicit,n=s.index,t=e.oxw();e.xp6(2),e.Oqu(1+n+(t.page-1)*t.pageSize),e.xp6(2),e.hij(" ",null==o?null:o.displayRoleName," "),e.xp6(2),e.Q6J("ngModel",o.isChecked)}}const C=function(i,s,o,n){return{page:i,pageSize:s,collection:o,search:n,excelDisplay:"none"}};let f=(()=>{var i;class s{constructor(n,t){this.activeModal=n,this.toastService=t,this.action="",this.roles=[],this.roleNames=[],this.page=1,this.pageSize=6,this.collection=0,this.search="",this.column="createdAt",this.direction=-1}ngOnInit(){if(this.roleNames=this.roleNames.map(n=>(n.isChecked=!0,n)),this.collection=this.roleNames.length,this.roles&&this.roles.length>0)for(const n of this.roleNames)this.roles.includes(n._id)&&(n.isChecked=!1)}deleteTableRow(n){this.roleNames.length>1&&this.roleNames.splice(n+(this.page-1)*this.pageSize,1),this.collection=this.roleNames.length}addTableRow(n,t){t.role?(this.roleNames.push({role:""}),this.collection=this.roleNames.length):this.toastService.warning("Role is required")}dismissModel(){this.activeModal.close(this.roleNames.filter(n=>!n.isChecked).map(n=>n._id))}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}}return(i=s).\u0275fac=function(n){return new(n||i)(e.Y36(_.Kz),e.Y36(c.kl))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-sub-module-roll"]],inputs:{action:"action",roles:"roles",roleNames:"roleNames"},decls:29,vars:14,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","mt-4"],[1,"px-5"],[3,"data","dataChange"],[1,"table-responsive","mt-0","text-wrap","px-5",2,"min-height","23rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"line-border"],[1,"text-center","mt-1","mb-3"],["type","button",1,"btn","bg-primary","px-5",3,"click"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Add Role"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.dismissModel()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"app-setting-header",8),e.NdJ("dataChange",function(l){return t.eventHeader(l)}),e.qZA()(),e.TgZ(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr",12)(15,"th"),e._uU(16,"Sr No."),e.qZA(),e.TgZ(17,"th",13),e._uU(18,"Roles"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Action"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,M,7,3,"tr",14),e.ALo(23,"slice"),e.ALo(24,"searchFi1ter"),e.qZA()()(),e._UZ(25,"hr",15),e.TgZ(26,"div",16)(27,"button",17),e.NdJ("click",function(){return t.dismissModel()}),e._uU(28,"Save & Close"),e.qZA()()()()()),2&n&&(e.xp6(10),e.Q6J("data",e.l5B(9,C,t.page,t.pageSize,t.collection,t.search)),e.xp6(12),e.Q6J("ngForOf",e.Dn7(23,2,e.xi3(24,6,t.roleNames,t.search),(t.page-1)*t.pageSize,(t.page-1)*t.pageSize+t.pageSize)))},dependencies:[u.sg,h.P,a.Wl,a.JJ,a.On,u.OU,b.G],encapsulation:2}),s})();var v=d(31384);function Z(i,s){if(1&i&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&i){const o=s.$implicit;e.Q6J("value",o._id),e.xp6(1),e.hij(" ",null==o?null:o.title," ")}}function T(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"tr",41)(1,"td")(2,"div",27)(3,"input",28),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.order=t)}),e.qZA()()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td")(7,"div",27)(8,"input",29),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.displayName=t)}),e.qZA()()(),e.TgZ(9,"td")(10,"input",30),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.disabled=t)}),e.qZA()(),e.TgZ(11,"td")(12,"input",30),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.isDisplay=t)}),e.qZA()()()}if(2&i){const o=s.$implicit;e.xp6(3),e.Q6J("ngModel",o.order),e.xp6(2),e.hij(" ",o.title," "),e.xp6(3),e.Q6J("ngModel",o.displayName),e.xp6(2),e.Q6J("ngModel",o.disabled),e.xp6(2),e.Q6J("ngModel",o.isDisplay)}}function x(i,s){if(1&i&&(e.ynx(0,22),e.TgZ(1,"tr")(2,"td",37)(3,"div",38)(4,"table",39),e.YNc(5,T,13,5,"tr",40),e.qZA()()()(),e.BQk()),2&i){const o=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",o.items)}}function S(i,s){if(1&i){const o=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td")(3,"div",27)(4,"input",28),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.order=t)}),e.qZA()()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",27)(9,"input",29),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.displayName=t)}),e.qZA()()(),e.TgZ(10,"td")(11,"input",30),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.disabled=t)}),e.qZA()(),e.TgZ(12,"td")(13,"input",30),e.NdJ("ngModelChange",function(t){const l=e.CHM(o).$implicit;return e.KtG(l.isDisplay=t)}),e.qZA()(),e.TgZ(14,"td")(15,"div",27)(16,"button",31),e.NdJ("click",function(){const r=e.CHM(o).$implicit,l=e.oxw(2);return e.KtG(l.openRollsModal(r))}),e._uU(17," Add Role "),e.qZA()()(),e.TgZ(18,"td")(19,"div",32),e._UZ(20,"button",33),e.TgZ(21,"div",34)(22,"a",35),e.NdJ("click",function(){const r=e.CHM(o).$implicit,l=e.oxw(2);return e.KtG(l.deleteModule(r._id))}),e._UZ(23,"i",36),e._uU(24," Delete "),e.qZA()()()()(),e.YNc(25,x,6,1,"ng-container",18),e.BQk()}if(2&i){const o=s.$implicit;e.xp6(4),e.Q6J("ngModel",o.order),e.xp6(2),e.hij(" ",o.title," "),e.xp6(3),e.Q6J("ngModel",o.displayName),e.xp6(2),e.Q6J("ngModel",o.disabled),e.xp6(2),e.Q6J("ngModel",o.isDisplay),e.xp6(12),e.Q6J("ngIf",o.items.length>0)}}function A(i,s){if(1&i&&(e.TgZ(0,"div",22)(1,"table",23)(2,"thead",24)(3,"tr",25)(4,"th"),e._uU(5,"Order"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Display Name"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Disabled"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Is Display"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,S,26,6,"ng-container",26),e.qZA()()()),2&i){const o=e.oxw();e.xp6(19),e.Q6J("ngForOf",o.subModuleData)}}function N(i,s){1&i&&e._UZ(0,"hr",42)}const y=function(i){return{"d-none":i}};function F(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"div",44)(1,"button",45),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.reset())}),e._uU(2,"Reset"),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.submit())}),e._uU(4,"Save"),e.qZA()()}if(2&i){const o=e.oxw(2);e.Q6J("ngClass",e.VKq(1,y,"View"==o.action))}}function J(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F,5,3,"div",43),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngIf","view"!=o.action)}}let q=(()=>{var i;class s{constructor(n,t,r,l,m){this.subModulesService=n,this.spinner=t,this.toastService=r,this.appGlobalService=l,this.modalService=m,this.submitted=!1,this.action="create",this.roles=[],this.moduleNames=[],this.tableData=[],this.roleNames=[],this.view="",this.type="",this.module="",this.subModuleData=[],this.existingRoles=[]}ngOnInit(){this.appGlobalService.getData(["menuItems"]).subscribe(n=>{this.moduleNames=n.menuItems})}reset(){this.type="",this.module="",this.subModuleData=[]}submit(){this.spinner.show(),this.subModuleData=this.subModuleData,this.subModulesService.update(this.subModuleData).subscribe(n=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(n.message),this.reset()})}deleteModule(n){this.spinner.show(),this.subModulesService.delete(n).subscribe(t=>{this.spinner.hide(),this.toastService.success(t.message),this.reset()})}getFilterData(){this.module?this.type?(this.spinner.show(),this.subModulesService.getAll({menuID:this.module,tabType:this.type,display:null,subItemsFilter:"no"}).subscribe(t=>{this.subModuleData=t?.rows,this.roleNames=t?.roles.map(r=>(r.isChecked=!0,r))}),this.spinner.hide()):this.toastService.warning("Types is Required !"):this.toastService.warning("Module Name is Required !")}openRollsModal(n){const t=this.modalService.open(f,{centered:!0,backdrop:"static",keyboard:!1,size:"lg"});t.componentInstance.action=this.action,t.componentInstance.roleNames=this.roleNames,t.componentInstance.roles=n.roles,t.result.then(r=>{if(r){let l=this.subModuleData.map(m=>m._id).indexOf(n._id);console.log("success",r),this.subModuleData[l].roles=r}},r=>{})}}return(i=s).\u0275fac=function(n){return new(n||i)(e.Y36(v.M5),e.Y36(c.V),e.Y36(c.kl),e.Y36(c.P0),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sub-module-form"]],decls:40,vars:6,consts:[[1,"formCard","card","mb-4"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label"],[1,"text-danger"],[1,"form-select",3,"ngModel","ngModelChange"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["value","MASTER"],["value","TRANSACTION"],["value","REPORT"],[1,"col-auto","align-self-end","ps-3","pe-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-auto","align-self-end","ps-3"],["class","table-responsive",4,"ngIf"],["class","row line-border",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"table-responsive"],[1,"table","table-bordered","mt-4"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelChange"],["type","text",1,"form-control","form-control-smm","w-25",3,"ngModel","ngModelChange"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","py-0",3,"click"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","me-2","text-primary"],["colspan","7"],[1,"card","sub-menu-card"],[1,"table","align-middle"],["class","",4,"ngFor","ngForOf"],[1,""],[1,"row","line-border"],["class","d-grid gap-2 d-md-flex justify-content-md-center mb-3",3,"ngClass",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center","mb-3",3,"ngClass"],["type","button",1,"btn","bg-primary","px-5","me-3",3,"click"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5,"Module "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10," Module Name "),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA()(),e.TgZ(13,"select",9),e.NdJ("ngModelChange",function(l){return t.module=l}),e.TgZ(14,"option",10),e._uU(15,"Select Module Name"),e.qZA(),e.YNc(16,Z,2,2,"option",11),e.qZA()(),e.TgZ(17,"div",6)(18,"label",7),e._uU(19," Types "),e.TgZ(20,"span",8),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"select",9),e.NdJ("ngModelChange",function(l){return t.type=l}),e.TgZ(23,"option",10),e._uU(24,"Select Type"),e.qZA(),e.TgZ(25,"option",12),e._uU(26,"Master"),e.qZA(),e.TgZ(27,"option",13),e._uU(28,"Transaction"),e.qZA(),e.TgZ(29,"option",14),e._uU(30,"Reports"),e.qZA()()(),e.TgZ(31,"div",15)(32,"button",16),e.NdJ("click",function(){return t.getFilterData()}),e._uU(33,"Apply Filter"),e.qZA()(),e.TgZ(34,"div",17)(35,"button",16),e.NdJ("click",function(){return t.reset()}),e._uU(36,"Reset Filter"),e.qZA()()()(),e.YNc(37,A,20,1,"div",18),e.YNc(38,N,1,0,"hr",19),e.YNc(39,J,2,1,"div",20),e.qZA()()),2&n&&(e.xp6(13),e.Q6J("ngModel",t.module),e.xp6(3),e.Q6J("ngForOf",t.moduleNames),e.xp6(6),e.Q6J("ngModel",t.type),e.xp6(15),e.Q6J("ngIf",t.subModuleData.length>0),e.xp6(1),e.Q6J("ngIf",t.subModuleData.length>0),e.xp6(1),e.Q6J("ngIf",t.subModuleData.length>0))},dependencies:[u.mk,u.sg,u.O5,a.YN,a.Kr,a.Fj,a.wV,a.Wl,a.EJ,a.JJ,a.On],styles:[".form-control-smm[_ngcontent-%COMP%]{margin:0!important;height:2.9rem!important;width:25rem!important;text-align:center!important;box-shadow:#00000059 0 2px 5px!important}.sub-menu-card[_ngcontent-%COMP%]{box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px;background-color:#e3f7ff!important}.sub-menu-card[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0}.sub-menu-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.1rem!important;max-width:28rem;word-wrap:break-word;border:.55px solid rgb(181,180,180)}"]}),s})();var k=d(56208);const U=[{path:"form",component:q}];let w=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,g.Bz.forChild(U),k.m]}),s})()}}]);