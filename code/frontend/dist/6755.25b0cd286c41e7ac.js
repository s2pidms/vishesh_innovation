"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6755],{6755:(w,h,l)=>{l.r(h),l.d(h,{JobWorkOrderModule:()=>ue});var u=l(96814),b=l(1076),n=l(60095),T=l(78944),y=l(66929),e=l(65879),c=l(37285);let k=(()=>{class i{constructor(t){this.activeModal=t,this.primaryAddress={},this.action="",this.form=new n.nJ({country:new n.p4(null),state:new n.p4(null),cityOrDistrict:new n.p4(null),pinCode:new n.p4(null),line1:new n.p4(null),line2:new n.p4(null),line3:new n.p4(null),line4:new n.p4(null)})}ngOnInit(){this.form.patchValue(this.primaryAddress),("view"==this.action||"cancel"==this.action||"approve"==this.action)&&this.form.disable()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(c.Kz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-job-work-order-address-modal"]],inputs:{primaryAddress:"primaryAddress",action:"action"},decls:57,vars:1,consts:[[3,"formGroup"],[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-5","mb-3"],[1,"row"],[1,"col-12","px-0"],[1,"row","mb-4","px-5"],[1,"col-6"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","line1","readonly","",1,"form-control"],["type","text","formControlName","line2","readonly","",1,"form-control"],["type","text","formControlName","line3","readonly","",1,"form-control"],["type","text","formControlName","line4","readonly","",1,"form-control"],["type","text","formControlName","cityOrDistrict","readonly","",1,"form-control"],["type","text","formControlName","state","readonly","",1,"form-control"],[1,"row","my-4","px-5"],["oninput","javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);","type","number","maxlength","6","formControlName","pinCode","readonly","",1,"form-control"],[1,"row","justify-content-between"],[1,"col"],["type","text","formControlName","country","readonly","",1,"form-control"]],template:function(o,r){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Address"),e.qZA(),e.TgZ(5,"div")(6,"button",4),e.NdJ("click",function(){return r.activeModal.close(r.form.value)}),e._UZ(7,"i",5),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),e._uU(14," Address Line 1 "),e._UZ(15,"span",12),e.qZA(),e._UZ(16,"input",13),e.qZA(),e.TgZ(17,"div",10)(18,"label",11),e._uU(19," Address Line 2 "),e._UZ(20,"span",12),e.qZA(),e._UZ(21,"input",14),e.qZA()(),e.TgZ(22,"div",9)(23,"div",10)(24,"label",11),e._uU(25," Address Line 3 "),e._UZ(26,"span",12),e.qZA(),e._UZ(27,"input",15),e.qZA(),e.TgZ(28,"div",10)(29,"label",11),e._uU(30," Address Line 4 "),e._UZ(31,"span",12),e.qZA(),e._UZ(32,"input",16),e.qZA()(),e.TgZ(33,"div",9)(34,"div",10)(35,"label",11),e._uU(36," City/District "),e._UZ(37,"span",12),e.qZA(),e._UZ(38,"input",17),e.qZA(),e.TgZ(39,"div",10)(40,"label",11),e._uU(41," State/Province "),e._UZ(42,"span",12),e.qZA(),e._UZ(43,"input",18),e.qZA()(),e.TgZ(44,"div",19)(45,"div",10)(46,"label",11),e._uU(47," Pin Code "),e._UZ(48,"span",12),e.qZA(),e._UZ(49,"input",20),e.qZA(),e.TgZ(50,"div",10)(51,"div",21)(52,"div",22)(53,"label",11),e._uU(54,"Country "),e._UZ(55,"span",12),e.qZA(),e._UZ(56,"input",23),e.qZA()()()()()()()()()),2&o&&e.Q6J("formGroup",r.form)},dependencies:[n._Y,n.Fj,n.wV,n.JJ,n.JL,n.nD,n.sg,n.u],encapsulation:2})}return i})();var C=l(43154),f=l(16897);function R(i,d){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function O(i,d){if(1&i&&(e.TgZ(0,"div",18)(1,"select",32)(2,"option",20),e._uU(3,"Select Payment Terms"),e.qZA(),e.YNc(4,R,2,2,"option",21),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",t.SOTermsArr.paymentTermsArr)}}function Z(i,d){1&i&&(e.TgZ(0,"div",18),e._UZ(1,"input",34),e.qZA())}function S(i,d){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.Q6J("value",t.parameterName),e.xp6(1),e.hij(" ",t.parameterLabel," ")}}function A(i,d){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function q(i,d){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function M(i,d){1&i&&e._UZ(0,"hr",35)}function W(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.dismissModel())}),e._uU(1," Save "),e.qZA()}}const v=function(){return["create"]};let J=(()=>{class i{get f(){return this.form.controls}constructor(t,o){this.activeModal=t,this.validationService=o,this.action="",this.POTerms={},this.SOTermsArr={},this.SOTermsData={},this.otherCharges={},this.clickCount=1,this.showSelect=!1,this.form=new n.nJ({paymentTerms:new n.p4(null,[n.kI.required]),frightTerms:new n.p4("FOR - Free On Road"),transporter:new n.p4(null,[n.kI.required]),destination:new n.p4(null,[n.kI.required]),modeOfTransport:new n.p4(null,[n.kI.required])})}ngOnInit(){this.SOTermsArr?.paymentTermsArr.some(o=>o.label==this.SOTermsData.changedPaymentTerms)||(this.showSelect=!0,this.clickCount=0),"create"==this.action&&(this.showSelect=!1,this.clickCount=1),this.form.patchValue(this.SOTermsData),["approval","rejection","view","generate","cancel"].includes(this.action)&&this.form.disable()}dismissModel(){this.validationService.checkErrors(this.form,C.RS)||this.activeModal.close(this.form.value)}enablePaymentTerms(){this.clickCount++,this.showSelect=this.clickCount%2==0}enableFreightTerms(){["create","edit"].includes(this.action)&&this.form.controls.frightTerms.enable()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(c.Kz),e.Y36(f.RJ))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-review-wo-terms-modal"]],inputs:{action:"action",POTerms:"POTerms",SOTermsArr:"SOTermsArr",SOTermsData:"SOTermsData",otherCharges:"otherCharges"},decls:78,vars:14,consts:[[3,"formGroup"],[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-10","px-5","mt-5"],[1,"row"],[1,"col-3","mt-1","pe-0"],[1,"form-label"],[1,"text-danger"],[1,"col-auto","mt-1","px-0"],[1,"fa","fa-caret-right","text-secondary"],["class","col-7 ps-0",4,"ngIf"],[1,"col-1","assetChange","mt-1","pointer",3,"click"],[1,"row","mt-5"],[1,"col-7","ps-0"],["type","text","formControlName","frightTerms",1,"form-select","fs-5"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-1","ps-0"],[1,"form-label","text-nowrap"],[1,"fa","fa-caret-right","mt-1","text-secondary"],["type","text","formControlName","modeOfTransport",1,"form-select","fs-5"],["type","text","formControlName","transporter",1,"form-select","fs-5"],["type","text","formControlName","destination",1,"form-control"],[1,"col","px-0","mt-5","mb-4"],["class","line-border",4,"ngIf"],[1,"text-center","my-2"],["class","btn bg-primary px-5 mb-4","type","button",3,"click",4,"ngIf"],["type","text","formControlName","paymentTerms",1,"form-select","fs-5"],[3,"value"],["type","text","formControlName","paymentTerms",1,"form-control"],[1,"line-border"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(o,r){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Review WO Terms"),e.qZA(),e.TgZ(5,"div")(6,"button",4),e.NdJ("click",function(){return r.activeModal.close(null)}),e._UZ(7,"i",5),e.qZA()()(),e.TgZ(8,"form",0)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),e._uU(15,"Payment Terms "),e.TgZ(16,"span",12),e._uU(17,"*"),e.qZA()()(),e.TgZ(18,"div",13),e._UZ(19,"i",14),e.qZA(),e.YNc(20,O,5,2,"div",15),e.YNc(21,Z,2,0,"div",15),e.TgZ(22,"div",16),e.NdJ("click",function(){return r.enablePaymentTerms()}),e.qZA()(),e.TgZ(23,"div",17)(24,"div",10)(25,"label",11),e._uU(26," Freight Terms "),e.TgZ(27,"span",12),e._uU(28,"*"),e.qZA()()(),e.TgZ(29,"div",13),e._UZ(30,"i",14),e.qZA(),e.TgZ(31,"div",18)(32,"select",19)(33,"option",20),e._uU(34,"Select Freight Terms"),e.qZA(),e.YNc(35,S,2,2,"option",21),e.qZA()(),e._UZ(36,"div",22),e.qZA(),e.TgZ(37,"div",17)(38,"div",10)(39,"label",23),e._uU(40,"Mode of transport "),e.TgZ(41,"span",12),e._uU(42,"*"),e.qZA()()(),e.TgZ(43,"div",13),e._UZ(44,"i",24),e.qZA(),e.TgZ(45,"div",18)(46,"select",25)(47,"option",20),e._uU(48,"Select Mode of transport"),e.qZA(),e.YNc(49,A,2,2,"option",21),e.qZA()()(),e.TgZ(50,"div",17)(51,"div",10)(52,"label",23),e._uU(53,"Transporter Name "),e.TgZ(54,"span",12),e._uU(55,"*"),e.qZA()()(),e.TgZ(56,"div",13),e._UZ(57,"i",14),e.qZA(),e.TgZ(58,"div",18)(59,"select",26)(60,"option",20),e._uU(61,"Select Transporter Name"),e.qZA(),e.YNc(62,q,2,2,"option",21),e.qZA()()(),e.TgZ(63,"div",17)(64,"div",10)(65,"label",23),e._uU(66,"Destination/Port "),e.TgZ(67,"span",12),e._uU(68,"*"),e.qZA()()(),e.TgZ(69,"div",13),e._UZ(70,"i",14),e.qZA(),e.TgZ(71,"div",18),e._UZ(72,"input",27),e.qZA()()()(),e.TgZ(73,"div",9)(74,"div",28),e.YNc(75,M,1,0,"hr",29),e.qZA()(),e.TgZ(76,"div",30),e.YNc(77,W,2,0,"button",31),e.qZA()()()()()),2&o&&(e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("formGroup",r.form),e.xp6(12),e.Q6J("ngIf",!r.showSelect),e.xp6(1),e.Q6J("ngIf",r.showSelect),e.xp6(12),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.SOTermsArr.freightTerms),e.xp6(12),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.SOTermsArr.modeOfTransport),e.xp6(11),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.SOTermsArr.transporterArr),e.xp6(13),e.Q6J("ngIf",e.DdM(12,v).includes(r.action)),e.xp6(2),e.Q6J("ngIf",e.DdM(13,v).includes(r.action)))},dependencies:[u.sg,u.O5,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.sg,n.u],styles:[".fa-caret-right[_ngcontent-%COMP%]{font-size:2rem!important;margin-right:2rem!important;margin-left:2rem!important}.assetChange[_ngcontent-%COMP%]{background-color:transparent;background-size:100% 100%;border:0;color:#fff;height:2.2rem;width:2.2rem}"]})}return i})();var g=l(77203);const N=[{label:"JW Code",value:"jobWorkerCode",class:""},{label:"Job Worker Name",value:"jobWorkerName",class:""},{label:"Currency",value:"currency",class:""},{label:"State/Province",value:"state",class:""},{label:"city/District",value:"cityOrDistrict",class:""},{label:"PinCode",value:"pinCode",class:""}],I=[{label:"Service Code",value:"serviceCode",class:""},{label:"Service Description",value:"serviceDescription",class:""},{label:"GST",value:"gst",class:""},{label:"IGST",value:"igst",class:""},{label:"SGST",value:"sgst",class:""},{label:"CGST",value:"cgst",class:""}],H=[{label:"JW Code",value:"jobWorkerCode",class:""},{label:"Job Worker Name",value:"label",class:""},{label:"Currency",value:"currency",class:""},{label:"State/Province",value:"state",class:""},{label:"city/District",value:"cityOrDistrict",class:""},{label:"PinCode",value:"pinCode",class:""}];var Q=l(21631),L=l(22096),_=l(37398),p=l(2742);let F=(()=>{class i{constructor(t){this.http=t,this.routes={createPath:"/purchase/jobWorkOrder/create",getAllPath:"/purchase/jobWorkOrder/getAll",getAllMasterDataPath:"/purchase/jobWorkOrder/getAllMasterData",updatePath:o=>`/purchase/jobWorkOrder/update/${o}`,getByIdPath:o=>`/purchase/jobWorkOrder/getById/${o}`,getJWItemsByJobWorkerPath:o=>`/purchase/jobWorkOrder/getJWItemsByJobWorker/${o}`,deletePath:o=>`/purchase/jobWorkOrder/delete/${o}`}}create(t){return this.http.post(this.routes.createPath,t).pipe((0,_.U)(o=>o))}getAll(t){return this.http.get(this.routes.getAllPath,t).pipe((0,_.U)(o=>o))}getAllMasterData(t){return this.http.get(this.routes.getAllMasterDataPath,t).pipe((0,_.U)(o=>o))}update(t,o){return this.http.put(this.routes.updatePath(t),o).pipe((0,_.U)(r=>r))}getById(t){return this.http.get(this.routes.getByIdPath(t)).pipe((0,_.U)(o=>o))}delete(t){return this.http.delete(this.routes.deletePath(t)).pipe((0,_.U)(o=>o))}getJWItemsByJobWorker(t){return this.http.get(this.routes.getJWItemsByJobWorkerPath(t)).pipe((0,_.U)(o=>o))}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(p.sM))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Y=l(50363),V=l(83344);function K(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"span",46)(1,"i",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,s=e.oxw();return e.KtG(s.removePlace(r))}),e.qZA()()}}function B(i,d){if(1&i&&(e.TgZ(0,"option",67),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.Q6J("value",t.parameterName),e.xp6(1),e.hij(" ",t.parameterLabel," ")}}const m=function(){return{standalone:!0}};function $(i,d){if(1&i){const t=e.EpF();e.ynx(0,48),e.TgZ(1,"div",5)(2,"div",6)(3,"label",49),e._uU(4,"Job Work Service Code "),e.TgZ(5,"span",9),e._uU(6," *"),e.qZA()(),e.TgZ(7,"div",16)(8,"div",17)(9,"ng-select",50),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.jobWorkService=r)})("change",function(r){e.CHM(t);const s=e.oxw().index,a=e.oxw();return e.KtG(a.setServiceInfo(r,s))}),e.qZA()(),e.TgZ(10,"div",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openJobWorkServiceMasterDetailsModal())}),e._UZ(11,"i",20),e.qZA()()(),e.TgZ(12,"div",6)(13,"label",14),e._uU(14," Nature of Job Work"),e.TgZ(15,"span",9),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"input",52),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.SACInfo.natureOfJobWork=r)}),e.qZA()(),e.TgZ(18,"div",6)(19,"label",8),e._uU(20," SAC Code "),e.TgZ(21,"span",9),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"input",52),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.SACInfo.SACCode=r)}),e.qZA()(),e.TgZ(24,"div",6)(25,"label",8),e._uU(26," GST Rate % "),e.TgZ(27,"span",9),e._uU(28,"*"),e.qZA()(),e.TgZ(29,"input",52),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.SACInfo.gstRate=r)}),e.qZA()()(),e.TgZ(30,"div",53)(31,"div",6)(32,"label",49),e._uU(33,"Job Work Item Code "),e.TgZ(34,"span",9),e._uU(35," *"),e.qZA()(),e.TgZ(36,"div",16)(37,"div",17)(38,"ng-select",54),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.jobWorkItem=r)})("change",function(r){e.CHM(t);const s=e.oxw().index,a=e.oxw();return e.KtG(a.setJobWorkItemInfo(r,s))}),e.qZA()(),e.TgZ(39,"div",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openJobWorkDetailsModal())}),e._UZ(40,"i",20),e.qZA()()(),e.TgZ(41,"div",6)(42,"label",14),e._uU(43," JW Item Name"),e.TgZ(44,"span",9),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"input",52),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.jobWorkItemName=r)}),e.qZA()(),e.TgZ(47,"div",6)(48,"label",8),e._uU(49," JW Item Description "),e.TgZ(50,"span",9),e._uU(51,"*"),e.qZA()(),e.TgZ(52,"input",52),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.jobWorkItemDescription=r)}),e.qZA()(),e.TgZ(53,"div",6)(54,"label",8),e._uU(55," Drawing No. "),e.TgZ(56,"span",9),e._uU(57,"*"),e.qZA()(),e.TgZ(58,"input",55),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.drawingNo=r)}),e.qZA()()(),e.TgZ(59,"div",53)(60,"div",6)(61,"label",8),e._uU(62," HSN Code "),e.TgZ(63,"span",9),e._uU(64,"*"),e.qZA()(),e.TgZ(65,"input",55),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.HSNCode=r)}),e.qZA()(),e.TgZ(66,"div",6)(67,"label",8),e._uU(68," UOM "),e.TgZ(69,"span",9),e._uU(70,"*"),e.qZA()(),e.TgZ(71,"input",55),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.UOM=r)}),e.qZA()(),e.TgZ(72,"div",6)(73,"label",8),e._uU(74," Process Rate Unit "),e.TgZ(75,"span",9),e._uU(76,"*"),e.qZA()(),e.TgZ(77,"div",35)(78,"span",56),e._uU(79),e.ALo(80,"companyCurrency"),e._UZ(81,"div",57),e.qZA(),e.TgZ(82,"input",58),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.processRatePerUnit=r)}),e.qZA()()(),e.TgZ(83,"div",6)(84,"label",14),e._uU(85," Discount %"),e.TgZ(86,"span",9),e._uU(87,"*"),e.qZA()(),e.TgZ(88,"select",59)(89,"option",60),e._uU(90,"Select Location"),e.qZA(),e.YNc(91,B,2,2,"option",61),e.qZA()()(),e.TgZ(92,"div",53)(93,"div",6)(94,"label",8),e._uU(95," Net Rate/Unit (After Discount) "),e.TgZ(96,"span",9),e._uU(97,"*"),e.qZA()(),e.TgZ(98,"div",35)(99,"span",62),e._uU(100),e.ALo(101,"companyCurrency"),e._UZ(102,"div",57),e.qZA(),e.TgZ(103,"input",63),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.netRatePerUnit=r)}),e.qZA()()(),e.TgZ(104,"div",6)(105,"label",8),e._uU(106," Quantity "),e.TgZ(107,"span",9),e._uU(108,"*"),e.qZA()(),e.TgZ(109,"input",64),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.quantity=r)}),e.qZA()(),e.TgZ(110,"div",6)(111,"label",8),e._uU(112," Taxable Value "),e.TgZ(113,"span",9),e._uU(114,"*"),e.qZA()(),e.TgZ(115,"div",35)(116,"span",62),e._uU(117),e.ALo(118,"companyCurrency"),e._UZ(119,"div",57),e.qZA(),e.TgZ(120,"input",65),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.taxableValue=r)}),e.qZA()()(),e.TgZ(121,"div",6)(122,"label",8),e._uU(123," Delivery Date "),e.TgZ(124,"span",9),e._uU(125,"*"),e.qZA()(),e.TgZ(126,"input",66),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.deliveryDate=r)}),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw().$implicit,o=e.oxw();e.xp6(9),e.Q6J("items",o.masterData.serviceMastersOptions)("clearable",!1)("ngModel",t.jobWorkService)("ngModelOptions",e.DdM(52,m)),e.xp6(8),e.Q6J("ngModel",t.SACInfo.natureOfJobWork)("ngModelOptions",e.DdM(53,m)),e.xp6(6),e.Q6J("ngModel",t.SACInfo.SACCode)("ngModelOptions",e.DdM(54,m)),e.xp6(6),e.Q6J("ngModel",t.SACInfo.gstRate)("ngModelOptions",e.DdM(55,m)),e.xp6(9),e.Q6J("items",o.jobWorkerItemsOptions)("clearable",!1)("ngModel",t.jobWorkItem)("ngModelOptions",e.DdM(56,m)),e.xp6(8),e.Q6J("ngModel",t.jobWorkItemName)("ngModelOptions",e.DdM(57,m)),e.xp6(6),e.Q6J("ngModel",t.jobWorkItemDescription)("ngModelOptions",e.DdM(58,m)),e.xp6(6),e.Q6J("ngModel",t.drawingNo)("ngModelOptions",e.DdM(59,m))("disabled","view"==o.action),e.xp6(7),e.Q6J("ngModel",t.HSNCode)("ngModelOptions",e.DdM(60,m))("disabled","view"==o.action),e.xp6(6),e.Q6J("ngModel",t.UOM)("ngModelOptions",e.DdM(61,m))("disabled","view"==o.action),e.xp6(8),e.hij(" ",e.lcZ(80,46,"INR")," "),e.xp6(3),e.Q6J("ngModel",t.processRatePerUnit)("ngModelOptions",e.DdM(62,m))("disabled","view"==o.action),e.xp6(7),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",o.masterData.jobWODiscountOptions),e.xp6(9),e.hij(" ",e.lcZ(101,48,"INR")," "),e.xp6(3),e.Q6J("ngModel",t.netRatePerUnit)("ngModelOptions",e.DdM(63,m))("disabled","view"==o.action),e.xp6(6),e.Q6J("ngModel",t.quantity)("ngModelOptions",e.DdM(64,m))("disabled","view"==o.action),e.xp6(8),e.hij(" ",e.lcZ(118,50,"INR")," "),e.xp6(3),e.Q6J("ngModel",t.taxableValue)("ngModelOptions",e.DdM(65,m)),e.xp6(6),e.Q6J("ngModel",t.deliveryDate)("ngModelOptions",e.DdM(66,m))("disabled","view"==o.action)}}function z(i,d){if(1&i&&(e.TgZ(0,"li",42)(1,"button",43),e._uU(2),e.YNc(3,K,2,0,"span",44),e.qZA(),e.YNc(4,$,127,67,"ng-template",45),e.qZA()),2&i){const t=d.index;e.Q6J("ngbNavItem",t),e.xp6(2),e.hij(" WO Line ",t+1," "),e.xp6(1),e.Q6J("ngIf",0!=t)}}function X(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",68)(1,"button",69),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reset())}),e._uU(2,"Reset"),e.qZA(),e.TgZ(3,"button",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e._uU(4,"Save"),e.qZA()()}}let ee=(()=>{class i{constructor(t,o,r,s,a,x,D,U,j){this.jobWorkOrderService=t,this.activatedRoute=o,this.spinner=r,this.toastService=s,this.validationService=a,this.modalService=x,this.location=D,this.utilityService=U,this.fb=j,this.submitted=!1,this.action="create",this.primaryAddress={},this.jobWorkerBankDetails=[],this.jobWorkerItemsOptions=[],this.jobWODetails=[{jobWorkService:null,jobWorkServiceCode:null,natureOfJobWork:null,SACInfo:{SACCode:null,natureOfJobWork:null,gstRate:null,igstRate:null,sgstRate:null,cgstRate:null,ugstRate:null},jobWorkItem:null,jobWorkItemCode:null,jobWorkItemName:null,jobWorkItemDescription:null,drawingNo:null,HSNInfo:{HSNCode:null,gstRate:null,igstRate:null,sgstRate:null,cgstRate:null,ugstRate:null},UOM:null,currency:null,processRatePerUnit:null,discountPercent:null,netRatePerUnit:null,quantity:null,taxableValue:null,deliveryDate:null}],this.selectedDetails={},this.selectedDetailsForServiceJWO={},this.selectedDetailsOfJobCardItem={},this.jobWorkerOptions=[],this.active=0,this.cpaPurchaseAgreement=null,this.statesOfIndia=T.F,this.tableHead=N,this.tableHeadServiceMaster=I,this.tableHeadJWItemMaster=H,this.masterData={autoIncrementNo:"",jobWorkerOptions:[],jobWODiscountOptions:[],serviceMastersOptions:[],paymentTermsOptions:[],purchaseCountryOptions:[]},this.tabs=[1,2,3,4,5],this.counter=this.tabs.length+1,this.form=this.fb.group({_id:[null],WONo:[null,[n.kI.required]],WODate:[null],jobWorker:[null],jobWorkerName:[null],orderReference:[null],placeOfSupply:[null],WODetails:this.fb.group([{jobWorkService:[null],jobWorkServiceCode:[null],natureOfJobWork:[null],SACInfo:new n.nJ({SACCode:new n.p4(null),natureOfJobWork:new n.p4(null),gstRate:new n.p4(null),igstRate:new n.p4(null),sgstRate:new n.p4(null),cgstRate:new n.p4(null),ugstRate:new n.p4(null)}),HSNInfo:new n.nJ({HSNCode:new n.p4(null),gstRate:new n.p4(null),igstRate:new n.p4(null),sgstRate:new n.p4(null),cgstRate:new n.p4(null),ugstRate:new n.p4(null)}),jobWorkItem:[null],jobWorkItemCode:[null],jobWorkItemName:[null],jobWorkItemDescription:[null],drawingNo:[null],HSNCode:[null],UOM:[null],currency:[null],processRatePerUnit:[null],discountPercent:[null],netRatePerUnit:[null],quantity:[null],taxableValue:[null],deliveryDate:[null]}]),WOTaxableValue:[null]})}close(t,o){this.tabs=this.tabs.filter(r=>r!==o),t.preventDefault(),t.stopImmediatePropagation()}add(t){this.tabs.push(this.counter++),t.preventDefault()}get f(){return this.form.controls}newJobWODetails(){this.jobWODetails.push({jobWorkService:null,jobWorkServiceCode:null,SACInfo:{SACCode:null,natureOfJobWork:null,gstRate:null,igstRate:null,sgstRate:null,cgstRate:null,ugstRate:null},jobWorkItem:null,jobWorkItemCode:null,jobWorkItemName:null,jobWorkItemDescription:null,drawingNo:null,HSNInfo:{HSNCode:null,gstRate:null,igstRate:null,sgstRate:null,cgstRate:null,ugstRate:null},UOM:null,currency:null,processRatePerUnit:null,discountPercent:null,netRatePerUnit:null,quantity:null,taxableValue:null,deliveryDate:null})}addPlace(){if(["edit","create"].includes(this.action)){let t=this.jobWODetails.length-1,o={};-1!=t&&(o=this.jobWODetails[t]),this.newJobWODetails(),this.active=this.jobWODetails.length-1}}setJobWorker(t){this.f.jobWorkerName.setValue(t?.jobWorkerName),this.f.placeOfSupply.setValue(t?.state),this.primaryAddress=t?.primaryAddress,this.spinner.show(),this.jobWorkOrderService.getJWItemsByJobWorker(t?.jobWorker).subscribe(o=>{this.spinner.hide(),this.jobWorkerItemsOptions=o?.JWItemsOptions})}setServiceInfo(t,o){this.jobWODetails[o].jobWorkServiceCode=t?.serviceCode,this.jobWODetails[o].SACInfo.SACCode=t?.sacCode,this.jobWODetails[o].SACInfo.natureOfJobWork=t?.serviceDescription,this.jobWODetails[o].SACInfo.gstRate=t?.gst,this.jobWODetails[o].SACInfo.igstRate=t?.igst,this.jobWODetails[o].SACInfo.sgstRate=t?.sgst,this.jobWODetails[o].SACInfo.cgstRate=t?.cgst,this.jobWODetails[o].SACInfo.ugstRate=t?.ugst,console.log("   this.jobWODetails[index]",this.jobWODetails[o])}setJobWorkItemInfo(t,o){this.jobWODetails[o].jobWorkItemDescription=t?.jobWorkItemDescription,this.jobWODetails[o].jobWorkItemCode=t?.jobWorkItemCode,this.jobWODetails[o].jobWorkItemName=t?.jobWorkItemName}removePlace(t){["edit","create"].includes(this.action)&&(this.jobWODetails.splice(t,1),t==this.active&&(this.active=this.jobWODetails.length-1))}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,y.we))return;let t=this.form.value;t.WODetails=this.jobWODetails,t._id?this.update(t._id,t):(delete t._id,this.create(t))}create(t){this.spinner.show(),this.jobWorkOrderService.create(t).subscribe(o=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(o.message),this.location.back()})}update(t,o){this.spinner.show(),this.jobWorkOrderService.update(t,o).subscribe(r=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(r.message),this.location.back()})}getInitialData(){this.spinner.show(),this.jobWorkOrderService.getAllMasterData({}).subscribe(t=>{this.masterData=t,this.form.controls.WONo.setValue(this.masterData.autoIncrementNo),this.activatedRoute.queryParams.pipe((0,Q.z)(o=>(this.action=o.action,this.utilityService.accessDenied(this.action),o.id?this.jobWorkOrderService.getById(o.id):(0,L.of)({})))).subscribe(o=>{this.spinner.hide(),0!=Object.keys(o).length&&(this.form.patchValue(o),"edit"!=this.action&&this.form.disable())})})}trackByFn(t,o){return o?._id}openAddressModal(){const t=this.modalService.open(k,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.primaryAddress=this.primaryAddress,t.result.then(o=>{o&&["create","edit"].includes(this.action)},o=>{})}openJobWorkDetailsModal(){if("create"==this.action){const t=this.modalService.open(g.xv,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.title="Job Work Details",t.componentInstance.selectedDetails=this.selectedDetails,t.componentInstance.tableHead=this.tableHead,t.componentInstance.bodyList=this.jobWorkerItemsOptions,t.componentInstance._id=this.form.controls.jobWorker.value,t.result.then(o=>{o&&(this.selectedDetails=o?.selectedDetails,this.form.controls.jobWorker.setValue(o?.selectedDetails?.jobWorker))},o=>{})}}openJobWorkServiceMasterDetailsModal(){if("create"==this.action){const t=this.modalService.open(g.xv,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.title="Job Work Service Details",t.componentInstance.selectedDetails=this.selectedDetailsForServiceJWO,t.componentInstance.tableHead=this.tableHeadServiceMaster,t.componentInstance.bodyList=this.masterData?.serviceMastersOptions,t.componentInstance._id=this.form.controls.jobWorkService.value,t.result.then(o=>{o&&(console.log("success",o),console.log("selectedDetailsForServiceJWO",this.selectedDetailsForServiceJWO),this.selectedDetailsForServiceJWO=o?.selectedDetails,this.form.controls.jobWorkService.setValue(o?.selectedDetails?._id))},o=>{})}}openJobWorkItemDetailsModal(){if("create"==this.action){const t=this.modalService.open(g.xv,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.title="Job Work Item Details",t.componentInstance.selectedDetails=this.selectedDetailsOfJobCardItem,t.componentInstance.tableHead=this.tableHeadJWItemMaster,t.componentInstance._id=this.form.controls.jobWorkItem.value,t.result.then(o=>{o&&(this.selectedDetailsOfJobCardItem=o?.selectedDetails,this.form.controls.jobWorkItem.setValue(o?.selectedDetails?._id))},o=>{})}}openWOReviewTermsModal(){const t=this.modalService.open(J,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.SOTermsData={paymentTerms:this.form.controls.paymentTerms.value,modeOfTransport:this.form.controls.modeOfTransport.value,frightTerms:this.form.controls.frightTerms.value,transporter:this.form.controls.transporter.value,destination:this.form.controls.destination.value},t.result.then(o=>{o&&["create","edit"].includes(this.action)&&this.form.patchValue(o)},o=>{})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(F),e.Y36(b.gz),e.Y36(p.V),e.Y36(p.kl),e.Y36(f.RJ),e.Y36(c.FF),e.Y36(u.Ye),e.Y36(p.tI),e.Y36(n.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-job-work-order-form"]],decls:75,vars:8,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-3"],[1,"col-6","pe-0"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","WONo","readonly","",1,"form-control"],[1,"col-6","px-3"],["type","date","formControlName","WODate","readonly","",1,"form-control"],[1,"col-3","pe-0"],[1,"form-label","mb-1"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobWorkerName","bindValue","jobWorker","formControlName","jobWorker",3,"items","clearable","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],["type","text","formControlName","orderReference",1,"form-control"],["type","text","formControlName","placeOfSupply","readonly","",1,"form-control"],[1,"row","line-border","mb-0"],["ngbNav","",1,"nav-tabs","tabs-card",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["role","presentation",1,"nav-item","align-self-center"],["type","button",1,"plusSmallIconSvg","btn","btn-primary","add-address",3,"ngbTooltip","click"],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","line-border"],[1,"row","mb-4"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","bg-primary","me-4",3,"click"],[1,"col-3","ps-0","pe-5"],[1,"d-flex"],[1,"col-form-label","text-nowrap"],[1,"text-danger","pe-2"],[1,"fa","fa-caret-right","fa-5x","mx-1"],["type","number","formControlName","WOTaxableValue",1,"form-control"],[1,"col-2"],["class","col-4 text-end",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink",""],["class","",4,"ngIf"],["ngbNavContent",""],[1,""],["aria-hidden","true",1,"fa","fa-minus-circle","pe-0",3,"click"],["formGroupName","WODetails"],[1,"form-label","text-nowrap"],["bindLabel","serviceCode","bindValue","_id",3,"items","clearable","ngModel","ngModelOptions","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto","fa-font-size",2,"height","2.9rem",3,"click"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row","mt-4"],["bindLabel","jobWorkItemName","bindValue","_id",3,"items","clearable","ngModel","ngModelOptions","ngModelChange","change"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"input-group-text","text-secondary","combine-INR"],[1,"vr","ms-3"],["type","number","readonly","",1,"form-control","border-start-0","ps-1",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","text","formControlName","discountPercent",1,"form-select"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group-text","text-secondary","combine-INR","bg-mix-pink-color"],["type","number","readonly","",1,"form-control","bg-mix-pink-color","border-start-0","ps-1",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","number","readonly","",1,"form-control","bg-mix-pink-color","border-start-0","ps-1",3,"ngModel","ngModelOptions","ngModelChange"],["type","date",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"value"],[1,"col-4","text-end"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(o,r){if(1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5,"Job Worker Details"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",5)(10,"div",7)(11,"label",8),e._uU(12," WO No."),e.TgZ(13,"span",9),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",11)(17,"label",8),e._uU(18," WO Date "),e.TgZ(19,"span",9),e._uU(20,"*"),e.qZA()(),e._UZ(21,"input",12),e.qZA()()(),e.TgZ(22,"div",13)(23,"label",14),e._uU(24," Job Worker Name "),e.TgZ(25,"span",9),e._uU(26,"*"),e.qZA(),e._UZ(27,"span")(28,"span")(29,"span")(30,"span")(31,"span")(32,"span"),e.TgZ(33,"button",15),e.NdJ("click",function(){return r.openAddressModal()}),e._uU(34," Address "),e.qZA()(),e.TgZ(35,"div",16)(36,"div",17)(37,"ng-select",18),e.NdJ("change",function(a){return r.setJobWorker(a)}),e.qZA()(),e.TgZ(38,"div",19),e.NdJ("click",function(){return r.openJobWorkDetailsModal()}),e._UZ(39,"i",20),e.qZA()()(),e.TgZ(40,"div",6)(41,"label",8),e._uU(42," Order Reference"),e.TgZ(43,"span",9),e._uU(44,"*"),e.qZA()(),e._UZ(45,"input",21),e.qZA(),e.TgZ(46,"div",6)(47,"label",8),e._uU(48," Place Of Supply"),e.TgZ(49,"span",9),e._uU(50,"*"),e.qZA()(),e._UZ(51,"input",22),e.qZA()(),e._UZ(52,"hr",23),e.TgZ(53,"ul",24,25),e.NdJ("activeIdChange",function(a){return r.active=a}),e.YNc(55,z,5,3,"li",26),e.TgZ(56,"li",27)(57,"button",28),e.NdJ("click",function(){return r.addPlace()}),e.qZA()()(),e._UZ(58,"div",29),e.qZA(),e._UZ(59,"hr",30),e.TgZ(60,"div",31)(61,"div",6),e._UZ(62,"button",32),e.TgZ(63,"button",33),e.NdJ("click",function(){return r.openWOReviewTermsModal()}),e._uU(64," Review WO Terms "),e.qZA()(),e.TgZ(65,"div",34)(66,"div",35)(67,"div",36),e._uU(68," WO Taxable Value "),e.TgZ(69,"span",37),e._uU(70,"*"),e.qZA(),e._UZ(71,"i",38),e.qZA(),e._UZ(72,"input",39),e.qZA()(),e._UZ(73,"div",40),e.YNc(74,X,5,0,"div",41),e.qZA()()()),2&o){const s=e.MAs(54);e.Q6J("formGroup",r.form),e.xp6(37),e.Q6J("items",r.masterData.jobWorkerOptions)("clearable",!1),e.xp6(16),e.Q6J("activeId",r.active),e.xp6(2),e.Q6J("ngForOf",r.jobWODetails),e.xp6(2),e.Q6J("ngbTooltip","Additional places of business"),e.xp6(1),e.Q6J("ngbNavOutlet",s),e.xp6(16),e.Q6J("ngIf","view"!=r.action)}},dependencies:[u.sg,u.O5,c.uN,c.Pz,c.nv,c.Is,c.Fh,c.tO,c.Dy,c._L,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.sg,n.u,n.x0,n.On,Y.w9,V.f],styles:[".set-address[_ngcontent-%COMP%]{height:1rem;width:1rem;margin-top:.4rem;padding:1rem 1rem .8rem .8rem}.close[_ngcontent-%COMP%]{font-size:1.4rem;opacity:.1;transition:opacity .3s}.nav-link[_ngcontent-%COMP%]:hover > .close[_ngcontent-%COMP%]{opacity:.8}.tabs-card[_ngcontent-%COMP%]{box-shadow:none;display:flex;text-align:center;justify-content:flex-start;background-color:transparent;border-bottom:none}.tabs-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:grid}.tabs-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:3rem;font-size:1.4rem;border-radius:0 0 6px 6px;margin-bottom:1rem;color:var(--bs-white);background-color:var(--bs-secondary)!important;border:0px;opacity:.5;margin-top:-.09rem;margin-right:.5rem;padding:.2rem 1.5rem}.tabs-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .fa-minus-circle[_ngcontent-%COMP%]{color:var(--bs-white)!important;padding:.2rem .5rem 0rem;opacity:1!important}.tabs-card[_ngcontent-%COMP%]   .add-address[_ngcontent-%COMP%]{flex:1;min-width:3rem;font-size:1.4rem;border-radius:6px;margin-bottom:1rem;color:transparent;background-color:transparent!important;border:0px;margin-top:-.09rem;opacity:1;height:1rem;width:1rem;padding:1rem 1rem .8rem .8rem}.tabs-card[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--bs-white);background-color:var(--bs-secondary);border:0px;opacity:1;padding:.2rem 1.5rem;margin-top:-.09rem}.tabs-card[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]})}return i})();var P=l(43818),E=l(25116),G=l(11909),te=l(88059),oe=l(53421);function re(i,d){1&i&&e._UZ(0,"div",33)}function ie(i,d){1&i&&e._UZ(0,"div",34)}function se(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.openConfirmModal(null==r?null:r._id,null==r?null:r.jobWorkerCode))}),e._UZ(1,"i",36),e._uU(2," Delete "),e.qZA()}}function ne(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",20,21)(5,"span",22),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"span",23),e.YNc(17,re,1,0,"div",24),e.YNc(18,ie,1,0,"div",25),e.qZA()(),e.TgZ(19,"td")(20,"div",26),e._UZ(21,"button",27),e.TgZ(22,"div",28)(23,"a",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.navigateTo("../form",null==s?null:s._id,"view"))}),e._UZ(24,"i",30),e._uU(25," View "),e.qZA(),e.TgZ(26,"a",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.navigateTo("../form",null==s?null:s._id,"edit"))}),e._UZ(27,"i",31),e._uU(28," Edit "),e.qZA(),e.YNc(29,se,3,0,"a",32),e.qZA()()()()}if(2&i){const t=d.$implicit,o=e.MAs(4),r=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.jobWorkerCode),e.xp6(1),e.Udp("width",o.clientWidth),e.xp6(2),e.Q6J("positionTarget",o)("ngbTooltip",t.jobWorkerName),e.xp6(1),e.hij(" ",t.jobWorkerName," "),e.xp6(2),e.Oqu(null==t?null:t.country),e.xp6(2),e.Oqu(null==t?null:t.state),e.xp6(2),e.Oqu(null==t?null:t.GSTINNo),e.xp6(2),e.Oqu(null==t?null:t.currency),e.xp6(3),e.Q6J("ngIf","Active"==t.status),e.xp6(1),e.Q6J("ngIf","Inactive"==t.status),e.xp6(5),e.Q6J("accessType",r.rolePermissionActions.viewAction),e.xp6(3),e.Q6J("accessType",r.rolePermissionActions.editAction),e.xp6(3),e.Q6J("ngIf",r.user==r.superAdminId)}}const ae=function(i,d,t,o){return{page:i,pageSize:d,collection:t,search:o,type:"list"}};let le=(()=>{class i{constructor(t,o,r,s,a,x,D,U,j){this.jobWorkOrderService=t,this.router=o,this.spinner=r,this.modalService=s,this.exportExcelService=a,this.activatedRoute=x,this.exportToPDFService=D,this.storageService=U,this.toastService=j,this.page=1,this.pageSize=8,this.collection=0,this.column="jobWorkerCode",this.direction=-1,this.search="",this.tableData=[],this.tableDataObject={},this.superAdminId=E.dA,this.user="",this.rolePermissionActions=E.a1}ngOnInit(){this.user=this.storageService.get("IDMSAUser")?.roles?.find(t=>t==this.superAdminId),this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(t,o,r){this.router.navigate([t],{relativeTo:this.activatedRoute,queryParams:{id:o,action:r}})}open(t){0==t.supplierShippingAddress.length&&(t.supplierShippingAddress=[t.supplierBillingAddress]),this.modalService.open(g.MU,{centered:!0,size:"lg"}).componentInstance.data={title:t.supplierName,addressA:{label:"Shipping Address",address:t.supplierShippingAddress},addressB:{label:"Billing Address",address:t.supplierBillingAddress?[t.supplierBillingAddress]:[]}}}trackByFn(t,o){return o?._id}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=t.value,this.getAll()}}getAll(t=!1,o=""){}delete(t){this.spinner.show(),this.jobWorkOrderService.delete(t).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message),this.getAll()})}openConfirmModal(t,o){const r=this.modalService.open(g.hn,{centered:!0,size:"md",backdrop:"static",keyboard:!1});r.componentInstance.heading="Confirm Deletion",r.componentInstance.confirmText=`Confirm Deletion of JW Code ${o} ?`,r.result.then(s=>{"Yes"==s.title&&this.delete(t)},s=>{})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}excelDownload(t){this.exportExcelService.exportExcel((0,G.sq)(t))}pdfDownload(t){let o=(0,G.lT)(t);this.exportToPDFService.generatePdf(o.tableData,o.title)}onSort({column:t,direction:o}){this.headers.forEach(r=>{r.sortable!==t&&(r.direction="")}),this.column=t,this.direction="asc"==o?1:-1,this.getAll()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(F),e.Y36(b.F0),e.Y36(p.V),e.Y36(c.FF),e.Y36(p.Ol),e.Y36(b.gz),e.Y36(p.$L),e.Y36(p.V1),e.Y36(p.kl))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-job-work-order-list"]],viewQuery:function(o,r){if(1&o&&e.Gf(P.j,5),2&o){let s;e.iGM(s=e.CRH())&&(r.headers=s)}},decls:32,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add",3,"click"],[1,"row","line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","jobWorkerCode",3,"sort"],["sortable","jobWorkerName",1,"text-start",3,"sort"],["sortable","country",3,"sort"],["sortable","state",3,"sort"],["sortable","GSTINNo",3,"sort"],["sortable","currency",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["jobWorkerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"statusActive"],[1,"statusInActive"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-primary"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Job Work Order"),e.qZA()(),e.TgZ(4,"div",3),e._UZ(5,"button",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return r.navigateTo("../form",null,"create")}),e._uU(7," Job Work Order "),e.qZA()(),e._UZ(8,"hr",6),e.TgZ(9,"div",7)(10,"app-setting-header",8),e.NdJ("dataChange",function(a){return r.eventHeader(a)}),e.qZA(),e.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(15,"JW Code"),e.qZA(),e.TgZ(16,"th",13),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(17,"Job Work Name"),e.qZA(),e.TgZ(18,"th",14),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(19,"Country"),e.qZA(),e.TgZ(20,"th",15),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(21,"State/Province"),e.qZA(),e.TgZ(22,"th",16),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(23,"GSTIN"),e.qZA(),e.TgZ(24,"th",17),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(25,"Currency"),e.qZA(),e.TgZ(26,"th",18),e.NdJ("sort",function(a){return r.onSort(a)}),e._uU(27,"Status"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Action"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,ne,30,15,"tr",19),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("accessType",r.rolePermissionActions.createAction),e.xp6(6),e.Q6J("data",e.l5B(4,ae,r.page,r.pageSize,r.collection,r.search)),e.xp6(21),e.Q6J("ngForOf",r.tableData)("ngForTrackBy",r.trackByFn))},dependencies:[u.sg,u.O5,te.P,c._L,P.j,oe.J],encapsulation:2})}return i})();var de=l(19964),ce=l(56208);const me=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:le},{path:"form",component:ee,resolve:{accessScreen:de.xr}}];let ue=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[u.ez,b.Bz.forChild(me),ce.m]})}return i})()},49580:(w,h,l)=>{l.d(h,{D:()=>u});const u=[{message:"HSN Code should be of Max 8 & Min of 4 Characters is Required",key:"hsnCode"},{message:"Description of Goods is Required",key:"goodsDescription"},{message:"GST Rate % is Required",key:"gstRate"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"},{message:"UTGST Rate % is Required",key:"ugstRate"},{message:"Revision No. is Required",key:"revisionNo"},{message:"Revision Date is Required",key:"revisionDate"}]},43154:(w,h,l)=>{l.d(h,{tm:()=>C,Kb:()=>u,lR:()=>R,jH:()=>b,y5:()=>O,rL:()=>I,OV:()=>S,HQ:()=>Z,RS:()=>A,vc:()=>q,Nj:()=>v,rw:()=>J,Uh:()=>M,J4:()=>N,ff:()=>T,BC:()=>g,JY:()=>y,Dd:()=>W,Sy:()=>e,tH:()=>c,se:()=>f,RH:()=>k});const u=[{message:"Customer Name is Required",key:"customerName"},{message:"Mobile No. is Required",key:"mobileNo"},{message:"stateOfSupply is Required",key:"stateOfSupply"}],b=[{message:"Customer Code is Required",key:"customerCode"},{message:"Customer Name is Required",key:"customerName"},{message:"Sales Category is Required",key:"customerCategory"},{message:"PAN No. is Required",key:"customerPAN"},{message:"GSTIN is Required",key:"GSTIN"},{message:"GST Classification is Required",key:"GSTClassification"},{message:"Customer Category is Required",key:"customerType"},{message:"Customer Currency is Required",key:"customerCurrency"},{message:"Payment Terms is Required",key:"customerPaymentTerms"}];l(49580);const T=[{message:"SAC Code is Required",key:"sacCode"},{message:"Description of Service is Required",key:"serviceDescription"},{message:"GST Rate % is Required",key:"gstRate"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"},{message:"UTGST Rate % is Required",key:"ugstRate"},{message:"Revision Date is Required",key:"revisionNo"},{message:"Revision Date is Required",key:"revisionDate"}],y=[{message:"Service Description is Required",key:"serviceDescription"}],e=[{message:"SKU Stage is Required",key:"SKUStage"},{message:"Product Category is Required",key:"productCategory"},{message:"SKU No is Required",key:"SKUNo"},{message:"SKU Name is Required",key:"SKUName"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"HSN Code is Required",key:"hsn"},{message:"Unit of Measurement is Required",key:"primaryUnit"}],c=[{message:"Shelf Life [Months] is required",key:"shelfLife"},{message:"Storage Temperature [\xb0C] is required",key:"storageTemp"},{message:"Storage Humidity [RH] is required",key:"storageHumidity"},{message:"Special Storage Instruction is required",key:"specialStorageInstruction"}],k=[{message:"Type is Required",key:"transporterType"}],C=[{message:"Bill From Location is Required",key:"billFromLocation"},{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Purchase Order No. is Required",key:"PONumber"},{message:"Purchase Order Date is Required",key:"PODate"},{message:"Net SO Value is Required",key:"SOTotalAmount"},{message:"Status is Required",key:"SOStatus"},{message:"Customer Shipping Address is Required",key:"customerShippingAddress"},{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter is Required",key:"transporter"},{message:"Destination is Required",key:"destination"}],f=[{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter is Required",key:"transporter"},{message:"Mode of transport is Required",key:"modeOfTransport"},{message:"Destination is Required",key:"destination"}],R=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"}],O=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Payment Terms is Required",key:"paymentTerms"},{message:"Mode Of Transport is Required",key:"modeOfTransport"},{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter Name is Required",key:"transporter"},{message:"Destination is Required",key:"destination"}],Z=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Destination Terms is Required",key:"destination"},{message:"Mode of Transport is Required",key:"modeOfTransport"}],S=[{message:"Export Invoice No. is Required",key:"exportsInvoiceNo"},{message:"Export Invoice Date is Required",key:"exportsInvoiceDate"},{message:"Export Invoice Total Value is Required",key:"exportsInvoiceTotalValue"},{message:"Exchange Rate is Required",key:"exchangeRate"},{message:"Mode of Transport is Required",key:"modeOfTransport"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Port of Destination Terms is Required",key:"destination"},{message:"Final Destination Terms is Required",key:"finalDestination"}],A=[{message:"Payment Terms is Required",key:"paymentTerms"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Transporter Terms is Required",key:"transporter"},{message:"Destination Terms is Required",key:"destination"},{message:"Mode of Transport is Required",key:"modeOfTransport"}],q=[{message:"Supply Type is Required",key:"supplyType"},{message:"Sub Supply Type is Required",key:"subSupplyType"},{message:"Document Type is Required",key:"docType"},{message:"Document No. is Required of 16 Digits",key:"docNo"},{message:"Document Date is Required",key:"docDate"},{message:"From GSTIN is Required of 15 Digits",key:"fromGstin"},{message:"From Pin Code is Required",key:"fromPincode"},{message:"Act From State Code is Required",key:"actFromStateCode"},{message:"From State Code is Required",key:"fromStateCode"},{message:"To GSTIN is Required of 15 Digits",key:"toGstin"},{message:"To Pin Code is Required",key:"toPincode"},{message:"To State Code is Required",key:"toStateCode"},{message:"Act To State Code is Required",key:"actToStateCode"},{message:"Transaction Type is Required of 4 Digits",key:"transactionType"},{message:"Tot Inv Value is Required",key:"totInvValue"},{message:"Trans Distance is Required",key:"transDistance"}],M=[{message:"Bill From Location is Required",key:"billFromLocation"},{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"PO No. is Required",key:"PONumber"},{message:"Net SO Value is Required",key:"PITotalAmount"},{message:"Status is Required",key:"PIStatus"},{message:"Customer Shipping Address is Required",key:"customerShippingAddress"},{message:"Mode Of Transport is Required",key:"modeOfTransport"},{message:"frightTerms is Required",key:"frightTerms"},{message:"transporter is Required",key:"transporter"},{message:"destination is Required",key:"destination"}],W=[{message:"Invoice # is Required",key:"serviceInvoiceNumber"},{message:"Invoice Date is Required",key:"serviceInvoiceDate"},{message:"Customer/Sales Category is Required",key:"customerCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Purchase Order No. is Required",key:"PONo"},{message:"Purchase Order Date is Required",key:"PODate"},{message:"Currency is Required",key:"currency"},{message:"Bill From Location is Required",key:"billFromLocation"}],v=[{message:"Product Category is Required",key:"productCategory"},{message:"HSN Code is Required",key:"HSN"},{message:"Description is Required",key:"description"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"}],J=[{message:"Order is Required",key:"order"},{message:"Payment Terms Description is Required",key:"paymentDescription"}],g=[{message:"Customer Category is Required",key:"customerCategory"},{message:"Customer Name is Required",key:"customer"},{message:"FC Type is Required",key:"FCType"},{message:"Net FC Value is Required",key:"netFCValue"}],N=[{message:"Quotation No. is Required",key:"quotationNo"},{message:"Customer Category is Required",key:"customerCategory"},{message:"Customer Name  is Required",key:"customerName"}],I=[{message:"Customer Name is Required",key:"customerName"}]}}]);