"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6539],{9202:(R,J,m)=>{m.d(J,{K:()=>j});var g=m(43818),o=m(65879),s=m(37285),D=m(96814),W=m(88059),M=m(95346);function C(h,U){if(1&h){const p=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td",24,25)(5,"span",26),o._uU(6),o.qZA()(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.TgZ(15,"td")(16,"input",27),o.NdJ("change",function(){const f=o.CHM(p).$implicit,_=o.oxw();return o.KtG(_.setSelectData(f))}),o.qZA()()()}if(2&h){const p=U.$implicit,u=U.index,d=o.MAs(4),f=o.oxw();o.xp6(2),o.Oqu(null==p?null:p.value),o.xp6(1),o.Udp("width",d.clientWidth),o.xp6(2),o.Q6J("positionTarget",d)("ngbTooltip",p.goodsDescription),o.xp6(1),o.hij(" ",null==p?null:p.goodsDescription," "),o.xp6(2),o.Oqu(null==p?null:p.gstRate),o.xp6(2),o.Oqu(null==p?null:p.igstRate),o.xp6(2),o.Oqu(null==p?null:p.cgstRate),o.xp6(2),o.Oqu(null==p?null:p.sgstRate),o.xp6(2),o.MGl("name","formValue",f.HSNCodeArr[u],""),o.Q6J("disabled","view"==f.action)("checked",p.select)}}function w(h,U){1&h&&o._UZ(0,"hr",32)}function x(h,U){if(1&h){const p=o.EpF();o.TgZ(0,"div",33)(1,"button",34),o.NdJ("click",function(){o.CHM(p);const d=o.oxw(2);return o.KtG(d.dismissModel())}),o._uU(2," Save & Close "),o.qZA()()}}const t=function(){return["create"]};function b(h,U){if(1&h&&(o.ynx(0),o.TgZ(1,"div",28)(2,"div",29),o.YNc(3,w,1,0,"hr",30),o.qZA()(),o.YNc(4,x,3,0,"div",31),o.BQk()),2&h){const p=o.oxw();o.xp6(3),o.Q6J("ngIf",o.DdM(2,t).includes(p.action)),o.xp6(1),o.Q6J("ngIf",o.DdM(3,t).includes(p.action))}}function k(h,U){1&h&&o._UZ(0,"hr",32)}function v(h,U){if(1&h){const p=o.EpF();o.TgZ(0,"div",33)(1,"button",34),o.NdJ("click",function(){o.CHM(p);const d=o.oxw(2);return o.KtG(d.dismissModel())}),o._uU(2," Save & Close "),o.qZA()()}}const Z=function(){return["view"]};function q(h,U){if(1&h&&(o.ynx(0),o.TgZ(1,"div",28)(2,"div",29),o.YNc(3,k,1,0,"hr",30),o.qZA()(),o.YNc(4,v,3,0,"div",31),o.BQk()),2&h){const p=o.oxw();o.xp6(3),o.Q6J("ngIf",!o.DdM(2,Z).includes(p.action)),o.xp6(1),o.Q6J("ngIf",!o.DdM(3,Z).includes(p.action))}}const O=function(h,U,p,u){return{page:h,pageSize:U,collection:p,search:u,excelDisplay:"none"}};let j=(()=>{var h;class U{constructor(u){this.activeModal=u,this.action="edit",this.HSNValue="",this.HSNCode="",this.editScreen="",this.HSNCodeArr=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.HSNSelect=null,this.HSNSelectCode=null}ngOnInit(){(this.HSNValue||this.HSNCode)&&(this.HSNSelect=this.HSNValue,this.HSNSelectCode=this.HSNCode,this.HSNCodeArr=this.HSNCodeArr.map(u=>(u.select=!1,u.value==this.HSNCode&&(u.select=!0),u))),this.collection=this.HSNCodeArr.length}setSelectData(u){this.HSNSelect=u?._id,this.HSNSelectCode=u?.value}dismissModel(){let u={};u.HSNSelect=this.HSNSelect,u.HSNSelectCode=this.HSNSelectCode,this.activeModal.close(u)}eventHeader(u){switch(u.key){case"SEARCH":this.search=u.value;break;case"EXCEL":default:break;case"PAGE":this.page=u.value}}onSort({column:u,direction:d}){this.headers.forEach(f=>{f.sortable!==u&&(f.direction="")}),this.HSNCodeArr=""===d||""===u?this.HSNCodeArr:[...this.HSNCodeArr].sort((f,_)=>{let I="string"==typeof f[u]?f[u].toLowerCase():f[u],A="string"==typeof _[u]?_[u].toLowerCase():_[u];const N=I<A?-1:I>A?1:0;return"asc"===d?N:-N})}}return(h=U).\u0275fac=function(u){return new(u||h)(o.Y36(s.Kz))},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-ink-hsn-modal"]],viewQuery:function(u,d){if(1&u&&o.Gf(g.j,5),2&u){let f;o.iGM(f=o.CRH())&&(d.headers=f)}},inputs:{action:"action",HSNValue:"HSNValue",HSNCode:"HSNCode",editScreen:"editScreen",HSNCodeArr:"HSNCodeArr"},decls:37,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","value",3,"sort"],["sortable","goodsDescription",1,"text-start",3,"sort"],["sortable","gstRate",3,"sort"],["sortable","igstRate",3,"sort"],["sortable","cgstRate",3,"sort"],["sortable","sgstRate",3,"sort"],["sortable","UOM",3,"sort"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-start"],["goodsDescription",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(u,d){1&u&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"HSN Master"),o.qZA(),o.TgZ(4,"div")(5,"button",3),o.NdJ("click",function(){return d.activeModal.close()}),o._UZ(6,"i",4),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),o.NdJ("dataChange",function(_){return d.eventHeader(_)}),o.qZA()(),o.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th",15),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(18,"HSN Code"),o.qZA(),o.TgZ(19,"th",16),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(20," Description of Goods "),o.qZA(),o.TgZ(21,"th",17),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(22,"GST Rate %"),o.qZA(),o.TgZ(23,"th",18),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(24,"IGST Rate %"),o.qZA(),o.TgZ(25,"th",19),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(26,"CGST Rate %"),o.qZA(),o.TgZ(27,"th",20),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(28,"SGST Rate %"),o.qZA(),o.TgZ(29,"th",21),o.NdJ("sort",function(_){return d.onSort(_)}),o._uU(30,"Select"),o.qZA()()(),o.TgZ(31,"tbody"),o.YNc(32,C,17,13,"tr",22),o.ALo(33,"slice"),o.ALo(34,"searchFi1ter"),o.qZA()()()()(),o.YNc(35,b,5,4,"ng-container",23),o.YNc(36,q,5,4,"ng-container",23),o.qZA()()()),2&u&&(o.xp6(12),o.Q6J("data",o.l5B(11,O,d.page,d.pageSize,d.collection,d.search)),o.xp6(20),o.Q6J("ngForOf",o.Dn7(33,4,o.xi3(34,8,d.HSNCodeArr,d.search),(d.page-1)*d.pageSize,(d.page-1)*d.pageSize+d.pageSize)),o.xp6(3),o.Q6J("ngIf","Edit Screen"!=d.editScreen),o.xp6(1),o.Q6J("ngIf","Edit Screen"==d.editScreen))},dependencies:[D.sg,D.O5,W.P,s._L,g.j,D.OU,M.G],encapsulation:2}),U})()},6539:(R,J,m)=>{m.r(J),m.d(J,{JobWorkerItemMasterModule:()=>Dt});var g=m(96814),o=m(1076),s=m(60095),D=m(21631),W=m(22096),M=m(77203),C=m(25116),w=m(9202),x=m(66929),t=m(65879),b=m(37285),k=m(16897),v=m(2742),Z=m(59103);function q(r,c){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",null==i?null:i.label," ")}}function O(r,c){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",null==i?null:i.label," ")}}function j(r,c){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function h(r,c){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function U(r,c){if(1&r){const i=t.EpF();t.ynx(0,43),t._UZ(1,"hr",21)(2,"div",10),t.TgZ(3,"div",44)(4,"div",7)(5,"div",45)(6,"label",46),t._uU(7," Sheet Dimensions "),t.TgZ(8,"span",47),t._uU(9,"\u25b6"),t.qZA()()(),t.TgZ(10,"div",48)(11,"label",49),t._uU(12,"Width"),t.qZA(),t.TgZ(13,"div",50)(14,"div",51)(15,"input",52),t.NdJ("input",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.setPrimaryToSecondaryValue())}),t.qZA()(),t.TgZ(16,"div",53)(17,"select",54),t.NdJ("change",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.setPrimaryToSecondaryValue())}),t.TgZ(18,"option",55),t._uU(19,"Select"),t.qZA(),t.YNc(20,j,2,2,"option",17),t.qZA()()()(),t.TgZ(21,"div",56)(22,"span",57),t._UZ(23,"div",58),t.qZA()(),t.TgZ(24,"div",59)(25,"label",49),t._uU(26,"Length "),t.qZA(),t.TgZ(27,"div",50)(28,"div",51)(29,"input",60),t.NdJ("input",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.setPrimaryToSecondaryValue())}),t.qZA()(),t.TgZ(30,"div",53)(31,"select",61),t.NdJ("change",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.setPrimaryToSecondaryValue())}),t.TgZ(32,"option",55),t._uU(33,"Select"),t.qZA(),t.YNc(34,h,2,2,"option",17),t.qZA()()()()()(),t._UZ(35,"div",10),t.BQk()}if(2&r){const i=t.oxw();t.xp6(18),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",i.DimensionsUnits),t.xp6(12),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",i.DimensionsUnits)}}function p(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.dismissModel())}),t._uU(2,"Save & Close"),t.qZA()()}}function u(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.activeModal.close())}),t._uU(2,"Close"),t.qZA()()}}const d=function(){return["view"]};let f=(()=>{var r;class c{get f(){return this.form.controls}get dualUnitsDimensionsData(){return this.form.get("dualUnitsDimensionsDetails")}constructor(n,e,a){this.activeModal=n,this.validationService=e,this.toastService=a,this.action="",this.PSPInventory=!1,this.flag=!1,this.ModalUOMsUnit=[],this.WXLDimensionsUnit=[],this.dualUnits={},this.dimensionData={},this.DDetailsFlag=null,this.DimensionsUnitsObj=C.An,this.DimensionsUnits=this.DimensionsUnitsObj.getAllSKUMasterDimensionsUnit(),this.form=new s.nJ({primaryUnit:new s.p4(null,[s.kI.required]),secondaryUnit:new s.p4(null,[s.kI.required]),unitConversionFlag:new s.p4(1),primaryConversion:new s.p4(1),secondaryConversion:new s.p4(1),primaryToSecondaryConversion:new s.p4(null),secondaryToPrimaryConversion:new s.p4(null),dualUnitsDimensionsDetails:new s.nJ({type:new s.p4(null),width:new s.p4(null),length:new s.p4(null),widthUnit:new s.p4(null),lengthUnit:new s.p4(null),widthInMM:new s.p4(null),lengthInM:new s.p4(null),sqmPerRoll:new s.p4(null)})})}ngOnInit(){this.setSecondaryValue(),this.form.patchValue(this.dualUnits),this.dimensionData&&this.form.controls.dualUnitsDimensionsDetails.patchValue(this.dimensionData),2==this.f.unitConversionFlag.value?(this.form.controls.primaryConversion.disable(),this.form.controls.primaryToSecondaryConversion.setValue(null),this.form.controls.primaryToSecondaryConversion.disable(),this.form.controls.secondaryConversion.enable(),this.form.controls.secondaryToPrimaryConversion.enable()):(this.form.controls.secondaryConversion.disable(),this.form.controls.secondaryToPrimaryConversion.setValue(null),this.form.controls.secondaryToPrimaryConversion.disable(),this.form.controls.primaryConversion.enable(),this.form.controls.primaryToSecondaryConversion.enable()),["view","Converted to SKU"].includes(this.action)&&this.form.disable(),this.flag&&(this.flag=!0),this.form.controls.primaryUnit.value&&this.setUnitsDimensions()}setSecondaryValue(){let n=this.form.controls.primaryUnit.value;console.log("secondaryUnit",this.form.controls.secondaryUnit.value),["RL","SHT"].includes(n)&&this.form.controls.secondaryUnit.setValue("sqm")}setWidthDetails(){let n=this.form.controls.primaryUnit.value,e=this.form.controls.secondaryUnit.value;console.log("secondaryUnit",e),["SHT"].includes(n)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm")),["RL"].includes(n)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("m")),["RL"].includes(n)&&["SHT"].includes(e)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm"))}setPrimaryToSecondaryValue(){}handleRadio(){2==this.f.unitConversionFlag.value?(this.form.controls.primaryConversion.disable(),this.form.controls.primaryToSecondaryConversion.setValue(null),this.form.controls.primaryToSecondaryConversion.disable(),this.form.controls.secondaryConversion.enable(),this.form.controls.secondaryToPrimaryConversion.enable()):(this.form.controls.secondaryConversion.disable(),this.form.controls.secondaryToPrimaryConversion.setValue(null),this.form.controls.secondaryToPrimaryConversion.disable(),this.form.controls.primaryConversion.enable(),this.form.controls.primaryToSecondaryConversion.enable())}unitConversionForWidthAndLength(){let n=this.dualUnitsDimensionsData.controls.width.value,e=this.dualUnitsDimensionsData.controls.length.value,a=this.dualUnitsDimensionsData.controls.widthUnit.value,l=this.dualUnitsDimensionsData.controls.lengthUnit.value;a==this.DimensionsUnitsObj.mm&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(n),a==this.DimensionsUnitsObj.cm&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(10*n),a==this.DimensionsUnitsObj.inch&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(25.4*n),a==this.DimensionsUnitsObj.ft&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(304.8*n),a==this.DimensionsUnitsObj.m&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(1e3*n),l==this.DimensionsUnitsObj.mm&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.001*e),l==this.DimensionsUnitsObj.cm&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.01*e),l==this.DimensionsUnitsObj.inch&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.0254*e),l==this.DimensionsUnitsObj.ft&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.3048*e),l==this.DimensionsUnitsObj.m&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(e),this.dualUnitsDimensionsData.controls.sqmPerRoll.setValue(+(this.dualUnitsDimensionsData.controls.widthInMM.value/1e3*this.dualUnitsDimensionsData.controls.lengthInM.value).toFixed(4))}dismissModel(){if(!this.validationService.checkErrors(this.form,x.yQ)){if(1==this.flag&&this.WXLDimensionsUnit.includes(this.DDetailsFlag)&&"-"!=this.form.value.secondaryUnit){if(!this.dualUnitsDimensionsData.value.width)return void this.toastService.warning("Width is required !");if(!this.dualUnitsDimensionsData.value.length)return void this.toastService.warning("Length is required !")}if(!this.f.unitConversionFlag.value)return void this.toastService.warning("Radio Button is required !");if(1==this.f.unitConversionFlag.value&&!this.f.primaryToSecondaryConversion.value&&"-"!=this.form.value.secondaryUnit)return void this.toastService.warning("Conversion of Units is required !");if(2==this.f.unitConversionFlag.value&&!this.f.secondaryToPrimaryConversion.value&&"-"!=this.form.value.secondaryUnit)return void this.toastService.warning("Conversion of Units is required !");this.form.enable(),this.unitConversionForWidthAndLength(),this.activeModal.close(this.form.value)}}setUnitsDimensions(n=""){let e=this.form.controls.primaryUnit.value,a=this.form.controls.secondaryUnit.value;if(e){if(this.WXLDimensionsUnit.includes(a)){if(e&&a){let l=this.WXLDimensionsUnit.includes(a)?a:null;this.WXLDimensionsUnit.includes(e)&&(l=e),this.DDetailsFlag=l}}else this.DDetailsFlag=this.WXLDimensionsUnit.includes(e)?e:null;this.dualUnitsDimensionsData.controls.type.setValue(this.DDetailsFlag),this.DDetailsFlag||(this.dualUnitsDimensionsData.controls.type.setValue(null),this.dualUnitsDimensionsData.controls.width.setValue(null),this.dualUnitsDimensionsData.controls.length.setValue(null),this.dualUnitsDimensionsData.controls.widthUnit.setValue(null),this.dualUnitsDimensionsData.controls.lengthUnit.setValue(null)),"primaryUnit"==n&&this.setSecondaryValue(),this.setWidthDetails(),("primaryUnit"==n||"secondaryUnit"==n)&&this.setDualUnitsWidthDetails(),"-"==a?(this.f.primaryConversion.setValue(null),this.f.secondaryConversion.setValue(null),this.f.primaryToSecondaryConversion.setValue(null),this.f.secondaryToPrimaryConversion.setValue(null),this.f.unitConversionFlag.disable()):(this.f.unitConversionFlag.enable(),this.f.unitConversionFlag.setValue(1),this.f.primaryConversion.setValue(1),this.f.secondaryConversion.setValue(1))}else this.toastService.warning("first Select Primary Unit !")}setDualUnitsWidthDetails(){let n=this.form.controls.primaryUnit.value,e=this.form.controls.secondaryUnit.value;console.log("secondaryUnit",e),["SHT"].includes(n)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm")),["RL"].includes(n)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("m")),["RL"].includes(n)&&["SHT"].includes(e)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm"))}}return(r=c).\u0275fac=function(n){return new(n||r)(t.Y36(b.Kz),t.Y36(k.RJ),t.Y36(v.kl))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dual-unit-modal"]],inputs:{action:"action",PSPInventory:"PSPInventory",flag:"flag",ModalUOMsUnit:"ModalUOMsUnit",WXLDimensionsUnit:"WXLDimensionsUnit",dualUnits:"dualUnits",dimensionData:"dimensionData"},decls:88,vars:25,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row"],[3,"formGroup"],[1,"row","p-0","mt-4"],[1,"col-1"],[1,"col-5","ps-5"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","primaryUnit",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-5","pe-5"],["formControlName","secondaryUnit",1,"form-select",3,"change"],["class","mt-3",4,"ngIf"],[1,"line-border","mt-4","px-5"],[1,"col-md-10","mt-4","text-end"],[1,"text-center","text-primary","mb-5"],[1,"row","justify-content-center","align-items-center","mt-4"],[1,"col-md-auto"],["type","radio","formControlName","unitConversionFlag",1,"form-check-input","form-check-input-lg","pointer",3,"value","change"],[1,"col-md-4","d-flex","inputGroup"],["type","number","formControlName","primaryConversion","value","1","readOnly","",1,"form-control"],[1,"input-group-text","bg-secondary","text-white","ms-1"],[1,"col-md-1","text-center"],["type","number","formControlName","primaryToSecondaryConversion",1,"form-control",3,"readOnly"],[1,"row","justify-content-center","align-items-center","my-4"],["type","radio",1,"form-check-input","form-check-input-lg","invisible"],[1,"col-md-4"],[1,"text-primary"],[1,"row","justify-content-center","align-items-center"],["type","radio","name","unitConversionFlag","formControlName","unitConversionFlag",1,"form-check-input","form-check-input-lg","pointer",3,"value","change"],["type","number","readonly","","formControlName","secondaryConversion",1,"form-control"],["type","number","formControlName","secondaryToPrimaryConversion",1,"form-control",3,"readOnly"],[1,"input-group-text","rounded-0","bg-secondary","text-white","ms-1"],[1,"line-border","my-5","px-05"],["class","text-center mb-5",4,"ngIf"],[1,"mt-3"],["formGroupName","dualUnitsDimensionsDetails",1,"col-10","px-5"],[1,"col-3","d-flex","align-items-center","mt-4"],[1,"form-label","text-nowrap","mt-1"],[1,"ms-1"],[1,"col-4","pe-0"],[1,"form-label"],[1,"d-flex"],[1,"col-7"],["type","number","formControlName","width",1,"form-control","ps-2","pe-0",3,"input"],[1,"col-5"],["formControlName","widthUnit",1,"form-select",3,"change"],["disabled","",3,"value"],[1,"col-1","d-flex","align-items-center","justify-content-center","px-0"],[1,"d-flex","justify-content-center","mt-1"],[1,"drawingIcon","mt-4"],[1,"col-4","ps-0"],["type","number","formControlName","length",1,"form-control","ps-2","pe-0",3,"input"],["formControlName","lengthUnit",1,"form-select",3,"change"],[1,"text-center","mb-5"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9),t._UZ(12,"div",10),t.TgZ(13,"div",11)(14,"label",12),t._uU(15," Primary Unit "),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"select",14),t.NdJ("change",function(){return e.setUnitsDimensions("primaryUnit")}),t.TgZ(19,"option",15),t._uU(20,"Select Primary Unit"),t.qZA(),t.TgZ(21,"option",16),t._uU(22,"Unit"),t.qZA(),t.YNc(23,q,2,2,"option",17),t.qZA()(),t.TgZ(24,"div",18)(25,"label",12),t._uU(26," Secondary Unit "),t.TgZ(27,"span",13),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"select",19),t.NdJ("change",function(){return e.setUnitsDimensions("secondaryUnit")}),t.TgZ(30,"option",15),t._uU(31,"Select Secondary Unit"),t.qZA(),t.TgZ(32,"option",16),t._uU(33,"NA - Not Applicable"),t.qZA(),t.TgZ(34,"option",16),t._uU(35,"Unit"),t.qZA(),t.YNc(36,O,2,2,"option",17),t.qZA()(),t._UZ(37,"div",10),t.YNc(38,U,36,4,"ng-container",20),t._UZ(39,"hr",21)(40,"div",10),t.TgZ(41,"div",22)(42,"h3",23),t._uU(43,"Conversion of Units"),t.qZA(),t.TgZ(44,"div",24)(45,"div",25)(46,"input",26),t.NdJ("change",function(){return e.handleRadio()}),t.qZA()(),t.TgZ(47,"div",27),t._UZ(48,"input",28),t.TgZ(49,"div",29),t._uU(50),t.ALo(51,"UOMUnitsMaster"),t.qZA()(),t.TgZ(52,"div",30)(53,"h3"),t._uU(54,"="),t.qZA()(),t.TgZ(55,"div",27),t._UZ(56,"input",31),t.TgZ(57,"div",29),t._uU(58),t.ALo(59,"UOMUnitsMaster"),t.qZA()()(),t.TgZ(60,"div",32)(61,"div",25),t._UZ(62,"input",33),t.qZA(),t.TgZ(63,"div",34),t._UZ(64,"hr",13),t.qZA(),t.TgZ(65,"div",30)(66,"h4",35),t._uU(67,"OR"),t.qZA()(),t.TgZ(68,"div",34),t._UZ(69,"hr",13),t.qZA()(),t.TgZ(70,"div",36)(71,"div",25)(72,"input",37),t.NdJ("change",function(){return e.handleRadio()}),t.qZA()(),t.TgZ(73,"div",27),t._UZ(74,"input",38),t.TgZ(75,"div",29),t._uU(76),t.qZA()(),t.TgZ(77,"div",30)(78,"h3"),t._uU(79,"="),t.qZA()(),t.TgZ(80,"div",27),t._UZ(81,"input",39),t.TgZ(82,"div",40),t._uU(83),t.qZA()()()(),t._UZ(84,"div",10),t.qZA()(),t._UZ(85,"hr",41),t.YNc(86,p,3,0,"div",42),t.YNc(87,u,3,0,"div",42),t.qZA()()()()),2&n&&(t.xp6(3),t.hij(" ",1==e.PSPInventory?"Dual Unit Conversion (DUC)":"Set Dual Units of Measurement"," "),t.xp6(7),t.Q6J("formGroup",e.form),t.xp6(9),t.Q6J("value",null),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",e.ModalUOMsUnit),t.xp6(7),t.Q6J("value",null),t.xp6(2),t.Q6J("value","-"),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",e.ModalUOMsUnit),t.xp6(2),t.Q6J("ngIf",e.flag&&e.WXLDimensionsUnit.includes(e.DDetailsFlag)&&"-"!=e.form.value.secondaryUnit),t.xp6(8),t.Q6J("value",1),t.xp6(4),t.hij(" ","-"==e.form.value.secondaryUnit?"-":e.form.value.primaryUnit?t.lcZ(51,20,e.form.value.primaryUnit):"Unit"," "),t.xp6(6),t.Q6J("readOnly","-"==e.form.value.secondaryUnit),t.xp6(2),t.hij(" ",e.form.value.secondaryUnit?t.lcZ(59,22,e.form.value.secondaryUnit):"Unit"," "),t.xp6(14),t.Q6J("value",2),t.xp6(4),t.hij(" ","-"==e.form.value.secondaryUnit?"-":"Unit 2"," "),t.xp6(5),t.Q6J("readOnly","-"==e.form.value.secondaryUnit),t.xp6(2),t.hij(" ","-"==e.form.value.secondaryUnit?"-":"Unit 1"," "),t.xp6(3),t.Q6J("ngIf",!t.DdM(24,d).includes(e.action)),t.xp6(1),t.Q6J("ngIf",e.PSPInventory))},dependencies:[g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s._,s.JJ,s.JL,s.sg,s.u,s.x0,Z.S],encapsulation:2}),c})();const _=[{label:"JW Code",value:"jobWorkerCode",class:""},{label:"Job Worker Name",value:"label",class:""},{label:"Currency",value:"currency",class:""},{label:"State/Province",value:"state",class:""},{label:"city/District",value:"cityOrDistrict",class:""},{label:"PinCode",value:"pinCode",class:""}];var I=m(88059),A=m(50363),N=m(95346),E=m(83344);function G(r,c){if(1&r&&(t._UZ(0,"input",56),t.ALo(1,"UOMUnitsMaster")),2&r){const i=t.oxw(),n=t.MAs(112);t.s9C("value",t.lcZ(1,2,i.form.controls.uom1.value)),t.Q6J("ngbTooltip",n)}}function $(r,c){if(1&r&&(t._UZ(0,"input",57),t.ALo(1,"UOMUnitsMaster")),2&r){const i=t.oxw();t.s9C("value",t.lcZ(1,1,i.form.controls.uom1.value))}}function z(r,c){if(1&r&&(t._UZ(0,"input",58),t.ALo(1,"UOMUnitsMaster")),2&r){const i=t.oxw(),n=t.MAs(114);t.s9C("value",t.lcZ(1,2,i.form.controls.uom2.value)),t.Q6J("ngbTooltip",n)}}function K(r,c){if(1&r&&(t._UZ(0,"input",57),t.ALo(1,"UOMUnitsMaster")),2&r){const i=t.oxw();t.s9C("value",t.lcZ(1,1,i.form.controls.uom2.value))}}function B(r,c){1&r&&(t.TgZ(0,"span",73),t._uU(1),t.ALo(2,"companyCurrency"),t._UZ(3,"div",31),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INR")," "))}function X(r,c){1&r&&(t.TgZ(0,"span",73),t._uU(1),t.ALo(2,"companyCurrency"),t._UZ(3,"div",31),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INR")," "))}function tt(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td",49,59)(3,"span",60),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",49,61)(9,"span",60),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"UOMUnitsMaster"),t.qZA(),t.TgZ(14,"td",62)(15,"div",63),t.YNc(16,B,4,3,"span",64),t.TgZ(17,"span",65),t._uU(18),t.qZA()()(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"UOMUnitsMaster"),t.qZA(),t.TgZ(22,"td",62)(23,"div",63),t.YNc(24,X,4,3,"span",64),t.TgZ(25,"span",65),t._uU(26),t.qZA()()(),t.TgZ(27,"td")(28,"div",66),t._UZ(29,"button",67),t.TgZ(30,"div",68)(31,"a",69),t.NdJ("click",function(){const e=t.CHM(i),a=e.$implicit,l=e.index,y=t.oxw();return t.KtG(y.patchItem(a,l,"view"))}),t._UZ(32,"i",70),t._uU(33," View "),t.qZA(),t.TgZ(34,"a",69),t.NdJ("click",function(){const e=t.CHM(i),a=e.$implicit,l=e.index,y=t.oxw();return t.KtG(y.patchItem(a,l,"edit"))}),t._UZ(35,"i",71),t._uU(36," Edit "),t.qZA(),t.TgZ(37,"a",69),t.NdJ("click",function(){const a=t.CHM(i).index,l=t.oxw();return t.KtG(l.deleteItem(a))}),t._UZ(38,"i",72),t._uU(39," Delete "),t.qZA()()()()()}if(2&r){const i=c.$implicit,n=t.MAs(2),e=t.MAs(8),a=t.oxw();t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("positionTarget",n)("ngbTooltip",i.jobWorkerName),t.xp6(1),t.hij(" ",null==i?null:i.jobWorkerName," "),t.xp6(2),t.Oqu(null==i?null:i.partNo),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",i.partName),t.xp6(1),t.hij(" ",null==i?null:i.partName," "),t.xp6(2),t.Oqu(null!=i&&i.uom1?t.lcZ(13,19,null==i?null:i.uom1):null),t.xp6(4),t.Q6J("ngIf",null==i?null:i.stdCostUom1),t.xp6(2),t.hij(" ",null==i?null:i.stdCostUom1," "),t.xp6(2),t.Oqu(null!=i&&i.uom2?t.lcZ(21,21,null==i?null:i.uom2):null),t.xp6(4),t.Q6J("ngIf",null==i?null:i.stdCostUom2),t.xp6(2),t.hij(" ",null==i?null:i.stdCostUom2," "),t.xp6(11),t.ekj("disable","view"==a.action)}}function et(r,c){if(1&r&&(t.TgZ(0,"div",75)(1,"span",49),t._uU(2),t.qZA()()),2&r){const i=t.oxw(2);t.xp6(2),t.hij(" ",i.conversionOfUnitsForPrimary," ")}}function nt(r,c){if(1&r&&t.YNc(0,et,3,1,"div",74),2&r){const i=t.oxw();t.Q6J("ngIf",i.primaryUnit||i.secondaryUnit)}}function ot(r,c){if(1&r&&(t.TgZ(0,"div",75)(1,"span",49),t._uU(2),t.qZA()()),2&r){const i=t.oxw(2);t.xp6(2),t.hij(" ",i.conversionOfUnitsForSecondary," ")}}function it(r,c){if(1&r&&t.YNc(0,ot,3,1,"div",74),2&r){const i=t.oxw();t.Q6J("ngIf",i.primaryUnit||i.secondaryUnit)}}const rt=function(r,c,i,n){return{page:r,pageSize:c,collection:i,search:n,excelDisplay:"none"}};let st=(()=>{var r;class c{constructor(n,e,a,l){this.activeModal=n,this.validationService=e,this.toastService=a,this.modalService=l,this.action="",this.primaryUnit="",this.secondaryUnit="",this.unitConversionFlag=0,this.primaryToSecondaryConversion="",this.secondaryToPrimaryConversion="",this.jobWorkerOptions=[],this.jobWorkerDetails=[],this.selectedSupplierDetails={},this.btnDisable=!1,this.page=1,this.pageSize=4,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.conversionOfUnitsForPrimary="",this.conversionOfUnitsForSecondary="",this.selectedDetails={},this.tableHead=_,this.form=new s.nJ({index:new s.p4(-1),jobWorker:new s.p4(null),jobWorkerName:new s.p4(null),currency:new s.p4(null),partNo:new s.p4(null),partName:new s.p4(null),uom1:new s.p4(null),uom2:new s.p4(null),stdCostUom1:new s.p4(null),stdCostUom2:new s.p4(null)}),this.findFormErrors=[{message:"Job Worker Name",key:"jobWorker"}]}ngOnInit(){this.collection=this.jobWorkerDetails.length,(!this.secondaryUnit||"-"==this.secondaryUnit)&&(this.form.controls.uom2.disable(),this.form.controls.stdCostUom2.disable()),this.primaryUnit&&this.form.controls.uom1.setValue(this.primaryUnit),this.secondaryUnit&&this.form.controls.uom2.setValue(this.secondaryUnit),(this.primaryUnit||this.secondaryUnit)&&(this.conversionOfUnitsForPrimary=`${1==this.unitConversionFlag?1:2==this.unitConversionFlag?this.secondaryToPrimaryConversion:1} ${this.primaryUnit} = ${1==this.unitConversionFlag?this.primaryToSecondaryConversion:1} ${this.secondaryUnit??this.primaryUnit}`,this.conversionOfUnitsForSecondary=`${1==this.unitConversionFlag?this.primaryToSecondaryConversion:1} ${this.secondaryUnit} = ${1==this.unitConversionFlag?1:2==this.unitConversionFlag?this.secondaryToPrimaryConversion:1} ${this.primaryUnit}`)}setUnit2PurchaseCost(){let n=this.form.controls.stdCostUom1.value;this.secondaryUnit&&this.primaryUnit&&1==this.unitConversionFlag&&this.form.controls.stdCostUom2.setValue(+(n/this.primaryToSecondaryConversion).toFixed(2)),this.secondaryUnit&&this.primaryUnit&&2==this.unitConversionFlag&&this.form.controls.stdCostUom2.setValue(+(n/this.secondaryToPrimaryConversion).toFixed(2))}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}addJobWorker(){if(this.validationService.checkErrors(this.form,this.findFormErrors))return;let n=this.form.value;n.jobWorkerName?n.uom1?n.stdCostUom1?((n.index||0==n.index)&&n.index>=0?this.jobWorkerDetails.splice(n.index,1,n):this.jobWorkerDetails.push(n),this.collection=this.jobWorkerDetails.length,this.form.reset(),this.primaryUnit&&this.form.controls.uom1.setValue(this.primaryUnit),this.secondaryUnit&&this.form.controls.uom2.setValue(this.secondaryUnit)):this.toastService.warning("Process Cost is required !"):this.toastService.warning("Unit 1 is required !"):this.toastService.warning("Job Worker Name is required !")}patchItem(n,e,a){n.index=e,this.form.patchValue(n),"view"==a?(this.btnDisable=!0,this.form.disable()):(this.form.enable(),this.btnDisable=!1)}deleteItem(n){"view"!=this.action&&(this.jobWorkerDetails.splice(n+(this.page-1)*this.pageSize,1),this.collection=this.jobWorkerDetails.length)}setJobWorkerCurrency(n){n.currency&&this.form.controls.currency.setValue(n?.currency),n.label&&this.form.controls.jobWorkerName.setValue(n?.label)}dismissModal(){this.form.enable(),this.activeModal.close(this.jobWorkerDetails)}openJobWorkDetailsModal(){if("create"==this.action){const n=this.modalService.open(M.xv,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.title="Job Work Details",n.componentInstance.selectedDetails=this.selectedDetails,n.componentInstance.tableHead=this.tableHead,n.componentInstance.bodyList=this.jobWorkerOptions,n.componentInstance._id=this.form.controls.jobWorker.value,n.result.then(e=>{e&&(this.selectedDetails=e?.selectedDetails,this.form.controls.jobWorker.setValue(e?.selectedDetails?._id),this.setJobWorkerCurrency(e?.selectedDetails))},e=>{})}}}return(r=c).\u0275fac=function(n){return new(n||r)(t.Y36(b.Kz),t.Y36(k.RJ),t.Y36(v.kl),t.Y36(b.FF))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-job-worker-modal"]],inputs:{action:"action",primaryUnit:"primaryUnit",secondaryUnit:"secondaryUnit",unitConversionFlag:"unitConversionFlag",primaryToSecondaryConversion:"primaryToSecondaryConversion",secondaryToPrimaryConversion:"secondaryToPrimaryConversion",jobWorkerOptions:"jobWorkerOptions",jobWorkerDetails:"jobWorkerDetails"},decls:115,vars:29,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid","px-0"],[3,"formGroup"],[1,"row","px-5","mt-4"],[1,"col-7","separate-row"],[1,"row"],[1,"col-5","ps-1","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","jobWorker",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-3","ps-0"],["type","text","formControlName","partNo",1,"form-control"],[1,"col-4","px-0"],["type","text","formControlName","partName",1,"form-control"],[1,"col-5"],[1,"col-5","pe-0"],[1,"d-flex"],[1,"col-4","me-1"],["type","text","class","form-control ps-2 pe-0 pointer","readonly","","placement","bottom",3,"ngbTooltip","value",4,"ngIf"],["type","text","class","form-control ps-2 pe-0","readonly","",3,"value",4,"ngIf"],[1,"col-8"],[1,"input-group-text","combine-INR","text-secondary"],[1,"vr","ms-3"],["formControlName","stdCostUom1","type","number",1,"form-control","border-start-0",3,"input"],[1,"col-1","d-flex","align-items-center","justify-content-center","px-0"],[1,"d-flex","justify-content-center","mt-1"],[1,"fs-3","mt-4","text-secondary"],[1,"col-5","ps-0"],["type","text","class","form-control ps-2 pe-0 pointer","readonly","","placement","bottom",3,"value","ngbTooltip",4,"ngIf"],["formControlName","stdCostUom2","type","number",1,"form-control","border-start-0"],[1,"col-1","d-flex","align-items-end","ps-0"],["type","button",1,"plusIconSvg","btn","btn-primary",3,"disabled","click"],[1,"line-border","mt-4","px-5"],[1,"row","justify-content-center","px-4"],[1,"col-12"],[3,"data","dataChange"],[1,"table-responsive","mt-1",2,"min-height","17rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"line-border","my-5","px-5"],[1,"text-center","mb-5"],["type","button",1,"btn","bg-primary","px-5",3,"disabled","click"],["list",""],["list2",""],["type","text","readonly","","placement","bottom",1,"form-control","ps-2","pe-0","pointer",3,"ngbTooltip","value"],["type","text","readonly","",1,"form-control","ps-2","pe-0",3,"value"],["type","text","readonly","","placement","bottom",1,"form-control","ps-2","pe-0","pointer",3,"value","ngbTooltip"],["jobWorkerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["partName",""],[1,"py-0"],[1,"d-flex","justify-content-start","align-items-center"],["class","input-group-text text-secondary combine-INR border border-0",4,"ngIf"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-trash","me-2","text-primary"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Add Job Worker"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.dismissModal()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"form",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),t._uU(15," Job Worker Name"),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"ng-select",16),t.NdJ("change",function(l){return e.setJobWorkerCurrency(l)}),t.qZA()(),t.TgZ(21,"div",17),t.NdJ("click",function(){return e.openJobWorkDetailsModal()}),t._UZ(22,"i",18),t.qZA()()(),t.TgZ(23,"div",19)(24,"label",12),t._uU(25," Part No. (JW) "),t.qZA(),t._UZ(26,"input",20),t.qZA(),t.TgZ(27,"div",21)(28,"label",12),t._uU(29," Part Name (JW) "),t._UZ(30,"span",13),t.qZA(),t._UZ(31,"input",22),t.qZA()()(),t.TgZ(32,"div",23)(33,"div",10)(34,"div",24)(35,"div",25)(36,"div",26)(37,"label",12),t._uU(38,"Unit 1 "),t.TgZ(39,"span",13),t._uU(40,"*"),t.qZA()(),t.YNc(41,G,2,4,"input",27),t.YNc(42,$,2,3,"input",28),t.qZA(),t.TgZ(43,"div",29)(44,"label",12),t._uU(45," Process Cost "),t.TgZ(46,"span",13),t._uU(47,"*"),t.qZA()(),t.TgZ(48,"div",25)(49,"span",30),t._uU(50),t.ALo(51,"companyCurrency"),t._UZ(52,"div",31),t.qZA(),t.TgZ(53,"input",32),t.NdJ("input",function(){return e.setUnit2PurchaseCost()}),t.qZA()()()()(),t.TgZ(54,"div",33)(55,"span",34)(56,"div",35),t._uU(57,"="),t.qZA()()(),t.TgZ(58,"div",36)(59,"div",25)(60,"div",26)(61,"label",12),t._uU(62,"Unit 2"),t.qZA(),t.YNc(63,z,2,4,"input",37),t.YNc(64,K,2,3,"input",28),t.qZA(),t.TgZ(65,"div",29)(66,"label",12),t._uU(67," Process Cost "),t.TgZ(68,"span",13),t._uU(69,"*"),t.qZA()(),t.TgZ(70,"div",25)(71,"span",30),t._uU(72),t.ALo(73,"companyCurrency"),t._UZ(74,"div",31),t.qZA(),t._UZ(75,"input",38),t.qZA()()()(),t.TgZ(76,"div",39)(77,"button",40),t.NdJ("click",function(){return e.addJobWorker()}),t.qZA()()()()()(),t._UZ(78,"hr",41),t.TgZ(79,"div",42)(80,"div",43)(81,"div")(82,"app-setting-header",44),t.NdJ("dataChange",function(l){return e.eventHeader(l)}),t.qZA()(),t.TgZ(83,"div",45)(84,"table",46)(85,"thead",47)(86,"tr",48)(87,"th",49),t._uU(88,"Job Worker Name"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Part No. (JW)"),t.qZA(),t.TgZ(91,"th",49),t._uU(92,"Part Name (JW)"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Unit 1"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Process Cost"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Unit 2"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Process Cost"),t.qZA(),t.TgZ(101,"th"),t._uU(102,"Action"),t.qZA()()(),t.TgZ(103,"tbody"),t.YNc(104,tt,40,23,"tr",50),t.ALo(105,"slice"),t.ALo(106,"searchFi1ter"),t.qZA()()()()(),t._UZ(107,"hr",51),t.TgZ(108,"div",52)(109,"button",53),t.NdJ("click",function(){return e.dismissModal()}),t._uU(110," Save & Close "),t.qZA()()()()(),t.YNc(111,nt,1,1,"ng-template",null,54,t.W1O),t.YNc(113,it,1,1,"ng-template",null,55,t.W1O)),2&n&&(t.xp6(9),t.Q6J("formGroup",e.form),t.xp6(11),t.Q6J("items",e.jobWorkerOptions)("clearable",!1),t.xp6(21),t.Q6J("ngIf",e.secondaryUnit&&(e.primaryToSecondaryConversion||e.secondaryToPrimaryConversion)),t.xp6(1),t.Q6J("ngIf",!e.secondaryUnit||!e.primaryToSecondaryConversion&&!e.secondaryToPrimaryConversion),t.xp6(8),t.hij(" ",t.lcZ(51,13,"INR")," "),t.xp6(13),t.Q6J("ngIf",e.secondaryUnit&&(e.primaryToSecondaryConversion||e.secondaryToPrimaryConversion)),t.xp6(1),t.Q6J("ngIf",!e.secondaryUnit||!e.primaryToSecondaryConversion&&!e.secondaryToPrimaryConversion),t.xp6(8),t.hij(" ",t.lcZ(73,15,"INR")," "),t.xp6(5),t.Q6J("disabled",e.btnDisable||"view"==e.action),t.xp6(5),t.Q6J("data",t.l5B(24,rt,e.page,e.pageSize,e.collection,e.search)),t.xp6(22),t.Q6J("ngForOf",t.Dn7(105,17,t.xi3(106,21,e.jobWorkerDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize)),t.xp6(5),t.Q6J("disabled",e.btnDisable||"view"==e.action))},dependencies:[g.sg,g.O5,I.P,b._L,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,A.w9,g.OU,N.G,E.f,Z.S],encapsulation:2}),c})();var T=m(37398);let L=(()=>{var r;class c{constructor(n){this.http=n,this.routes={createPath:"/purchase/jobWorkItemMaster/create",getAllPath:"/purchase/jobWorkItemMaster/getAll",getAllMasterDataPath:"/purchase/jobWorkItemMaster/getAllMasterData",updatePath:e=>`/purchase/jobWorkItemMaster/update/${e}`,getByIdPath:e=>`/purchase/jobWorkItemMaster/getById/${e}`,deletePath:e=>`/purchase/jobWorkItemMaster/delete/${e}`}}create(n){return this.http.post(this.routes.createPath,n).pipe((0,T.U)(e=>e))}getAll(n){return this.http.get(this.routes.getAllPath,n).pipe((0,T.U)(e=>e))}getAllMasterData(n){return this.http.get(this.routes.getAllMasterDataPath,n).pipe((0,T.U)(e=>e))}update(n,e){return this.http.put(this.routes.updatePath(n),e).pipe((0,T.U)(a=>a))}getById(n){return this.http.get(this.routes.getByIdPath(n)).pipe((0,T.U)(e=>e))}delete(n){return this.http.delete(this.routes.deletePath(n)).pipe((0,T.U)(e=>e))}}return(r=c).\u0275fac=function(n){return new(n||r)(t.LFG(v.sM))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),c})();function at(r,c){if(1&r&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function lt(r,c){if(1&r&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",null==i?null:i.label," ")}}function ct(r,c){if(1&r&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&r){const i=c.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",null==i?null:i.value," ")}}function ut(r,c){1&r&&t._UZ(0,"div",42)}function dt(r,c){1&r&&t._UZ(0,"div",43)}function mt(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"div",44)(1,"button",45),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",46),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(4,"Save"),t.qZA()()}}let pt=(()=>{var r;class c{constructor(n,e,a,l,y,S,F,P,H){this.activatedRoute=n,this.spinner=e,this.toastService=a,this.validationService=l,this.jobWorkerItemsMasterService=y,this.modalService=S,this.location=F,this.utilityService=P,this.appGlobalService=H,this.unsavedChanges=!1,this.jobWorkerDetails=[],this.active=1,this.collection=0,this.filterItems=[],this.action="create",this.submitted=!1,this.itemCategory={},this.TDSFile=null,this.MSDSFile=null,this.drawingFile=null,this.empAadharCardFile=null,this.QCLevelsArr=C.xs,this.selectedChannelPartnerDetails={},this.POTypeObj=C.LJ,this.channelPartnerOptions=[],this.UOMUintMasterOptions=[],this.UOMDefaultValueOptions=[],this.masterData={QCLevelsOptions:[],HSNCodesList:[],itemCategories:[],WXLDimensionsUnit:"",jobWorkerOptions:[]},this.companyTypeIPManufacturing=C.pr,this.form=new s.nJ({_id:new s.p4(null),itemCategory:new s.p4(null,[s.kI.required]),jobWorkItemCode:new s.p4(null,[s.kI.required]),jobWorkItemName:new s.p4(null,[s.kI.required]),jobWorkItemDescription:new s.p4(null,[s.kI.required]),primaryUnit:new s.p4(null),secondaryUnit:new s.p4(null),conversionFactor:new s.p4(null),primaryToSecondaryConversion:new s.p4(null),secondaryToPrimaryConversion:new s.p4(null),conversionOfUnits:new s.p4(null),orderInfoUOM:new s.p4(null,[s.kI.required]),unitConversionFlag:new s.p4(null),primaryConversion:new s.p4(null),secondaryConversion:new s.p4(null),dualUnitsDimensionsDetails:new s.p4(null),HSN:new s.p4(null),HSNCode:new s.p4(null,[s.kI.required]),gst:new s.p4(null),igst:new s.p4(null),cgst:new s.p4(null),sgst:new s.p4(null),ugst:new s.p4(null),shelfLife:new s.p4(null,[s.kI.required]),QCLevels:new s.p4(null,[s.kI.required]),status:new s.p4(null),jobWorkerDetails:new s.nJ({jobWorker:new s.p4(null),jobWorkerName:new s.p4(null),currency:new s.p4(null),partNo:new s.p4(null),partName:new s.p4(null),uom1:new s.p4(null),uom2:new s.p4(null),stdCostUom1:new s.p4(null),stdCostUom2:new s.p4(null)})})}get dimensionData(){return this.form.get("dualUnitsDimensionsDetails")}get f(){return this.form.controls}ngOnInit(){if(this.UOMUintMasterOptions=this.appGlobalService.UOMUintMasterOptions,this.getInitialData(),this.form.valueChanges.subscribe(n=>{this.unsavedChanges=!0}),this.UOMDefaultValueOptions=this.appGlobalService?.UOMDefaultValueOptions,this.UOMDefaultValueOptions?.length>0){if(!this.f.orderInfoUOM.value){let n=null;n=this.findValue(this.UOMDefaultValueOptions,"PURCHASE_UOM"),this.f.orderInfoUOM.setValue(n)}if(!this.f.primaryUnit.value){let n=null;n=this.findValue(this.UOMDefaultValueOptions,"PURCHASE_PRIMARY_UNIT"),this.f.primaryUnit.setValue(n)}}}findValue(n,e){return n?.find(a=>a?.parameterLabel==e)?.parameterName}canDeactivate(){return!this.unsavedChanges||this.openCanDeactivateModal()}openCanDeactivateModal(){return new Promise((n,e)=>{const a=this.modalService.open(M.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});a.componentInstance.action=this.action,a.componentInstance.heading="Warning Message",a.componentInstance.cancelText="Do you want to leave this page without saving data ?",a.result.then(l=>{n("Yes"==l)},l=>{})})}selectItemCategory(n){""==n.target.value?this.form.controls.jobWorkItemCode.setValue(this.itemCategory[n.target.value]):(n.target.value&&this.form.controls.jobWorkItemCode.setValue(this.itemCategory[n.target.value]),this.form.enable())}trackByFn(n,e){return e?._id}reset(){this.form.reset(),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,x.Ym))return;if(0==this.jobWorkerDetails.length)return void this.toastService.warning("Please add at least one Job Worker detail !");let n=this.form.value;n.jobWorkerDetails=this.jobWorkerDetails,n.rmSpecifications&&(n.rmSpecifications=[n.rmSpecifications]),n.conversionOfUnits=n.primaryUnit&&n.secondaryUnit&&"-"!=n.secondaryUnit?n.primaryToSecondaryConversion?`1 ${n.primaryUnit} = ${n.primaryToSecondaryConversion} ${n.secondaryUnit}`:`1 ${n.secondaryUnit??"Unit"} = ${n.secondaryToPrimaryConversion??1} ${n.primaryUnit??"Unit"}`:"",this.unsavedChanges=!1,n._id?this.update(n._id,n):(delete n._id,this.create(n))}create(n){this.spinner.show(),this.jobWorkerItemsMasterService.create(n).subscribe(e=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(e.message),this.location.back()},e=>{console.log(e)})}update(n,e){this.spinner.show(),this.jobWorkerItemsMasterService.update(n,e).subscribe(a=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(a.message),this.location.back()},a=>{console.log(a)})}getInitialData(){this.spinner.show(),this.jobWorkerItemsMasterService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.itemCategory=n?.autoIncValues,this.masterData.QCLevelsOptions=this.masterData.QCLevelsOptions.map(e=>({label:`${e.parameterName} - ${e.parameterLabel}`,value:e.parameterName})),1==this.masterData?.itemCategories?.length&&(this.form.controls.itemCategory.setValue(this.masterData?.itemCategories[0]),this.form.controls.jobWorkItemCode.setValue(this.itemCategory[this.form.controls.itemCategory.value]),this.form.controls.itemCategory.disable()),this.form.controls.status.setValue("Active"),this.form.controls.unitConversionFlag.setValue(1),this.form.controls.primaryConversion.setValue(1),this.form.controls.secondaryConversion.setValue(1),this.activatedRoute.queryParams.pipe((0,D.z)(e=>(this.action=e.action,this.utilityService.accessDenied(this.action),e.id?this.jobWorkerItemsMasterService.getById(e.id):(0,W.of)({})))).subscribe(e=>{this.spinner.hide(),0!=Object.keys(e).length?(e.jobWorkerDetails.length&&(this.jobWorkerDetails=e.jobWorkerDetails),this.form.patchValue(e),"edit"!=this.action&&this.form.disable(),this.unsavedChanges=!1):this.unsavedChanges=!1})})}setPrimaryUnit(n){this.form.controls.primaryUnit.setValue(n.target.value),this.form.controls.secondaryUnit.value||this.form.controls.secondaryUnit.setValue("-")}setGST(){let n=this.masterData?.HSNCodesList.find(e=>e.value==this.f.HSNCode.value.trim());this.form.controls.gst.setValue(n?.gstRate??0),this.form.controls.igst.setValue(n?.igstRate??0),this.form.controls.cgst.setValue(n?.cgstRate??0),this.form.controls.sgst.setValue(n?.sgstRate??0),this.form.controls.ugst.setValue(n?.ugstRate??0),this.form.controls.HSN.setValue(n?._id)}openFormulationHSNModal(){const n=this.modalService.open(w.K,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.HSNCodeArr=this.masterData?.HSNCodesList,n.componentInstance.editScreen="Edit Screen",n.componentInstance.HSNCode=this.form.controls.HSNCode.value,n.result.then(e=>{e&&(this.form.controls.HSNCode.setValue(e?.HSNSelectCode),this.setGST())},e=>{})}openJobWorkerDetailsModal(){const n=this.modalService.open(st,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.primaryUnit=this.form.controls.orderInfoUOM.value,n.componentInstance.unitConversionFlag=this.form.controls.unitConversionFlag.value,n.componentInstance.secondaryUnit=this.form.controls.secondaryUnit.value,n.componentInstance.primaryToSecondaryConversion=this.form.controls.primaryToSecondaryConversion.value,n.componentInstance.secondaryToPrimaryConversion=this.form.controls.secondaryToPrimaryConversion.value,n.componentInstance.jobWorkerDetails=this.jobWorkerDetails,n.componentInstance.jobWorkerOptions=this.masterData?.jobWorkerOptions,n.result.then(e=>{["create","edit"].includes(this.action)&&(console.log("success",e),this.jobWorkerDetails=e,this.unsavedChanges=!0)},e=>{})}openUOMDetailsModal(){const n=this.modalService.open(f,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.ModalUOMsUnit=this.UOMUintMasterOptions,n.componentInstance.flag=!0,n.componentInstance.dimensionData=this.dimensionData.value,n.componentInstance.WXLDimensionsUnit=this.masterData?.WXLDimensionsUnit,n.componentInstance.dualUnits={primaryUnit:this.form.value.primaryUnit,secondaryUnit:this.form.value.secondaryUnit??"-",unitConversionFlag:this.form.value.unitConversionFlag,primaryConversion:this.form.value.primaryConversion,secondaryConversion:this.form.value.secondaryConversion,primaryToSecondaryConversion:this.form.value.primaryToSecondaryConversion,secondaryToPrimaryConversion:this.form.value.secondaryToPrimaryConversion},n.result.then(e=>{e&&["create","edit"].includes(this.action)&&(console.log("success",e),this.form.patchValue(e),this.form.controls.orderInfoUOM.setValue(e.primaryUnit),this.form.controls.dualUnitsDimensionsDetails.patchValue(e?.dualUnitsDimensionsDetails),this.unsavedChanges=!0)},e=>{})}}return(r=c).\u0275fac=function(n){return new(n||r)(t.Y36(o.gz),t.Y36(v.V),t.Y36(v.kl),t.Y36(k.RJ),t.Y36(L),t.Y36(b.FF),t.Y36(g.Ye),t.Y36(v.tI),t.Y36(v.P0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-job-worker-item-master-form"]],decls:102,vars:19,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row","mb-4"],[1,"col-3"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","itemCategory",1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","jobWorkItemCode","readonly","",1,"form-control"],["type","text","formControlName","jobWorkItemName",1,"form-control"],["type","text","formControlName","jobWorkItemDescription",1,"form-control"],[1,"form-label","mb-1","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"disabled","click"],["formControlName","orderInfoUOM",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["formControlName","HSNCode",1,"form-select",3,"change"],["disabled","","selected","",3,"value"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],["type","number","formControlName","shelfLife",1,"form-control"],["bindLabel","label","bindValue","value","formControlName","QCLevels",3,"items","clearable"],[1,"row","line-border","mb-4"],[1,"col-2","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1",3,"disabled"],["type","button",1,"btn","btn-primary","me-4","px-3",3,"disabled","click"],[1,"col-3","ps-0"],[1,"col-md-auto","text-nowrap"],["type","button",1,"btn","btn-primary","px-3"],["formControlName","status",1,"form-select","statusSelectBorder"],["value","Active"],["value","Inactive"],[1,"input-group-text","statusSpanHeight"],["class","statusActive","class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"statusActive"],[1,"statusInActive"],[1,"col","text-end"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11," Item Category "),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",9),t.NdJ("change",function(l){return e.selectItemCategory(l)}),t.TgZ(15,"option",10),t._uU(16,"Select Item Category"),t.qZA(),t.YNc(17,at,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",6)(19,"label",7),t._uU(20," Job Work Item Code"),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",12),t.qZA(),t.TgZ(24,"div",6)(25,"label",7),t._uU(26," Job Work Item Name "),t.TgZ(27,"span",8),t._uU(28,"*"),t.qZA()(),t._UZ(29,"input",13),t.qZA(),t.TgZ(30,"div",6)(31,"label",7),t._uU(32," Job Work Item Description "),t.TgZ(33,"span",8),t._uU(34,"*"),t.qZA()(),t._UZ(35,"input",14),t.qZA()(),t.TgZ(36,"div",5)(37,"div",6)(38,"label",15),t._uU(39," Unit of Measurement "),t.TgZ(40,"span",8),t._uU(41,"*"),t.qZA(),t._UZ(42,"span")(43,"span")(44,"span")(45,"span")(46,"span"),t.TgZ(47,"button",16),t.NdJ("click",function(){return e.openUOMDetailsModal()}),t._uU(48," Dual Units "),t.qZA()(),t.TgZ(49,"select",17),t.NdJ("change",function(l){return e.setPrimaryUnit(l)}),t.TgZ(50,"option",18),t._uU(51,"Select Primary Unit"),t.qZA(),t.TgZ(52,"option",19),t._uU(53,"Unit"),t.qZA(),t.YNc(54,lt,2,2,"option",11),t.qZA()(),t.TgZ(55,"div",6)(56,"label",7),t._uU(57," HSN Code "),t.TgZ(58,"span",8),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",20)(61,"div",21)(62,"select",22),t.NdJ("change",function(){return e.setGST()}),t.TgZ(63,"option",23),t._uU(64,"Select HSN Code"),t.qZA(),t.YNc(65,ct,2,2,"option",11),t.qZA()(),t.TgZ(66,"div",24),t.NdJ("click",function(){return e.openFormulationHSNModal()}),t._UZ(67,"i",25),t.qZA()()(),t.TgZ(68,"div",6)(69,"label",7),t._uU(70,"Shelf Life (Months) "),t.TgZ(71,"span",8),t._uU(72,"*"),t.qZA()(),t._UZ(73,"input",26),t.qZA(),t.TgZ(74,"div",6)(75,"label",7),t._uU(76,"Quality Control Level "),t.TgZ(77,"span",8),t._uU(78,"*"),t.qZA()(),t._UZ(79,"ng-select",27),t.qZA()()(),t._UZ(80,"hr",28),t.TgZ(81,"div",5)(82,"div",29),t._UZ(83,"button",30),t.TgZ(84,"button",31),t.NdJ("click",function(){return e.openJobWorkerDetailsModal()}),t._uU(85," Job Worker "),t.qZA()(),t.TgZ(86,"div",32)(87,"div",20)(88,"div",33)(89,"button",34),t._uU(90,"Status"),t.qZA()(),t.TgZ(91,"select",35)(92,"option",18),t._uU(93,"Select Status"),t.qZA(),t.TgZ(94,"option",36),t._uU(95,"Active"),t.qZA(),t.TgZ(96,"option",37),t._uU(97,"Inactive"),t.qZA()(),t.TgZ(98,"span",38),t.YNc(99,ut,1,0,"div",39),t.YNc(100,dt,1,0,"div",40),t.qZA()()(),t.YNc(101,mt,5,0,"div",41),t.qZA()()()),2&n&&(t.Q6J("formGroup",e.form),t.xp6(5),t.hij("Job Work Item Master (",t.lcZ(6,17,e.action),")"),t.xp6(12),t.Q6J("ngForOf",null==e.masterData?null:e.masterData.itemCategories),t.xp6(30),t.Q6J("disabled",!e.form.controls.orderInfoUOM.value),t.xp6(3),t.Q6J("value",null),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",e.UOMUintMasterOptions),t.xp6(9),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",null==e.masterData?null:e.masterData.HSNCodesList),t.xp6(14),t.Q6J("items",e.masterData.QCLevelsOptions)("clearable",!1),t.xp6(4),t.Q6J("disabled",!e.form.controls.orderInfoUOM.value),t.xp6(1),t.Q6J("disabled",!e.form.controls.orderInfoUOM.value),t.xp6(8),t.Q6J("value","null"),t.xp6(7),t.Q6J("ngIf","Active"==e.form.value.status),t.xp6(1),t.Q6J("ngIf","Inactive"==e.form.value.status),t.xp6(1),t.Q6J("ngIf","view"!=e.action))},dependencies:[g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,A.w9,g.rS],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]}),c})();var V=m(43818),Q=m(11909),ht=m(53421);function ft(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"div",40),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,a=t.oxw();return t.KtG(a.setConversionOfUnit(e))}),t.qZA()}}function _t(r,c){1&r&&t._UZ(0,"div",41)}function gt(r,c){1&r&&t._UZ(0,"div",42)}function vt(r,c){1&r&&t._UZ(0,"div",43)}function Ut(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,a=t.oxw();return t.KtG(a.openConfirmModal(null==e?null:e._id,null==e?null:e.jobWorkItemCode))}),t._UZ(1,"i",45),t._uU(2," Delete "),t.qZA()}}function bt(r,c){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t.ynx(12),t.TgZ(13,"div",25)(14,"span",26),t._uU(15),t.ALo(16,"UOMUnitsMaster"),t.qZA(),t.TgZ(17,"span",27),t.YNc(18,ft,1,0,"div",28),t.YNc(19,_t,1,0,"div",29),t.qZA()(),t.BQk(),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td")(27,"span",30),t.YNc(28,gt,1,0,"div",31),t.YNc(29,vt,1,0,"div",32),t.qZA()(),t.TgZ(30,"td")(31,"div",33),t._UZ(32,"button",34),t.TgZ(33,"div",35)(34,"a",36),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.navigateTo("../form",a,"view"))}),t._UZ(35,"i",37),t._uU(36," View "),t.qZA(),t.TgZ(37,"a",36),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.navigateTo("../form",a,"edit"))}),t._UZ(38,"i",38),t._uU(39," Edit "),t.qZA(),t.YNc(40,Ut,3,0,"a",39),t.qZA()()()()}if(2&r){const i=c.$implicit,n=t.MAs(4),e=t.MAs(8),a=t.oxw();t.xp6(2),t.Oqu(null==i?null:i.jobWorkItemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("positionTarget",n)("ngbTooltip",i.jobWorkItemName),t.xp6(1),t.hij(" ",i.jobWorkItemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",i.jobWorkItemDescription),t.xp6(1),t.hij(" ",i.jobWorkItemDescription," "),t.xp6(4),t.Q6J("ngbTooltip",i.conversionOfUnits)("ngClass",i.orderInfoUOM==i.secondaryUnit?"text-primary pointer":"text-secondary pointer"),t.xp6(1),t.hij("",t.lcZ(16,24,null==i?null:i.orderInfoUOM)," "),t.xp6(3),t.Q6J("ngIf",i.primaryUnit&&i.secondaryUnit&&"-"!=i.secondaryUnit),t.xp6(1),t.Q6J("ngIf",!(i.primaryUnit&&i.secondaryUnit&&"-"!=i.secondaryUnit)),t.xp6(2),t.Oqu(null==i?null:i.HSNCode),t.xp6(2),t.Oqu(null==i?null:i.shelfLife),t.xp6(2),t.Oqu(null==i?null:i.QCLevels),t.xp6(3),t.Q6J("ngIf","Active"==i.status),t.xp6(1),t.Q6J("ngIf","Inactive"==i.status),t.xp6(5),t.Q6J("accessType",a.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",a.rolePermissionActions.editAction),t.xp6(3),t.Q6J("ngIf",a.user==a.superAdminId)}}const yt=function(r,c,i,n){return{page:r,pageSize:c,collection:i,search:n,type:"list"}};let Ct=(()=>{var r;class c{constructor(n,e,a,l,y,S,F,P,H,Mt){this.exportExcelService=n,this.router=e,this.jobWorkerItemsMasterService=a,this.spinner=l,this.activatedRoute=y,this.exportToPDFService=S,this.storageService=F,this.toastService=P,this.modalService=H,this.utilityService=Mt,this.page=1,this.pageSize=8,this.collection=0,this.search="",this.column="itemCode",this.direction=1,this.itemData=[],this.superAdminId=C.dA,this.user="",this.rolePermissionActions=C.a1}ngOnInit(){this.user=this.storageService.get("IDMSAUser")?.roles?.find(n=>n==this.superAdminId),this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(n,e,a){if("Inactive"==e.isActive&&"copy"==a)return null;this.router.navigate([n],{relativeTo:this.activatedRoute,queryParams:{id:e?._id,action:a}})}trackByFn(n,e){return e?._id}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=n.value,this.getAll()}}getAll(n=!1,e=""){this.spinner.show();let a={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:n};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.jobWorkerItemsMasterService.getAll(a).subscribe(l=>{"EXCEL"==e?this.excelDownload(l.rows):"PDF"==e?this.pdfDownload(l.rows):(this.itemData=l.rows,this.collection=l.count),this.spinner.hide()})}delete(n){this.spinner.show(),this.jobWorkerItemsMasterService.delete(n).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.getAll()})}openConfirmModal(n,e){const a=this.modalService.open(M.hn,{centered:!0,size:"md",backdrop:"static",keyboard:!1});a.componentInstance.heading="Confirm Deletion",a.componentInstance.confirmText=`Confirm Deletion of Job Worker Item Code ${e} ?`,a.result.then(l=>{"Yes"==l.title&&this.delete(n)},l=>{})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}excelDownload(n){this.exportExcelService.exportExcel((0,Q.jV)(n))}pdfDownload(n){let e=(0,Q.i$)(n);this.exportToPDFService.generatePdf(e.tableData,e.title)}onSort({column:n,direction:e}){this.headers.forEach(a=>{a.sortable!==n&&(a.direction="")}),this.column=n,this.direction="asc"==e?1:-1,this.getAll()}setConversionOfUnit(n){return n.orderInfoUOM=n.orderInfoUOM==n.secondaryUnit?n.primaryUnit:n.secondaryUnit,n}}return(r=c).\u0275fac=function(n){return new(n||r)(t.Y36(v.Ol),t.Y36(o.F0),t.Y36(L),t.Y36(v.V),t.Y36(o.gz),t.Y36(v.$L),t.Y36(v.V1),t.Y36(v.kl),t.Y36(b.FF),t.Y36(v.tI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-job-worker-item-master-list"]],viewQuery:function(n,e){if(1&n&&t.Gf(V.j,5),2&n){let a;t.iGM(a=t.CRH())&&(e.headers=a)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],["type","button",1,"btn","btn-primary","btn-add",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square","fa-lg","me-2"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","jobWorkItemCode",3,"sort"],["sortable","jobWorkItemName",1,"text-start",3,"sort"],["sortable","jobWorkItemDescription",1,"text-start",3,"sort"],["sortable","orderInfoUOM",3,"sort"],["sortable","HSNCode",3,"sort"],["sortable","shelfLife",3,"sort"],["sortable","QCLevels",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["jobWorkItemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["jobWorkItemDescription",""],[1,"d-flex","justify-content-between","px-2"],["placement","top",3,"ngbTooltip","ngClass"],[1,"pointer","d-flex","align-items-center"],["class","unit-switch-rev",3,"click",4,"ngIf"],["class","unit-switch-gray",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"unit-switch-rev",3,"click"],[1,"unit-switch-gray"],[1,"statusActive"],[1,"statusInActive"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-primary"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Job Work Item Master Summary"),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.navigateTo("../form",{},"create")}),t._UZ(6,"i",5),t._uU(7," Job Work Item "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(l){return e.eventHeader(l)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(15,"Job Work Item Code"),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(17,"Job Work Item Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(19," Job Work Item Description "),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(23,"HSN Code"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(25,"Shelf Life (Mo)"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(27,"QC Level"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(l){return e.onSort(l)}),t._uU(29,"Status"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,bt,41,26,"tr",20),t.qZA()()()()),2&n&&(t.xp6(4),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,yt,e.page,e.pageSize,e.collection,e.search)),t.xp6(23),t.Q6J("ngForOf",e.itemData)("ngForTrackBy",e.trackByFn))},dependencies:[g.mk,g.sg,g.O5,I.P,b._L,V.j,ht.J,Z.S],encapsulation:2}),c})();var Y=m(19964),Zt=m(56208);const Tt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Ct},{path:"form",component:pt,resolve:{accessScreen:Y.xr},canDeactivate:[Y.Ox]}];let Dt=(()=>{var r;class c{}return(r=c).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.ez,o.Bz.forChild(Tt),Zt.m]}),c})()}}]);