"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4424],{94424:(x,p,n)=>{n.r(p),n.d(p,{PurchaseVsInvoiceModule:()=>D});var c=n(96814),d=n(1076),v=n(43818),m=n(73093),e=n(65879),f=n(59840),u=n(2742),T=n(88059),Z=n(83344);function A(r,h){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&r){const i=h.$implicit;e.xp6(2),e.Oqu(null==i?null:i.months),e.xp6(2),e.Oqu(e.xi3(5,4,null==i?null:i.purchase,".2-2")),e.xp6(3),e.Oqu(e.xi3(8,7,null==i?null:i.ordersBooked,".2-2")),e.xp6(3),e.Oqu(e.xi3(11,10,null==i?null:i.invoices,".2-2"))}}const P=function(r,h,i,t){return{page:r,pageSize:h,collection:i,search:t,type:"list",pdfDisplay:!0}};let y=(()=>{var r;class h{constructor(t,o,a,s,l){this.SalesOrderService=t,this.exportExcelService=o,this.spinner=a,this.activatedRoute=s,this.exportToPDFService=l,this.page=1,this.pageSize=12,this.collection=0,this.column="month",this.direction=-1,this.search="",this.tableData=[],this.originTableData=[],this.customerOptions=[],this.customerId="",this.fromDate="",this.toDate="",this.invoicesTotal=0,this.purchaseTotal=0,this.purchaseToInvoicePercentage=0}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}trackByFn(t,o){return o?._id}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value,this.matches();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=t.value,this.getAll()}}reset(){this.getAll()}getAll(t=!1,o=""){this.spinner.show();let a={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:t};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.SalesOrderService.getAllPurchaseVsInvoiceReports(a).subscribe(s=>{"EXCEL"==o?this.excelDownload(s?.allAmounts):"PDF"==o?this.pdfDownload(s.allAmounts):(this.tableData=s?.allAmounts,this.originTableData=s?.allAmounts,this.invoicesTotal=+s?.invoicesTotal?+s?.invoicesTotal:0,this.purchaseTotal=+s?.purchaseTotal?+s?.purchaseTotal:0,this.purchaseToInvoicePercentage=+s?.purchaseToInvoicePercentage?+s?.purchaseToInvoicePercentage:0),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}matches(){this.tableData=this.originTableData.filter(t=>t?.months&&t?.months?.toLowerCase().match(this.search.toLowerCase())||t?.ordersBooked&&t?.ordersBooked?.toLowerCase().match(this.search.toLowerCase())||t?.purchase&&t?.purchase?.toLowerCase().match(this.search.toLowerCase())||t?.invoices&&t?.invoices.toString().match(this.search.toLowerCase()))}pdfDownload(t){let o=(0,m.dc)(t);this.exportToPDFService.generatePdf(o.tableData,o.title)}excelDownload(t){this.exportExcelService.exportExcel((0,m.dG)(t))}onSort({column:t,direction:o}){this.headers.forEach(a=>{a.sortable!==t&&(a.direction="")}),this.tableData=""===o||""===t?this.tableData:[...this.tableData].sort((a,s)=>{let l="string"==typeof a[t]?a[t].toLowerCase():a[t],g="string"==typeof s[t]?s[t].toLowerCase():s[t];const b=l<g?-1:l>g?1:0;return"asc"===o?b:-b})}}return(r=h).\u0275fac=function(t){return new(t||r)(e.Y36(f.VD),e.Y36(u.Ol),e.Y36(u.V),e.Y36(d.gz),e.Y36(u.$L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-purchase-vs-invoice"]],viewQuery:function(t,o){if(1&t&&e.Gf(v.j,5),2&t){let a;e.iGM(a=e.CRH())&&(o.headers=a)}},decls:51,vars:26,consts:[[1,"reportTablePage"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"table-responsive","mb-0",2,"min-height","51.6rem"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","months",3,"sort"],["sortable","purchase",3,"sort"],["sortable","ordersBooked",3,"sort"],["sortable","invoices",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-footer"],[1,"row","line-border"],[1,"row","align-items-center","mt-3"],[1,"col-3","pe-0"],[1,"d-flex","justify-content-center"],[1,"form-label","text-nowrap","pe-1","pt-0","ms-3"],[1,"fa","fa-caret-right","fs-4","mx-2"],["type","button",1,"btn","btn-info","py-1","ms-2"],["type","text","readonly","",1,"form-control",3,"value"],[1,"col-3","px-5"],[1,"col-3","px-0"],[1,"form-label","text-nowrap","mt-1","pe-1","ms-3"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Purchase Vs Invoice Report"),e.qZA()()(),e.TgZ(6,"div",5)(7,"app-setting-header",6),e.NdJ("dataChange",function(s){return o.eventHeader(s)}),e.qZA(),e.TgZ(8,"table",7)(9,"thead",8)(10,"tr",9)(11,"th",10),e.NdJ("sort",function(s){return o.onSort(s)}),e._uU(12,"Month"),e.qZA(),e.TgZ(13,"th",11),e.NdJ("sort",function(s){return o.onSort(s)}),e._uU(14,"Purchases"),e.qZA(),e.TgZ(15,"th",12),e.NdJ("sort",function(s){return o.onSort(s)}),e._uU(16,"Orders Booked"),e.qZA(),e.TgZ(17,"th",13),e.NdJ("sort",function(s){return o.onSort(s)}),e._uU(18,"Invoices"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,A,12,13,"tr",14),e.qZA()()(),e.TgZ(21,"div",15),e._UZ(22,"hr",16),e.TgZ(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20),e._uU(27," Total Purchases"),e._UZ(28,"i",21),e.TgZ(29,"button",22),e._uU(30),e.ALo(31,"companyCurrency"),e.qZA()(),e._UZ(32,"input",23),e.ALo(33,"number"),e.qZA()(),e.TgZ(34,"div",24)(35,"div",19)(36,"div",20),e._uU(37," Total Invoices "),e._UZ(38,"i",21),e.TgZ(39,"button",22),e._uU(40),e.ALo(41,"companyCurrency"),e.qZA()(),e._UZ(42,"input",23),e.ALo(43,"number"),e.qZA()(),e.TgZ(44,"div",25)(45,"div",19)(46,"div",26),e._uU(47," Purchases to Invoice % "),e._UZ(48,"i",21),e.qZA(),e._UZ(49,"input",23),e.ALo(50,"number"),e.qZA()()()()()()),2&t&&(e.xp6(7),e.Q6J("data",e.l5B(21,P,o.page,o.pageSize,o.collection,o.search)),e.xp6(13),e.Q6J("ngForOf",o.tableData)("ngForTrackBy",o.trackByFn),e.xp6(10),e.Oqu(e.lcZ(31,8,"INR")),e.xp6(2),e.Q6J("value",e.xi3(33,10,o.purchaseTotal,"1.2-2")),e.xp6(8),e.Oqu(e.lcZ(41,13,"INR")),e.xp6(2),e.Q6J("value",e.xi3(43,15,o.invoicesTotal,"1.2-2")),e.xp6(7),e.Q6J("value",e.xi3(50,18,o.purchaseToInvoicePercentage,"1.2-2")))},dependencies:[c.sg,T.P,v.j,c.JJ,Z.f],encapsulation:2}),h})();var C=n(56208);const I=[{path:"",component:y}];let D=(()=>{var r;class h{}return(r=h).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,d.Bz.forChild(I),C.m]}),h})()}}]);