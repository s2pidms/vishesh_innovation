"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4825],{1349:(A,p,l)=>{l.r(p),l.d(p,{SalesForecastModule:()=>Ce});var u=l(96814),_=l(1076),c=l(60095),v=l(21631),R=l(22096),h=l(43818),f=l(77203),y=l(43154),C=l(25116),Z=l(46634),e=l(65879),S=l(37285),m=l(2742),D=l(59103);function O(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==r?null:r.quantity,"1.2-2")," ")}}const b=function(){return{standalone:!0}};function k(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(r);const i=e.oxw().$implicit;return e.KtG(i.quantity=t)})("input",function(){e.CHM(r);const t=e.oxw().index,i=e.oxw();return e.KtG(i.setQuantity(t))}),e.qZA()}if(2&n){const r=e.oxw().$implicit;e.Q6J("ngModel",r.quantity)("ngModelOptions",e.DdM(2,b))}}function M(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==r?null:r.dispatchDate,"dd-MM-YYY")," ")}}function N(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"input",29),e.NdJ("ngModelChange",function(t){e.CHM(r);const i=e.oxw().$implicit;return e.KtG(i.dispatchDate=t)}),e.qZA()}if(2&n){const r=e.oxw().$implicit,s=e.oxw();e.Q6J("min",s.minDate.toISOString().split("T")[0])("ngModel",r.dispatchDate)("ngModelOptions",e.DdM(3,b))}}const g=function(){return["approve","reject","view","generate","cancel"]};function x(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",24),e.YNc(5,O,3,4,"span",25),e.YNc(6,k,1,3,"input",26),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"UOMUnitsMaster"),e.qZA(),e.TgZ(10,"td")(11,"div",24),e.YNc(12,M,3,4,"span",25),e.YNc(13,N,1,4,"input",27),e.qZA()()()),2&n){const r=a.$implicit,s=e.oxw();e.xp6(2),e.Oqu(null==r?null:r.scheduleNo),e.xp6(3),e.Q6J("ngIf",e.DdM(8,g).includes(s.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(9,g).includes(s.action)),e.xp6(2),e.Oqu(e.lcZ(9,6,null==r?null:r.UOM)),e.xp6(4),e.Q6J("ngIf",e.DdM(10,g).includes(s.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(11,g).includes(s.action))}}function U(n,a){1&n&&(e.TgZ(0,"div",13)(1,"div",30),e._UZ(2,"hr",15),e.qZA()())}function w(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",31)(1,"button",32),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.dismissModel())}),e._uU(2,"Save & Close"),e.qZA()()}}const Q=function(){return["create","edit"]};let L=(()=>{var n;class a{constructor(s,t){this.activeModal=s,this.toastService=t,this.action="edit",this.bookSalesOrder="",this.SOType="",this.POQty=null,this.deliveryCount=null,this.UOM=null,this.deliveryDate=null,this.dispatchDate=null,this.deliveryScheduleArr=[],this.regularType={},this.btnDisable=!1,this.minDate=new Date}ngOnInit(){this.deliveryCount=this.deliveryCount,this.deliveryScheduleArr&&(this.deliveryScheduleArr=this.deliveryScheduleArr.map(s=>(s.UOM=this.UOM,s))),"Sales Forecast"==this.bookSalesOrder&&"Regular"==this.SOType&&(this.deliveryScheduleArr=[],this.deliveryCount=1,this.regularType.dispatchSchedule?this.regularType.dispatchSchedule&&(this.deliveryScheduleArr=this.regularType.dispatchSchedule):this.dispatchDate&&this.deliveryScheduleArr.push({scheduleNo:1,quantity:this.POQty,UOM:this.UOM,dispatchDate:this.dispatchDate}))}setTable(){(+this.deliveryCount<1||+this.deliveryCount>5)&&(this.toastService.warning("Please enter a number between 1 to 5"),this.deliveryCount=null);let s=Math.floor(this.POQty/this.deliveryCount),t=this.POQty%this.deliveryCount;this.deliveryScheduleArr=[];for(let i=0;i<this.deliveryCount;i++){let o=s;i===this.deliveryCount-1&&(o+=t),this.dispatchDate&&this.deliveryScheduleArr.push({scheduleNo:i+1,quantity:o,UOM:this.UOM,dispatchDate:this.dispatchDate}),this.deliveryDate&&this.deliveryScheduleArr.push({scheduleNo:i+1,quantity:o,UOM:this.UOM,deliveryDate:this.deliveryDate})}}setQuantity(s){if(this.deliveryScheduleArr.map(i=>i.quantity).reduce((i,o)=>i+o,0)>this.POQty)return"Sales Forecast"==this.bookSalesOrder?this.toastService.warning("total qty should not be greater than SO Qty"):"Sales Forecast"!=this.bookSalesOrder&&this.toastService.warning("total qty should not be greater than PO Qty"),void(this.deliveryScheduleArr[s].quantity=0)}dismissModel(){let s={};s.deliverySchedule=this.deliveryScheduleArr,s.deliveryCount=this.deliveryCount,this.activeModal.close(s)}}return(n=a).\u0275fac=function(s){return new(s||n)(e.Y36(S.Kz),e.Y36(m.kl))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-forecast-schedule-modal"]],viewQuery:function(s,t){if(1&s&&e.Gf(h.j,5),2&s){let i;e.iGM(i=e.CRH())&&(t.headers=i)}},inputs:{action:"action",bookSalesOrder:"bookSalesOrder",SOType:"SOType",POQty:"POQty",deliveryCount:"deliveryCount",UOM:"UOM",deliveryDate:"deliveryDate",dispatchDate:"dispatchDate",deliveryScheduleArr:"deliveryScheduleArr",regularType:"regularType"},decls:40,vars:10,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","px-5","mt-5"],[1,"ps-0","col-6"],[1,"form-label","mb-0"],[1,"text-danger"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6","pe-0"],["type","number","id","deliveryCount","name","deliveryCount","min","1","max","5",1,"form-control",3,"disabled","ngModel","readOnly","input","ngModelChange"],[1,"row"],[1,"col-12","my-3","px-0"],[1,"line-border"],[1,"row","px-5"],[1,"table-responsive","ps-0","pe-0",2,"min-height","25rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","col-12 text-center pb-3",4,"ngIf"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["type","number","class","form-control form-control-sch w-25",3,"ngModel","ngModelOptions","ngModelChange","input",4,"ngIf"],["type","date","class","form-control form-control-sm w-25",3,"min","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["type","number",1,"form-control","form-control-sch","w-25",3,"ngModel","ngModelOptions","ngModelChange","input"],["type","date",1,"form-control","form-control-sm","w-25",3,"min","ngModel","ngModelOptions","ngModelChange"],[1,"col-12","px-0"],[1,"col-12","text-center","pb-3"],[1,"btn","btn-primary",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Release Schedule"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),e._uU(11," FC Qty. "),e._UZ(12,"span",9),e.qZA(),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(o){return t.POQty=o}),e.qZA()(),e.TgZ(14,"div",11)(15,"label",8),e._uU(16," Delivery Count "),e._UZ(17,"span",9),e.qZA(),e.TgZ(18,"input",12),e.NdJ("input",function(){return t.setTable()})("ngModelChange",function(o){return t.deliveryCount=o}),e.qZA()()(),e.TgZ(19,"div",13)(20,"div",14),e._UZ(21,"hr",15),e.qZA()(),e.TgZ(22,"div",16)(23,"div",17)(24,"table",18)(25,"thead",19)(26,"tr",20)(27,"th"),e._uU(28,"Schedule #"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Quantity"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"UoM"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Dispatch Date"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,x,14,12,"tr",21),e.qZA()()()(),e.YNc(37,U,3,0,"div",22),e.TgZ(38,"div",13),e.YNc(39,w,3,0,"div",23),e.qZA()()()),2&s&&(e.xp6(13),e.Q6J("ngModel",t.POQty),e.xp6(5),e.Q6J("disabled",!e.DdM(7,Q).includes(t.action))("ngModel",t.deliveryCount)("readOnly","Regular"==t.SOType),e.xp6(18),e.Q6J("ngForOf",t.deliveryScheduleArr),e.xp6(1),e.Q6J("ngIf",!e.DdM(8,g).includes(t.action)),e.xp6(2),e.Q6J("ngIf",!e.DdM(9,g).includes(t.action)))},dependencies:[u.sg,u.O5,c.Fj,c.wV,c.JJ,c.qQ,c.Fd,c.On,u.JJ,u.uU,D.S],styles:[".form-control-sch[_ngcontent-%COMP%]{margin:0;height:2.4rem!important;width:9rem!important;text-align:center;box-shadow:#00000059 0 2px 5px}"]}),a})();var J=l(59840),Y=l(16897),I=l(88059),K=l(50363),G=l(95346),V=l(14906),H=l(83344),j=l(84231);function $(n,a){if(1&n&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&n){const r=a.$implicit;e.Q6J("value",r.value),e.xp6(1),e.hij(" ",r.label," ")}}function z(n,a){if(1&n&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&n){const r=a.$implicit;e.Q6J("value",r.value),e.xp6(1),e.hij(" ",null==r?null:r.label," ")}}function B(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==r?null:r.orderedQty,"1.2-2")," ")}}const P=function(){return{standalone:!0}};function X(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"input",67),e.NdJ("ngModelChange",function(t){e.CHM(r);const i=e.oxw().$implicit;return e.KtG(i.orderedQty=t)})("input",function(){e.CHM(r);const t=e.oxw().$implicit,i=e.oxw();return e.KtG(i.setLineValue(t.FCLineNumber,t))}),e.qZA()}if(2&n){const r=e.oxw().$implicit;e.Q6J("ngModel",r.orderedQty)("ngModelOptions",e.DdM(2,P))}}function W(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==r?null:r.discount,"1.2-2")," ")}}function ee(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"input",68),e.NdJ("ngModelChange",function(t){e.CHM(r);const i=e.oxw().$implicit;return e.KtG(i.discount=t)})("input",function(){e.CHM(r);const t=e.oxw().$implicit,i=e.oxw();return e.KtG(i.setNetRate(t.FCLineNumber,t))}),e.qZA()}if(2&n){const r=e.oxw().$implicit;e.Q6J("ngModel",r.discount)("ngModelOptions",e.DdM(2,P))}}const q=function(){return["approve","reject","view","generate","cancel"]};function te(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",58,59)(5,"span",60),e._uU(6),e.qZA()(),e.TgZ(7,"td",58,61)(9,"span",60),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"SalesUOMUnitMaster"),e.qZA(),e.TgZ(16,"td")(17,"div",48),e.YNc(18,B,3,4,"span",62),e.YNc(19,X,1,3,"input",63),e.qZA()(),e.TgZ(20,"td"),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td")(24,"div",48),e.YNc(25,W,3,4,"span",62),e.YNc(26,ee,1,3,"input",64),e.qZA()(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td")(34,"span",65),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.openSOScheduleModal(i))}),e._UZ(35,"div",66),e.qZA()()()}if(2&n){const r=a.$implicit,s=e.MAs(4),t=e.MAs(8),i=e.oxw();e.xp6(2),e.Oqu(null==r?null:r.SKUNo),e.xp6(1),e.Udp("width",s.clientWidth),e.xp6(2),e.Q6J("positionTarget",s)("ngbTooltip",r.SKUName),e.xp6(1),e.hij(" ",null==r?null:r.SKUName," "),e.xp6(1),e.Udp("width",t.clientWidth),e.xp6(2),e.Q6J("positionTarget",t)("ngbTooltip",r.SKUDescription),e.xp6(1),e.hij(" ",null==r?null:r.SKUDescription," "),e.xp6(2),e.Oqu(null==r?null:r.customerPartNo),e.xp6(2),e.Oqu(e.lcZ(15,20,null==r?null:r.UOM)),e.xp6(4),e.Q6J("ngIf",e.DdM(31,q).includes(i.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(32,q).includes(i.action)),e.xp6(2),e.Oqu(e.xi3(22,22,null==r?null:r.standardRate,"1.2-2")),e.xp6(4),e.Q6J("ngIf",e.DdM(33,q).includes(i.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(34,q).includes(i.action)),e.xp6(2),e.Oqu(e.xi3(29,25,null==r?null:r.netRate,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(32,28,null==r?null:r.lineValue,"1.2-2"))}}function se(n,a){1&n&&(e.TgZ(0,"div",69)(1,"div",70)(2,"div",71),e._uU(3," Reason for Cancellation"),e.TgZ(4,"span",72),e._uU(5,"*"),e.qZA(),e.TgZ(6,"span"),e._uU(7,"\u25b6"),e.qZA()(),e._UZ(8,"input",73),e.qZA()())}function ie(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",74)(1,"button",75),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.reset())}),e._uU(2,"Reset"),e.qZA(),e.TgZ(3,"button",76),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.ESCPreview())}),e._uU(4," Esc "),e.qZA(),e.TgZ(5,"button",77),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.preview())}),e._uU(6,"Preview"),e.qZA(),e.TgZ(7,"button",78),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submit())}),e._uU(8," Save "),e.qZA()()}if(2&n){const r=e.oxw();e.xp6(3),e.Q6J("disabled",!r.isESCPreview),e.xp6(4),e.Q6J("disabled",!r.isPreview)}}function re(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",74)(1,"button",79),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submit())}),e._uU(2,"Save"),e.qZA()()}}function oe(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",80)(1,"button",79),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.openCancelModal())}),e._uU(2,"Cancel"),e.qZA()()}}function ne(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",80)(1,"button",79),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submit())}),e._uU(2,"Approve"),e.qZA()()}}const ae=function(n,a,r,s){return{page:n,pageSize:a,collection:r,search:s,excelDisplay:"none"}},le=function(){return["create"]},ce=function(){return["edit"]};let ue=(()=>{var n;class a{trackByFn(s,t){return t?._id}constructor(s,t,i,o,d,T,F,fe,Se,Te){this.activatedRoute=s,this.spinner=t,this.menuTitleService=i,this.toastService=o,this.salesForecastService=d,this.validationService=T,this.modalService=F,this.utilityService=fe,this.storageService=Se,this.location=Te,this.page=1,this.pageSize=6,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.flag=-1,this.FCDetailsArray=[],this.openPONumberArr=[],this.customerOptions=[],this.displayName={},this.submitted=!1,this.isPreview=!1,this.action="create",this.statusArr={create:"Awaiting Approval",edit:"Awaiting Approval",approve:"Approved",cancel:"Cancelled"},this.SOTypeObj=C.LT,this.SOTypeArr=C.LT.getAllSOType(),this.ESCPreviewArr=[],this.isESCPreview=!1,this.masterData={autoIncrementNo:"",salesCategoryOptions:[],customersOptions:[]},this.selectedCustomerDetails={},this.form=new c.nJ({_id:new c.p4(null),customerCategory:new c.p4(null,[c.kI.required]),FCNo:new c.p4(null),FCDate:new c.p4(""),customer:new c.p4(null,[c.kI.required]),customerName:new c.p4(null),FCType:new c.p4(null,[c.kI.required]),currency:new c.p4(null),salesForecastDetails:new c.p4([]),netFCValue:new c.p4(null,[c.kI.required]),FCCancellationReason:new c.p4(null),status:new c.p4("Awaiting Approval")})}ngOnInit(){this.displayName=this.storageService.get("menuTitle")?.title,this.getInitialData()}get f(){return this.form.controls}eventHeader(s){switch(s.key){case"SEARCH":this.search=s.value,this.page=1,this.flag=-1;break;case"EXCEL":default:break;case"PAGE":this.page=s.value}}submit(){if(this.submitted=!0,this.isPreview=!1,this.form.enable(),this.validationService.checkErrors(this.form,y.BC))return;if("cancel"==this.action&&!this.form.controls.FCCancellationReason.value)return void this.toastService.warning("Reason for Cancellation is Required");let s=this.form.value;if(s.salesForecastDetails=this.FCDetailsArray,this.SOTypeObj.Planned==this.f.FCType.value||this.SOTypeObj.Regular==this.f.FCType.value){if("create"==this.action&&!s.salesForecastDetails.some(i=>i.releaseSchedule))return void this.toastService.warning("Release Schedule is required");if("edit"==this.action&&!s.salesForecastDetails.some(i=>i.releaseSchedule.length>0))return void this.toastService.warning("Release Schedule is required")}s._id?this.update(s):(delete s._id,this.create(s))}update(s){this.spinner.show(),this.salesForecastService.update(s._id,s).subscribe(t=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(t.message),this.location.back()})}create(s){this.spinner.show(),this.salesForecastService.create(s).subscribe(t=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(t.message),this.location.back()})}reset(){this.form.reset(),this.FCDetailsArray=[],this.customerOptions=[],this.collection=this.FCDetailsArray.length,this.openPONumberArr=[],this.getInitialData()}getInitialData(){this.spinner.show(),this.salesForecastService.getAllMasterData({}).subscribe(s=>{this.masterData=s,this.form.controls.FCNo.setValue(this.masterData?.autoIncrementNo),this.form.controls.FCType.setValue(null),this.f.FCDate.setValue(this.utilityService.getTodayDate("YYYY-MM-DD")),this.form.controls.status.setValue(this.statusArr[this.action]),this.activatedRoute.queryParams.pipe((0,v.z)(t=>(this.action=t.action,this.utilityService.accessDenied(this.action),t.id?this.salesForecastService.getById(t.id):(0,R.of)({})))).subscribe(t=>{this.spinner.hide(),0!=Object.keys(t).length&&(t.FCDate&&(t.FCDate=this.utilityService.getFormatDate(t?.FCDate,"YYYY-MM-DD")),this.customerOptions=this.masterData?.customersOptions.filter(i=>i.customerCategory==t.customerCategory),this.FCDetailsArray=t?.salesForecastDetails.map((i,o)=>({FCLineNumber:i.FCLineNumber,SKU:i?.SKU?._id,SKUNo:i?.SKU?.SKUNo,SKUName:i?.SKU?.SKUName,SKUDescription:i.SKU?.SKUDescription,customerPartNo:i?.customerPartNo,UOM:i?.UOM,releaseSchedule:i?.releaseSchedule,releaseCount:i?.releaseCount,orderedQty:i?.orderedQty,balancedQty:i?.orderedQty,JCCQty:i?.orderedQty,standardRate:i?.standardRate,discount:i?.discount,netRate:i?.netRate,lineValue:i?.lineValue,SOLineTargetDate:this.utilityService.getFormatDate(i?.SOLineTargetDate,"YYYY-MM-DD")})),this.collection=this.FCDetailsArray.length,t.status=this.statusArr[this.action],this.form.patchValue(t),("edit"==this.action||"view"==this.action||"cancel"==this.action||"approve"==this.action)&&(this.form.disable(),this.form.controls.FCCancellationReason.enable()))}),this.menuTitleService.set({title:"cancel"==this.action?"Sales Forecast Cancellation":`${this.displayName}`,subTitle:null,type:null})})}openCancelModal(){const s=this.modalService.open(f.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.heading="FC Cancellation",s.componentInstance.cancelText="Do You Want to Cancel Sales Forecast ?",s.result.then(t=>{"Yes"==t&&this.submit()},t=>{})}setDelivery(){this.FCDetailsArray=this.FCDetailsArray.map(s=>(s.SOLineTargetDate=this.utilityService.getFormatDate(this.f.SOLineTargetDate.value,"YYYY-MM-DD"),s))}customerValueChange(s){this.f.customerName.setValue(s?.customerName),this.f.currency.setValue(s?.customerCurrency),this.spinner.show(),this.salesForecastService.getAllSalesSKUList({customerId:s?._id}).subscribe(t=>{this.FCDetailsArray=t.SKUList.map((i,o)=>(i.FCLineNumber=o+1,i)),this.collection=this.FCDetailsArray.length,this.openPONumberArr=t?.PODetails,this.spinner.hide()})}openPONumber(){const s=this.modalService.open(Z.n,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.customerId=this.form.controls.customer.value,s.componentInstance.openPONumberArr=this.openPONumberArr,s.result.then(t=>{t&&["create","edit"].includes(this.action)&&(this.FCDetailsArray=t?.FCDetailsArray.map((i,o)=>(i.FCLineNumber=o+1,i)),this.collection=this.FCDetailsArray.length,this.openPONumberArr=t.openPONumberArr)},t=>{})}getCustomers(){this.f.customer.setValue(null),this.f.currency.setValue(null),this.selectedCustomerDetails={},this.FCDetailsArray=[],this.customerOptions=this.masterData?.customersOptions.filter(s=>s.customerCategory==this.f.customerCategory.value)}setLineValue(s,t){let i=this.FCDetailsArray.map(o=>o.FCLineNumber).indexOf(s);this.FCDetailsArray[i].lineValue=+(t.orderedQty*+t.netRate).toFixed(2),this.FCDetailsArray[i].balancedQty=+t.orderedQty.toFixed(2),this.FCDetailsArray[i].JCCQty=+t.orderedQty.toFixed(2),this.f.netFCValue.setValue(this.FCDetailsArray.map(o=>o.lineValue).reduce((o,d)=>o+d,0).toFixed(2))}setNetRate(s,t){let i=this.FCDetailsArray.map(o=>o.FCLineNumber).indexOf(s);this.FCDetailsArray[i].netRate=+(t.standardRate-t.standardRate*(t.discount/100)),this.FCDetailsArray[i].lineValue=+t.orderedQty*t.netRate,this.f.netFCValue.setValue(this.FCDetailsArray.map(o=>o.lineValue).reduce((o,d)=>o+d,0).toFixed(2))}ESCPreview(){this.search="",this.isPreview=!1,this.FCDetailsArray=this.ESCPreviewArr,this.collection=this.FCDetailsArray.length}preview(){this.search="",this.isESCPreview=!0,this.ESCPreviewArr=this.FCDetailsArray,this.FCDetailsArray=this.FCDetailsArray.filter(s=>s.orderedQty>0),this.FCDetailsArray.length?this.isPreview=!0:(this.toastService.warning("At least One Row is Required"),this.isPreview=!1),this.collection=this.FCDetailsArray.length}onSort({column:s,direction:t}){this.headers.forEach(i=>{i.sortable!==s&&(i.direction="")}),this.FCDetailsArray=""===t||""===s?this.FCDetailsArray:[...this.FCDetailsArray].sort((i,o)=>{let d="string"==typeof i[s]?i[s].toLowerCase():i[s],T="string"==typeof o[s]?o[s].toLowerCase():o[s];const F=d<T?-1:d>T?1:0;return"asc"===t?F:-F})}openSOScheduleModal(s){if(!this.form.controls.FCType.value)return void this.toastService.warning("FC Type is required !");const t=this.modalService.open(L,{centered:!0,size:"md",backdrop:"static",keyboard:!1});t.componentInstance.bookSalesOrder="Sales Forecast",t.componentInstance.SOType=this.form.controls.FCType.value,t.componentInstance.action=this.action,t.componentInstance.POQty=s.orderedQty,t.componentInstance.deliveryCount=s.releaseCount,t.componentInstance.UOM=s.UOM,t.componentInstance.regularType=s,t.componentInstance.dispatchDate=this.utilityService.getFormatDate(s.SOLineTargetDate,"YYYY-MM-DD"),s.releaseSchedule&&(t.componentInstance.deliveryScheduleArr=s?.releaseSchedule.map(i=>(i.dispatchDate=this.utilityService.getFormatDate(i.dispatchDate,"YYYY-MM-DD"),i))),t.result.then(i=>{if(i&&["create","edit"].includes(this.action)){let o=this.FCDetailsArray.map(d=>d.FCLineNumber).indexOf(s.FCLineNumber);this.FCDetailsArray[o].releaseCount=i.deliveryCount,this.FCDetailsArray[o].releaseSchedule=i.deliverySchedule}},i=>{})}openCustomersDetailsModal(){const s=this.modalService.open(f.e7,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});s.componentInstance.action=this.action,s.componentInstance.selectedCustomerDetails=this.selectedCustomerDetails,s.componentInstance.customerOptions=this.customerOptions,s.componentInstance.customer=this.form.controls.customer.value,s.result.then(t=>{t&&(this.selectedCustomerDetails=t?.selectedCustomerDetails,this.form.controls.customer.setValue(t?.selectedCustomerDetails?._id),this.customerValueChange(this.selectedCustomerDetails))},t=>{})}}return(n=a).\u0275fac=function(s){return new(s||n)(e.Y36(_.gz),e.Y36(m.V),e.Y36(m.Uh),e.Y36(m.kl),e.Y36(J.p0),e.Y36(Y.RJ),e.Y36(S.FF),e.Y36(m.tI),e.Y36(m.V1),e.Y36(u.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sales-forecast-form"]],viewQuery:function(s,t){if(1&s&&e.Gf(h.j,5),2&s){let i;e.iGM(i=e.CRH())&&(t.headers=i)}},decls:109,vars:40,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row"],[1,"col-md-6"],[1,"col-5"],[1,"form-label","mb-0"],[1,"text-danger"],["formControlName","customerCategory",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-7"],[1,"col-6","ps-0"],["type","text","formControlName","FCNo","readonly","",1,"form-control"],["type","date","formControlName","FCDate",1,"form-control"],[1,"col-6"],[1,"col-5","ps-0","pe-3"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","customerName","bindValue","_id","formControlName","customer",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"form-label"],["formControlName","FCType",1,"form-select"],["value","null","selected","","disabled",""],[1,"col-2","ps-0"],["type","text","formControlName","currency","readonly","",1,"form-control"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive","mt-0","text-wrap",2,"min-height","22.5rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","customerPartNo",3,"sort"],["sortable","UOM",3,"sort"],["sortable","orderedQty",3,"sort"],["sortable","standardRate",3,"sort"],["sortable","discount",3,"sort"],["sortable","netRate",3,"sort"],["sortable","lineValue",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-4","mt-1"],[1,"d-flex","justify-content-center"],[1,"col-form-label","text-nowrap","pe-1","pt-0"],[1,"fa","fa-caret-right","fs-4","mx-2"],["type","button",1,"btn","btn-info","py-1","ms-2"],["type","number","formControlName","netFCValue","readonly","",1,"form-control"],["class","col px-0",4,"ngIf"],[1,"col-md-auto","ms-auto"],["class","d-grid gap-2 d-md-block",4,"ngIf"],["class","content-end",4,"ngIf"],[3,"value"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],[4,"ngIf"],["type","number","class","form-control form-control-sm w-25",3,"ngModel","ngModelOptions","ngModelChange","input",4,"ngIf"],["type","number","class","form-control form-control-xs w-25",3,"ngModel","ngModelOptions","ngModelChange","input",4,"ngIf"],[1,"d-flex","justify-content-center","pointer",3,"click"],[1,"assetCalendarTD"],["type","number",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelOptions","ngModelChange","input"],["type","number",1,"form-control","form-control-xs","w-25",3,"ngModel","ngModelOptions","ngModelChange","input"],[1,"col","px-0"],[1,"d-flex","justify-content-center","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"text-danger","me-2"],["type","text","formControlName","FCCancellationReason",1,"form-control","mx-2"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-4",3,"click"],["type","button",1,"btn","btn-primary","me-1",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-4","me-4",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"content-end"]],template:function(s,t){1&s&&(e.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",6)(11,"div",8)(12,"label",9),e._uU(13," Customer Category "),e.TgZ(14,"span",10),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"select",11),e.NdJ("change",function(){return t.getCustomers()}),e.TgZ(17,"option",12),e._uU(18,"Select"),e.qZA(),e.YNc(19,$,2,2,"option",13),e.qZA()(),e.TgZ(20,"div",14)(21,"div",6)(22,"div",15)(23,"label",9),e._uU(24," FC No. "),e._UZ(25,"span",10),e.qZA(),e._UZ(26,"input",16),e.qZA(),e.TgZ(27,"div",15)(28,"label",9),e._uU(29," FC Date "),e._UZ(30,"span",10),e.qZA(),e._UZ(31,"input",17),e.qZA()()()()(),e.TgZ(32,"div",18)(33,"div",6)(34,"div",19)(35,"label",9),e._uU(36," Customer Name "),e.TgZ(37,"span",10),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"div",20)(40,"div",21)(41,"ng-select",22),e.NdJ("change",function(o){return t.customerValueChange(o)}),e.qZA()(),e.TgZ(42,"div",23),e.NdJ("click",function(){return t.openCustomersDetailsModal()}),e._UZ(43,"i",24),e.qZA()()(),e.TgZ(44,"div",8)(45,"label",25),e._uU(46," FC Type "),e.TgZ(47,"span",10),e._uU(48,"*"),e.qZA()(),e.TgZ(49,"select",26)(50,"option",27),e._uU(51,"Select FC Type"),e.qZA(),e.YNc(52,z,2,2,"option",13),e.qZA()(),e.TgZ(53,"div",28)(54,"label",9),e._uU(55," Currency "),e.qZA(),e._UZ(56,"input",29),e.qZA()()()()(),e._UZ(57,"hr",30),e.TgZ(58,"div",4)(59,"app-setting-header",31),e.NdJ("dataChange",function(o){return t.eventHeader(o)}),e.qZA()(),e.TgZ(60,"div",32)(61,"table",33)(62,"thead",34)(63,"tr",35)(64,"th",36),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(65,"SKU Code"),e.qZA(),e.TgZ(66,"th",37),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(67),e.ALo(68,"labelTranslate"),e.qZA(),e.TgZ(69,"th",38),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(70),e.ALo(71,"labelTranslate"),e.qZA(),e.TgZ(72,"th",39),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(73,"Part No."),e.qZA(),e.TgZ(74,"th",40),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(75,"UoM"),e.qZA(),e.TgZ(76,"th",41),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(77,"FC Qty"),e.qZA(),e.TgZ(78,"th",42),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(79,"Rate/Unit"),e.qZA(),e.TgZ(80,"th",43),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(81,"Disc %"),e.qZA(),e.TgZ(82,"th",44),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(83,"Net Rate"),e.qZA(),e.TgZ(84,"th",45),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(85,"Line Value"),e.qZA(),e.TgZ(86,"th"),e._uU(87,"Disp."),e.qZA()()(),e.TgZ(88,"tbody"),e.YNc(89,te,36,35,"tr",46),e.ALo(90,"slice"),e.ALo(91,"searchFi1ter"),e.qZA()()(),e._UZ(92,"hr",30),e.TgZ(93,"div",6)(94,"div",47)(95,"div",48)(96,"div",49),e._uU(97," Net FC Value "),e._UZ(98,"i",50),e.TgZ(99,"button",51),e._uU(100),e.ALo(101,"companyCurrency"),e.qZA()(),e._UZ(102,"input",52),e.qZA()(),e.YNc(103,se,9,0,"div",53),e.TgZ(104,"div",54),e.YNc(105,ie,9,2,"div",55),e.YNc(106,re,3,0,"div",55),e.YNc(107,oe,3,0,"div",56),e.YNc(108,ne,3,0,"div",56),e.qZA()()()()),2&s&&(e.Q6J("formGroup",t.form),e.xp6(5),e.hij("Sales Forecast (",e.lcZ(6,18,t.action),")"),e.xp6(12),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",null==t.masterData?null:t.masterData.salesCategoryOptions),e.xp6(22),e.Q6J("items",t.customerOptions)("clearable",!1),e.xp6(11),e.Q6J("ngForOf",t.SOTypeArr),e.xp6(7),e.Q6J("data",e.l5B(33,ae,t.page,t.pageSize,t.collection,t.search)),e.xp6(8),e.hij(" ",e.lcZ(68,20,"SKU Name")," "),e.xp6(3),e.hij(" ",e.lcZ(71,22,"SKU Description")," "),e.xp6(19),e.Q6J("ngForOf",e.Dn7(90,24,e.xi3(91,28,t.FCDetailsArray,t.search),(t.page-1)*t.pageSize,(t.page-1)*t.pageSize+t.pageSize))("ngForTrackBy",t.trackByFn),e.xp6(11),e.hij(" ",e.lcZ(101,31,"INR")," "),e.xp6(3),e.Q6J("ngIf","cancel"==t.action),e.xp6(2),e.Q6J("ngIf",e.DdM(38,le).includes(t.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(39,ce).includes(t.action)),e.xp6(1),e.Q6J("ngIf","cancel"==t.action),e.xp6(1),e.Q6J("ngIf","approve"==t.action))},dependencies:[u.sg,u.O5,I.P,S._L,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.sg,c.u,c.On,K.w9,h.j,u.OU,u.JJ,u.rS,G.G,V.c,H.f,j.Q],styles:[".assetCalendarTD[_ngcontent-%COMP%]{background-color:transparent;background-image:url(Asset_Calendar.26a2ba3b333e16fe.svg);background-size:100% 100%;border:0;color:#fff;height:1.6rem;width:1.6rem}"]}),a})();var E=l(79250),de=l(53421);function me(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",20,21)(9,"span",22),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"div",23),e._UZ(19,"button",24),e.TgZ(20,"div",25)(21,"a",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",i,"view"))}),e._UZ(22,"i",27),e._uU(23," View "),e.qZA(),e.TgZ(24,"a",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",i,"edit"))}),e._UZ(25,"i",28),e._uU(26," Edit "),e.qZA(),e.TgZ(27,"a",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",i,"cancel"))}),e._UZ(28,"i",29),e._uU(29," Cancel "),e.qZA(),e.TgZ(30,"a",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",i,"approve"))}),e._UZ(31,"i",30),e._uU(32," Approve "),e.qZA(),e.TgZ(33,"a",26),e.NdJ("click",function(){const i=e.CHM(r).$implicit,o=e.oxw();return e.KtG(o.update(i,"Report Generated"))}),e._UZ(34,"img",31),e._uU(35," Generate Report "),e.qZA()()()()()}if(2&n){const r=a.$implicit,s=e.MAs(8),t=e.oxw();e.xp6(2),e.Oqu(null==r?null:r.FCNo),e.xp6(2),e.Oqu(null==r?null:r.FCDate),e.xp6(2),e.Oqu(null==r?null:r.customerCategory),e.xp6(1),e.Udp("width",s.clientWidth),e.xp6(2),e.Q6J("positionTarget",s)("ngbTooltip",r.customerName),e.xp6(1),e.hij(" ",r.customerName," "),e.xp6(2),e.Oqu(null==r?null:r.currency),e.xp6(2),e.Oqu(null==r?null:r.netFCValue),e.xp6(2),e.Oqu(null==r?null:r.status),e.xp6(5),e.Q6J("accessType",t.rolePermissionActions.viewAction),e.xp6(3),e.ekj("disable","Approved"===(null==r?null:r.status)),e.Q6J("accessType",t.rolePermissionActions.editAction),e.xp6(3),e.ekj("disable","Approved"===(null==r?null:r.status)),e.Q6J("accessType",t.rolePermissionActions.approveAction),e.xp6(3),e.ekj("disable","Approved"===(null==r?null:r.status)),e.Q6J("accessType",t.rolePermissionActions.approveAction),e.xp6(3),e.ekj("disable","Awaiting Approval"===(null==r?null:r.status)),e.Q6J("accessType",t.rolePermissionActions.generateReportAction)}}const pe=function(n,a,r,s){return{page:n,pageSize:a,collection:r,search:s,type:"list"}};let he=(()=>{var n;class a{constructor(s,t,i,o,d,T,F){this.exportExcelService=s,this.salesForecastService=t,this.toastService=i,this.spinner=o,this.activatedRoute=d,this.exportToPDFService=T,this.utilityService=F,this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.statusArray=["Awaiting Approval","Approved"],this.rolePermissionActions=C.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(s,t,i){this.utilityService.navigateToForm({path:s,status:t.status,action:i,id:t._id,activatedRoute:this.activatedRoute})}trackByFn(s,t){return t?._id}eventHeader(s){switch(s.key){case"SEARCH":this.search=s.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=s.value,this.getAll()}}navigateToPrint(s,t,i,o){window.open(`${window.location.origin}${s}?id=${t?._id}&action=${i}&preview=${o}`,"_blank")}update(s,t){"Approved"===s?.status&&(this.spinner.show(),this.salesForecastService.update(s._id,{_id:s._id,status:t}).subscribe(i=>{this.toastService.success(i.message),this.getAll(),this.spinner.hide()}))}getAll(s=!1,t=""){this.spinner.show();let i={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:s,statusArray:this.statusArray};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.salesForecastService.getAll(i).subscribe(o=>{"EXCEL"==t?this.excelDownload(o.rows):"PDF"==t?this.pdfDownload(o.rows):(this.tableData=o.rows,this.collection=o.count,this.spinner.hide())})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(s){let t=(0,E.zF)(s);this.exportToPDFService.generatePdf(t.tableData,t.title)}excelDownload(s){this.exportExcelService.exportExcel((0,E.D$)(s))}onSort({column:s,direction:t}){this.headers.forEach(i=>{i.sortable!==s&&(i.direction="")}),this.column=s,this.direction="asc"==t?1:-1,this.getAll()}}return(n=a).\u0275fac=function(s){return new(s||n)(e.Y36(m.Ol),e.Y36(J.p0),e.Y36(m.kl),e.Y36(m.V),e.Y36(_.gz),e.Y36(m.$L),e.Y36(m.tI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sales-forecast-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(h.j,5),2&s){let i;e.iGM(i=e.CRH())&&(t.headers=i)}},decls:32,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-5",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","FCNo",3,"sort"],["sortable","FCDateS",3,"sort"],["sortable","customerCategory",3,"sort"],["sortable","customer",1,"text-start",3,"sort"],["sortable","currency",3,"sort"],["sortable","netFCValue",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["customerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa","fa-times","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-check","fa-lg","text-success"],["src","./assets/images/new.svg","width","14",1,"me-3"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3," Sales Forecast (Summary)"),e.qZA()(),e.TgZ(4,"div",3),e._UZ(5,"button",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return t.navigateTo("../form",{},"create")}),e._uU(7," Sales Forecast "),e.qZA()(),e._UZ(8,"hr",6),e.TgZ(9,"div",7)(10,"app-setting-header",8),e.NdJ("dataChange",function(o){return t.eventHeader(o)}),e.qZA(),e.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(15,"FC No."),e.qZA(),e.TgZ(16,"th",13),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(17,"FC Date"),e.qZA(),e.TgZ(18,"th",14),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(19,"Sales Category"),e.qZA(),e.TgZ(20,"th",15),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(21,"Customer Name"),e.qZA(),e.TgZ(22,"th",16),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(23,"Currency"),e.qZA(),e.TgZ(24,"th",17),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(25,"FC Value"),e.qZA(),e.TgZ(26,"th",18),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(27,"Status"),e.qZA(),e.TgZ(28,"th",18),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(29,"Action"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,me,36,24,"tr",19),e.qZA()()()()),2&s&&(e.xp6(4),e.Q6J("accessType",t.rolePermissionActions.createAction),e.xp6(6),e.Q6J("data",e.l5B(4,pe,t.page,t.pageSize,t.collection,t.search)),e.xp6(21),e.Q6J("ngForOf",t.tableData)("ngForTrackBy",t.trackByFn))},dependencies:[u.sg,I.P,S._L,h.j,de.J],encapsulation:2}),a})();var ge=l(65876),_e=l(56208);const ye=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:he},{path:"form",component:ue,resolve:{accessScreen:ge.x}}];let Ce=(()=>{var n;class a{}return(n=a).\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,_.Bz.forChild(ye),_e.m]}),a})()},13107:(A,p,l)=>{l.d(p,{t:()=>u});const u={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(A,p,l)=>{l.d(p,{J:()=>u});const u=({data:_,headers:c,widths:v,title:R})=>({tableData:{widths:v,headerRows:1,body:[c.map(y=>({text:y.header,style:"header"})),..._.map(y=>c.map(C=>({style:"subheader",text:y[C.key]})))]},title:R})},49580:(A,p,l)=>{l.d(p,{D:()=>u});const u=[{message:"HSN Code should be of Max 8 & Min of 4 Characters is Required",key:"hsnCode"},{message:"Description of Goods is Required",key:"goodsDescription"},{message:"GST Rate % is Required",key:"gstRate"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"},{message:"UTGST Rate % is Required",key:"ugstRate"},{message:"Revision No. is Required",key:"revisionNo"},{message:"Revision Date is Required",key:"revisionDate"}]},43154:(A,p,l)=>{l.d(p,{tm:()=>C,Kb:()=>u,lR:()=>e,jH:()=>_,y5:()=>S,rL:()=>w,OV:()=>D,HQ:()=>m,RS:()=>O,vc:()=>b,Nj:()=>N,rw:()=>g,Uh:()=>k,J4:()=>U,ff:()=>v,BC:()=>x,JY:()=>R,Dd:()=>M,Sy:()=>h,tH:()=>f,se:()=>Z,RH:()=>y});const u=[{message:"Customer Name is Required",key:"customerName"},{message:"Mobile No. is Required",key:"mobileNo"},{message:"stateOfSupply is Required",key:"stateOfSupply"}],_=[{message:"Customer Code is Required",key:"customerCode"},{message:"Customer Name is Required",key:"customerName"},{message:"Sales Category is Required",key:"customerCategory"},{message:"PAN No. is Required",key:"customerPAN"},{message:"GSTIN is Required",key:"GSTIN"},{message:"GST Classification is Required",key:"GSTClassification"},{message:"Customer Category is Required",key:"customerType"},{message:"Customer Currency is Required",key:"customerCurrency"},{message:"Payment Terms is Required",key:"customerPaymentTerms"}];l(49580);const v=[{message:"SAC Code is Required",key:"sacCode"},{message:"Description of Service is Required",key:"serviceDescription"},{message:"GST Rate % is Required",key:"gstRate"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"},{message:"UTGST Rate % is Required",key:"ugstRate"},{message:"Revision Date is Required",key:"revisionNo"},{message:"Revision Date is Required",key:"revisionDate"}],R=[{message:"Service Description is Required",key:"serviceDescription"}],h=[{message:"SKU Stage is Required",key:"SKUStage"},{message:"Product Category is Required",key:"productCategory"},{message:"SKU No is Required",key:"SKUNo"},{message:"SKU Name is Required",key:"SKUName"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"HSN Code is Required",key:"hsn"},{message:"Unit of Measurement is Required",key:"primaryUnit"}],f=[{message:"Shelf Life [Months] is required",key:"shelfLife"},{message:"Storage Temperature [\xb0C] is required",key:"storageTemp"},{message:"Storage Humidity [RH] is required",key:"storageHumidity"},{message:"Special Storage Instruction is required",key:"specialStorageInstruction"}],y=[{message:"Type is Required",key:"transporterType"}],C=[{message:"Bill From Location is Required",key:"billFromLocation"},{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Purchase Order No. is Required",key:"PONumber"},{message:"Purchase Order Date is Required",key:"PODate"},{message:"Net SO Value is Required",key:"SOTotalAmount"},{message:"Status is Required",key:"SOStatus"},{message:"Customer Shipping Address is Required",key:"customerShippingAddress"},{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter is Required",key:"transporter"},{message:"Destination is Required",key:"destination"}],Z=[{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter is Required",key:"transporter"},{message:"Mode of transport is Required",key:"modeOfTransport"},{message:"Destination is Required",key:"destination"}],e=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"}],S=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Payment Terms is Required",key:"paymentTerms"},{message:"Mode Of Transport is Required",key:"modeOfTransport"},{message:"Freight Terms is Required",key:"frightTerms"},{message:"Transporter Name is Required",key:"transporter"},{message:"Destination is Required",key:"destination"}],m=[{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Destination Terms is Required",key:"destination"},{message:"Mode of Transport is Required",key:"modeOfTransport"}],D=[{message:"Export Invoice No. is Required",key:"exportsInvoiceNo"},{message:"Export Invoice Date is Required",key:"exportsInvoiceDate"},{message:"Export Invoice Total Value is Required",key:"exportsInvoiceTotalValue"},{message:"Exchange Rate is Required",key:"exchangeRate"},{message:"Mode of Transport is Required",key:"modeOfTransport"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Port of Destination Terms is Required",key:"destination"},{message:"Final Destination Terms is Required",key:"finalDestination"}],O=[{message:"Payment Terms is Required",key:"paymentTerms"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Transporter Terms is Required",key:"transporter"},{message:"Destination Terms is Required",key:"destination"},{message:"Mode of Transport is Required",key:"modeOfTransport"}],b=[{message:"Supply Type is Required",key:"supplyType"},{message:"Sub Supply Type is Required",key:"subSupplyType"},{message:"Document Type is Required",key:"docType"},{message:"Document No. is Required of 16 Digits",key:"docNo"},{message:"Document Date is Required",key:"docDate"},{message:"From GSTIN is Required of 15 Digits",key:"fromGstin"},{message:"From Pin Code is Required",key:"fromPincode"},{message:"Act From State Code is Required",key:"actFromStateCode"},{message:"From State Code is Required",key:"fromStateCode"},{message:"To GSTIN is Required of 15 Digits",key:"toGstin"},{message:"To Pin Code is Required",key:"toPincode"},{message:"To State Code is Required",key:"toStateCode"},{message:"Act To State Code is Required",key:"actToStateCode"},{message:"Transaction Type is Required of 4 Digits",key:"transactionType"},{message:"Tot Inv Value is Required",key:"totInvValue"},{message:"Trans Distance is Required",key:"transDistance"}],k=[{message:"Bill From Location is Required",key:"billFromLocation"},{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"PO No. is Required",key:"PONumber"},{message:"Net SO Value is Required",key:"PITotalAmount"},{message:"Status is Required",key:"PIStatus"},{message:"Customer Shipping Address is Required",key:"customerShippingAddress"},{message:"Mode Of Transport is Required",key:"modeOfTransport"},{message:"frightTerms is Required",key:"frightTerms"},{message:"transporter is Required",key:"transporter"},{message:"destination is Required",key:"destination"}],M=[{message:"Invoice # is Required",key:"serviceInvoiceNumber"},{message:"Invoice Date is Required",key:"serviceInvoiceDate"},{message:"Customer/Sales Category is Required",key:"customerCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Purchase Order No. is Required",key:"PONo"},{message:"Purchase Order Date is Required",key:"PODate"},{message:"Currency is Required",key:"currency"},{message:"Bill From Location is Required",key:"billFromLocation"}],N=[{message:"Product Category is Required",key:"productCategory"},{message:"HSN Code is Required",key:"HSN"},{message:"Description is Required",key:"description"},{message:"IGST Rate % is Required",key:"igstRate"},{message:"CGST Rate % is Required",key:"cgstRate"},{message:"SGST Rate % is Required",key:"sgstRate"}],g=[{message:"Order is Required",key:"order"},{message:"Payment Terms Description is Required",key:"paymentDescription"}],x=[{message:"Customer Category is Required",key:"customerCategory"},{message:"Customer Name is Required",key:"customer"},{message:"FC Type is Required",key:"FCType"},{message:"Net FC Value is Required",key:"netFCValue"}],U=[{message:"Quotation No. is Required",key:"quotationNo"},{message:"Customer Category is Required",key:"customerCategory"},{message:"Customer Name  is Required",key:"customerName"}],w=[{message:"Customer Name is Required",key:"customerName"}]}}]);