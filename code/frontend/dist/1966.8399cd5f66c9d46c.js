"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1966],{71966:(Q,v,a)=>{a.d(v,{U:()=>I,_:()=>P});var g=a(43818),m=a(25116),e=a(65879),_=a(37285),f=a(98977),u=a(96814),s=a(60095),M=a(50363);const r=function(){return["view","approve"]};function h(l,p){if(1&l){const n=e.EpF();e.TgZ(0,"div",36)(1,"div",16)(2,"div",17)(3,"div",18)(4,"input",37),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.inspectionDate=t)}),e.qZA()(),e.TgZ(5,"div",20)(6,"ng-select",38),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.shift=t)}),e.qZA()()()(),e.TgZ(7,"div",21)(8,"div",17)(9,"div",18)(10,"input",31),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.inspectionStaff=t)}),e.qZA()(),e.TgZ(11,"div",20)(12,"input",39),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.releaseQty=t)})("input",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.calCumulativeCount())}),e.qZA()()()()()}if(2&l){const n=p.$implicit,i=e.oxw();e.xp6(4),e.Q6J("ngModel",n.inspectionDate)("disabled",e.DdM(10,r).includes(i.action)),e.xp6(2),e.Q6J("items",i.shiftOptions)("clearable",!1)("ngModel",n.shift)("disabled",e.DdM(11,r).includes(i.action)),e.xp6(4),e.Q6J("ngModel",n.inspectionStaff)("disabled",e.DdM(12,r).includes(i.action)),e.xp6(2),e.Q6J("ngModel",n.releaseQty)("disabled",e.DdM(13,r).includes(i.action))}}function C(l,p){if(1&l){const n=e.EpF();e.TgZ(0,"div",40)(1,"button",41),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.dismissModel())}),e._uU(2,"Save & Close"),e.qZA()()}}const b=function(){return["create","edit"]};let I=(()=>{class l{constructor(n,i){this.activeModal=n,this.utilityService=i,this.action="create",this.IPQAInfoList=[],this.shiftOptions=[],this.IPQADetails={},this.sourceOfMfg=m.mt}ngOnInit(){this.IPQAInfoList=this.IPQADetails.info.length>0?JSON.parse(JSON.stringify(this.IPQADetails?.info))?.map(n=>(n.inspectionDate&&(n.inspectionDate=this.utilityService.getFormatDate(n.inspectionDate,"YYYY-MM-DD")),n)):[{inspectionDate:this.utilityService.getTodayDate("YYYY-MM-DD"),shift:"",inspectionStaff:"",releaseQty:null}]}deleteTableRow(){["create","edit"].includes(this.action)&&this.IPQAInfoList.length>1&&(this.IPQAInfoList.pop(),this.calCumulativeCount())}addTableRow(){["create","edit"].includes(this.action)&&this.IPQAInfoList.push({inspectionDate:this.utilityService.getTodayDate("YYYY-MM-DD"),shift:"",inspectionStaff:"",releaseQty:null})}dismissModel(){this.activeModal.close({IPQAInfoList:this.IPQAInfoList,IPQA:{info:this.IPQAInfoList,prodSource:this.IPQADetails.prodSource,cumulativeCount:this.IPQADetails.cumulativeCount,remarks:this.IPQADetails.remarks,qualityReleaseBy:this.IPQADetails.qualityReleaseBy}})}calCumulativeCount(){let n=this.IPQAInfoList.reduce((i,t)=>+i+ +t.releaseQty,0);this.IPQADetails.cumulativeCount=+n.toFixed(2)}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(_.Kz),e.Y36(f.tI))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-ipqa-modal"]],viewQuery:function(i,t){if(1&i&&e.Gf(g.j,5),2&i){let d;e.iGM(d=e.CRH())&&(t.headers=d)}},inputs:{action:"action",IPQAInfoList:"IPQAInfoList",shiftOptions:"shiftOptions",IPQADetails:"IPQADetails"},decls:70,vars:17,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap","col-4"],[1,"ms-1","me-2"],[1,"col-7","ps-1"],["bindLabel","sourceOfMfg","bindValue","sourceOfMfg",3,"items","clearable","ngModel","disabled","ngModelChange"],[1,"col-form-label","text-nowrap"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"line-border"],[1,"col-6","pe-1"],[1,"row"],[1,"col-7","pe-1"],[1,"form-label"],[1,"col-5","ps-0"],[1,"col-6","ps-1"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","mx-4","px-3",2,"min-height","10rem"],[1,"col-12"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"col-6","pe-0"],["class","col-6 d-flex justify-content-end",4,"ngIf"],[1,"row","mx-4","px-3","mb-2"],["type","date",1,"form-control",3,"ngModel","disabled","ngModelChange"],["bindLabel","parameterName","bindValue","parameterLabel",3,"items","clearable","ngModel","disabled","ngModelChange"],["type","number",1,"form-control",3,"ngModel","disabled","ngModelChange","input"],[1,"col-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"IPQA"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e._uU(12," Prod. Source "),e.TgZ(13,"span",10),e._uU(14,"\u25b6"),e.qZA()(),e.TgZ(15,"div",11)(16,"ng-select",12),e.NdJ("ngModelChange",function(o){return t.IPQADetails.prodSource=o}),e.qZA()()()(),e.TgZ(17,"div",7)(18,"div",8)(19,"div",13),e._uU(20," Cumulative Count "),e.TgZ(21,"span",10),e._uU(22,"\u25b6"),e.qZA()(),e.TgZ(23,"input",14),e.NdJ("ngModelChange",function(o){return t.IPQADetails.cumulativeCount=o}),e.qZA()()()(),e._UZ(24,"hr",15),e.TgZ(25,"div",6)(26,"div",16)(27,"div",17)(28,"div",18)(29,"label",19),e._uU(30,"Inspection Date"),e.qZA()(),e.TgZ(31,"div",20)(32,"label",19),e._uU(33," Shift"),e.qZA()()()(),e.TgZ(34,"div",21)(35,"div",17)(36,"div",18)(37,"label",19),e._uU(38,"Inspection Staff "),e.qZA()(),e.TgZ(39,"div",20)(40,"label",19),e._uU(41,"Release Qty"),e.qZA()()()()(),e.YNc(42,h,13,14,"div",22),e.TgZ(43,"div",23)(44,"div",24)(45,"div",25)(46,"img",26),e.NdJ("click",function(){return t.addTableRow()}),e.qZA()(),e._UZ(47,"hr",15),e.TgZ(48,"div",27)(49,"img",28),e.NdJ("click",function(){return t.deleteTableRow()}),e.qZA()()()(),e.TgZ(50,"div",29)(51,"div",30)(52,"div",8)(53,"div",13),e._uU(54," Remarks "),e.TgZ(55,"span",10),e._uU(56,"\u25b6"),e.qZA()(),e.TgZ(57,"input",31),e.NdJ("ngModelChange",function(o){return t.IPQADetails.remarks=o}),e.qZA()()()(),e.TgZ(58,"div",17)(59,"div",32),e._UZ(60,"hr",15),e.qZA()(),e.TgZ(61,"div",33)(62,"div",34)(63,"div",8)(64,"div",13),e._uU(65," Quality Released by "),e.TgZ(66,"span",10),e._uU(67,"\u25b6"),e.qZA()(),e.TgZ(68,"input",31),e.NdJ("ngModelChange",function(o){return t.IPQADetails.qualityReleaseBy=o}),e.qZA()()(),e.YNc(69,C,3,0,"div",35),e.qZA()()()),2&i&&(e.xp6(16),e.Q6J("items",t.sourceOfMfg)("clearable",!1)("ngModel",t.IPQADetails.prodSource)("disabled",e.DdM(12,r).includes(t.action)),e.xp6(7),e.Q6J("ngModel",t.IPQADetails.cumulativeCount)("disabled",e.DdM(13,r).includes(t.action)),e.xp6(19),e.Q6J("ngForOf",t.IPQAInfoList),e.xp6(15),e.Q6J("ngModel",t.IPQADetails.remarks)("disabled",e.DdM(14,r).includes(t.action)),e.xp6(11),e.Q6J("ngModel",t.IPQADetails.qualityReleaseBy)("disabled",e.DdM(15,r).includes(t.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(16,b).includes(t.action)))},dependencies:[u.sg,u.O5,s.Fj,s.wV,s.JJ,s.On,M.w9],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}"]})}return l})();const c=function(){return["view","approve"]};function Z(l,p){if(1&l){const n=e.EpF();e.TgZ(0,"div",36)(1,"div",16)(2,"div",17)(3,"div",18)(4,"input",37),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.prodDate=t)}),e.qZA()(),e.TgZ(5,"div",20)(6,"ng-select",38),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.prodShift=t)}),e.qZA()()()(),e.TgZ(7,"div",21)(8,"div",17)(9,"div",18)(10,"input",31),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.operatingStaff=t)}),e.qZA()(),e.TgZ(11,"div",20)(12,"input",39),e.NdJ("ngModelChange",function(t){const o=e.CHM(n).$implicit;return e.KtG(o.prodQty=t)})("input",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.calCumulativeCount())}),e.qZA()()()()()}if(2&l){const n=p.$implicit,i=e.oxw();e.xp6(4),e.Q6J("ngModel",n.prodDate),e.xp6(2),e.Q6J("items",i.shiftOptions)("clearable",!1)("ngModel",n.prodShift)("disabled",e.DdM(9,c).includes(i.action)),e.xp6(4),e.Q6J("ngModel",n.operatingStaff)("disabled",e.DdM(10,c).includes(i.action)),e.xp6(2),e.Q6J("ngModel",n.prodQty)("disabled",e.DdM(11,c).includes(i.action))}}function A(l,p){if(1&l){const n=e.EpF();e.TgZ(0,"div",40)(1,"button",41),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.dismissModel())}),e._uU(2,"Save & Close"),e.qZA()()}}const T=function(){return["create","edit"]};let P=(()=>{class l{constructor(n,i){this.activeModal=n,this.utilityService=i,this.action="create",this.prodInfoList=[],this.shiftOptions=[],this.productionDetails={},this.sourceOfMfg=m.mt}ngOnInit(){this.prodInfoList=this.productionDetails.info.length>0?JSON.parse(JSON.stringify(this.productionDetails?.info))?.map(n=>(n.prodDate&&(n.prodDate=this.utilityService.getFormatDate(n.prodDate,"YYYY-MM-DD")),n)):[{prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null}]}deleteTableRow(){["create","edit"].includes(this.action)&&this.prodInfoList.length>1&&(this.prodInfoList.pop(),this.calCumulativeCount())}addTableRow(){["create","edit"].includes(this.action)&&this.prodInfoList.push({prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null})}dismissModel(){this.activeModal.close({prodInfoList:this.prodInfoList,production:{info:this.prodInfoList,prodSource:this.productionDetails?.prodSource,cumulativeCount:this.productionDetails?.cumulativeCount,remarks:this.productionDetails?.remarks,prodAuthorizedBy:this.productionDetails?.prodAuthorizedBy}})}calCumulativeCount(){let n=this.prodInfoList.reduce((i,t)=>+i+ +t.prodQty,0);this.productionDetails.cumulativeCount=+n.toFixed(2)}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(_.Kz),e.Y36(f.tI))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-prod-info-modal"]],viewQuery:function(i,t){if(1&i&&e.Gf(g.j,5),2&i){let d;e.iGM(d=e.CRH())&&(t.headers=d)}},inputs:{action:"action",prodInfoList:"prodInfoList",shiftOptions:"shiftOptions",productionDetails:"productionDetails"},decls:70,vars:15,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap","col-4"],[1,"ms-1","me-2"],[1,"col-7","ps-1"],["bindLabel","sourceOfMfg","bindValue","sourceOfMfg",3,"items","clearable","ngModel","disabled","ngModelChange"],[1,"col-form-label","text-nowrap"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"line-border"],[1,"col-6","pe-1"],[1,"row"],[1,"col-7","pe-1"],[1,"form-label"],[1,"col-5","ps-0"],[1,"col-6","ps-1"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","mx-4","px-3",2,"min-height","10rem"],[1,"col-12"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"col-6","pe-0"],["class","col-6 d-flex justify-content-end",4,"ngIf"],[1,"row","mx-4","px-3","mb-2"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],["bindLabel","parameterName","bindValue","parameterLabel",3,"items","clearable","ngModel","disabled","ngModelChange"],["type","number",1,"form-control",3,"ngModel","disabled","ngModelChange","input"],[1,"col-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Production Info"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e._uU(12," Prod. Source "),e.TgZ(13,"span",10),e._uU(14,"\u25b6"),e.qZA()(),e.TgZ(15,"div",11)(16,"ng-select",12),e.NdJ("ngModelChange",function(o){return t.productionDetails.prodSource=o}),e.qZA()()()(),e.TgZ(17,"div",7)(18,"div",8)(19,"div",13),e._uU(20," Cumulative Count "),e.TgZ(21,"span",10),e._uU(22,"\u25b6"),e.qZA()(),e.TgZ(23,"input",14),e.NdJ("ngModelChange",function(o){return t.productionDetails.cumulativeCount=o}),e.qZA()()()(),e._UZ(24,"hr",15),e.TgZ(25,"div",6)(26,"div",16)(27,"div",17)(28,"div",18)(29,"label",19),e._uU(30,"Prod. Date"),e.qZA()(),e.TgZ(31,"div",20)(32,"label",19),e._uU(33,"Prod. Shift"),e.qZA()()()(),e.TgZ(34,"div",21)(35,"div",17)(36,"div",18)(37,"label",19),e._uU(38,"Operating Staff "),e.qZA()(),e.TgZ(39,"div",20)(40,"label",19),e._uU(41,"Prod. Qty"),e.qZA()()()()(),e.YNc(42,Z,13,12,"div",22),e.TgZ(43,"div",23)(44,"div",24)(45,"div",25)(46,"img",26),e.NdJ("click",function(){return t.addTableRow()}),e.qZA()(),e._UZ(47,"hr",15),e.TgZ(48,"div",27)(49,"img",28),e.NdJ("click",function(){return t.deleteTableRow()}),e.qZA()()()(),e.TgZ(50,"div",29)(51,"div",30)(52,"div",8)(53,"div",13),e._uU(54," Remarks "),e.TgZ(55,"span",10),e._uU(56,"\u25b6"),e.qZA()(),e.TgZ(57,"input",31),e.NdJ("ngModelChange",function(o){return t.productionDetails.remarks=o}),e.qZA()()()(),e.TgZ(58,"div",17)(59,"div",32),e._UZ(60,"hr",15),e.qZA()(),e.TgZ(61,"div",33)(62,"div",34)(63,"div",8)(64,"div",13),e._uU(65," Prod. Authorised by "),e.TgZ(66,"span",10),e._uU(67,"\u25b6"),e.qZA()(),e.TgZ(68,"input",31),e.NdJ("ngModelChange",function(o){return t.productionDetails.prodAuthorizedBy=o}),e.qZA()()(),e.YNc(69,A,3,0,"div",35),e.qZA()()()),2&i&&(e.xp6(16),e.Q6J("items",t.sourceOfMfg)("clearable",!1)("ngModel",t.productionDetails.prodSource)("disabled",e.DdM(11,c).includes(t.action)),e.xp6(7),e.Q6J("ngModel",t.productionDetails.cumulativeCount),e.xp6(19),e.Q6J("ngForOf",t.prodInfoList),e.xp6(15),e.Q6J("ngModel",t.productionDetails.remarks)("disabled",e.DdM(12,c).includes(t.action)),e.xp6(11),e.Q6J("ngModel",t.productionDetails.prodAuthorizedBy)("disabled",e.DdM(13,c).includes(t.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(14,T).includes(t.action)))},dependencies:[u.sg,u.O5,s.Fj,s.wV,s.JJ,s.On,M.w9],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}"]})}return l})()}}]);