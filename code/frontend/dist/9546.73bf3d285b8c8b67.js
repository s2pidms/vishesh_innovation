"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9546],{39546:(T,d,a)=>{a.r(d),a.d(d,{LabourRateModule:()=>M});var p=a(96814),m=a(1076),h=a(25116),t=a(65879),g=a(2498),u=a(2742),l=a(60095),y=a(53421),f=a(83344);function C(s,Z){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",20)(5,"input",21),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.monthlySalary=n)})("input",function(){const n=t.CHM(e),o=n.$implicit,i=n.index,c=t.oxw();return t.KtG(c.setSalaryPerHrs(o,i))}),t.qZA()()(),t.TgZ(6,"td")(7,"div",20)(8,"input",21),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.daysPerMonth=n)})("input",function(){const n=t.CHM(e),o=n.$implicit,i=n.index,c=t.oxw();return t.KtG(c.setSalaryPerHrs(o,i))}),t.qZA()()(),t.TgZ(9,"td")(10,"div",20)(11,"input",21),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.shiftHrs=n)})("input",function(){const n=t.CHM(e),o=n.$implicit,i=n.index,c=t.oxw();return t.KtG(c.setSalaryPerHrs(o,i))}),t.qZA()()(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"div",20)(16,"input",22),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.revisionDate=n)}),t.qZA()()()()}if(2&s){const e=Z.$implicit;t.xp6(2),t.Oqu(e.category),t.xp6(3),t.Q6J("ngModel",e.monthlySalary),t.xp6(3),t.Q6J("ngModel",e.daysPerMonth),t.xp6(3),t.Q6J("ngModel",e.shiftHrs),t.xp6(2),t.Oqu(e.salaryPerHour),t.xp6(3),t.Q6J("ngModel",e.revisionDate)}}let _=(()=>{class s{constructor(e,r,n,o){this.labourRateMasterService=e,this.spinner=r,this.toastService=n,this.utilityService=o,this.tableData=[],this.rolePermissionActions=h.a1}ngOnInit(){this.getInitialData()}reset(){this.getInitialData()}update(){this.spinner.show(),this.labourRateMasterService.update(this.tableData).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.getInitialData(),this.reset()})}getInitialData(){this.spinner.show(),this.labourRateMasterService.getAllMasterData({}).subscribe(e=>{this.tableData=e.map(r=>(r.revisionDate=this.utilityService.getFormatDate(r.revisionDate,"YYYY-MM-DD"),r)),this.spinner.hide()})}setSalaryPerHrs(e,r){this.tableData[r].salaryPerHour=e.monthlySalary&&e.daysPerMonth&&e.shiftHrs?+(+e?.monthlySalary/+e?.daysPerMonth/+e?.shiftHrs).toFixed(2):0}trackByFn(e,r){return r?._id}static#t=this.\u0275fac=function(r){return new(r||s)(t.Y36(g.jf),t.Y36(u.V),t.Y36(u.kl),t.Y36(u.tI))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-labour-rate-form"]],decls:36,vars:6,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row","mt-4","justify-content-center"],[1,"col-9","px-0"],[1,"table-responsive"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border"],[1,"row","my-3"],["appAccessControl","",1,"col","text-center",3,"accessType"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelChange","input"],["type","date",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelChange"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Labour Rate Master (For Costing)"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"table",9)(11,"thead",10)(12,"tr",11)(13,"th",12),t._uU(14,"Category"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"companyCurrency"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Day/Month"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Shift Hrs"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Salary (INR)/Hour"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Revision Dt."),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,C,17,6,"tr",13),t.qZA()()()()()(),t._UZ(28,"hr",14),t.TgZ(29,"div",15)(30,"div",16)(31,"div",17)(32,"button",18),t.NdJ("click",function(){return n.reset()}),t._uU(33,"Reset"),t.qZA(),t.TgZ(34,"button",19),t.NdJ("click",function(){return n.update()}),t._uU(35,"Save"),t.qZA()()()()()()),2&r&&(t.xp6(16),t.hij("Monthly Salary (",t.lcZ(17,4,"INR"),")"),t.xp6(11),t.Q6J("ngForOf",n.tableData)("ngForTrackBy",n.trackByFn),t.xp6(3),t.Q6J("accessType",n.rolePermissionActions.createAction))},dependencies:[p.sg,l.Fj,l.wV,l.JJ,l.On,y.J,f.f],encapsulation:2})}return s})();var b=a(56208);const v=[{path:"",redirectTo:"form",pathMatch:"full"},{path:"form",component:_}];let M=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=t.oAB({type:s});static#r=this.\u0275inj=t.cJS({imports:[p.ez,m.Bz.forChild(v),b.m]})}return s})()}}]);