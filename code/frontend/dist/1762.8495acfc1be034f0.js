"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1762],{1762:(v,h,l)=>{l.r(h),l.d(h,{NpdRequestModule:()=>$});var o=l(96814),p=l(1076),D=l(25116),f=l(43818),y=l(29391),e=l(65879),m=l(98977),g=l(78212),_=l(88059),k=l(37285),P=l(53421);function b(s,u){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",20,21)(7,"span",22),e._uU(8),e.qZA()(),e.TgZ(9,"td",20,23)(11,"span",22),e._uU(12),e.qZA()(),e.TgZ(13,"td",null,24)(15,"span",22),e._uU(16),e.qZA()(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td")(22,"div",25),e._UZ(23,"button",26),e.TgZ(24,"div",27)(25,"a",28),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.navigateTo("../form",n,"view"))}),e._UZ(26,"i",29),e._uU(27," View "),e.qZA(),e.TgZ(28,"a",28),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.navigateTo("../form",n,"edit"))}),e._UZ(29,"i",30),e._uU(30," Edit "),e.qZA()()()()()}if(2&s){const t=u.$implicit,i=e.MAs(6),r=e.MAs(10),n=e.MAs(14),d=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.NPDNo),e.xp6(2),e.Oqu(null==t?null:t.NPDDate),e.xp6(1),e.Udp("width",i.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",t.name)("positionTarget",i),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Udp("width",r.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",t.projectName)("positionTarget",r),e.xp6(1),e.hij(" ",t.projectName," "),e.xp6(1),e.Udp("width",n.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",t.productCategory)("positionTarget",n),e.xp6(1),e.hij(" ",t.productCategory," "),e.xp6(2),e.Oqu(null==t?null:t.expectedDeliveryDate),e.xp6(2),e.Oqu(null==t?null:t.status),e.xp6(5),e.Q6J("accessType",d.rolePermissionActions.viewAction),e.xp6(3),e.Q6J("accessType",d.rolePermissionActions.editAction)}}const A=function(s,u,t,i){return{page:s,pageSize:u,collection:t,search:i,type:"list"}};let R=(()=>{class s{constructor(t,i,r,n,d,Q){this.exportExcelService=t,this.router=i,this.spinner=r,this.npdRequestService=n,this.activatedRoute=d,this.exportToPDFService=Q,this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.rolePermissionActions=D.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(t=!1,i=""){this.spinner.show();let r={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:t};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.npdRequestService.getAll(r).subscribe(n=>{"EXCEL"==i?this.excelDownload(n.rows):"PDF"==i?this.pdfDownload(n.rows):(this.tableData=n.rows,this.collection=n.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(t,i,r){this.router.navigate([t],{relativeTo:this.activatedRoute,queryParams:{id:i?._id,action:r}})}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=t.value,this.getAll()}}trackByFn(t,i){return i?._id}pdfDownload(t){let i=(0,y.On)(t);this.exportToPDFService.generatePdf(i.tableData,i.title)}excelDownload(t){this.exportExcelService.exportExcel((0,y.hl)(t))}onSort({column:t,direction:i}){this.headers.forEach(r=>{r.sortable!==t&&(r.direction="")}),this.column=t,this.direction="asc"==i?1:-1,this.getAll()}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(m.Ol),e.Y36(p.F0),e.Y36(m.V),e.Y36(g.W4),e.Y36(p.gz),e.Y36(m.$L))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-npd-request-list"]],viewQuery:function(i,r){if(1&i&&e.Gf(f.j,5),2&i){let n;e.iGM(n=e.CRH())&&(r.headers=n)}},decls:32,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],["type","button",1,"btn","btn-primary","btn-add",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square","fa-lg","me-2"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","NPDNo",3,"sort"],["sortable","NPDDate",3,"sort"],["sortable","customerName",1,"text-start",3,"sort"],["sortable","projectName",1,"text-start",3,"sort"],["sortable","productCategory",3,"sort"],["sortable","expectedDeliveryDate",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["name",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["projectName",""],["productCategory",""],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"NPD Summary"),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return r.navigateTo("../form",{},"create")}),e._UZ(6,"i",5),e._uU(7," Create NPD Request "),e.qZA()(),e._UZ(8,"hr",6),e.TgZ(9,"div",7)(10,"app-setting-header",8),e.NdJ("dataChange",function(d){return r.eventHeader(d)}),e.qZA(),e.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(15,"NPD. NO"),e.qZA(),e.TgZ(16,"th",13),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(17,"NPD. Date"),e.qZA(),e.TgZ(18,"th",14),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(19,"Customer/Prospect Name"),e.qZA(),e.TgZ(20,"th",15),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(21,"Project Name"),e.qZA(),e.TgZ(22,"th",16),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(23,"Product Code"),e.qZA(),e.TgZ(24,"th",17),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(25,"EDD"),e.qZA(),e.TgZ(26,"th",18),e.NdJ("sort",function(d){return r.onSort(d)}),e._uU(27,"Status"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Action"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,b,31,21,"tr",19),e.qZA()()()()),2&i&&(e.xp6(4),e.Q6J("accessType",r.rolePermissionActions.createAction),e.xp6(6),e.Q6J("data",e.l5B(4,A,r.page,r.pageSize,r.collection,r.search)),e.xp6(21),e.Q6J("ngForOf",r.tableData)("ngForTrackBy",r.trackByFn))},dependencies:[o.sg,_.P,k._L,f.j,P.J],encapsulation:2})}return s})();var a=l(60095),Y=l(21631),L=l(22096),F=l(78944),T=l(62576),N=l(68352),S=l(77134),w=l(66730),O=l(18689),C=l(6244),q=l(77609),x=l(16897),I=l(50363);function E(s,u){if(1&s&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&s){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function U(s,u){if(1&s&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&s){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Z(s,u){if(1&s&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&s){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function M(s,u){1&s&&e._UZ(0,"div",57)}function J(s,u){1&s&&e._UZ(0,"div",58)}function c(s,u){1&s&&e._UZ(0,"div",59)}function K(s,u){if(1&s&&(e.TgZ(0,"div",49)(1,"div",50),e._uU(2," Status "),e.TgZ(3,"span",51),e._uU(4,"*"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"\u25b6"),e.qZA()(),e.TgZ(7,"select",52)(8,"option",29),e._uU(9,"Select Status"),e.qZA(),e.TgZ(10,"option",48),e._uU(11,"Awaiting Review"),e.qZA(),e.TgZ(12,"option",48),e._uU(13,"Put On Hold"),e.qZA(),e.TgZ(14,"option",48),e._uU(15,"Terminate"),e.qZA()(),e.TgZ(16,"span",53),e.YNc(17,M,1,0,"div",54),e.YNc(18,J,1,0,"div",55),e.YNc(19,c,1,0,"div",56),e.qZA()()),2&s){const t=e.oxw();e.xp6(8),e.Q6J("value",null),e.xp6(2),e.Q6J("value","Awaiting Review"),e.xp6(2),e.Q6J("value","Put On Hold"),e.xp6(2),e.Q6J("value","Terminate"),e.xp6(3),e.Q6J("ngIf","Awaiting Review"==t.form.value.status),e.xp6(1),e.Q6J("ngIf","Put On Hold"==t.form.value.status),e.xp6(1),e.Q6J("ngIf","Terminate"==t.form.value.status)}}function V(s,u){1&s&&(e.TgZ(0,"div")(1,"div",49)(2,"div",50),e._uU(3," Remarks "),e.TgZ(4,"span",51),e._uU(5,"*"),e.qZA(),e.TgZ(6,"span"),e._uU(7,"\u25b6"),e.qZA()(),e._UZ(8,"input",60),e.qZA()())}function j(s,u){if(1&s){const t=e.EpF();e.TgZ(0,"div",61)(1,"button",62),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e._uU(2,"Save \xa0"),e.qZA()()}}function B(s,u){if(1&s){const t=e.EpF();e.TgZ(0,"div",63)(1,"button",64),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goBack())}),e._uU(2,"Back"),e.qZA()()}}let G=(()=>{class s{constructor(t,i,r,n,d,Q,W,ee,te){this.npdRequestService=t,this.activatedRoute=i,this.spinner=r,this.toastService=n,this.modalService=d,this.validationService=Q,this.storageService=W,this.utilityService=ee,this.location=te,this.NPDId="",this.active=1,this.action="create",this.submitted=!1,this.variantsInfo=[],this.user={},this.engineeringDrawing=null,this.productSpecification=null,this.designMockUpFile=null,this.artworkForProcessingFile=null,this.masterData={autoIncrementNo:"",customers:[],productCategory:[],buildStage:[],orderType:[],developmentCharges:[],checklistParticularsList:[]},this.selectedCustomerDetails={},this.form=new a.nJ({_id:new a.p4(null),NPDNo:new a.p4(""),NPDDate:new a.p4(this.utilityService.getTodayDate("YYYY-MM-DD")),name:new a.p4(""),reference:new a.p4(""),referenceModel:new a.p4("",[a.kI.required]),productCategory:new a.p4(null,[a.kI.required]),projectName:new a.p4(null,[a.kI.required]),productBrief:new a.p4("",[a.kI.required]),buildStage:new a.p4(null,[a.kI.required]),orderType:new a.p4(null,[a.kI.required]),developmentCharges:new a.p4(null,[a.kI.required]),requestedQty:new a.p4("",[a.kI.required]),expectedDeliveryDate:new a.p4(this.utilityService.getTodayDate("YYYY-MM-DD"),[a.kI.required]),validationRequired:new a.p4(null,[a.kI.required]),NPDRequestedBy:new a.p4("",[a.kI.required]),noOfVariants:new a.p4(1),monthlyOffTakeQty:new a.p4(null),annualOffTakeQty:new a.p4(null),expProductionStartDate:new a.p4(this.utilityService.getTodayDate("YYYY-MM-DD"),[a.kI.required]),remarks:new a.p4(null),customerInputsChecklist:new a.p4([]),variantsInfo:new a.p4([]),engineeringDrawing:new a.p4(null),engineeringDrawingUrl:new a.p4(null),productSpecification:new a.p4(null),productSpecificationUrl:new a.p4(null),designMockUpFile:new a.p4(null),designMockUpFileUrl:new a.p4(null),artworkForProcessingFile:new a.p4(null),artworkForProcessingFileUrl:new a.p4(null),status:new a.p4("Awaiting Review",[a.kI.required])}),this.statesOfIndia=F.F}trackByFn(t,i){return i?._id}ngOnInit(){this.user=this.storageService.get("IDMSAUser"),this.form.controls.NPDRequestedBy.setValue(this.user.name),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,T.JD))return;if("edit"==this.action&&!this.form.controls.remarks.value)return void this.toastService.warning("Remarks is Required");let t=this.form.value;t.customerInputsChecklist=this.masterData?.checklistParticularsList,t.variantsInfo=this.variantsInfo,delete t.engineeringDrawing,delete t.productSpecification,delete t.designMockUpFile,delete t.artworkForProcessingFile;let i=new FormData;i.append("key","NPDRequest");for(let r=0;r<Object.keys(t).length;r++){const n=Object.keys(t)[r];t[n]&&"object"==typeof t[n]?t[n]&&i.append(n,JSON.stringify(t[n])):t[n]&&i.append(n,t[n])}this.engineeringDrawing&&"object"==typeof this.engineeringDrawing&&i.append("engineeringDrawing",this.engineeringDrawing,this.engineeringDrawing.name),this.productSpecification&&"object"==typeof this.productSpecification&&i.append("productSpecification",this.productSpecification,this.productSpecification.name),this.designMockUpFile&&"object"==typeof this.designMockUpFile&&i.append("designMockUpFile",this.designMockUpFile,this.designMockUpFile.name),this.artworkForProcessingFile&&"object"==typeof this.artworkForProcessingFile&&i.append("artworkForProcessingFile",this.artworkForProcessingFile,this.artworkForProcessingFile.name),t._id?this.update(t._id,i):(delete t._id,this.create(i))}create(t){this.spinner.show(),this.npdRequestService.create(t).subscribe(i=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(i.message),this.location.back()})}update(t,i){this.spinner.show(),this.npdRequestService.update(t,i).subscribe(r=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(r.message),this.location.back()})}getInitialData(){this.spinner.show(),this.npdRequestService.getAllMasterData({}).subscribe(t=>{this.masterData=t,this.form.controls.NPDNo.setValue(this.masterData.autoIncrementNo),this.form.controls.noOfVariants.setValue(1),this.initialVariantsInfoData(),this.NPDId?(this.action="view",this.npdRequestService.getById(this.NPDId).subscribe(i=>{this.spinner.hide(),0!=Object.keys(i).length&&(this.masterData.checklistParticularsList=i.customerInputsChecklist.map(r=>({inputCheckListParticular:r.inputCheckListParticular._id,name:r.inputCheckListParticular.name,order:r.inputCheckListParticular.order,isChecked:r.isChecked})),i.NPDDate&&(i.NPDDate=this.utilityService.getFormatDate(i.NPDDate,"YYYY-MM-DD")),i.expectedDeliveryDate&&(i.expectedDeliveryDate=this.utilityService.getFormatDate(i.expectedDeliveryDate,"YYYY-MM-DD")),i.expProductionStartDate&&(i.expProductionStartDate=this.utilityService.getFormatDate(i.expProductionStartDate,"YYYY-MM-DD")),this.form.patchValue(i),"edit"==this.action&&(this.form.enable(),this.form.controls.NPDDate.disable(),this.form.controls.reference.disable()),"view"==this.action&&this.form.disable())})):this.activatedRoute.queryParams.pipe((0,Y.z)(i=>(this.action=i.action,this.utilityService.accessDenied(this.action),i.id?this.npdRequestService.getById(i.id):(0,L.of)({})))).subscribe(i=>{this.spinner.hide(),0!=Object.keys(i).length&&(i.variantsInfo&&(this.variantsInfo=i.variantsInfo),this.masterData.checklistParticularsList=i.customerInputsChecklist.map(r=>({inputCheckListParticular:r.inputCheckListParticular._id,name:r.inputCheckListParticular.name,order:r.inputCheckListParticular.order,isChecked:r.isChecked})),i.NPDDate&&(i.NPDDate=this.utilityService.getFormatDate(i.NPDDate,"YYYY-MM-DD")),i.expectedDeliveryDate&&(i.expectedDeliveryDate=this.utilityService.getFormatDate(i.expectedDeliveryDate,"YYYY-MM-DD")),i.expProductionStartDate&&(i.expProductionStartDate=this.utilityService.getFormatDate(i.expProductionStartDate,"YYYY-MM-DD")),this.form.patchValue(i),"edit"==this.action&&(this.form.enable(),this.form.controls.NPDDate.disable(),this.form.controls.reference.disable()),"view"==this.action&&this.form.disable())})})}openCustomerInputChecklist(){const t=this.modalService.open(O.U,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.checklistParticulars=this.masterData?.checklistParticularsList,t.result.then(i=>{["create","edit"].includes(this.action)&&(this.masterData.checklistParticularsList=i)},i=>{})}initialVariantsInfoData(){0==this.variantsInfo.length&&this.variantsInfo.push({variant:this.variantsInfo.length+1,variantName:"",partNo:"",drawingNo:""})}openVariantsModal(){const t=this.modalService.open(N.H,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.noOfVariants=this.form.controls.noOfVariants.value,t.componentInstance.variantsInfo=this.variantsInfo,t.result.then(i=>{i&&["create","edit"].includes(this.action)&&(this.form.controls.noOfVariants.setValue(i?.noOfVariants),this.variantsInfo=i?.variantsInfo)},i=>{})}openOffTakeQtyModal(){const t=this.modalService.open(w.K,{centered:!0,size:"md",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.monthlyOffTakeQty=this.form.controls.monthlyOffTakeQty.value,t.componentInstance.annualOffTakeQty=this.form.controls.annualOffTakeQty.value,t.result.then(i=>{i&&["create","edit"].includes(this.action)&&(this.form.controls.monthlyOffTakeQty.setValue(i.monthlyOffTakeQty),this.form.controls.annualOffTakeQty.setValue(i.annualOffTakeQty))},i=>{})}setReference(t){this.form.controls.name.setValue(t.name),this.form.controls.referenceModel.setValue(t.type)}setMonthlyOffTake(t){"One time project"==t.target.value?(this.form.controls.monthlyOffTakeQty.setValue(null),this.form.controls.monthlyOffTakeQty.disable(),this.form.get("monthlyOffTakeQty").clearValidators(),this.form.get("monthlyOffTakeQty").updateValueAndValidity()):(this.form.controls.monthlyOffTakeQty.enable(),this.form.controls.monthlyOffTakeQty.setValidators([a.kI.required]))}openUploadDocsModal(){const t=this.modalService.open(S._,{centered:!0,size:"lg",backdrop:"static",keyboard:!1,windowClass:"modelPage"});t.componentInstance.action=this.action,t.componentInstance.NPDUploadDocs={engineeringDrawing:this.form.controls.engineeringDrawing.value,engineeringDrawingUrl:this.form.controls.engineeringDrawingUrl.value,productSpecification:this.form.controls.productSpecification.value,productSpecificationUrl:this.form.controls.productSpecificationUrl.value,designMockUpFile:this.form.controls.designMockUpFile.value,designMockUpFileUrl:this.form.controls.designMockUpFileUrl.value,artworkForProcessingFile:this.form.controls.artworkForProcessingFile.value,artworkForProcessingFileUrl:this.form.controls.artworkForProcessingFileUrl.value},t.result.then(i=>{i&&["create","edit"].includes(this.action)&&(this.form.patchValue(i),this.engineeringDrawing=i.engineeringDrawing,this.productSpecification=i.productSpecification,this.designMockUpFile=i.designMockUpFile,this.artworkForProcessingFile=i.artworkForProcessingFile)},i=>{})}openProductCategoryModal(){const t=this.modalService.open(C.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.productCategoryList=this.masterData?.productCategory,t.componentInstance.productCategory=this.form.controls.productCategory.value,t.result.then(i=>{i&&this.form.controls.productCategory.setValue(i?.selectedProductCategory)},i=>{})}goBack(){this.location.back()}openCustomersDetailsModal(){const t=this.modalService.open(q.e7,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.action=this.action,t.componentInstance.selectedCustomerDetails=this.selectedCustomerDetails,t.componentInstance.customerOptions=this.masterData.customers,t.componentInstance.customer=this.form.controls.reference.value,t.result.then(i=>{i&&(this.selectedCustomerDetails=i?.selectedCustomerDetails,this.form.controls.reference.setValue(i?.selectedCustomerDetails?._id),this.setReference(this.selectedCustomerDetails))},i=>{})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(g.W4),e.Y36(p.gz),e.Y36(m.V),e.Y36(m.kl),e.Y36(k.FF),e.Y36(x.RJ),e.Y36(m.V1),e.Y36(m.tI),e.Y36(o.Ye))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-npd-request-form"]],inputs:{NPDId:"NPDId"},decls:154,vars:19,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"col-6","pe-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","NPDNo","readonly","",1,"form-control"],[1,"col-6","ps-0"],["type","date","formControlName","NPDDate",1,"form-control"],[1,"col-3","pe-5"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","name","bindValue","_id","formControlName","reference",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-3"],[1,"form-label","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","text","formControlName","projectName",1,"form-control"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","fs-4","col-auto",2,"height","2.9rem",3,"click"],[1,"row","line-border"],[1,"col","form-group"],["formControlName","productBrief","rows","5",1,"form-control","form-text-area"],["formControlName","buildStage",1,"form-select"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-label","mb-1","d-flex","justify-content-between"],["formControlName","orderType",1,"form-select",3,"change"],["type","number","formControlName","requestedQty",1,"form-control"],["type","date","formControlName","expectedDeliveryDate",1,"form-control"],["type","date","formControlName","expProductionStartDate",1,"form-control"],["formControlName","developmentCharges",1,"form-select"],["formControlName","validationRequired",1,"form-select"],["value","Yes"],["value","No"],["type","text","formControlName","NPDRequestedBy","readonly","",1,"form-control"],[1,"row","my-4","justify-content-between"],["type","button",1,"btn","bg-primary",3,"click"],["class","d-flex",4,"ngIf"],[1,"col-3","text-start"],[4,"ngIf"],["class","col-1 ps-0 text-end",4,"ngIf"],["class","col-1 ps-2 text-end",4,"ngIf"],[3,"value"],[1,"d-flex"],[1,"col-form-label","text-nowrap"],[1,"text-danger","pe-2"],["formControlName","status",1,"form-select","statusSelectBorder","mx-2"],[1,"input-group-text","statusSpanHeight"],["class","statusActive",4,"ngIf"],["class","statusYellow",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"statusActive"],[1,"statusYellow"],[1,"statusInActive"],["type","text","formControlName","remarks",1,"form-control","mx-2"],[1,"col-1","ps-0","text-end"],["type","button",1,"btn","btn-primary","ps-3",3,"click"],[1,"col-1","ps-2","text-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"]],template:function(i,r){1&i&&(e.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",5)(11,"div",7)(12,"label",8),e._uU(13," NPD No. "),e._UZ(14,"span",9),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",11)(17,"label",8),e._uU(18," NPD Date "),e._UZ(19,"span",9),e.qZA(),e._UZ(20,"input",12),e.qZA()()(),e.TgZ(21,"div",13)(22,"label",8),e._uU(23," Customer/Prospect Name "),e.TgZ(24,"span",9),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"div",14)(27,"div",15)(28,"ng-select",16),e.NdJ("change",function(d){return r.setReference(d)}),e.qZA()(),e.TgZ(29,"div",17),e.NdJ("click",function(){return r.openCustomersDetailsModal()}),e._UZ(30,"i",18),e.qZA()()(),e.TgZ(31,"div",19)(32,"label",20),e._uU(33,"Project/Part Name"),e.TgZ(34,"span",9),e._uU(35,"*"),e.qZA(),e._UZ(36,"span")(37,"span")(38,"span")(39,"span")(40,"span")(41,"span"),e.TgZ(42,"button",21),e.NdJ("click",function(){return r.openVariantsModal()}),e._uU(43," Variants "),e.qZA()(),e._UZ(44,"input",22),e.qZA(),e.TgZ(45,"div",13)(46,"label",8),e._uU(47," Product Category "),e.TgZ(48,"span",9),e._uU(49,"*"),e.qZA()(),e.TgZ(50,"div",14)(51,"div",15),e._UZ(52,"ng-select",23),e.qZA(),e.TgZ(53,"div",24),e.NdJ("click",function(){return r.openProductCategoryModal()}),e._UZ(54,"i",18),e.qZA()()()()(),e._UZ(55,"hr",25),e.TgZ(56,"div",5)(57,"div",26)(58,"label",8),e._uU(59," Product Brief "),e.TgZ(60,"span",9),e._uU(61,"*"),e.qZA(),e._uU(62," [General Product information/Functional & Performance requirements/specification and application] "),e.qZA(),e._UZ(63,"textarea",27),e.qZA()(),e.TgZ(64,"div",5)(65,"div",6)(66,"label",8),e._uU(67," Build Stage "),e.TgZ(68,"span",9),e._uU(69,"*"),e.qZA()(),e.TgZ(70,"select",28)(71,"option",29),e._uU(72,"Select Build Stage"),e.qZA(),e.YNc(73,E,2,2,"option",30),e.qZA()(),e.TgZ(74,"div",6)(75,"label",31),e._uU(76," Order Type "),e.TgZ(77,"span",9),e._uU(78,"*"),e.qZA(),e._UZ(79,"span")(80,"span")(81,"span")(82,"span")(83,"span")(84,"span")(85,"span")(86,"span"),e.TgZ(87,"button",21),e.NdJ("click",function(){return r.openOffTakeQtyModal()}),e._uU(88," Offtake Qty "),e.qZA()(),e.TgZ(89,"select",32),e.NdJ("change",function(d){return r.setMonthlyOffTake(d)}),e.TgZ(90,"option",29),e._uU(91,"Select Order Type"),e.qZA(),e.YNc(92,U,2,2,"option",30),e.qZA()(),e.TgZ(93,"div",6)(94,"label",8),e._uU(95,"Quantity [Requested] "),e.TgZ(96,"span",9),e._uU(97,"*"),e.qZA()(),e._UZ(98,"input",33),e.qZA(),e.TgZ(99,"div",6)(100,"label",8),e._uU(101,"Expected Delivery Date [EDD] "),e.TgZ(102,"span",9),e._uU(103,"*"),e.qZA()(),e._UZ(104,"input",34),e.qZA()(),e.TgZ(105,"div",5)(106,"div",6)(107,"label",8),e._uU(108," Expected Production Start Date"),e.TgZ(109,"span",9),e._uU(110,"*"),e.qZA()(),e._UZ(111,"input",35),e.qZA(),e.TgZ(112,"div",6)(113,"label",8),e._uU(114," Development Charges "),e.TgZ(115,"span",9),e._uU(116,"*"),e.qZA()(),e.TgZ(117,"select",36)(118,"option",29),e._uU(119,"Select Development Charges"),e.qZA(),e.YNc(120,Z,2,2,"option",30),e.qZA()(),e.TgZ(121,"div",6)(122,"label",8),e._uU(123," Validation Required "),e.TgZ(124,"span",9),e._uU(125,"*"),e.qZA()(),e.TgZ(126,"select",37)(127,"option",29),e._uU(128,"Select Validation Required"),e.qZA(),e.TgZ(129,"option",38),e._uU(130,"Yes"),e.qZA(),e.TgZ(131,"option",39),e._uU(132,"No"),e.qZA()()(),e.TgZ(133,"div",6)(134,"label",8),e._uU(135,"NPD Requested by/Coordinator "),e.TgZ(136,"span",9),e._uU(137,"*"),e.qZA()(),e._UZ(138,"input",40),e.qZA()(),e._UZ(139,"hr",25),e.TgZ(140,"div",41)(141,"div",6)(142,"button",42),e.NdJ("click",function(){return r.openCustomerInputChecklist()}),e._uU(143," Customer Input Checklist "),e.qZA()(),e.TgZ(144,"div",6)(145,"button",42),e.NdJ("click",function(){return r.openUploadDocsModal()}),e._uU(146,"Upload Docs"),e.qZA()(),e.TgZ(147,"div",19)(148,"div"),e.YNc(149,K,20,7,"div",43),e.qZA()(),e.TgZ(150,"div",44),e.YNc(151,V,9,0,"div",45),e.qZA(),e.YNc(152,j,3,0,"div",46),e.YNc(153,B,3,0,"div",47),e.qZA()()()),2&i&&(e.Q6J("formGroup",r.form),e.xp6(5),e.hij("",e.lcZ(6,17,r.action)," NPD Details"),e.xp6(23),e.Q6J("items",r.masterData.customers)("clearable",!1),e.xp6(24),e.Q6J("items",r.masterData.productCategory)("clearable",!1),e.xp6(19),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.masterData.buildStage),e.xp6(17),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.masterData.orderType),e.xp6(26),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r.masterData.developmentCharges),e.xp6(7),e.Q6J("value",null),e.xp6(22),e.Q6J("ngIf","edit"==r.action),e.xp6(2),e.Q6J("ngIf","edit"==r.action),e.xp6(1),e.Q6J("ngIf","view"!=r.action),e.xp6(1),e.Q6J("ngIf","view"==r.action))},dependencies:[o.sg,o.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,I.w9,o.rS],encapsulation:2})}return s})();var H=l(56208),z=l(65876);const X=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:R},{path:"upload-docs-modal",component:S._},{path:"form",component:G,resolve:{accessScreen:z.x}}];let $=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[o.ez,H.m,p.Bz.forChild(X)]})}return s})()},29391:(v,h,l)=>{l.d(h,{c:()=>w,nj:()=>S,On:()=>b,hl:()=>P,lI:()=>m,ZA:()=>e,_c:()=>J,bc:()=>M,ck:()=>I,Lk:()=>x});var o=l(13107),p=l(28402);let D=["*","*","*","*","*","*","*","*","*"],f="NPD Review for Feasibility",y=[{header:"NPD No",key:"NPDNo",...o.t},{header:"NPD Date",key:"NPDDate",...o.t},{header:"Project Name",key:"projectName",...o.t},{header:"Product Code",key:"productCategory",...o.t},{header:"Customer Name",key:"name",...o.t},{header:"EDD",key:"expectedDeliveryDate",...o.t},{header:"Inputs",key:"customerInputs",...o.t},{header:"T",key:"technicalReview",...o.t},{header:"E",key:"economicReview",...o.t},{header:"L",key:"legalReview",...o.t},{header:"O",key:"operationalReview",...o.t},{header:"S",key:"schedulingReview",...o.t},{header:"Status",key:"status",...o.t}];const e=c=>({title:f,csvData:c,headers:y}),m=c=>(0,p.J)({data:c,headers:y,widths:D,title:f});let g=["*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*"],_="NPD Request",k=[{header:"NPD. NO",key:"NPDNo",...o.t},{header:"NPD. Date",key:"NPDDate",...o.t},{header:"Customer/Prospect Name",key:"name",...o.t},{header:"Project Name",key:"projectName",...o.t},{header:"Product Code",key:"productCategory",...o.t},{header:"Product Brief",key:"productBrief",...o.t},{header:"Build Stage",key:"buildStage",...o.t},{header:"Order Type",key:"orderType",...o.t},{header:"Monthly off-take Quantity",key:"monthlyOffTakeQty",...o.t},{header:"Development Charges",key:"developmentCharges",...o.t},{header:"Quantity [Requested]",key:"requestedQty",...o.t},{header:"EDD",key:"expectedDeliveryDate",...o.t},{header:"Validation Required",key:"validationRequired",...o.t},{header:"NPD Requested by/Coordinator",key:"NPDRequestedBy",...o.t},{header:"Remark",key:"remarks",...o.t},{header:"Status",key:"status",...o.t}];const P=c=>({title:_,csvData:c,headers:k}),b=c=>(0,p.J)({data:c,headers:k,widths:g,title:_});let F=["*","*","*","*","*","*","*","*","*","*","*","*"],T="D-SKU Cost Sheet",N=[{header:"D-SKU No",key:"DSKUNo",...o.t},{header:"D-SKU Name",key:"DSKUName",...o.t},{header:"D-SKU Description",key:"DSKUDescription",...o.t},{header:"UoM",key:"UOM",...o.t},{header:"COGS",key:"costOfGoodsSold",...o.t},{header:"OPEX",key:"operatingExpenses",...o.t},{header:"Total COO",key:"totalCostOfOperation",...o.t},{header:"Profit",key:"profit",...o.t},{header:"Selling Price",key:"sellingPrice",...o.t}];const S=c=>({title:T,csvData:c,headers:N}),w=c=>(0,p.J)({data:c,headers:N,widths:F,title:T});let O=["*","*","*","*","*","*","*"],C="SampleRequest Report",q=[{header:"SR No.",key:"sampleReqNo",...o.t},{header:"SR Date",key:"SRDate",...o.t},{header:"Sales Category",key:"salesCategory",...o.t},{header:"Customer Name",key:"customerName",...o.t},{header:"Currency",key:"currency",...o.t},{header:"SR Total Amount",key:"SRTotalAmount",...o.t},{header:"SR Status",key:"SRStatus",...o.t}];const x=c=>({title:C,csvData:c,headers:q}),I=c=>(0,p.J)({data:c,headers:q,widths:O,title:C});let E=["*","*","*","*","*","*","*","*"],U="Sample Job Card Creation",Z=[{header:"JC No.",key:"jobCardNo",...o.t},{header:"JC Date",key:"jobCardDate",...o.t},{header:"SKU No.",key:"SKUNo",...o.t},{header:"SKU Name",key:"SKUName",...o.t},{header:"SKU Description",key:"SKUDescription",...o.t},{header:"Batch Qty.",key:"batchQty",...o.t},{header:"Customer Nick Name",key:"customerNickName",...o.t},{header:"Status",key:"status",...o.t}];const M=c=>({title:U,csvData:c,headers:Z}),J=c=>(0,p.J)({data:c,headers:Z,widths:E,title:U})},13107:(v,h,l)=>{l.d(h,{t:()=>o});const o={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(v,h,l)=>{l.d(h,{J:()=>o});const o=({data:p,headers:D,widths:f,title:y})=>({tableData:{widths:f,headerRows:1,body:[D.map(g=>({text:g.header,style:"header"})),...p.map(g=>D.map(_=>({style:"subheader",text:g[_.key]})))]},title:y})},62576:(v,h,l)=>{l.d(h,{Qj:()=>f,nb:()=>m,UB:()=>e,rz:()=>o,aJ:()=>y,JD:()=>p,wG:()=>g});const o=[{message:"NPD No. is Required",key:"NPD"}],p=[{message:"Customer/Prospect Name is Required",key:"referenceModel"},{message:"Product Category is Required",key:"productCategory"},{message:"Project Name is Required",key:"projectName"},{message:"Product Brief is Required",key:"productBrief"},{message:"Build Stage is Required",key:"buildStage"},{message:"Order Type is Required",key:"orderType"},{message:"Development Charges is Required",key:"developmentCharges"},{message:"Quantity [Requested] is Required",key:"requestedQty"},{message:"Expected Delivery Date [EDD] is Required",key:"expectedDeliveryDate"},{message:"Validation Required is Required",key:"validationRequired"},{message:"NPD Requested by/Coordinator is Required",key:"NPDRequestedBy"}];l(84982);const f=[{message:"Order is Required",key:"order"},{message:"Name is Required",key:"name"},{message:"Status is Required",key:"status"}],y=[{message:"SKU Stage is Required",key:"SKUStage"},{message:"Product Category is Required",key:"productCategory"},{message:"HSN Code is Required",key:"HSNCode"},{message:"D-SKU No. is Required",key:"dSKUNo"},{message:"D-SKU Name is Required",key:"SKUName"},{message:"D-SKU Description is Required",key:"SKUDescription"},{message:"Unit of Measurement is Required",key:"primaryUnit"}],e=[{message:"Product Category is Required",key:"productCategory"},{message:"D-SKU No. is Required",key:"DSKUNo"},{message:"D-SKU Name is Required",key:"DSKUName"},{message:"Total Labour Cost/Unit is Required",key:"totalLabourCostPerUnit"},{message:"Total Asset Cost/Unit is Required",key:"totalAssetCostPerUnit"},{message:"Total Tooling Cost/Unit is Required",key:"totalToolingCostPerUnit"}],m=[{message:"Product Category is Required",key:"productCategory"},{message:"D-SKU No. is Required",key:"DSKUNo"},{message:"D-SKU Name is Required",key:"DSKUName"},{message:"Selling Price is Required",key:"sellingPrice"}],g=[{message:"Bill From Location is Required",key:"billFromLocation"},{message:"Customer Category is Required",key:"salesCategory"},{message:"Customer Name is Required",key:"customer"},{message:"Net SO Value is Required",key:"SRTotalAmount"},{message:"Status is Required",key:"SRStatus"},{message:"Customer Shipping Address is Required",key:"customerShippingAddress"},{message:"Fright Terms is Required",key:"frightTerms"},{message:"Transporter is Required",key:"transporter"},{message:"Destination is Required",key:"destination"}]},84982:(v,h,l)=>{l.d(h,{$:()=>o});const o=[{message:"Prospect Name is Required",key:"prospectName"},{message:"Customer category Name is Required",key:"customerCategory"},{message:"Ccy is Required",key:"currency"}]}}]);