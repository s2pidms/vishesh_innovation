"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7514],{57514:($,g,r)=>{r.r(g),r.d(g,{UploadDataModule:()=>Q});var d=r(96814),h=r(1076),v=r(25116),e=r(65879),p=r(99328),y=r(88354);function x(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"div",3)(1,"div",4),e.NdJ("click",function(){const n=e.CHM(o).$implicit,l=e.oxw();return e.KtG(l.navigateTo(n.url,n.disabled,n.displayName))}),e.TgZ(2,"div",5)(3,"h5",6),e._uU(4),e.qZA()()()()}if(2&s){const o=i.$implicit;e.xp6(1),e.Q6J("ngClass",o.disabled?"disabled":""),e.xp6(3),e.Oqu(o.displayName)}}let _=(()=>{var s;class i{constructor(t,a,n,l,c,m){this.menuTitleService=t,this.appGlobalService=a,this.subModulesService=n,this.spinner=l,this.storageService=c,this.router=m,this.title="",this.menuItemId="",this.cards={},this.cardsData=[]}ngOnInit(){this.title=this.appGlobalService.moduleName,this.menuItemId=this.appGlobalService.menuItemId,this.getAll()}getAll(){this.spinner.show(),this.subModulesService.getAll({menuID:this.menuItemId,tabType:v.Cv.MASTER}).subscribe(a=>{this.cards=a?.rows.find(c=>"Uploads Master"==c.title),this.cardsData=this.cards.items.sort((c,m)=>c.order-m.order);let n=4-this.cards.items.length;if(n>0)for(var l=0;l<n;l++)this.cards.items.push({displayName:"Place Holder",disabled:!0,url:null});this.menuTitleService.set({title:`${this.cards.displayName}`,subTitle:null,type:null,subModuleId:this.cards._id})}),this.spinner.hide()}navigateTo(t,a,n){let l={title:n,subTitle:null,type:null,subModuleId:this.cards._id};this.storageService.set("menuTitle",l),a||(this.menuTitleService.set(l),this.router.navigate([t]))}}return(s=i).\u0275fac=function(t){return new(t||s)(e.Y36(p.Uh),e.Y36(p.P0),e.Y36(y.M5),e.Y36(p.V),e.Y36(p.V1),e.Y36(h.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-upload-data"]],decls:3,vars:1,consts:[[1,"container-fluid","tabs-card-page",2,"width","80.5rem"],[1,"row","row-cols-1","row-cols-md-4"],["class","col d-flex justify-content-center",4,"ngFor","ngForOf"],[1,"col","d-flex","justify-content-center"],[1,"card","masterCard",3,"ngClass","click"],[1,"card-body","d-flex","align-content-center"],[1,"card-title","align-self-center"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,x,5,2,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",a.cardsData))},dependencies:[d.mk,d.sg],encapsulation:2}),i})();var U=r(56208),f=r(43818),u=r(97106),b=r(37285),M=r(88059),S=r(95346);function P(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"th",17),e.NdJ("sort",function(a){e.CHM(o);const n=e.oxw();return e.KtG(n.onSort(a))}),e._uU(1),e.qZA()}if(2&s){const o=i.$implicit;e.Tol(o.class),e.Q6J("sortable",o.value),e.xp6(1),e.hij(" ",o.label," ")}}function I(s,i){if(1&s&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&s){const o=i.$implicit,t=e.oxw().$implicit;e.Tol(o.class),e.xp6(1),e.hij(" ",t[o.value]," ")}}function A(s,i){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,I,2,3,"td",18),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.tableHead)}}const O=function(s,i,o,t){return{page:s,pageSize:i,collection:o,search:t}};let D=(()=>{var s;class i{constructor(t,a){this.activeModal=t,this.exportExcelService=a,this.title="",this.type="",this.inValidRecords=[],this.tableHead=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1}ngOnInit(){this.collection=this.inValidRecords.length}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value;break;case"EXCEL":"Supplier"==this.type?this.excelDownloadForSupplier():"Items"==this.type?this.excelDownloadForItem():"Customer"==this.type?this.excelDownloadForCustomer():"InventoryCorrection"==this.type?this.excelDownloadForInventory():"SKUMaster"==this.type&&this.excelDownloadForSKU();break;case"PAGE":this.page=t.value}}excelDownloadForInventory(){this.exportExcelService.exportExcel((0,u.T2)(this.inValidRecords))}excelDownloadForSKU(){this.exportExcelService.exportExcel((0,u.iC)(this.inValidRecords))}excelDownloadForItem(){this.exportExcelService.exportExcel((0,u.yV)(this.inValidRecords))}excelDownloadForCustomer(){this.exportExcelService.exportExcel((0,u.ti)(this.inValidRecords))}excelDownloadForSupplier(){this.exportExcelService.exportExcel((0,u.Nd)(this.inValidRecords))}onSort({column:t,direction:a}){this.headers.forEach(n=>{n.sortable!==t&&(n.direction="")}),this.inValidRecords=""===a||""===t?this.inValidRecords:[...this.inValidRecords].sort((n,l)=>{let c="string"==typeof n[t]?n[t].toLowerCase():n[t],m="string"==typeof l[t]?l[t].toLowerCase():l[t];const C=c<m?-1:c>m?1:0;return"asc"===a?C:-C})}}return(s=i).\u0275fac=function(t){return new(t||s)(e.Y36(b.Kz),e.Y36(p.Ol))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-upload-details"]],viewQuery:function(t,a){if(1&t&&e.Gf(f.j,5),2&t){let n;e.iGM(n=e.CRH())&&(a.headers=n)}},inputs:{title:"title",type:"type",inValidRecords:"inValidRecords",tableHead:"tableHead"},decls:22,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[3,"class","sortable","sort",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"sortable","sort"],[3,"class",4,"ngFor","ngForOf"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return a.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(l){return a.eventHeader(l)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14),e.YNc(17,P,2,4,"th",15),e.qZA()(),e.TgZ(18,"tbody"),e.YNc(19,A,2,1,"tr",16),e.ALo(20,"slice"),e.ALo(21,"searchFi1ter"),e.qZA()()()()()()()()),2&t&&(e.xp6(3),e.Oqu(a.title),e.xp6(9),e.Q6J("data",e.l5B(11,O,a.page,a.pageSize,a.collection,a.search)),e.xp6(5),e.Q6J("ngForOf",a.tableHead),e.xp6(2),e.Q6J("ngForOf",e.Dn7(20,4,e.xi3(21,8,a.inValidRecords,a.search),(a.page-1)*a.pageSize,(a.page-1)*a.pageSize+a.pageSize)))},dependencies:[d.sg,M.P,f.j,d.OU,S.G],encapsulation:2}),i})();var T=r(77609);const F=[{value:"supplierName",label:"Supplier Name",class:"text-start"},{value:"supplierGST",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],N=[{value:"itemName",label:"Item Name",class:"text-start"},{value:"hsn",label:"HSN Code",class:""},{value:"message",label:"Message",class:"text-start"}],w=[{value:"customerName",label:"Customer Name",class:"text-start"},{value:"GSTIN",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],Z=[{value:"supplierCode",label:"Supplier Code",class:""},{value:"itemCode",label:"Item Code",class:""},{value:"message",label:"Message",class:"text-start"}],R=[{value:"empFirstName",label:"Emp First Name",class:"text-start"},{value:"empLastName",label:"Emp Last Name",class:""},{value:"message",label:"Message",class:"text-start"}],V=[{value:"SKUName",label:"SKU Name",class:"text-start"},{value:"customerName",label:"Customer Name",class:"text-start"},{value:"message",label:"Message",class:"text-start"}],H=[{value:"customerName",label:"Customer Name",class:"text-start"},{value:"GSTIN",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],k=[{value:"assetName",label:"Asset Name",class:"text-start"},{value:"assetDescription",label:"Asset Description",class:""},{value:"message",label:"Message",class:"text-start"}],E=[{value:"SKUNo",label:"SKU No.",class:"text-start"},{value:"message",label:"Message",class:"text-start"}],K=[{value:"SKUNo",label:"SKU No.",class:"text-start"},{value:"message",label:"Message",class:"text-start"}];var G=r(74659),J=r(53421);function Y(s,i){1&s&&e._UZ(0,"img",27)}function j(s,i){1&s&&(e.TgZ(0,"div",28)(1,"div",29),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"div",31)(4,"span"),e._uU(5,"Upload Successful"),e.qZA()()())}const z=[{path:"tab_list",component:_},{path:"form/:uploadParameter",component:(()=>{var s;class i{constructor(t,a,n,l,c){this.spinner=t,this.suppliersService=a,this.toastService=n,this.modalService=l,this.activatedRoute=c,this.file=null,this.fileName="",this.fileSuccessUpload=!1,this.dataSuccessUpload=!1,this.approvedFlag=!1,this.rolePermissionActions=v.a1,this.inValidRecords=[],this.validRecords=[],this.tableHead=[],this.type=""}ngOnInit(){this.type=this.activatedRoute.snapshot.paramMap.get("uploadParameter"),"Supplier"==this.type?this.tableHead=F:"Items"==this.type?this.tableHead=N:"Customer"==this.type?this.tableHead=w:"InventoryCorrection"==this.type?this.tableHead=Z:"Employee"==this.type?this.tableHead=R:"SKUMaster"==this.type?this.tableHead=V:"FGIN"==this.type?this.tableHead=H:"Asset"==this.type?this.tableHead=k:"SKUDimensions"==this.type?this.tableHead=E:"SKUMaterial"==this.type&&(this.tableHead=K)}fileChosen(t){if(t.target.value){if(t.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 2MB");this.file=t.target.files[0],this.fileName=this.file.name}}removeFile(){this.fileName="",this.file="",this.inValidRecords=[],this.validRecords=[]}submit(){let t=new FormData;this.file&&"object"==typeof this.file?(t.append("key","excelData"),t.append("collectionName",this.type),t.append("uploadFile",this.file,this.file.name),this.spinner.show(),this.suppliersService.uploadAndCheckCSVFile(t).subscribe(a=>{this.inValidRecords=a?.inValidRecords,this.validRecords=a?.validRecords,this.inValidRecords?.length>0?this.openInvalidSupplierRecordsModal():this.openValidRecordsModal(),this.spinner.hide()})):this.toastService.warning("Please Upload File")}uploadData(){this.spinner.show(),this.suppliersService.bulkInsertByCSVFile({collectionName:this.type,validRecords:this.validRecords}).subscribe(a=>{console.log("success",a),this.toastService.success(a.message),this.removeFile(),this.spinner.hide()})}downloadCSVFormat(){let t="",a="";"Supplier"==this.type?(t="./assets/upload-data-excel-csv/supplier.csv",a="Upload Suppliers"):"Items"==this.type?(t="./assets/upload-data-excel-csv/item.csv",a="Upload Items"):"Customer"==this.type?(t="./assets/upload-data-excel-csv/customer.csv",a="Upload Customer"):"InventoryCorrection"==this.type?(t="./assets/upload-data-excel-csv/inventory.csv",a="Validate Inventory"):"Employee"==this.type?(t="./assets/upload-data-excel-csv/employee.csv",a="Upload Employee"):"SKUMaster"==this.type?(t="./assets/upload-data-excel-csv/SKU.csv",a="Upload SKU Master"):"FGIN"==this.type?(t="./assets/upload-data-excel-csv/FGIN.csv",a="Upload FGIN"):"Asset"==this.type?(t="./assets/upload-data-excel-csv/asset.csv",a="Upload Asset"):"SKUDimensions"==this.type?(t="./assets/upload-data-excel-csv/SKUDimension.csv",a="Upload SKU Dimensions"):"SKUMaterial"==this.type&&(t="./assets/upload-data-excel-csv/SKUMaterial.csv",a="Upload SKU Material");const n=document.createElement("a");n.href=t,n.download=`${a}.csv`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}openInvalidSupplierRecordsModal(){const t=this.modalService.open(D,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.title=`Invalid ${"InventoryCorrection"==this.type?"Validate Inventory":this.type} Records`,t.componentInstance.type=this.type,t.componentInstance.tableHead=this.tableHead,t.componentInstance.inValidRecords=this.inValidRecords,t.result.then(a=>{},a=>{})}openValidRecordsModal(){const t=this.modalService.open(T.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});t.componentInstance.heading="Upload Data",t.componentInstance.cancelText=`Do You Want to Upload ${"InventoryCorrection"==this.type?"Validate Inventory":this.type} Records ?`,t.result.then(a=>{"Yes"==a&&this.uploadData()},a=>{})}}return(s=i).\u0275fac=function(t){return new(t||s)(e.Y36(p.V),e.Y36(G.RA),e.Y36(p.kl),e.Y36(b.FF),e.Y36(h.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-upload-data"]],decls:37,vars:10,consts:[[1,"row","justify-content-center","biometricAttendancePage"],[1,"col-md-8","mt-3"],[3,"ngClass"],[1,"biometricContainer"],[1,"row","my-2","justify-content-center"],[1,"col-md-10","px-5"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["appAccessControl","",1,"align-self-end",3,"accessType"],["type","button",1,"btn","btn-primary","px-4","btn-width",3,"click"],[1,"row","row-box","mb-5"],[1,"col-12","data-box","text-center","blue-text"],[1,"row","mb-5"],[1,"col-md-12"],[1,"d-flex","justify-content-center"],[1,"me-3","align-self-end","align-items-baseline"],["type","button",1,"btn","btn-primary","px-4",3,"click"],["type","file","hidden","","accept",".csv",3,"change"],["fileInput",""],[1,"me-3","w-50"],[1,"text-center"],[1,"text-primary","mb-2"],[1,"d-flex","inputGroup"],["type","text","readonly","",1,"form-control","iBASInput-field",3,"value"],[1,"input-group-text","pe-4",3,"click"],["class","closeIcon","src","../../../../../assets/new_icons/remove_attachment.svg","alt","",4,"ngIf"],["class","row mb-4 row-3",4,"ngIf"],["src","../../../../../assets/new_icons/remove_attachment.svg","alt","",1,"closeIcon"],[1,"row","mb-4","row-3"],[1,"col-auto"],["src","../../../../../assets/new_icons/successful_icon.svg","alt","successImg",1,"successImg"],[1,"col-auto","align-self-center"]],template:function(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){return a.downloadCSVFormat()}),e._uU(11," Download "),e.qZA()()()()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"div",10)(15,"div",11),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"button",16),e.NdJ("click",function(){e.CHM(n);const c=e.MAs(24);return e.KtG(c.click())}),e._uU(22," Select File "),e.qZA(),e.TgZ(23,"input",17,18),e.NdJ("change",function(c){return a.fileChosen(c)}),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"label",21),e._uU(28),e.qZA()(),e.TgZ(29,"div",22),e._UZ(30,"input",23),e.TgZ(31,"span",24),e.NdJ("click",function(){return a.removeFile()}),e.YNc(32,Y,1,0,"img",25),e.qZA()()(),e.TgZ(33,"div",8)(34,"button",9),e.NdJ("click",function(){return a.submit()}),e._uU(35," Upload "),e.qZA()()()()(),e.YNc(36,j,6,0,"div",26),e.qZA()()()()}2&t&&(e.xp6(2),e.Q6J("ngClass",a.fileSuccessUpload?"card activeCard mb-4":"card mb-4"),e.xp6(6),e.hij(" Download ","InventoryCorrection"==a.type?"Validate Inventory":a.type,".csv File Sample Template "),e.xp6(1),e.Q6J("accessType",a.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngClass",a.fileSuccessUpload?"card activeCard":"card"),e.xp6(4),e.hij(" Upload ","InventoryCorrection"==a.type?"Validate Inventory":a.type," "),e.xp6(12),e.hij(" Upload ","InventoryCorrection"==a.type?"Validate Inventory":a.type," in Excel format [.csv] "),e.xp6(2),e.Q6J("value",a.fileName),e.xp6(2),e.Q6J("ngIf",a.fileName),e.xp6(1),e.Q6J("accessType",a.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngIf",a.fileSuccessUpload))},dependencies:[d.mk,d.O5,J.J],styles:[".biometricAttendancePage[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #fff!important;border-radius:0!important}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{font-size:1.2rem;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow:0 0 7px #0006}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .biometricContainer[_ngcontent-%COMP%]{--bs-gutter-x: 3.7rem;--bs-gutter-y: 0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .row-box[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .data-box[_ngcontent-%COMP%]{align-self:center;vertical-align:middle!important;padding:.2rem 0 .2rem .9rem;color:#5a5a5a;background-color:#eaecf2;border-radius:2px}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue-text[_ngcontent-%COMP%]{background-color:#007daf!important;color:#fff;font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .btn-width[_ngcontent-%COMP%]{width:7.5vw}.biometricAttendancePage[_ngcontent-%COMP%]   .arrowDownImg[_ngcontent-%COMP%]{width:4vh;height:4vh}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{display:flex;justify-content:center}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%]{padding:.5rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .successImg[_ngcontent-%COMP%]{width:3rem;height:3rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .closeIcon[_ngcontent-%COMP%]{width:2vh}.biometricAttendancePage[_ngcontent-%COMP%]   .iBASInput-field[_ngcontent-%COMP%]{width:100%;padding:10px}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]{background-color:#f2f8fb}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}"]}),i})()}];let Q=(()=>{var s;class i{}return(s=i).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,h.Bz.forChild(z),U.m]}),i})()}}]);