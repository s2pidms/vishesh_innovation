"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4233],{64233:(x,g,i)=>{i.r(g),i.d(g,{PayrollModule:()=>J});var u=i(96814),h=i(1076),m=i(43818),f=i(25116),t=i(65879),c=i(98977),T=i(68187),b=i(88059),p=i(60095),Z=i(53421),P=i(95346);function A(l,s){if(1&l&&(t.TgZ(0,"option",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&l){const o=s.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",t.xi3(2,2,o.value,"MMMM YYYY")," ")}}function v(l,s){if(1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&l){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.TDS,"1.2-2"))}}function C(l,s){if(1&l){const o=t.EpF();t.TgZ(0,"input",48),t.NdJ("ngModelChange",function(e){t.CHM(o);const r=t.oxw().$implicit;return t.KtG(r.TDS=e)})("input",function(){t.CHM(o);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.setNetPayable(e.employeeId,e))}),t.qZA()}if(2&l){const o=t.oxw().$implicit;t.Q6J("ngModel",o.TDS)}}function S(l,s){if(1&l){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t.YNc(19,v,3,4,"span",41),t.YNc(20,C,1,1,"input",42),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"number"),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.ALo(26,"number"),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.ALo(29,"number"),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td")(33,"div",43),t._UZ(34,"button",44),t.TgZ(35,"div",45)(36,"a",46),t.NdJ("click",function(){const r=t.CHM(o).$implicit,n=t.oxw();return t.KtG(n.flag=r._id)}),t._UZ(37,"i",47),t._uU(38," Edit "),t.qZA()()()()()}if(2&l){const o=s.$implicit,a=t.oxw();t.xp6(2),t.Oqu(null==o?null:o.employeeCode),t.xp6(2),t.Oqu(null==o?null:o.employeeName),t.xp6(2),t.Oqu(null==o?null:o.department),t.xp6(2),t.Oqu(null==o?null:o.paidDays),t.xp6(2),t.Oqu(t.xi3(11,14,null==o?null:o.gross,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(14,17,null==o?null:o.PF,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(17,20,null==o?null:o.ESIC,"1.2-2")),t.xp6(3),t.Q6J("ngIf",o.status&&!("Draft"==o.status&&o._id==a.flag)),t.xp6(1),t.Q6J("ngIf",!o.status||"Draft"==o.status&&o._id==a.flag),t.xp6(2),t.Oqu(t.xi3(23,23,null==o?null:o.PT,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(26,26,null==o?null:o.advSalary,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(29,29,null==o?null:o.netPayable,"1.2-2")),t.xp6(3),t.Oqu(null==o?null:o.status),t.xp6(5),t.Q6J("accessType",a.rolePermissionActions.editAction)}}const D=function(l,s,o,a){return{page:l,pageSize:s,collection:o,search:a}},M=[{path:"",component:(()=>{var l;class s{constructor(a,e,r,n,d){this.router=a,this.spinner=e,this.toastService=r,this.payrollService=n,this.exportExcelService=d,this.page=1,this.pageSize=9,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.originTableData=[],this.user={},this.fromDate="",this.toDate="",this.payrollForMonthYear=null,this.submitted=!1,this.date=new Date,this.flag=-1,this.month=new Date(this.date.getFullYear(),this.date.getMonth()+1,1).toISOString().slice(0,7),this.monthOptions=[{value:new Date(this.date.getFullYear(),this.date.getMonth()+1,1).toISOString().slice(0,7)},{value:new Date(this.date.getFullYear(),this.date.getMonth(),1).toISOString().slice(0,7)},{value:new Date(this.date.getFullYear(),this.date.getMonth()-1,1).toISOString().slice(0,7)}],this.btnFlag=!0,this.rolePermissionActions=f.a1}ngOnInit(){}trackByFn(a,e){return e?._id}reset(){this.payrollForMonthYear=null,this.tableData=[],this.collection=this.tableData.length}setNetPayable(a,e){let r=this.tableData.map(n=>n.employeeId).indexOf(a);this.tableData[r].netPayable=e.gross-(e.PF+e.ESIC+e.TDS+e.advSalary+e.PT)}create(a){this.spinner.show(),this.tableData=this.tableData.map(e=>(e.status=a,e)),this.payrollService.create(this.tableData).subscribe(e=>{this.spinner.hide(),this.submitted=!1,this.tableData=[],this.payrollForMonthYear=null,this.flag=-1,this.toastService.success(e.message)})}navigateTo(a,e,r){this.router.navigate([a],{queryParams:{id:e,action:r}})}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value,this.flag=-1;break;case"EXCEL":this.excelDownload(this.tableData);break;case"PAGE":this.page=a.value}}getAllData(){this.spinner.show(),this.payrollService.getAllMasterData(this.payrollForMonthYear).subscribe(a=>{this.spinner.hide(),this.tableData=a.salaryPayrollOfMonth,this.collection=a.salaryPayrollOfMonth.length,this.btnFlag=this.tableData.every(e=>"Approved"==e.status)})}onSort({column:a,direction:e}){this.headers.forEach(r=>{r.sortable!==a&&(r.direction="")}),this.tableData=""===e||""===a?this.tableData:[...this.tableData].sort((r,n)=>{let d="string"==typeof r[a]?r[a].toLowerCase():r[a],_="string"==typeof n[a]?n[a].toLowerCase():n[a];const y=d<_?-1:d>_?1:0;return"asc"===e?y:-y})}excelDownload(a){let e={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}},r={title:"Payroll List",csvData:a,headers:[{header:"Employee Code",key:"employeeCode",...e},{header:"Employee Name",key:"employeeName",...e},{header:"Department",key:"department",...e},{header:"Paid Days",key:"paidDays",...e},{header:"Gross",key:"gross",...e},{header:"PF",key:"PF",...e},{header:"ESIC",key:"ESIC",...e},{header:"TDS",key:"TDS",...e},{header:"PT",key:"PT",...e},{header:"Adv. Salary",key:"advSalary",...e},{header:"Net Payable",key:"netPayable",...e},{header:"Status",key:"status",...e}]};this.exportExcelService.exportExcel(r)}}return(l=s).\u0275fac=function(a){return new(a||l)(t.Y36(h.F0),t.Y36(c.V),t.Y36(c.kl),t.Y36(T.Et),t.Y36(c.Ol))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-payroll"]],viewQuery:function(a,e){if(1&a&&t.Gf(m.j,5),2&a){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},decls:62,vars:21,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],[1,"row","justify-content-center","mt-4"],[1,"col-4"],[1,"row"],[1,"col-5","mt-1","pe-1"],[1,"form-label","text-nowrap"],[1,"text-danger"],[1,"col-1","ps-3","pe-0"],[1,"fa","fa-caret-right","mt-1","text-secondary"],[1,"col-6","ps-0"],[1,"form-select",3,"ngModel","ngModelChange","change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-3","line-border"],[1,"table-responsive",2,"min-height","33rem"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","employeeCode",3,"sort"],["sortable","employeeName",1,"text-start",3,"sort"],["sortable","department",3,"sort"],["sortable","paidDays",3,"sort"],["sortable","gross",3,"sort"],["sortable","PF",3,"sort"],["sortable","ESIC",3,"sort"],["sortable","TDS",3,"sort"],["sortable","PT",3,"sort"],["sortable","advSalary",3,"sort"],["sortable","netPayable",3,"sort"],["sortable","isActive",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-border"],["appAccessControl","",1,"text-center","mt-2",3,"accessType"],["type","button",1,"btn","bg-primary","px-5","mx-2",3,"click"],[1,"btn","bg-primary","px-5","mx-2",3,"disabled","click"],["type","button",1,"btn","bg-primary","px-5","mx-2",3,"disabled","click"],[3,"value"],[1,"text-start"],[4,"ngIf"],["class","form-control form-control-sm w-25","type","number",3,"ngModel","ngModelChange","input",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["type","number",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelChange","input"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Payroll Management Staff"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Payroll for Month'Year"),t._UZ(10,"span",8),t.qZA()(),t.TgZ(11,"div",9),t._UZ(12,"i",10),t.qZA(),t.TgZ(13,"div",11)(14,"select",12),t.NdJ("ngModelChange",function(n){return e.payrollForMonthYear=n})("change",function(){return e.getAllData()}),t.TgZ(15,"option",13),t._uU(16,"Select Month"),t.qZA(),t.YNc(17,A,3,5,"option",14),t.qZA()()()()(),t._UZ(18,"hr",15),t.TgZ(19,"div",16)(20,"app-setting-header",17),t.NdJ("dataChange",function(n){return e.eventHeader(n)}),t.qZA(),t.TgZ(21,"table",18)(22,"thead",19)(23,"tr",20)(24,"th",21),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(25,"Employee Code"),t.qZA(),t.TgZ(26,"th",22),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(27,"Employee Name"),t.qZA(),t.TgZ(28,"th",23),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(29,"Department"),t.qZA(),t.TgZ(30,"th",24),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(31,"Paid Days"),t.qZA(),t.TgZ(32,"th",25),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(33,"Gross"),t.qZA(),t.TgZ(34,"th",26),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(35,"PF"),t.qZA(),t.TgZ(36,"th",27),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(37,"ESIC"),t.qZA(),t.TgZ(38,"th",28),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(39,"TDS"),t.qZA(),t.TgZ(40,"th",29),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(41,"PT"),t.qZA(),t.TgZ(42,"th",30),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(43,"Adv. Salary"),t.qZA(),t.TgZ(44,"th",31),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(45,"Net Payable"),t.qZA(),t.TgZ(46,"th",32),t.NdJ("sort",function(n){return e.onSort(n)}),t._uU(47,"Status"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Action"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,S,39,32,"tr",33),t.ALo(52,"slice"),t.ALo(53,"searchFi1ter"),t.qZA()()(),t._UZ(54,"hr",34),t.TgZ(55,"div",35)(56,"button",36),t.NdJ("click",function(){return e.reset()}),t._uU(57,"Reset"),t.qZA(),t.TgZ(58,"button",37),t.NdJ("click",function(){return e.create("Draft")}),t._uU(59,"Save"),t.qZA(),t.TgZ(60,"button",38),t.NdJ("click",function(){return e.create("Approved")}),t._uU(61," Approve "),t.qZA()()()),2&a&&(t.xp6(14),t.Q6J("ngModel",e.payrollForMonthYear),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",e.monthOptions),t.xp6(3),t.Q6J("data",t.l5B(16,D,e.page,e.pageSize,e.collection,e.search)),t.xp6(31),t.Q6J("ngForOf",t.Dn7(52,9,t.xi3(53,13,e.tableData,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(4),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(3),t.Q6J("disabled",e.btnFlag),t.xp6(2),t.Q6J("disabled",e.btnFlag))},dependencies:[u.sg,u.O5,b.P,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.On,m.j,Z.J,u.OU,u.JJ,u.uU,P.G],styles:[".fa-caret-right[_ngcontent-%COMP%]{font-size:2rem!important;margin-right:4rem!important}"]}),s})()}];let U=(()=>{var l;class s{}return(l=s).\u0275fac=function(a){return new(a||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[h.Bz.forChild(M),h.Bz]}),s})();var q=i(56208);let J=(()=>{var l;class s{}return(l=s).\u0275fac=function(a){return new(a||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[u.ez,U,q.m]}),s})()}}]);