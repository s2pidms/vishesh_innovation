"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9794],{60449:(f,c,a)=>{a.r(c),a.d(c,{TicketDetailsModule:()=>y});var p=a(96814),T=a(1076),h=a(43818),m=a(25116),g=a(36144),t=a(65879),_=a(32197),u=a(99328),D=a(88059),Z=a(37285),d=a(60095);function b(r,l){if(1&r&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&r){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function v(r,l){if(1&r){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",34,35)(9,"span",36),t._uU(10),t.qZA()(),t.TgZ(11,"td",34,37)(13,"span",36),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"img",38),t.NdJ("click",function(){const o=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.navigateTo(null==o?null:o._id,"print"))}),t.qZA()()()}if(2&r){const n=l.$implicit,i=t.MAs(8),e=t.MAs(12);t.xp6(2),t.Oqu(null==n?null:n.issueNumber),t.xp6(2),t.Oqu(null==n?null:n.issueDate),t.xp6(2),t.Oqu(null==n?null:n.issueTitle),t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",n.issueDescription),t.xp6(1),t.hij(" ",n.issueDescription," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",n.issueResolution),t.xp6(1),t.hij(" ",n.issueResolution," "),t.xp6(2),t.hij(" ",null==n?null:n.issueStatus," ")}}const A=function(r,l,n,i){return{page:r,pageSize:l,collection:n,search:i,type:"list",pdfDisplay:!0}};let k=(()=>{var r;class l{constructor(i,e,o,s,U,J){this.supportService=i,this.menuTitleService=e,this.exportExcelService=o,this.spinner=s,this.utilityService=U,this.exportToPDFService=J,this.page=1,this.pageSize=12,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.issueStatus="",this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate,this.issueStatusArr=m._1}ngOnInit(){this.getAll(),this.menuTitleService.set({title:"Ticket Details",subTitle:null,type:null})}trackByFn(i,e){return e?._id}navigateTo(i,e){window.open(`${window.location.origin}/#/print/ticket_details?id=${i}&action=${e}`,"_blank")}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=i.value,this.getAll()}}reset(){this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate,this.issueStatus="",this.getAll()}getAll(i=!1,e=""){this.spinner.show();let o={dummy:"1",page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:i,fromDate:this.fromDate,toDate:this.toDate,status:this.issueStatus};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.supportService.getAllReports(o).subscribe(s=>{"EXCEL"==e?this.excelDownload(s.rows):"PDF"==e?this.pdfDownload(s.rows):(this.tableData=s.rows,this.collection=s.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}excelDownload(i){this.exportExcelService.exportExcel((0,g.a_)(i))}pdfDownload(i){let e=(0,g.PT)(i);this.exportToPDFService.generatePdf(e.tableData,e.title)}onSort({column:i,direction:e}){this.headers.forEach(o=>{o.sortable!==i&&(o.direction="")}),this.column=i,this.direction="asc"==e?1:-1,this.getAll()}}return(r=l).\u0275fac=function(i){return new(i||r)(t.Y36(_.a),t.Y36(u.Uh),t.Y36(u.Ol),t.Y36(u.V),t.Y36(u.tI),t.Y36(u.$L))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ticket-details"]],viewQuery:function(i,e){if(1&i&&t.Gf(h.j,5),2&i){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},decls:59,vars:12,consts:[[1,"reportTablePage","m-0"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5","separate-row"],[1,"form-label"],[1,"text-danger"],[1,"form-select",3,"ngModel","ngModelChange"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"set-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],[1,"col-3"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","align-self-end","separate-image"],[1,"image-position"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","ms-4",3,"click"],[1,"row","line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","issueNumber",3,"sort"],["sortable","issueDate",3,"sort"],["sortable","issueTitle",3,"sort"],["sortable","issueDescription",1,"text-start",3,"sort"],["sortable","issueResolution",1,"text-start",3,"sort"],["sortable","issueStatus",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"text-start"],["issueDescription",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["issueResolution",""],["src","./assets/images/file_pdf.png","width","20rem","alt","",1,"pointer",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Ticket Details Report"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Ticket Status"),t.TgZ(10,"span",8),t._uU(11,"*"),t.qZA()(),t.TgZ(12,"select",9),t.NdJ("ngModelChange",function(s){return e.issueStatus=s}),t.TgZ(13,"option",10),t._uU(14,"Select Ticket Status"),t.qZA(),t.YNc(15,b,2,2,"option",11),t.qZA(),t.TgZ(16,"span",12),t._UZ(17,"img",13),t.qZA()(),t.TgZ(18,"div",14)(19,"label",7),t._uU(20,"From Date"),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"input",15),t.NdJ("ngModelChange",function(s){return e.fromDate=s}),t.qZA()(),t.TgZ(24,"div",14)(25,"label",7),t._uU(26,"To Date"),t.TgZ(27,"span",8),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return e.toDate=s}),t.qZA()(),t.TgZ(30,"div",16)(31,"span",17),t._UZ(32,"img",13),t.qZA(),t.TgZ(33,"button",18),t.NdJ("click",function(){return e.getAll()}),t._uU(34,"Apply Filter"),t.qZA(),t.TgZ(35,"button",19),t.NdJ("click",function(){return e.reset()}),t._uU(36,"Reset Filter"),t.qZA()()(),t._UZ(37,"hr",20),t.TgZ(38,"div",21)(39,"app-setting-header",22),t.NdJ("dataChange",function(s){return e.eventHeader(s)}),t.qZA(),t.TgZ(40,"table",23)(41,"thead",24)(42,"tr",25)(43,"th",26),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(44,"Ticket #"),t.qZA(),t.TgZ(45,"th",27),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(46,"Date"),t.qZA(),t.TgZ(47,"th",28),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(48,"Title"),t.qZA(),t.TgZ(49,"th",29),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(50,"Description"),t.qZA(),t.TgZ(51,"th",30),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(52,"Ticket Resolution"),t.qZA(),t.TgZ(53,"th",31),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(54,"Status"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Action"),t.qZA()()(),t.TgZ(57,"tbody"),t.YNc(58,v,19,14,"tr",32),t.qZA()()()()()),2&i&&(t.xp6(12),t.Q6J("ngModel",e.issueStatus),t.xp6(3),t.Q6J("ngForOf",e.issueStatusArr),t.xp6(8),t.Q6J("ngModel",e.fromDate),t.xp6(6),t.Q6J("ngModel",e.toDate),t.xp6(10),t.Q6J("data",t.l5B(7,A,e.page,e.pageSize,e.collection,e.search)),t.xp6(19),t.Q6J("ngForOf",e.tableData)("ngForTrackBy",e.trackByFn))},dependencies:[p.sg,D.P,Z._L,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On,h.j],encapsulation:2}),l})();var C=a(56208);const S=[{path:"",component:k}];let y=(()=>{var r;class l{}return(r=l).\u0275fac=function(i){return new(i||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,C.m,T.Bz.forChild(S)]}),l})()},13107:(f,c,a)=>{a.d(c,{t:()=>p});const p={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(f,c,a)=>{a.d(c,{J:()=>p});const p=({data:T,headers:h,widths:m,title:g})=>({tableData:{widths:m,headerRows:1,body:[h.map(u=>({text:u.header,style:"header"})),...T.map(u=>h.map(D=>({style:"subheader",text:u[D.key]})))]},title:g})}}]);