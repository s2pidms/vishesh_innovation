"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7226],{77226:(N,p,s)=>{s.r(p),s.d(p,{MailConfigurationModule:()=>J});var c=s(96814),d=s(1076),f=s(43818),C=s(93383),t=s(65879),h=s(88354),m=s(2742),_=s(88059),Z=s(37285);function v(n,u){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",17,18)(9,"span",19),t._uU(10),t.qZA()(),t.TgZ(11,"td",17,20)(13,"span",19),t._uU(14),t.qZA()(),t.TgZ(15,"td",17,21)(17,"span",19),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"div",22),t._UZ(21,"button",23),t.TgZ(22,"div",24)(23,"a",25),t.NdJ("click",function(){const r=t.CHM(i).$implicit,a=t.oxw();return t.KtG(a.navigateTo("/default/settings/master/security_master/mail_configuration/form",r,"view"))}),t._UZ(24,"i",26),t._uU(25," View "),t.qZA(),t.TgZ(26,"a",25),t.NdJ("click",function(){const r=t.CHM(i).$implicit,a=t.oxw();return t.KtG(a.navigateTo("/default/settings/master/security_master/mail_configuration/form",r,"edit"))}),t._UZ(27,"i",27),t._uU(28," Edit "),t.qZA()()()()()}if(2&n){const i=u.$implicit,o=t.MAs(8),e=t.MAs(12),r=t.MAs(16);t.xp6(2),t.Oqu(i.module),t.xp6(2),t.Oqu(i.subModule),t.xp6(2),t.Oqu(i.action),t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",i.emailTo),t.xp6(1),t.hij(" ",i.emailTo," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",i.emailCC),t.xp6(1),t.hij(" ",i.emailCC," "),t.xp6(1),t.Udp("width",r.clientWidth),t.xp6(2),t.Q6J("positionTarget",r)("ngbTooltip",i.emailBCC),t.xp6(1),t.hij(" ",i.emailBCC," "),t.xp6(8),t.ekj("disable","Closed"==(null==i?null:i.issueStatus))}}const b=function(n,u,i,o){return{page:n,pageSize:u,collection:i,search:o}};let T=(()=>{class n{constructor(i,o,e,r){this.mailConfigurationService=i,this.router=o,this.spinner=e,this.exportExcelService=r,this.page=1,this.pageSize=8,this.collection=0,this.column="module",this.direction=1,this.search="",this.tableData=[]}ngOnInit(){this.getAll()}navigateTo(i,o,e){this.router.navigate([i],{queryParams:{id:o?._id,action:e}})}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.getAll();break;case"EXCEL":this.getAll(!0);break;case"PAGE":this.page=i.value,this.getAll()}}getAll(i=!1){this.spinner.show();let o={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:i};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.mailConfigurationService.getAll(o).subscribe(e=>{i?this.excelDownload(e.rows):(this.tableData=e.rows,this.collection=e.count,this.spinner.hide())})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}trackByFn(i,o){return o?._id}excelDownload(i){this.exportExcelService.exportExcel((0,C.MM)(i))}pdfDownload(i){}onSort({column:i,direction:o}){this.headers.forEach(e=>{e.sortable!==i&&(e.direction="")}),this.column=i,this.direction="asc"==o?1:-1,this.getAll()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.Id),t.Y36(d.F0),t.Y36(m.V),t.Y36(m.Ol))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-mail-configuration-list"]],viewQuery:function(o,e){if(1&o&&t.Gf(f.j,5),2&o){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},decls:27,vars:8,consts:[[1,"listCard","card"],[1,"table-header"],[1,"col"],[1,"heading"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","module",1,"text-start",3,"sort"],["sortable","subModule",1,"text-start",3,"sort"],["sortable","action",3,"sort"],["sortable","emailTo",1,"text-start",3,"sort"],["sortable","emailCC",1,"text-start",3,"sort"],["sortable","emailBCC",1,"text-start",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["emailTo",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["emailCC",""],["emailBCC",""],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Mail Configuration Summary"),t.qZA()()(),t._UZ(5,"hr",4),t.TgZ(6,"div",5)(7,"app-setting-header",6),t.NdJ("dataChange",function(a){return e.eventHeader(a)}),t.qZA(),t.TgZ(8,"table",7)(9,"thead",8)(10,"tr",9)(11,"th",10),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(12,"Module Name"),t.qZA(),t.TgZ(13,"th",11),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(14,"Sub Module Name"),t.qZA(),t.TgZ(15,"th",12),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(16,"Action"),t.qZA(),t.TgZ(17,"th",13),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(18,"Email To"),t.qZA(),t.TgZ(19,"th",14),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(20,"Email CC"),t.qZA(),t.TgZ(21,"th",15),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(22,"Email BCC"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Action"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,v,29,20,"tr",16),t.qZA()()()()),2&o&&(t.xp6(7),t.Q6J("data",t.l5B(3,b,e.page,e.pageSize,e.collection,e.search)),t.xp6(19),t.Q6J("ngForOf",e.tableData)("ngForTrackBy",e.trackByFn))},dependencies:[c.sg,_.P,Z._L,f.j],encapsulation:2})}return n})();var l=s(60095),A=s(21631),x=s(22096);function M(n,u){1&n&&t._UZ(0,"hr",21)}function U(n,u){if(1&n){const i=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"button",24),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.reset())}),t._uU(3,"Reset"),t.qZA()(),t.TgZ(4,"div",25)(5,"button",26),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(6,"Save"),t.qZA()()()}}const g=function(){return["view"]};let y=(()=>{class n{get f(){return this.form.controls}constructor(i,o,e,r,a){this.mailConfigurationService=i,this.router=o,this.activatedRoute=e,this.spinner=r,this.toastService=a,this.submitted=!1,this.action="create",this.form=new l.nJ({_id:new l.p4(null),module:new l.p4(null),subModule:new l.p4(null),action:new l.p4(null),emailTo:new l.p4(null),emailCC:new l.p4(null),emailBCC:new l.p4(null)})}ngOnInit(){this.getInitialData()}reset(){this.getInitialData(),this.form.reset()}submit(){this.submitted=!0,this.form.enable();let i=this.form.value;this.mailConfigurationService.update(i._id,i).subscribe(o=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(o.message),this.router.navigate(["/default/settings/master/security_master/mail_configuration/list"])})}getInitialData(){this.spinner.show(),this.activatedRoute.queryParams.pipe((0,A.z)(i=>(this.action=i.action,i.id?this.mailConfigurationService.getById(i.id):(0,x.of)({})))).subscribe(i=>{0!=Object.keys(i).length&&(this.form.patchValue(i),"view"==this.action&&this.form.disable())}),this.spinner.hide()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.Id),t.Y36(d.F0),t.Y36(d.gz),t.Y36(m.V),t.Y36(m.kl))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-mail-configuration-form"]],decls:50,vars:8,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-md-12","px-5","pt-2"],[1,"row","mb-4"],[1,"col-md-4"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","module","readonly","",1,"form-control"],["type","text","formControlName","subModule","readonly","",1,"form-control"],["type","text","formControlName","action","readonly","",1,"form-control"],[1,"col-md-12"],["formControlName","emailTo","rows","2",1,"form-control","form-text-area"],["formControlName","emailCC","rows","2",1,"form-control","form-text-area"],["formControlName","emailBCC","rows","2",1,"form-control","form-text-area"],["class","row line-border",4,"ngIf"],[1,"col-12"],["class","d-flex justify-content-center",4,"ngIf"],[1,"row","line-border"],[1,"d-flex","justify-content-center"],[1,"d-grid","col-md-1","me-5"],["type","button",1,"btn","btn-primary",3,"click"],[1,"d-grid","col-md-1"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),t._uU(13,"Module Name"),t.TgZ(14,"span",10),t._uU(15,"*"),t.qZA()(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"div",8)(18,"label",9),t._uU(19," Sub Module Name"),t.TgZ(20,"span",10),t._uU(21,"*"),t.qZA()(),t._UZ(22,"input",12),t.qZA(),t.TgZ(23,"div",8)(24,"label",9),t._uU(25," Action"),t._UZ(26,"span",10),t.qZA(),t._UZ(27,"input",13),t.qZA()(),t.TgZ(28,"div",7)(29,"div",14)(30,"label",9),t._uU(31," Email To"),t._UZ(32,"span",10),t.qZA(),t._UZ(33,"textarea",15),t.qZA()(),t.TgZ(34,"div",7)(35,"div",14)(36,"label",9),t._uU(37," Email CC"),t._UZ(38,"span",10),t.qZA(),t._UZ(39,"textarea",16),t.qZA()(),t.TgZ(40,"div",7)(41,"div",14)(42,"label",9),t._uU(43," Email BCC"),t._UZ(44,"span",10),t.qZA(),t._UZ(45,"textarea",17),t.qZA()()()(),t.YNc(46,M,1,0,"hr",18),t.TgZ(47,"div",5)(48,"div",19),t.YNc(49,U,7,0,"div",20),t.qZA()()()()()),2&o&&(t.Q6J("formGroup",e.form),t.xp6(5),t.hij("Mail Configuration ( ",t.lcZ(6,4,e.action)," )"),t.xp6(41),t.Q6J("ngIf",!t.DdM(6,g).includes(e.action)),t.xp6(3),t.Q6J("ngIf",!t.DdM(7,g).includes(e.action)))},dependencies:[c.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,c.rS],encapsulation:2})}return n})();var S=s(19964),w=s(56208);const q=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:T},{path:"form",component:y,resolve:{accessScreen:S.xr}}];let J=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[c.ez,d.Bz.forChild(q),w.m]})}return n})()}}]);