"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[86],{30086:(de,x,d)=>{d.r(x),d.d(x,{ProductionProcessesModule:()=>le});var g=d(96814),b=d(1076),v=d(25116),t=d(65879),_=d(99328),L=d(88354);const j=function(r,a){return{disabled:r,isDisplayFalse:a}};function E(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.navigateTo(o.url,o.disabled,o.displayName))}),t.TgZ(2,"div",7)(3,"h5",8),t._uU(4),t.qZA()()()()}if(2&r){const i=a.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,j,i.disabled,!1===i.isDisplay)),t.xp6(3),t.Oqu(i.displayName)}}let K=(()=>{var r;class a{constructor(n,e,o,s,c,p,h){this.menuTitleService=n,this.appGlobalService=e,this.subModulesService=o,this.spinner=s,this.storageService=c,this.router=p,this.activatedRoute=h,this.title="",this.menuItemId="",this.cards={},this.cardsData=[]}ngOnInit(){this.title=this.appGlobalService.moduleName,this.menuItemId=this.appGlobalService.menuItemId,this.getAll()}getAll(){this.spinner.show(),this.subModulesService.getAll({menuID:this.menuItemId,tabType:v.Cv.TRANSACTION}).subscribe(e=>{this.cards=e?.rows.find(c=>"Production Processes"==c.title),this.cardsData=this.cards.items.sort((c,p)=>c.order-p.order);let o=3-this.cards.items.length;if(o>0)for(var s=0;s<o;s++)this.cards.items.push({displayName:"Place Holder",disabled:!0,url:null});this.menuTitleService.set({title:`${this.cards.displayName}`,subTitle:null,type:null,subModuleId:this.cards._id})}),this.spinner.hide()}navigateTo(n,e,o){let s={title:o,subTitle:null,type:null,subModuleId:this.cards._id};this.storageService.set("menuTitle",s),e||(this.menuTitleService.set(s),this.router.navigate([n],{relativeTo:this.activatedRoute}))}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(_.Uh),t.Y36(_.P0),t.Y36(L.M5),t.Y36(_.V),t.Y36(_.V1),t.Y36(b.F0),t.Y36(b.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-production-processes"]],decls:5,vars:1,consts:[[1,"row","tablePage",2,"min-height","47rem"],[1,"col-md-11","table-body","shadow-none"],[1,"container-fluid","tabs-card-page"],[1,"row","row-cols-1","row-cols-md-3"],["class","col d-flex justify-content-center",4,"ngFor","ngForOf"],[1,"col","d-flex","justify-content-center"],[1,"card","masterCard",3,"ngClass","click"],[1,"card-body","d-flex","align-content-center"],[1,"card-title","align-self-center"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,E,5,5,"div",4),t.qZA()()()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",e.cardsData))},dependencies:[g.mk,g.sg],encapsulation:2}),a})();var P=d(32183),T=d(61441),C=d(23396),u=d(37285),y=d(88059),l=d(60095),m=d(50363),k=d(95346);const N=function(){return{standalone:!0}},G=function(){return["view","approve"]};function Y(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",27,32)(7,"span",33),t._uU(8),t.qZA()(),t.TgZ(9,"td",27,34)(11,"span",33),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"div",35)(17,"input",36),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.tension=e)}),t.qZA()()(),t.TgZ(18,"td")(19,"div",37),t._UZ(20,"button",38),t.TgZ(21,"button",39),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.openLogEntryModal(o))}),t._uU(22," Log Entry "),t.qZA()()(),t.TgZ(23,"td")(24,"input",40),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.status=e)}),t.qZA()()()}if(2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10),o=t.oxw();t.xp6(2),t.Oqu(i.SN),t.xp6(2),t.Oqu(i.colourCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourName)("positionTarget",n),t.xp6(1),t.hij(" ",i.colourName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourDescription)("positionTarget",e),t.xp6(1),t.hij(" ",i.colourDescription," "),t.xp6(2),t.Oqu(i.mesh),t.xp6(3),t.Q6J("ngModel",i.tension)("ngModelOptions",t.DdM(18,N)),t.xp6(7),t.Q6J("ngModel",i.status)("ngModelOptions",t.DdM(19,N))("disabled",t.DdM(20,G).includes(o.action))}}function R(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(1," Save "),t.qZA()}}const $=function(){return["view","edit"]},z=function(r,a,i,n){return{page:r,pageSize:a,collection:i,search:n,excelDisplay:"none"}},B=function(){return["reject","Acknowledged","approve","view"]};let H=(()=>{var r;class a{constructor(n,e,o,s,c,p,h,ge){this.screenMakingLogService=n,this.jobCardEntryService=e,this.spinner=o,this.toastService=s,this.modalService=c,this.location=p,this.activeModal=h,this.activatedRoute=ge,this.selectedDetails={},this.sourceOfManufacturing="",this.action="Awaiting Approval",this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.screenMakingLog={},this.shiftOptions=[],this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]},this.selectedJobCardDetails={}}dismissModel(){this.activeModal.close()}ngOnInit(){this.getInitialData()}submit(){this.create()}trackByFn(n,e){return e?._id}create(){this.spinner.show(),this.screenMakingLogService.createOrUpdate(this.screenMakingLog).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.screenMakingLog={},this.getInitialData()})}setJobCardId(n){console.log("item",n),this.selectedDetails={jobCard:n?._id,jobCardNo:n?.jobCardNo,SKU:n?.SKU,batchQty:n?.batchQty,processName:"Screen Making"},this.spinner.show(),this.screenMakingLogService.getAllMasterData(this.selectedDetails).subscribe(e=>{this.screenMakingLog=e.screenMakingLog,this.sourceOfManufacturing=e?.SKUProcessData?.sourceOfManufacturing,(0==e?.screenMakingLog?.screenMakingLogDetails?.length||!e?.screenMakingLog?.screenMakingLogDetails)&&this.toastService.warning(`Please define SKU Ink Master & BOM Of SKUNo -  ${this.screenMakingLog.SKUNo}`),this.shiftOptions=e.shiftOptions,this.collection=this.screenMakingLog?.screenMakingLogDetails?.length,this.spinner.hide()})}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.spinner.hide()})}openJobCardDetailsModal(){const n=this.modalService.open(T.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.screenMakingLog.jobCard,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.screenMakingLog.jobCard=e?.selectedJobCardDetails?._id,this.screenMakingLog.jobCardNo=e?.selectedJobCardDetails?.jobCardNo,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(n){const e=this.modalService.open(P.M,{centered:!0,size:"md",backdrop:"static",keyboard:!1});e.componentInstance.logDetails=n.logDetails,e.componentInstance.sourceOfManufacturing=this.sourceOfManufacturing,e.componentInstance.shiftOptions=this.shiftOptions,e.result.then(o=>{if(o){let s=this.screenMakingLog.screenMakingLogDetails.findIndex(c=>c.ink==n.ink);this.screenMakingLog.screenMakingLogDetails[s].logDetails=o}},o=>{})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(C.M6),t.Y36(C.G3),t.Y36(_.V),t.Y36(_.kl),t.Y36(u.FF),t.Y36(g.Ye),t.Y36(u.Kz),t.Y36(b.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-screen-making-log-form"]],decls:67,vars:25,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row"],[1,"col-5","pe-0"],[1,"col-6","pe-4"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo",3,"items","clearable","ngModel","disabled","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"col-6"],["for","",1,"form-label"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","ps-5"],[1,"col-6","ps-4","pe-2"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center"],["type","button","class","btn bg-primary px-5",3,"click",4,"ngIf"],["colourName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["colourDescription",""],[1,"d-flex","justify-content-center"],["type","text",1,"form-control","form-control-size-lg","w-25",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center"],[1,"plusIconSvg","btn","btn-primary","me-1","py-0","px-0"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Screen Making Log"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",6)(10,"div",8)(11,"label",9),t._uU(12,"Job Card No. "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("ngModelChange",function(s){return e.screenMakingLog.jobCardNo=s})("change",function(s){return e.setJobCardId(s)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",17),t._uU(22,"SKU No. "),t._UZ(23,"span",10),t.qZA(),t.TgZ(24,"input",18),t.NdJ("ngModelChange",function(s){return e.screenMakingLog.SKUNo=s}),t.qZA()()()(),t.TgZ(25,"div",19)(26,"div",6)(27,"div",20)(28,"label",17),t._uU(29,"SKU Name "),t._UZ(30,"span",10),t.qZA(),t.TgZ(31,"input",18),t.NdJ("ngModelChange",function(s){return e.screenMakingLog.SKUName=s}),t.qZA()(),t.TgZ(32,"div",16)(33,"label",17),t._uU(34," SKU Description "),t._UZ(35,"span",10),t.qZA(),t.TgZ(36,"input",18),t.NdJ("ngModelChange",function(s){return e.screenMakingLog.SKUDescription=s}),t.qZA()()()()()(),t._UZ(37,"hr",21),t.TgZ(38,"app-setting-header",22),t.NdJ("dataChange",function(s){return e.eventHeader(s)}),t.qZA(),t.TgZ(39,"div",23)(40,"table",24)(41,"thead",25)(42,"tr",26)(43,"th"),t._uU(44,"SN"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Colour Code"),t.qZA(),t.TgZ(47,"th",27),t._uU(48,"Colour Name"),t.qZA(),t.TgZ(49,"th",27),t._uU(50,"Colour Description"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Mesh"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Tension N/cm"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Log Details"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Status"),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,Y,25,21,"tr",28),t.ALo(61,"slice"),t.ALo(62,"searchFi1ter"),t.qZA()()(),t._UZ(63,"hr",29),t.TgZ(64,"div",6)(65,"div",30),t.YNc(66,R,2,0,"button",31),t.qZA()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.masterData.JCOptions)("clearable",!1)("ngModel",e.screenMakingLog.jobCardNo)("disabled",t.DdM(18,$).includes(e.action)),t.xp6(7),t.Q6J("ngModel",e.screenMakingLog.SKUNo),t.xp6(7),t.Q6J("ngModel",e.screenMakingLog.SKUName),t.xp6(5),t.Q6J("ngModel",e.screenMakingLog.SKUDescription),t.xp6(2),t.Q6J("data",t.l5B(19,z,e.page,e.pageSize,e.collection,e.search)),t.xp6(22),t.Q6J("ngForOf",t.Dn7(61,11,t.xi3(62,15,e.screenMakingLog.screenMakingLogDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(6),t.Q6J("ngIf",!t.DdM(24,B).includes(e.action)))},dependencies:[g.sg,g.O5,y.P,u._L,l.Fj,l.Wl,l.JJ,l.On,m.w9,g.OU,k.G],encapsulation:2}),a})();var W=d(62305);const M=function(){return{standalone:!0}},V=function(){return["view","approve"]};function X(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",27,32)(7,"span",33),t._uU(8),t.qZA()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"div",34)(13,"input",35),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.machine=e)}),t.qZA()()(),t.TgZ(14,"td")(15,"div",34)(16,"input",36),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.ptgPass=e)}),t.qZA()()(),t.TgZ(17,"td")(18,"div",34)(19,"input",36),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.SQGPerSH=e)}),t.qZA()()(),t.TgZ(20,"td")(21,"div",34)(22,"input",36),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.deltaE=e)}),t.qZA()()(),t.TgZ(23,"td")(24,"div",37),t._UZ(25,"button",38),t.TgZ(26,"button",39),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.openLogEntryModal(o))}),t._uU(27," Log Entry "),t.qZA()()(),t.TgZ(28,"td")(29,"input",40),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.status=e)}),t.qZA()()()}if(2&r){const i=a.$implicit,n=t.MAs(6),e=t.oxw();t.xp6(2),t.Oqu(i.SN),t.xp6(2),t.Oqu(i.colourCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourName)("positionTarget",n),t.xp6(1),t.hij(" ",i.colourName," "),t.xp6(2),t.Oqu(i.mesh),t.xp6(3),t.Q6J("ngModel",i.machine)("ngModelOptions",t.DdM(19,M)),t.xp6(3),t.Q6J("ngModel",i.ptgPass)("ngModelOptions",t.DdM(20,M)),t.xp6(3),t.Q6J("ngModel",i.SQGPerSH)("ngModelOptions",t.DdM(21,M)),t.xp6(3),t.Q6J("ngModel",i.deltaE)("ngModelOptions",t.DdM(22,M)),t.xp6(7),t.Q6J("ngModel",i.status)("ngModelOptions",t.DdM(23,M))("disabled",t.DdM(24,V).includes(e.action))}}function tt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(1," Save "),t.qZA()}}const et=function(){return["view","edit"]},nt=function(r,a,i,n){return{page:r,pageSize:a,collection:i,search:n,excelDisplay:"none"}},it=function(){return["reject","Acknowledged","approve","view"]};let ot=(()=>{var r;class a{constructor(n,e,o,s,c,p,h){this.screenPrintingLogService=n,this.spinner=e,this.toastService=o,this.modalService=s,this.location=c,this.activeModal=p,this.jobCardEntryService=h,this.selectedDetails={},this.sourceOfManufacturing="",this.action="Awaiting Approval",this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.screenPrintingLog={},this.shiftOptions=[],this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]},this.selectedJobCardDetails={}}dismissModel(){this.activeModal.close()}ngOnInit(){this.getInitialData()}submit(){this.create()}trackByFn(n,e){return e?._id}create(){this.spinner.show(),this.screenPrintingLogService.createOrUpdate(this.screenPrintingLog).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.screenPrintingLog={},this.getInitialData()})}setJobCardId(n){console.log("item",n),this.selectedDetails={jobCard:n?._id,jobCardNo:n?.jobCardNo,SKU:n?.SKU,batchQty:n?.batchQty,processName:"Printing on CPI"},this.spinner.show(),this.screenPrintingLogService.getAllMasterData(this.selectedDetails).subscribe(e=>{this.screenPrintingLog=e.screenPrintingLog,this.sourceOfManufacturing=e?.SKUProcessData?.sourceOfManufacturing,(0==e?.screenPrintingLog?.screenPrintingLogDetails?.length||!e?.screenPrintingLog?.screenPrintingLogDetails)&&this.toastService.warning(`Please define SKU Ink Master & BOM Of SKUNo -  ${this.screenPrintingLog.SKUNo}`),this.shiftOptions=e.shiftOptions,this.collection=this.screenPrintingLog?.screenPrintingLogDetails?.length,this.spinner.hide()})}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.spinner.hide()})}openJobCardDetailsModal(){const n=this.modalService.open(T.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.screenPrintingLog.jobCard,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.screenPrintingLog.jobCard=e?.selectedJobCardDetails?._id,this.screenPrintingLog.jobCardNo=e?.selectedJobCardDetails?.jobCardNo,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(n){const e=this.modalService.open(W.c,{centered:!0,size:"md",backdrop:"static",keyboard:!1});e.componentInstance.logDetails=n.logDetails,e.componentInstance.sourceOfManufacturing=this.sourceOfManufacturing,e.componentInstance.shiftOptions=this.shiftOptions,e.result.then(o=>{if(o){let s=this.screenPrintingLog.screenPrintingLogDetails.findIndex(c=>c.ink==n.ink);this.screenPrintingLog.screenPrintingLogDetails[s].logDetails=o}},o=>{})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(C.Ek),t.Y36(_.V),t.Y36(_.kl),t.Y36(u.FF),t.Y36(g.Ye),t.Y36(u.Kz),t.Y36(C.G3))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-screen-printing-log-form"]],inputs:{selectedDetails:"selectedDetails",sourceOfManufacturing:"sourceOfManufacturing"},decls:71,vars:25,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row"],[1,"col-5","pe-0"],[1,"col-6","pe-4"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo",3,"items","clearable","ngModel","disabled","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"col-6"],["for","",1,"form-label"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","ps-5"],[1,"col-6","ps-4","pe-2"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center"],["type","button","class","btn bg-primary px-5",3,"click",4,"ngIf"],["colourName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],[1,"d-flex","justify-content-center"],["type","text",1,"form-control","form-control-size-lg","w-25","bg-yellow-color","text-center",3,"ngModel","ngModelOptions","ngModelChange"],["type","number",1,"form-control","form-control-size-lg","w-25","bg-yellow-color","text-center",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center"],[1,"plusIconSvg","btn","btn-primary","me-1","py-0","px-0"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Screen Printing Log"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",6)(10,"div",8)(11,"label",9),t._uU(12,"Job Card No. "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("ngModelChange",function(s){return e.screenPrintingLog.jobCardNo=s})("change",function(s){return e.setJobCardId(s)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",17),t._uU(22,"SKU No. "),t._UZ(23,"span",10),t.qZA(),t.TgZ(24,"input",18),t.NdJ("ngModelChange",function(s){return e.screenPrintingLog.SKUNo=s}),t.qZA()()()(),t.TgZ(25,"div",19)(26,"div",6)(27,"div",20)(28,"label",17),t._uU(29,"SKU Name "),t._UZ(30,"span",10),t.qZA(),t.TgZ(31,"input",18),t.NdJ("ngModelChange",function(s){return e.screenPrintingLog.SKUName=s}),t.qZA()(),t.TgZ(32,"div",16)(33,"label",17),t._uU(34," SKU Description "),t._UZ(35,"span",10),t.qZA(),t.TgZ(36,"input",18),t.NdJ("ngModelChange",function(s){return e.screenPrintingLog.SKUDescription=s}),t.qZA()()()()()(),t._UZ(37,"hr",21),t.TgZ(38,"app-setting-header",22),t.NdJ("dataChange",function(s){return e.eventHeader(s)}),t.qZA(),t.TgZ(39,"div",23)(40,"table",24)(41,"thead",25)(42,"tr",26)(43,"th"),t._uU(44,"SN"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Colour Code"),t.qZA(),t.TgZ(47,"th",27),t._uU(48,"Colour Name"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Mesh"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"M/c"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Ptg Pass"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"SQG/SH"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"\u25b3 E"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Log Details"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Status"),t.qZA()()(),t.TgZ(63,"tbody"),t.YNc(64,X,30,25,"tr",28),t.ALo(65,"slice"),t.ALo(66,"searchFi1ter"),t.qZA()()(),t._UZ(67,"hr",29),t.TgZ(68,"div",6)(69,"div",30),t.YNc(70,tt,2,0,"button",31),t.qZA()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.masterData.JCOptions)("clearable",!1)("ngModel",e.screenPrintingLog.jobCardNo)("disabled",t.DdM(18,et).includes(e.action)),t.xp6(7),t.Q6J("ngModel",e.screenPrintingLog.SKUNo),t.xp6(7),t.Q6J("ngModel",e.screenPrintingLog.SKUName),t.xp6(5),t.Q6J("ngModel",e.screenPrintingLog.SKUDescription),t.xp6(2),t.Q6J("data",t.l5B(19,nt,e.page,e.pageSize,e.collection,e.search)),t.xp6(26),t.Q6J("ngForOf",t.Dn7(65,11,t.xi3(66,15,e.screenPrintingLog.screenPrintingLogDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(6),t.Q6J("ngIf",!t.DdM(24,it).includes(e.action)))},dependencies:[g.sg,g.O5,y.P,u._L,l.Fj,l.wV,l.Wl,l.JJ,l.On,m.w9,g.OU,k.G],encapsulation:2}),a})();var st=d(84531),rt=d(67916);const at=function(){return{standalone:!0}};function ct(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",29,34)(7,"span",35),t._uU(8),t.qZA()(),t.TgZ(9,"td",29,36)(11,"span",35),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"div",37)(21,"button",38),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.openBatchModal(o))}),t._uU(22," New Batch "),t.qZA()()(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td")(26,"input",39),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.processStatus=e)}),t.qZA()()()}if(2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(i.SN),t.xp6(2),t.Oqu(i.colourCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourName)("positionTarget",n),t.xp6(1),t.hij(" ",i.colourName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourDescription)("positionTarget",e),t.xp6(1),t.hij(" ",i.colourDescription," "),t.xp6(2),t.Oqu(i.mesh),t.xp6(2),t.Oqu(i.UOM),t.xp6(2),t.Oqu(i.BOMQty),t.xp6(6),t.Oqu(i.inkBatchQty),t.xp6(2),t.Q6J("ngModel",i.processStatus)("ngModelOptions",t.DdM(18,at))}}const lt=function(r,a,i,n){return{page:r,pageSize:a,collection:i,search:n,excelDisplay:"none"}};let gt=(()=>{var r;class a{constructor(n,e,o,s,c,p,h){this.inkMixingLogService=n,this.spinner=e,this.activeModal=o,this.toastService=s,this.modalService=c,this.utilityService=p,this.jobCardEntryService=h,this.selectedDetails={},this.sourceOfManufacturing="",this.inkMixingLog={},this.shiftOptions=[],this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]},this.selectedJobCardDetails={}}ngOnInit(){this.getInitialData()}reset(){this.getInitialData()}submit(){this.create()}trackByFn(n,e){return e?._id}create(){this.spinner.show(),this.inkMixingLogService.createOrUpdate(this.inkMixingLog).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.inkMixingLog={},this.getInitialData()})}setJobCardId(n){console.log("item",n),this.selectedDetails={jobCard:n?._id,jobCardNo:n?.jobCardNo,SKU:n?.SKU,batchQty:n?.batchQty,processName:"Ink Mixing"},this.spinner.show(),this.inkMixingLogService.getAllMasterData(this.selectedDetails).subscribe(e=>{this.inkMixingLog=e.inkMixingLog,this.sourceOfManufacturing=e?.SKUProcessData?.sourceOfManufacturing,(0==e?.inkMixingLog?.inkMixingLogDetails?.length||!e?.inkMixingLog?.inkMixingLogDetails)&&this.toastService.warning(`Please define SKU Ink Master Of SKU No -  ${this.inkMixingLog.SKUNo}`),this.shiftOptions=e.shiftOptions,this.collection=this.inkMixingLog?.inkMixingLogDetails?.length,this.spinner.hide()})}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.spinner.hide()})}openJobCardDetailsModal(){const n=this.modalService.open(T.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action="create",n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.inkMixingLog.jobCard,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.inkMixingLog.jobCard=e?.selectedJobCardDetails?._id,this.inkMixingLog.jobCardNo=e?.selectedJobCardDetails?.jobCardNo,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(){this.modalService.open(P.M,{centered:!0,size:"md",backdrop:"static",keyboard:!1}).result.then(e=>{},e=>{})}openBatchModal(n){const e=this.modalService.open(st.p,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.inkLogNewBatch=n,e.componentInstance.shiftOptions=this.shiftOptions,e.componentInstance.sourceOfManufacturing=this.sourceOfManufacturing,e.result.then(o=>{o&&console.log("success",o)},o=>{})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(rt.I),t.Y36(_.V),t.Y36(u.Kz),t.Y36(_.kl),t.Y36(u.FF),t.Y36(_.tI),t.Y36(C.G3))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-pp-ink-mixing-form"]],inputs:{selectedDetails:"selectedDetails"},decls:84,vars:23,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row"],[1,"col-4","pe-3"],[1,"col-6","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo",3,"items","clearable","ngModel","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"col-6","ps-2","pe-5"],["type","text","readonly","",1,"form-control","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"col-3","ps-0","pe-5"],[1,"col-5","ps-3"],[1,"col-6","ps-0","pe-3"],[1,"col-6"],[1,"col-7","ps-0"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center"],["type","button",1,"btn","bg-primary","px-5",3,"click"],["colourName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["colourDescription",""],[1,"d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Ink Mixing Log"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",6)(10,"div",8)(11,"label",9),t._uU(12,"Job Card No. "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.jobCardNo=s})("change",function(s){return e.setJobCardId(s)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",9),t._uU(22,"SKU No. "),t._UZ(23,"span",10),t.qZA(),t.TgZ(24,"input",17),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.SKUNo=s}),t.qZA()()()(),t.TgZ(25,"div",18)(26,"label",9),t._uU(27,"SKU Name "),t._UZ(28,"span",10),t.qZA(),t.TgZ(29,"input",17),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.SKUName=s}),t.qZA()(),t.TgZ(30,"div",19)(31,"div",6)(32,"div",20)(33,"label",9),t._uU(34,"SKU Description "),t._UZ(35,"span",10),t.qZA(),t.TgZ(36,"input",17),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.SKUDescription=s}),t.qZA()(),t.TgZ(37,"div",21)(38,"div",6)(39,"div",19)(40,"label",9),t._uU(41,"UoM "),t._UZ(42,"span",10),t.qZA(),t.TgZ(43,"input",17),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.UOM=s}),t.qZA()(),t.TgZ(44,"div",22)(45,"label",9),t._uU(46,"SKU Batch Qty "),t._UZ(47,"span",10),t.qZA(),t.TgZ(48,"input",17),t.NdJ("ngModelChange",function(s){return e.inkMixingLog.SKUBatchQty=s}),t.qZA()()()()()()()(),t._UZ(49,"hr",23),t.TgZ(50,"app-setting-header",24),t.NdJ("dataChange",function(s){return e.eventHeader(s)}),t.qZA(),t.TgZ(51,"div",25)(52,"table",26)(53,"thead",27)(54,"tr",28)(55,"th"),t._uU(56,"SN"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Item Code"),t.qZA(),t.TgZ(59,"th",29),t._uU(60,"Item Name"),t.qZA(),t.TgZ(61,"th",29),t._uU(62,"Item Description"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Mesh"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"UoM"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"BoM Qty"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Add New Batch"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Ink Batch Qty."),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Status"),t.qZA()()(),t.TgZ(75,"tbody"),t.YNc(76,ct,27,19,"tr",30),t.ALo(77,"slice"),t.ALo(78,"searchFi1ter"),t.qZA()()(),t._UZ(79,"hr",31),t.TgZ(80,"div",6)(81,"div",32)(82,"button",33),t.NdJ("click",function(){return e.submit()}),t._uU(83,"Save"),t.qZA()()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.masterData.JCOptions)("clearable",!1)("ngModel",e.inkMixingLog.jobCardNo),t.xp6(7),t.Q6J("ngModel",e.inkMixingLog.SKUNo),t.xp6(5),t.Q6J("ngModel",e.inkMixingLog.SKUName),t.xp6(7),t.Q6J("ngModel",e.inkMixingLog.SKUDescription),t.xp6(7),t.Q6J("ngModel",e.inkMixingLog.UOM),t.xp6(5),t.Q6J("ngModel",e.inkMixingLog.SKUBatchQty),t.xp6(2),t.Q6J("data",t.l5B(18,lt,e.page,e.pageSize,e.collection,e.search)),t.xp6(26),t.Q6J("ngForOf",t.Dn7(77,11,t.xi3(78,15,e.inkMixingLog.inkMixingLogDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn))},dependencies:[g.sg,y.P,u._L,l.Fj,l.Wl,l.JJ,l.On,m.w9,g.OU,k.G],encapsulation:2}),a})();var dt=d(56208),f=d(43818);const S=function(){return["view","approve"]};function ut(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",37)(1,"div",16)(2,"div",17)(3,"div",18)(4,"input",38),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.prodDate=e)}),t.qZA()(),t.TgZ(5,"div",20)(6,"ng-select",39),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.prodShift=e)}),t.qZA()()()(),t.TgZ(7,"div",21)(8,"div",17)(9,"div",18)(10,"input",35),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.operatingStaff=e)}),t.qZA()(),t.TgZ(11,"div",20)(12,"input",40),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.prodQty=e)})("input",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.calCumulativeCount())}),t.qZA()()()()()}if(2&r){const i=a.$implicit,n=t.oxw();t.xp6(4),t.Q6J("ngModel",i.prodDate),t.xp6(2),t.Q6J("items",n.shiftOptions)("clearable",!1)("ngModel",i.prodShift)("disabled",t.DdM(9,S).includes(n.action)),t.xp6(4),t.Q6J("ngModel",i.operatingStaff)("disabled",t.DdM(10,S).includes(n.action)),t.xp6(2),t.Q6J("ngModel",i.prodQty)("disabled",t.DdM(11,S).includes(n.action))}}function pt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.dismissModel())}),t._uU(2,"Save & Close"),t.qZA()()}}const _t=function(){return["create","edit"]};let ht=(()=>{var r;class a{constructor(n,e){this.activeModal=n,this.utilityService=e,this.action="create",this.logEntry={},this.shiftOptions=[],this.sourceOfMfg=v.mt}ngOnInit(){console.log("logEntry",this.logEntry),this.logEntry.logEntryDetails=this.logEntry.logEntryDetails.length>0?JSON.parse(JSON.stringify(this.logEntry?.logEntryDetails))?.map(n=>(n.prodDate&&(n.prodDate=this.utilityService.getFormatDate(n.prodDate,"YYYY-MM-DD")),n)):[{prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null}]}deleteTableRow(){["create","edit"].includes(this.action)&&this.logEntry.logEntryDetails.length>1&&(this.logEntry.logEntryDetails.pop(),this.calCumulativeCount())}addTableRow(){["create","edit"].includes(this.action)&&this.logEntry.logEntryDetails.push({prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null})}dismissModel(){this.activeModal.close({logEntry:this.logEntry})}calCumulativeCount(){let n=this.logEntry.logEntryDetails.reduce((e,o)=>+e+ +o.prodQty,0);this.logEntry.cumulativeCount=+n.toFixed(2)}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(u.Kz),t.Y36(_.tI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-log-entry-modal"]],viewQuery:function(n,e){if(1&n&&t.Gf(f.j,5),2&n){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},inputs:{action:"action",logEntry:"logEntry",shiftOptions:"shiftOptions"},decls:70,vars:15,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap","col-4"],[1,"ms-1","me-2"],[1,"col-7","ps-1"],["bindLabel","sourceOfMfg","bindValue","sourceOfMfg",3,"items","clearable","ngModel","disabled","ngModelChange"],[1,"col-form-label","text-nowrap"],["type","number","readonly","",1,"form-control","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"line-border"],[1,"col-6","pe-1"],[1,"row"],[1,"col-7","pe-1"],[1,"form-label"],[1,"col-5","ps-0"],[1,"col-6","ps-1"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","mx-4","px-3",2,"min-height","10rem"],[1,"col-12"],["placeholder","Note down any critical incident/Deviation/Concerns during production","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"col-6","pe-0"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-6 d-flex justify-content-end",4,"ngIf"],[1,"row","mx-4","px-3","mb-2"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],["bindLabel","parameterName","bindValue","parameterLabel",3,"items","clearable","ngModel","disabled","ngModelChange"],["type","number",1,"form-control",3,"ngModel","disabled","ngModelChange","input"],[1,"col-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Log Entry"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t._uU(12," Prod. Source "),t.TgZ(13,"span",10),t._uU(14,"\u25b6"),t.qZA()(),t.TgZ(15,"div",11)(16,"ng-select",12),t.NdJ("ngModelChange",function(s){return e.logEntry.prodSource=s}),t.qZA()()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",13),t._uU(20," Cumulative Count "),t.TgZ(21,"span",10),t._uU(22,"\u25b6"),t.qZA()(),t.TgZ(23,"input",14),t.NdJ("ngModelChange",function(s){return e.logEntry.cumulativeCount=s}),t.qZA()()()(),t._UZ(24,"hr",15),t.TgZ(25,"div",6)(26,"div",16)(27,"div",17)(28,"div",18)(29,"label",19),t._uU(30,"Prod. Date"),t.qZA()(),t.TgZ(31,"div",20)(32,"label",19),t._uU(33,"Prod. Shift"),t.qZA()()()(),t.TgZ(34,"div",21)(35,"div",17)(36,"div",18)(37,"label",19),t._uU(38,"Operating Staff "),t.qZA()(),t.TgZ(39,"div",20)(40,"label",19),t._uU(41,"Prod. Qty"),t.qZA()()()()(),t.YNc(42,ut,13,12,"div",22),t.TgZ(43,"div",23)(44,"div",24)(45,"div",25)(46,"img",26),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()(),t._UZ(47,"hr",15),t.TgZ(48,"div",27)(49,"img",28),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()()()(),t.TgZ(50,"div",29)(51,"div",30)(52,"div",8)(53,"div",13),t._uU(54," Remarks "),t.TgZ(55,"span",10),t._uU(56,"\u25b6"),t.qZA()(),t.TgZ(57,"input",31),t.NdJ("ngModelChange",function(s){return e.logEntry.remarks=s}),t.qZA()()()(),t.TgZ(58,"div",17)(59,"div",32),t._UZ(60,"hr",15),t.qZA()(),t.TgZ(61,"div",33)(62,"div",34)(63,"div",8)(64,"div",13),t._uU(65," Prod. Authorised by "),t.TgZ(66,"span",10),t._uU(67,"\u25b6"),t.qZA()(),t.TgZ(68,"input",35),t.NdJ("ngModelChange",function(s){return e.logEntry.prodAuthorizedBy=s}),t.qZA()()(),t.YNc(69,pt,3,0,"div",36),t.qZA()()()),2&n&&(t.xp6(16),t.Q6J("items",e.sourceOfMfg)("clearable",!1)("ngModel",e.logEntry.prodSource)("disabled",t.DdM(11,S).includes(e.action)),t.xp6(7),t.Q6J("ngModel",e.logEntry.cumulativeCount),t.xp6(19),t.Q6J("ngForOf",e.logEntry.logEntryDetails),t.xp6(15),t.Q6J("ngModel",e.logEntry.remarks)("disabled",t.DdM(12,S).includes(e.action)),t.xp6(11),t.Q6J("ngModel",e.logEntry.prodAuthorizedBy)("disabled",t.DdM(13,S).includes(e.action)),t.xp6(1),t.Q6J("ngIf",t.DdM(14,_t).includes(e.action)))},dependencies:[g.sg,g.O5,l.Fj,l.wV,l.JJ,l.On,m.w9],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}"]}),a})();var U=d(37398);let A=(()=>{var r;class a{constructor(n){this.http=n,this.routes={createOrUpdatePath:"/production/stockCutting/createOrUpdate",getAllPath:"/production/stockCutting/getAll",getAllMasterDataPath:"/production/stockCutting/getAllMasterData",getInventoryItemsOnSelectPath:"/production/stockCutting/getInventoryItemsOnSelect",getByIdPath:e=>`/production/stockCutting/getById/${e}`}}createOrUpdate(n){return this.http.post(this.routes.createOrUpdatePath,n).pipe((0,U.U)(e=>e))}getAll(n){return this.http.get(this.routes.getAllPath,n).pipe((0,U.U)(e=>e))}getAllMasterData(n){return this.http.get(this.routes.getAllMasterDataPath,n).pipe((0,U.U)(e=>e))}getById(n){return this.http.get(this.routes.getByIdPath(n)).pipe((0,U.U)(e=>e))}getInventoryItemsOnSelect(n){return this.http.get(this.routes.getInventoryItemsOnSelectPath,n).pipe((0,U.U)(e=>e))}}return(r=a).\u0275fac=function(n){return new(n||r)(t.LFG(_.sM))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),a})();function Ct(r,a){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",17,53)(7,"span",54),t._uU(8),t.qZA()(),t.TgZ(9,"td",17,55)(11,"span",54),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"number"),t.qZA()()),2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(null==i?null:i.MRNNo),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(2),t.hij(" ",t.xi3(17,21,null==i?null:i.U1Qty,"1.2-2")," "),t.xp6(3),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.length," "),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(32,24,null==i?null:i.U2Qty,"1.2-2")," ")}}function mt(r,a){if(1&r&&(t.TgZ(0,"span",54),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit,n=t.MAs(10);t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",n),t.xp6(1),t.hij(" ",i.itemDescription," ")}}const Z=function(){return{standalone:!0}};function kt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",60),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.itemDescription=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.itemDescription)("ngModelOptions",t.DdM(2,Z))}}function ft(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.U1Qty," ")}}function St(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",61),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.U1Qty=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(2,Z))}}function Zt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.width," ")}}function bt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",61),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.width=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.width)("ngModelOptions",t.DdM(2,Z))}}function Tt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.length," ")}}function Mt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",61),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.length=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(2,Z))}}function Ut(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.MF," ")}}function vt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",61),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.MF=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.MF)("ngModelOptions",t.DdM(2,Z))}}function yt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.U2Qty," ")}}function Dt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",59)(1,"input",61),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.U2Qty=e)})("input",function(){t.CHM(i);const e=t.oxw(),o=e.$implicit,s=e.index,c=t.oxw();return t.KtG(c.setActualClosingStock(o,s))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U2Qty)("ngModelOptions",t.DdM(2,Z))}}function Pt(r,a){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",17,53)(7,"span",54),t._uU(8),t.qZA()(),t.TgZ(9,"td",17,55),t.YNc(11,mt,2,3,"span",56),t.YNc(12,kt,2,3,"div",57),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,ft,2,1,"span",58),t.YNc(17,St,2,3,"div",57),t.qZA(),t.TgZ(18,"td"),t.YNc(19,Zt,2,1,"span",58),t.YNc(20,bt,2,3,"div",57),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t.YNc(24,Tt,2,1,"span",58),t.YNc(25,Mt,2,3,"div",57),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t.YNc(29,Ut,2,1,"span",58),t.YNc(30,vt,2,3,"div",57),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td"),t.YNc(34,yt,2,1,"span",58),t.YNc(35,Dt,2,3,"div",57),t.qZA()()),2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10),o=t.oxw();t.xp6(2),t.hij(" ",i.MRNNo," "),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.Q6J("ngIf",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved)}}let At=(()=>{var r;class a{trackByFn(n,e){return e?._id}constructor(n,e,o,s,c,p){this.modalService=n,this.stockCuttingService=e,this.activeModal=o,this.toastService=s,this.spinner=c,this.router=p,this.selectedStockCuttingData={},this.shiftOptions=[],this.stockCuttingDetails=[],this.action="create",this.oldPPICClosingStockActual=[],this.oldSelectedStockCuttingData={},this.processNames="slit"}ngOnInit(){this.oldSelectedStockCuttingData=JSON.parse(JSON.stringify(this.selectedStockCuttingData));let n=this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.map(s=>s?.MF),e=Math.max(...n),o=this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.find(s=>s?.MF==e);this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockCalculated=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICClosingStockCalculated?.map(s=>(s.MRNNo=o?.MRNNo,s.MRN=o?.MRN,s.inventory=o?.inventory,s.item=o?.item??o?.reference,s.itemCode=o?.itemCode,s.itemName=o?.itemName,s.itemDescription=o?.itemDescription,s.U1=o?.U1,s.width=o?.width,s.widthUnit=o?.widthUnit,s.length=o?.length,s.lengthUnit=o?.lengthUnit,s.MF=+(+o?.MF).toFixed(2),s.U2=o?.U2,s.U2Qty=+(this.selectedStockCuttingData.stockCuttingDetails[0]?.U2TotalQty-this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICToProductionGT[0]?.U2Qty).toFixed(2),s.U1Qty=+(s?.U2Qty/s?.MF).toFixed(2),s)),this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual=null==this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual[0].MRNNo?this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICClosingStockActual?.map(s=>(s.MRNNo=o?.MRNNo,s.MRN=o?.MRN,s.inventory=o?.inventory,s.item=o?.item??o?.reference,s.itemCode=o?.itemCode,s.itemName=o?.itemName,s.itemDescription=`${o?.width} ${o?.widthUnit} X ${o?.length} ${o?.lengthUnit}`,s.U1=o?.U1,s.width=o?.width,s.widthUnit=o?.widthUnit,s.length=o?.length,s.lengthUnit=o?.lengthUnit,s.MF=0,s.U2=o?.U2,s.U2Qty=0,s.U1Qty=0,s)):this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICClosingStockActual,this.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICToProductionGT?.map(s=>(s.MRNNo=o?.MRNNo,s.MRN=o?.MRN,s.inventory=o?.inventory,s)),this.oldPPICClosingStockActual=JSON.parse(JSON.stringify(this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual))}deleteTableRow(){this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual.length>1&&!this.selectedStockCuttingData.stockCuttingDetails[0].isSaved&&(this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual.pop(),this.calActualClosingStock())}addTableRow(){this.selectedStockCuttingData.stockCuttingDetails[0].isSaved||(this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual=[...this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual,...JSON.parse(JSON.stringify(this.oldPPICClosingStockActual))])}setActualClosingStock(n,e){this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual[e].MF=+(+n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2),this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual[e].itemDescription=`${n?.width} ${n?.widthUnit} X ${n?.length} ${n?.lengthUnit}`,this.calActualClosingStock()}calActualClosingStock(){let n=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICClosingStockActual?.reduce((e,o)=>+e+ +o?.U2Qty,0).toFixed(2);this.selectedStockCuttingData.stockCuttingDetails[0].rejectionQty=+(this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockCalculated[0]?.U2Qty-+n).toFixed(2),this.selectedStockCuttingData.stockCuttingDetails[0].rejectionPercent=+(this.selectedStockCuttingData.stockCuttingDetails[0].rejectionQty/this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockCalculated[0]?.U2Qty*100).toFixed(2)}submit(){if(0==this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICClosingStockActual?.reduce((o,s)=>+o+ +s?.U2Qty,0).toFixed(2))return void this.toastService.warning("Fill PPIC Actual Closing Stock !!");if(+this.selectedStockCuttingData.stockCuttingDetails[0].rejectionPercent>100||+this.selectedStockCuttingData.stockCuttingDetails[0].rejectionPercent<0)return void this.toastService.error("Recovery must be between 0 and 100% !!");this.selectedStockCuttingData.stockCuttingDetails[0].isSaved=!0,this.selectedStockCuttingData.stockCuttingDetails[0].isSelectItem=!0;let e=this.stockCuttingDetails.filter(o=>o.reference!=this.selectedStockCuttingData.stockCuttingDetails[0].reference);this.selectedStockCuttingData.stockCuttingDetails=[...this.selectedStockCuttingData.stockCuttingDetails,...e],this.selectedStockCuttingData&&(this.spinner.show(),this.stockCuttingService.createOrUpdate(this.selectedStockCuttingData).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message),this.activeModal.dismiss(),this.modalService.dismissAll()}))}reset(){this.selectedStockCuttingData.stockCuttingDetails[0].rejectionQty=this.oldSelectedStockCuttingData.stockCuttingDetails[0].rejectionQty,this.selectedStockCuttingData.stockCuttingDetails[0].rejectionPercent=this.oldSelectedStockCuttingData.stockCuttingDetails[0].rejectionPercent,this.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual=JSON.parse(JSON.stringify(this.oldPPICClosingStockActual))}openLogEntryDetailsModal(){const n=this.modalService.open(ht,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.logEntry=this.selectedStockCuttingData.stockCuttingDetails[0]?.logEntry,n.componentInstance.shiftOptions=this.shiftOptions,n.result.then(e=>{},e=>{})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(u.FF),t.Y36(A),t.Y36(u.Kz),t.Y36(_.kl),t.Y36(_.V),t.Y36(b.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stock-cutting-ppic-process"]],viewQuery:function(n,e){if(1&n&&t.Gf(f.j,5),2&n){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},inputs:{selectedStockCuttingData:"selectedStockCuttingData",shiftOptions:"shiftOptions",stockCuttingDetails:"stockCuttingDetails",action:"action"},decls:125,vars:10,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"row","d-flex","mb-0"],[1,"mt-1","line-border-with-title"],[1,"px-4"],[1,"d-flex","align-items-center"],["aria-hidden","true",1,"fa","fa-star","fa-lg","ms-2","pointer","yellow-color",3,"ngbTooltip"],[1,"row","d-flex","justify-content-center","mt-5"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mt-4"],[1,"mt-5","line-border-with-title"],["aria-hidden","true",1,"fa","fa-star","fa-lg","ms-2","pointer","green-color",3,"ngbTooltip"],[1,"table-responsive",2,"min-height","17rem"],[1,"table","table-bordered","table-sticky","mb-0"],[1,"row","px-4"],[1,"col-12","set-image","px-0","seperate-row"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"line-border"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","line-border","mt-5"],[1,"row","mb-3"],[1,"col-3","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"col-4","ps-0","d-flex","align-items-center"],[1,"form-label","text-nowrap"],[1,"ms-1","me-2"],[1,"d-flex"],[1,"col-7","d-flex","pe-1"],[1,"input-group-text","combine-INR","text-secondary","bg-white-smoke"],[1,"text-black"],[1,"vr","ms-3"],["type","number","readonly","",1,"form-control","ps-2","pe-0","border-start-0","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"col-5","d-flex"],["type","text","readonly","",1,"form-control","ps-2","pe-0","bg-white-smoke","border-end-0",3,"value"],[1,"input-group-text","combine-INR","text-secondary","bg-white-smoke","border","border-1","border-start-0"],[1,"vr","me-3"],[1,"col-1","ps-0","d-flex","align-items-center"],[1,"col-4","mb-0","d-flex","align-self-end","justify-content-end"],["type","button",1,"btn","btn-primary","px-5","me-4",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],["class","pointer",3,"ngbTooltip","positionTarget",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["type","text",1,"form-control","text-center","form-control-size-sm",3,"ngModel","ngModelOptions","ngModelChange","input"],["type","number",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange","input"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Stock Cutting"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"span",8),t._uU(11," PPIC Closing Stock "),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"i",10),t.qZA()()(),t.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"table",14)(18,"thead",15)(19,"tr",16)(20,"th"),t._uU(21,"MRN No."),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Item Code"),t.qZA(),t.TgZ(24,"th",17),t._uU(25,"Item Name"),t.qZA(),t.TgZ(26,"th",17),t._uU(27,"Item Description"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"U1"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"U1 Qty"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Width"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Unit"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Length"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Unit"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"U2 qty/U1"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"U2"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"U2 Qty"),t.qZA()()(),t.TgZ(46,"tbody"),t.YNc(47,Ct,33,27,"tr",18),t.qZA()()()()(),t.TgZ(48,"div",19)(49,"div",20)(50,"span",8),t._uU(51," PPIC Closing Stock "),t.qZA(),t.TgZ(52,"div",9),t._UZ(53,"i",21),t.qZA()()(),t.TgZ(54,"div",11)(55,"div",12)(56,"div",22)(57,"table",23)(58,"thead",15)(59,"tr",16)(60,"th"),t._uU(61,"MRN No."),t.qZA(),t.TgZ(62,"th"),t._uU(63,"Item Code"),t.qZA(),t.TgZ(64,"th",17),t._uU(65,"Item Name"),t.qZA(),t.TgZ(66,"th",17),t._uU(67,"Item Description"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"U1"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"U1 Qty"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Width"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Unit"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"Length"),t.qZA(),t.TgZ(78,"th"),t._uU(79,"Unit"),t.qZA(),t.TgZ(80,"th"),t._uU(81,"U2 qty/U1"),t.qZA(),t.TgZ(82,"th"),t._uU(83,"U2"),t.qZA(),t.TgZ(84,"th"),t._uU(85,"U2 Qty"),t.qZA()()(),t.TgZ(86,"tbody"),t.YNc(87,Pt,36,25,"tr",18),t.qZA()(),t.TgZ(88,"div",24)(89,"div",25)(90,"div",26)(91,"img",27),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()(),t._UZ(92,"hr",28),t.TgZ(93,"div",29)(94,"img",30),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()()()()()()(),t._UZ(95,"hr",31),t.TgZ(96,"div",32)(97,"div",33),t._UZ(98,"button",34),t.TgZ(99,"button",35),t.NdJ("click",function(){return e.openLogEntryDetailsModal()}),t._uU(100," Log Entry "),t.qZA()(),t.TgZ(101,"div",36)(102,"label",37),t._uU(103," Rejection Qty "),t.TgZ(104,"span",38),t._uU(105,"\u25b6"),t.qZA()(),t.TgZ(106,"div",39)(107,"div",40)(108,"span",41)(109,"span",42),t._uU(110,"sqm"),t.qZA(),t._UZ(111,"div",43),t.qZA(),t.TgZ(112,"input",44),t.NdJ("ngModelChange",function(s){return e.selectedStockCuttingData.stockCuttingDetails[0].rejectionQty=s}),t.qZA()(),t.TgZ(113,"div",45),t._UZ(114,"input",46),t.TgZ(115,"span",47),t._UZ(116,"div",48),t.TgZ(117,"span",42),t._uU(118,"%"),t.qZA()()()()(),t._UZ(119,"div",49),t.TgZ(120,"div",50)(121,"button",51),t.NdJ("click",function(){return e.reset()}),t._uU(122," Reset "),t.qZA(),t.TgZ(123,"button",52),t.NdJ("click",function(){return e.submit()}),t._uU(124," Save "),t.qZA()()()()()),2&n&&(t.xp6(13),t.Q6J("ngbTooltip","Calculated"),t.xp6(34),t.Q6J("ngForOf",e.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockCalculated)("ngForTrackBy",e.trackByFn),t.xp6(6),t.Q6J("ngbTooltip","Actual"),t.xp6(34),t.Q6J("ngForOf",e.selectedStockCuttingData.stockCuttingDetails[0].PPICClosingStockActual)("ngForTrackBy",e.trackByFn),t.xp6(25),t.Q6J("ngModel",e.selectedStockCuttingData.stockCuttingDetails[0].rejectionQty),t.xp6(2),t.Q6J("value",e.selectedStockCuttingData.stockCuttingDetails[0].rejectionPercent),t.xp6(7),t.Q6J("disabled",1==e.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.Q6J("disabled",1==e.selectedStockCuttingData.stockCuttingDetails[0].isSaved))},dependencies:[g.sg,g.O5,u._L,l.Fj,l.wV,l.JJ,l.On,g.JJ],styles:[".seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:-.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:-.2rem}.yellow-color[_ngcontent-%COMP%]{color:#ffc800!important}.green-color[_ngcontent-%COMP%]{color:#0f0!important}"]}),a})();var J=d(53421);function xt(r,a){1&r&&t._UZ(0,"img",57)}function Nt(r,a){1&r&&t._UZ(0,"img",58)}function Jt(r,a){if(1&r&&(t.TgZ(0,"li",60)(1,"span",61),t._uU(2),t.qZA()()),2&r){const i=t.oxw(),n=i.$implicit,e=i.pages;t.xp6(2),t.AsE(" Page ",n," of ",e[e.length-1]," ")}}function qt(r,a){1&r&&t.YNc(0,Jt,3,2,"li",59),2&r&&t.Q6J("ngIf",a.pages.length>0)}const D=function(){return{standalone:!0}};function wt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",62,63)(7,"span",64),t._uU(8),t.qZA()(),t.TgZ(9,"td",62,65)(11,"span",64),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td")(34,"input",66),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.select=e)})("change",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.setSelectData(o))}),t.qZA()()()}if(2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10),o=t.oxw();t.xp6(2),t.Oqu(null==i?null:i.MRNNo),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.Oqu(null==i?null:i.U1),t.xp6(2),t.Oqu(t.xi3(17,24,null==i?null:i.U1Qty,"1.2-2")),t.xp6(3),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.length," "),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(32,27,null==i?null:i.U2Qty,"1.2-2")," "),t.xp6(3),t.Q6J("ngModel",i.select)("ngModelOptions",t.DdM(30,D))("disabled",1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved)}}function It(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.U1Qty,"1.2-2")," ")}}function Ot(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",69)(1,"input",70),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.U1Qty=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.changeU2Qty(e))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(2,D))}}function Qt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.length,"1.2-2")," ")}}function Ft(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",69)(1,"input",70),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.length=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.changeU2Qty(e))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(2,D))}}const q=function(){return["RL"]},w=function(){return["SHT"]};function Lt(r,a){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"-"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",62,63)(7,"span",64),t._uU(8),t.qZA()(),t.TgZ(9,"td",62,65)(11,"span",64),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,It,3,4,"span",67),t.YNc(17,Ot,2,3,"div",68),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t.YNc(23,Qt,3,4,"span",67),t.YNc(24,Ft,2,3,"div",68),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"number"),t.qZA()()),2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10),o=t.oxw();t.xp6(4),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(2),t.Q6J("ngIf",t.DdM(25,q).includes(null==i?null:i.U1)||1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",t.DdM(26,w).includes(null==i?null:i.U1)&&!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.Q6J("ngIf",t.DdM(27,w).includes(null==i?null:i.U1)||1==o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(1),t.Q6J("ngIf",t.DdM(28,q).includes(null==i?null:i.U1)&&!o.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(33,22,null==i?null:i.U2Qty,"1.2-2")," ")}}let jt=(()=>{var r;class a{trackByFn(n,e){return e?._id}constructor(n,e,o,s,c){this.spinner=n,this.toastService=e,this.modalService=o,this.activeModal=s,this.stockCuttingService=c,this.action="create",this.selectedStockCuttingData={},this.stockCuttingDetails=[],this.shiftOptions=[],this.oldSelectedStockCuttingData={},this.selectedDetails={},this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.submitted=!1,this.isPreview=!1,this.isESCPreview=!1,this.ESCPreviewArr=[],this.rolePermissionActions=v.a1}ngOnInit(){this.selectedDetails={jobCard:this.selectedStockCuttingData?.jobCard,SKU:this.selectedStockCuttingData?.SKU,reference:this.selectedStockCuttingData?.stockCuttingDetails[0]?.reference},this.selectedStockCuttingData&&(this.getInitialData(),this.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICToProductionGT?.map(n=>(n.MRNNo=this.selectedStockCuttingData.stockCuttingDetails[0]?.MRNNo??"-",n.MRN=this.selectedStockCuttingData.stockCuttingDetails[0]?.MRN,n.item=this.selectedStockCuttingData.stockCuttingDetails[0]?.item??this.selectedStockCuttingData.stockCuttingDetails[0]?.reference,n.itemCode=this.selectedStockCuttingData.stockCuttingDetails[0]?.itemCode,n.itemName=this.selectedStockCuttingData.stockCuttingDetails[0]?.itemName,n.itemDescription=this.selectedStockCuttingData.stockCuttingDetails[0]?.itemDescription,n.U1=this.selectedStockCuttingData.stockCuttingDetails[0]?.U1,n.U1Qty=+this.selectedStockCuttingData.stockCuttingDetails[0]?.U1Qty.toFixed(2),n.width=this.selectedStockCuttingData.stockCuttingDetails[0]?.width,n.widthUnit=this.selectedStockCuttingData.stockCuttingDetails[0]?.widthUnit,n.length=this.selectedStockCuttingData.stockCuttingDetails[0]?.length,n.lengthUnit=this.selectedStockCuttingData.stockCuttingDetails[0]?.lengthUnit,n.MF=this.selectedStockCuttingData.stockCuttingDetails[0]?.MF,n.U2=this.selectedStockCuttingData.stockCuttingDetails[0]?.U2,n.U2Qty=this.selectedStockCuttingData.stockCuttingDetails[0]?.U2Qty,n)),this.oldSelectedStockCuttingData=JSON.parse(JSON.stringify(this.selectedStockCuttingData)))}getInitialData(){this.spinner.show(),this.stockCuttingService.getInventoryItemsOnSelect(this.selectedDetails).subscribe(e=>{this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock=e?.stockCuttingInvItems,this.spinner.hide()})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}setPagination(){this.page=1}setSelectData(n){let e=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICOpeningStock?.map(o=>1==o?.select?o?.U2Qty:0).reduce((o,s)=>+o+ +s,0).toFixed(2);this.selectedStockCuttingData.stockCuttingDetails[0].U2TotalQty=+e}reset(){this.selectedStockCuttingData=JSON.parse(JSON.stringify(this.oldSelectedStockCuttingData))}preview(){this.isESCPreview=!0,this.search="",this.ESCPreviewArr=this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock,this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock=this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.filter(n=>n.select),this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.length>0?this.isPreview=!0:(this.toastService.warning("At least One Row is Required"),this.isPreview=!1),this.collection=this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.length}ESCPreview(){this.search="",this.isPreview=!1,this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock=this.ESCPreviewArr,this.collection=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICOpeningStock?.length}changeU2Qty(n){let e=this.selectedStockCuttingData.stockCuttingDetails[0]?.PPICToProductionGT?.map(c=>c.reference).indexOf(n?.reference);this.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT[e].MF=+(n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2)}openStockCuttingPPICClosingDetailsModal(){if(this.selectedStockCuttingData.stockCuttingDetails[0].U2TotalQty<this.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT[0].U2Qty)return void this.toastService.warning("U2 Total must be greater than PPIC to Production GT U2 Qty ");this.preview();const n=this.modalService.open(At,{centered:!0,windowClass:"modelPage",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.stockCuttingDetails=this.stockCuttingDetails,n.componentInstance.selectedStockCuttingData=this.selectedStockCuttingData,n.componentInstance.shiftOptions=this.shiftOptions}onSort({column:n,direction:e}){this.headers.forEach(o=>{o.sortable!==n&&(o.direction="")}),this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock=""===e||""===n?this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock:[...this.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock].sort((o,s)=>{let c="string"==typeof o[n]?o[n].toLowerCase():o[n],p="string"==typeof s[n]?s[n].toLowerCase():s[n];const h=c<p?-1:c>p?1:0;return"asc"===e?h:-h})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(_.V),t.Y36(_.kl),t.Y36(u.FF),t.Y36(u.Kz),t.Y36(A))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stock-cutting-process"]],viewQuery:function(n,e){if(1&n&&t.Gf(f.j,5),2&n){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},inputs:{action:"action",selectedStockCuttingData:"selectedStockCuttingData",stockCuttingDetails:"stockCuttingDetails",shiftOptions:"shiftOptions"},decls:120,vars:29,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"row","mb-0"],[1,"mt-1","line-border-with-title"],[1,"px-4"],[1,"form-body","pt-0"],[1,"row","justify-content-between","my-3","px-3"],[1,"col-4","d-flex","align-items-center","px-3"],[1,"d-flex"],["id","basic-addon1",1,"input-group-text","bg-primary"],["aria-hidden","true",1,"fa","fa-search","text-white"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","input"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],[1,"col-2"],[1,"col-2","ps-0","pe-3"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,""],[1,"ms-1","me-2","col-form-label","text-nowrap"],["type","text","readonly","",1,"form-control","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"table-responsive","text-wrap",2,"min-height","17rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","MRNNo",3,"sort"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","U1",3,"sort"],["sortable","U1Qty",3,"sort"],["sortable","width",3,"sort"],["sortable","widthUnit",3,"sort"],["sortable","length",3,"sort"],["sortable","lengthUnit",3,"sort"],["sortable","MF",3,"sort"],["sortable","U2",3,"sort"],["sortable","U2Qty",3,"sort"],["sortable","select",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-3","line-border-with-title"],[1,"table-responsive","text-wrap","mt-5",2,"min-height","6rem"],[1,"row","line-border"],[1,"row","mb-4"],["appAccessControl","",1,"col","text-center",3,"accessType"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-3","me-1",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-3","me-3",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange","change"],[4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Stock Cutting"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"span",8),t._uU(11," PPIC Opening Stock "),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),t._UZ(17,"i",14),t.qZA(),t.TgZ(18,"div")(19,"input",15),t.NdJ("ngModelChange",function(s){return e.search=s})("input",function(){return e.setPagination()}),t.qZA()()()(),t.TgZ(20,"div",16)(21,"ngb-pagination",17),t.NdJ("pageChange",function(s){return e.page=s}),t.YNc(22,xt,1,0,"ng-template",18),t.YNc(23,Nt,1,0,"ng-template",19),t.YNc(24,qt,1,1,"ng-template",20),t.qZA()(),t._UZ(25,"div",21),t.TgZ(26,"div",22)(27,"div",23)(28,"div",24)(29,"div",25),t._uU(30," U2 Total "),t.TgZ(31,"span",26),t._uU(32,"\u25b6"),t.qZA()()(),t.TgZ(33,"input",27),t.NdJ("ngModelChange",function(s){return e.selectedStockCuttingData.stockCuttingDetails[0].U2TotalQty=s}),t.qZA()()()()(),t.TgZ(34,"div",28)(35,"table",29)(36,"thead",30)(37,"tr",31)(38,"th",32),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(39,"MRN No."),t.qZA(),t.TgZ(40,"th",33),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(41,"Item Code"),t.qZA(),t.TgZ(42,"th",34),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(43,"Item Name"),t.qZA(),t.TgZ(44,"th",35),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(45,"Item Description"),t.qZA(),t.TgZ(46,"th",36),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(47,"U1"),t.qZA(),t.TgZ(48,"th",37),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(49,"U1 Qty"),t.qZA(),t.TgZ(50,"th",38),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(51,"Width"),t.qZA(),t.TgZ(52,"th",39),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(53,"Unit"),t.qZA(),t.TgZ(54,"th",40),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(55,"Length"),t.qZA(),t.TgZ(56,"th",41),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(57,"Unit"),t.qZA(),t.TgZ(58,"th",42),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(59,"U2 qty/U1"),t.qZA(),t.TgZ(60,"th",43),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(61,"U2"),t.qZA(),t.TgZ(62,"th",44),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(63,"U2 Qty"),t.qZA(),t.TgZ(64,"th",45),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(65,"Select"),t.qZA()()(),t.TgZ(66,"tbody"),t.YNc(67,wt,35,31,"tr",46),t.ALo(68,"slice"),t.ALo(69,"searchFi1ter"),t.qZA()()(),t.TgZ(70,"div",6)(71,"div",47)(72,"span",8),t._uU(73," PPIC To Production GT "),t.qZA()()(),t.TgZ(74,"div",48)(75,"table",29)(76,"thead",30)(77,"tr",31)(78,"th",32),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(79,"MRN No."),t.qZA(),t.TgZ(80,"th",33),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(81,"Item Code"),t.qZA(),t.TgZ(82,"th",34),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(83,"Item Name"),t.qZA(),t.TgZ(84,"th",35),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(85,"Item Description"),t.qZA(),t.TgZ(86,"th",36),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(87,"U1"),t.qZA(),t.TgZ(88,"th",37),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(89,"U1 Qty"),t.qZA(),t.TgZ(90,"th",38),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(91,"Width"),t.qZA(),t.TgZ(92,"th",39),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(93,"Unit"),t.qZA(),t.TgZ(94,"th",40),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(95,"Length"),t.qZA(),t.TgZ(96,"th",41),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(97,"Unit"),t.qZA(),t.TgZ(98,"th",42),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(99,"U2 qty/U1"),t.qZA(),t.TgZ(100,"th",43),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(101,"U2"),t.qZA(),t.TgZ(102,"th",44),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(103,"U2 Qty"),t.qZA()()(),t.TgZ(104,"tbody"),t.YNc(105,Lt,34,29,"tr",46),t.ALo(106,"slice"),t.ALo(107,"searchFi1ter"),t.qZA()()(),t._UZ(108,"hr",49),t.TgZ(109,"div",50)(110,"div",51)(111,"div",52)(112,"button",53),t.NdJ("click",function(){return e.reset()}),t._uU(113,"Reset"),t.qZA(),t.TgZ(114,"button",54),t.NdJ("click",function(){return e.ESCPreview()}),t._uU(115," Esc "),t.qZA(),t.TgZ(116,"button",55),t.NdJ("click",function(){return e.preview()}),t._uU(117," Preview "),t.qZA(),t.TgZ(118,"button",56),t.NdJ("click",function(){return e.openStockCuttingPPICClosingDetailsModal()}),t._uU(119," Process "),t.qZA()()()()()()),2&n&&(t.xp6(19),t.Q6J("ngModel",e.search)("ngModelOptions",t.DdM(28,D)),t.xp6(2),t.Q6J("collectionSize",null==e.selectedStockCuttingData.stockCuttingDetails[0]||null==e.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock?null:e.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock.length)("page",e.page)("pageSize",e.pageSize)("boundaryLinks",!1),t.xp6(12),t.Q6J("ngModel",e.selectedStockCuttingData.stockCuttingDetails[0].U2TotalQty),t.xp6(34),t.Q6J("ngForOf",t.Dn7(68,14,t.xi3(69,18,e.selectedStockCuttingData.stockCuttingDetails[0].PPICOpeningStock,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(38),t.Q6J("ngForOf",t.Dn7(106,21,t.xi3(107,25,e.selectedStockCuttingData.stockCuttingDetails[0].PPICToProductionGT,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(5),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(4),t.Q6J("disabled",!e.isESCPreview||1==e.selectedStockCuttingData.stockCuttingDetails[0].isSaved),t.xp6(2),t.Q6J("disabled",1==e.selectedStockCuttingData.stockCuttingDetails[0].isSaved))},dependencies:[g.sg,g.O5,u.N9,u.GZ,u.ju,u.Qy,u._L,l.Fj,l.wV,l.Wl,l.JJ,l.On,f.j,J.J,g.OU,g.JJ,k.G],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}.input-group-text[_ngcontent-%COMP%]{border-radius:0!important;height:2.8rem!important;width:3rem}.fa[_ngcontent-%COMP%]{font-size:1.6rem!important}.demo[_ngcontent-%COMP%]{color:#00af7d!important}.offer[_ngcontent-%COMP%]{color:#ff0096!important}.greenStatus[_ngcontent-%COMP%]{color:#00af7d}.rating-color[_ngcontent-%COMP%]{color:#00afc8}.sub-text[_ngcontent-%COMP%]{font-size:1.2rem!important}"]}),a})();var Et=d(84231);function Kt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.U1Qty,"1.2-2")," ")}}const I=function(){return{standalone:!0}};function Gt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",61)(1,"input",62),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.U1Qty=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.changeU2Qty(e))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(2,I))}}function Yt(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.length,"1.2-2")," ")}}function Rt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",61)(1,"input",62),t.NdJ("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.length=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.changeU2Qty(e))}),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(2,I))}}const O=function(){return["RL"]},Q=function(){return["SHT"]},$t=function(){return["Sheet To Sheet","Roll To Sheet",null,""]},zt=function(){return["Roll To Roll",null,""]};function Bt(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",54,55)(5,"span",56),t._uU(6),t.qZA()(),t.TgZ(7,"td",54,57)(9,"span",56),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Kt,3,4,"span",58),t.YNc(15,Gt,2,3,"div",59),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t.YNc(22,Yt,3,4,"span",58),t.YNc(23,Rt,2,3,"div",59),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td")(33,"input",60),t.NdJ("change",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.setSelectData(o))}),t.qZA()()()}if(2&r){const i=a.$implicit,n=a.index,e=t.MAs(4),o=t.MAs(8),s=t.oxw();t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",o),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.Oqu(null==i?null:i.U1),t.xp6(2),t.Q6J("ngIf",t.DdM(28,O).includes(null==i?null:i.U1)||1==i.isSaved),t.xp6(1),t.Q6J("ngIf",t.DdM(29,Q).includes(null==i?null:i.U1)&&!i.isSaved),t.xp6(2),t.hij(" ",t.xi3(18,25,null==i?null:i.width,"1.2-2")," "),t.xp6(3),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.Q6J("ngIf",t.DdM(30,Q).includes(null==i?null:i.U1)||1==i.isSaved),t.xp6(1),t.Q6J("ngIf",t.DdM(31,O).includes(null==i?null:i.U1)&&!i.isSaved),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",null==i?null:i.U2Qty," "),t.xp6(2),t.MGl("name","formValue",s.stockCutting.stockCuttingDetails[n],""),t.Q6J("checked",i.select)("disabled",t.DdM(32,$t).includes(s.stockCutting.processName)&&"RL"==i.U1||t.DdM(33,zt).includes(s.stockCutting.processName)&&"SHT"==i.U1)}}const Ht=function(){return["view","edit"]};let Wt=(()=>{var r;class a{trackByFn(n,e){return e?._id}constructor(n,e,o,s,c,p){this.spinner=n,this.stockCuttingService=e,this.toastService=o,this.activeModal=s,this.modalService=c,this.jobCardEntryService=p,this.selectedDetails={},this.jobCardDetails={},this.stockCutting={},this.selectedJobCardDetails={},this.sourceOfManufacturing="",this.processNames=[],this.shiftOptions=[],this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.submitted=!1,this.action="create",this.selectedStockCuttingData={},this.processName="",this.rolePermissionActions=v.a1,this.sheetToSheetData=[],this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]}}ngOnInit(){this.getInitialData()}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}setProcessName(n){this.stockCutting.processName=n?.parameterName}setSelectData(n){this.selectedStockCuttingData={stockCuttingDetails:[n],SKUName:this.stockCutting.SKUName,SKUDescription:this.stockCutting.SKUDescription,processName:this.stockCutting.processName,jobCard:this.stockCutting.jobCard,jobCardNo:this.stockCutting.jobCardNo,SKU:this.stockCutting.SKU,SKUNo:this.stockCutting.SKUNo,UOM:this.stockCutting.UOM,SKUBatchQty:this.stockCutting.SKUBatchQty},this.stockCutting.stockCuttingDetails=this.stockCutting?.stockCuttingDetails.map(e=>(e.select=!1,e.reference==this.selectedStockCuttingData.stockCuttingDetails[0].reference&&(e.select=!0),e))}changeU2Qty(n){let e=this.stockCutting.stockCuttingDetails.map(c=>c.reference).indexOf(n?.reference);this.stockCutting.stockCuttingDetails[e].MF=+(n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.stockCutting.stockCuttingDetails[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2)}setJobCardId(n){console.log("item",n),this.selectedDetails={jobCard:n?._id,jobCardNo:n?.jobCardNo,SKU:n?.SKU,batchQty:n?.batchQty,processName:"Stock Preparation"},this.spinner.show(),this.stockCuttingService.getAllMasterData(this.selectedDetails).subscribe(e=>{this.stockCutting=e.stockCutting,this.sourceOfManufacturing=e?.SKUProcessData?.sourceOfManufacturing,(0==e?.stockCutting?.stockCuttingDetails?.length||!e?.stockCutting?.stockCuttingDetails)&&(this.toastService.warning("Please define the Bill of Material of the SKU"),this.stockCutting=this.jobCardDetails),this.stockCutting.stockCuttingDetails=this.stockCutting?.stockCuttingDetails?.map(o=>(o.select=!1,o)),this.stockCutting.processName=null,this.processNames=e.processNames,this.shiftOptions=e.shiftOptions,this.collection=this.stockCutting?.stockCuttingDetails?.length,this.spinner.hide()})}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.spinner.hide()})}openJobCardDetailsModal(){const n=this.modalService.open(T.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.stockCutting.jobCard,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.stockCutting.jobCard=e?.selectedJobCardDetails?._id,this.stockCutting.jobCardNo=e?.selectedJobCardDetails?.jobCardNo,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}reset(){this.processName="",this.stockCutting={},this.selectedStockCuttingData={},this.getInitialData()}openStockCuttingPPICOpeningDetailsModal(){if(1==this.stockCutting?.stockCuttingDetails?.every(e=>!e?.select))return void this.toastService.warning("MRP as per BOM At least One Row is Required");const n=this.modalService.open(jt,{centered:!0,windowClass:"modelPage",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.stockCuttingDetails=this.stockCutting?.stockCuttingDetails,n.componentInstance.selectedStockCuttingData=this.selectedStockCuttingData,n.componentInstance.shiftOptions=this.shiftOptions}onSort({column:n,direction:e}){this.headers.forEach(o=>{o.sortable!==n&&(o.direction="")}),this.stockCutting.stockCuttingDetails=""===e||""===n?this.stockCutting.stockCuttingDetails:[...this.stockCutting.stockCuttingDetails].sort((o,s)=>{let c="string"==typeof o[n]?o[n].toLowerCase():o[n],p="string"==typeof s[n]?s[n].toLowerCase():s[n];const h=c<p?-1:c>p?1:0;return"asc"===e?h:-h})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(_.V),t.Y36(A),t.Y36(_.kl),t.Y36(u.Kz),t.Y36(u.FF),t.Y36(C.G3))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stock-cutting-entry"]],viewQuery:function(n,e){if(1&n&&t.Gf(f.j,5),2&n){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},inputs:{selectedDetails:"selectedDetails",jobCardDetails:"jobCardDetails"},decls:105,vars:25,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row","mb-0"],[1,"col-5","pe-5"],[1,"row"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo",3,"items","clearable","ngModel","disabled","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"col-4","ps-2"],[1,"form-label","mb-0"],["bindValue","parameterName","bindLabel","parameterLabel",3,"items","clearable","ngModel","ngModelChange","change"],[1,"col-3","px-0"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","ps-2"],[1,"col-4","pe-0"],[1,"col-4"],[1,"col-5","pe-0"],["type","text","readonly","",1,"form-control",3,"value"],[1,"col-7"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-3","line-border-with-title"],[1,"px-4"],[1,"table-responsive","text-wrap","mt-5",2,"min-height","22rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","U1",3,"sort"],["sortable","U1Qty",3,"sort"],["sortable","width",3,"sort"],["sortable","widthUnit",3,"sort"],["sortable","length",3,"sort"],["sortable","lengthUnit",3,"sort"],["sortable","MF",3,"sort"],["sortable","U2",3,"sort"],["sortable","U2Qty",3,"sort"],["sortable","select",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border"],[1,"row","mb-3"],["appAccessControl","",1,"col","text-center",3,"accessType"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],[4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],["type","radio",1,"form-check-input","pointer",3,"name","checked","disabled","change"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","text-center","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Stock Cutting"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",7)(11,"label",9),t._uU(12,"Job Card No. "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("ngModelChange",function(s){return e.stockCutting.jobCardNo=s})("change",function(s){return e.setJobCardId(s)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",17),t._uU(22," Process Name"),t.TgZ(23,"span",10),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"ng-select",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.processName=s})("change",function(s){return e.setProcessName(s)}),t.qZA()(),t.TgZ(26,"div",19)(27,"label",17),t._uU(28," SKU No."),t.TgZ(29,"span",10),t._uU(30,"*"),t.qZA()(),t.TgZ(31,"input",20),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUNo=s}),t.qZA()()()(),t.TgZ(32,"div",21)(33,"div",8)(34,"div",22)(35,"label",17),t._uU(36,"SKU Name "),t.TgZ(37,"span",10),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"input",20),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUName=s}),t.qZA()(),t.TgZ(40,"div",22)(41,"label",17),t._uU(42," SKU Description "),t.TgZ(43,"span",10),t._uU(44,"*"),t.qZA()(),t.TgZ(45,"input",20),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUDescription=s}),t.qZA()(),t.TgZ(46,"div",23)(47,"div",8)(48,"div",24)(49,"label",17),t._uU(50," UoM"),t._UZ(51,"span",10),t.qZA(),t._UZ(52,"input",25),t.ALo(53,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(54,"div",26)(55,"label",17),t._uU(56," Batch Qty."),t._UZ(57,"span",10),t.qZA(),t.TgZ(58,"input",27),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUBatchQty=s}),t.qZA()()()()()()()(),t.TgZ(59,"div",6)(60,"div",28)(61,"span",29),t._uU(62," MRP as per BOM "),t.qZA()()(),t.TgZ(63,"div",30)(64,"table",31)(65,"thead",32)(66,"tr",33)(67,"th",34),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(68,"Item Code"),t.qZA(),t.TgZ(69,"th",35),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(70,"Item Name"),t.qZA(),t.TgZ(71,"th",36),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(72,"Item Description"),t.qZA(),t.TgZ(73,"th",37),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(74,"U1"),t.qZA(),t.TgZ(75,"th",38),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(76,"U1 Qty."),t.qZA(),t.TgZ(77,"th",39),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(78,"Width"),t.qZA(),t.TgZ(79,"th",40),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(80,"Unit"),t.qZA(),t.TgZ(81,"th",41),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(82,"Length"),t.qZA(),t.TgZ(83,"th",42),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(84,"Unit"),t.qZA(),t.TgZ(85,"th",43),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(86,"U2 qty/U1"),t.qZA(),t.TgZ(87,"th",44),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(88,"U2"),t.qZA(),t.TgZ(89,"th",45),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(90,"U2 Qty"),t.qZA(),t.TgZ(91,"th",46),t.NdJ("sort",function(s){return e.onSort(s)}),t._uU(92,"Select"),t.qZA()()(),t.TgZ(93,"tbody"),t.YNc(94,Bt,34,34,"tr",47),t.ALo(95,"slice"),t.ALo(96,"searchFi1ter"),t.qZA()()(),t._UZ(97,"hr",48),t.TgZ(98,"div",49)(99,"div",50)(100,"div",51)(101,"button",52),t.NdJ("click",function(){return e.reset()}),t._uU(102,"Reset"),t.qZA(),t.TgZ(103,"button",53),t.NdJ("click",function(){return e.openStockCuttingPPICOpeningDetailsModal()}),t._uU(104," Next "),t.qZA()()()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.masterData.JCOptions)("clearable",!1)("ngModel",e.stockCutting.jobCardNo)("disabled",t.DdM(24,Ht).includes(e.action)),t.xp6(8),t.Q6J("items",e.processNames)("clearable",!1)("ngModel",e.stockCutting.processName),t.xp6(6),t.Q6J("ngModel",e.stockCutting.SKUNo),t.xp6(8),t.Q6J("ngModel",e.stockCutting.SKUName),t.xp6(6),t.Q6J("ngModel",e.stockCutting.SKUDescription),t.xp6(7),t.s9C("value",t.lcZ(53,15,e.stockCutting.UOM)),t.xp6(6),t.Q6J("ngModel",e.stockCutting.SKUBatchQty),t.xp6(36),t.Q6J("ngForOf",t.Dn7(95,17,t.xi3(96,21,e.stockCutting.stockCuttingDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(5),t.Q6J("accessType",e.rolePermissionActions.createAction))},dependencies:[g.sg,g.O5,u._L,l.Fj,l.wV,l.JJ,l.On,m.w9,f.j,J.J,g.OU,g.JJ,k.G,Et.Q],encapsulation:2}),a})();var Vt=d(74834),Xt=d(65468),te=d(59103);function ee(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.setUnit(e))}),t.qZA()}}function ne(r,a){1&r&&t._UZ(0,"div",52)}function ie(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.GTQty)}}const F=function(){return{standalone:!0}};function oe(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"input",53),t.NdJ("input",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw();return t.KtG(o.setGTQty(e))})("ngModelChange",function(e){t.CHM(i);const o=t.oxw().$implicit;return t.KtG(o.GTQty=e)}),t.qZA()}if(2&r){const i=t.oxw().$implicit;t.Q6J("ngModel",i.GTQty)("ngModelOptions",t.DdM(2,F))}}const se=function(){return["view","approve"]};function re(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",36),t.NdJ("ngModelChange",function(e){const s=t.CHM(i).$implicit;return t.KtG(s.select=e)})("change",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.checkInventoryRecords(o))}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",30,37)(7,"span",38),t._uU(8),t.qZA()(),t.TgZ(9,"td",30,39)(11,"span",38),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"span")(15,"div",40),t._uU(16),t.ALo(17,"UOMUnitsMaster"),t.TgZ(18,"span",41),t.YNc(19,ee,1,0,"div",42),t.YNc(20,ne,1,0,"div",43),t.qZA()()()(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"number"),t.qZA(),t.TgZ(24,"td")(25,"div",44),t._UZ(26,"button",45),t.TgZ(27,"button",46),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.openLogEntryModal(o))}),t._uU(28," Log Entry "),t.qZA()()(),t.TgZ(29,"td")(30,"div",47),t.YNc(31,ie,2,1,"span",48),t.YNc(32,oe,1,3,"input",49),t.qZA()(),t.TgZ(33,"td")(34,"i",50),t.NdJ("click",function(){const o=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.openGTQtyModal(o))}),t.qZA()()()}if(2&r){const i=a.$implicit,n=t.MAs(6),e=t.MAs(10),o=t.oxw();t.xp6(2),t.Q6J("ngModel",i.select)("ngModelOptions",t.DdM(26,F))("disabled",t.DdM(27,se).includes(o.action)||i.isSelectedCond),t.xp6(2),t.Oqu(i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",i.itemDescription," "),t.xp6(4),t.hij(" ",t.lcZ(17,21,null==i?null:i.UOM)," "),t.xp6(3),t.Q6J("ngIf",i.secondaryUnit),t.xp6(1),t.Q6J("ngIf",!i.secondaryUnit),t.xp6(2),t.Oqu(i.MRPQty?t.xi3(23,23,i.MRPQty,"1.2-2"):null),t.xp6(9),t.Q6J("ngIf",i.isSaved),t.xp6(1),t.Q6J("ngIf",!i.isSaved),t.xp6(2),t.Q6J("ngClass",i.isSaved?"fa fa-pencil-square-o fa-lg fs-3 text-primary pointer":"editOpacity fa fa-pencil-square-o fa-lg fs-3    ")}}const ae=function(r,a,i,n){return{page:r,pageSize:a,collection:i,search:n,excelDisplay:"none"}},ce=[{path:"",redirectTo:"tab_list",pathMatch:"full"},{path:"tab_list",component:K},{path:"screen_making_form",component:H},{path:"screen_printing_form",component:ot},{path:"pp_ink_mixing_form",component:gt},{path:"pp_stock_cutting_form",component:Wt},{path:"stock_preparation_form",component:(()=>{var r;class a{trackByFn(n,e){return e?._id}constructor(n,e,o,s,c,p,h){this.spinner=n,this.stockPreparationService=e,this.toastService=o,this.activeModal=s,this.modalService=c,this.jobCardEntryService=p,this.utilityService=h,this.selectedDetails={},this.jobCardDetails={},this.stockCutting={},this.selectedJobCardDetails={},this.sourceOfManufacturing="",this.shiftOptions=[],this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.submitted=!1,this.action="create",this.sheetToSheetData=[],this.inventoryItemsAmounts=0,this.GTInputQuantity=0,this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]}}ngOnInit(){this.getInitialData()}submit(){if(this.stockCutting.jobCardNo)if(1!=this.stockCutting?.stockPreparationDetails?.every(n=>!n.select)){for(const n of this.stockCutting.stockPreparationDetails){if(n.select&&!n.GTQty)return void this.toastService.warning("Fill the GT Qty For Selected record !!");if(n.isSaved&&n.select&&!n.addOnGTQty)return void this.toastService.warning("Pls click on edit option and add GT Qty !! ")}this.stockCutting.stockPreparationDetails=this.stockCutting?.stockPreparationDetails.map(n=>(n.select&&(n.isSaved=!0),n)),this.create()}else this.toastService.warning("Select the record before doing \u201cGT To Production\u201d ");else this.toastService.warning("Job Card No. is Required")}create(){this.spinner.show(),this.stockPreparationService.createOrUpdate(this.stockCutting).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.stockCutting={},this.getInitialData()})}setUnit(n){let e=this.stockCutting.stockPreparationDetails.map(c=>c.item).indexOf(n.item);this.stockCutting.stockPreparationDetails[e].UOM=this.stockCutting.stockPreparationDetails[e].UOM==n.secondaryUnit?n.primaryUnit:n.secondaryUnit;let o=this.utilityService.setConversion({UOM:this.stockCutting.stockPreparationDetails[e].UOM,quantity:n.MRPQty,primaryUnit:n.primaryUnit,secondaryUnit:n.secondaryUnit,primaryToSecondaryConversion:n.primaryToSecondaryConversion,secondaryToPrimaryConversion:n.secondaryToPrimaryConversion})||0,s=this.utilityService.setConversion({UOM:this.stockCutting.stockPreparationDetails[e].UOM,quantity:n.GTQty,primaryUnit:n.primaryUnit,secondaryUnit:n.secondaryUnit,primaryToSecondaryConversion:n.primaryToSecondaryConversion,secondaryToPrimaryConversion:n.secondaryToPrimaryConversion})||0;this.stockCutting.stockPreparationDetails[e].MRPQty=o,this.stockCutting.stockPreparationDetails[e].GTQty=+s.toFixed(2)}checkInventoryRecords(n){n.select&&(this.spinner.show(),this.stockPreparationService.checkInventoryRecords({item:n?.item}).subscribe(e=>{let o=this.stockCutting.stockPreparationDetails.map(s=>s.item).indexOf(n.item);this.inventoryItemsAmounts=e?.inventoryItemsAmount||0,e.inventoryItemsAmount||(this.toastService.warning("Total Inventory Qty. is not available !"),this.stockCutting.stockPreparationDetails[o].select=!1,this.stockCutting.stockPreparationDetails[o].isSelectedCond=!0),this.stockCutting.stockPreparationDetails[o].inventoryItemsAmounts=this.inventoryItemsAmounts,this.spinner.hide()}))}setGTQty(n){let e=this.stockCutting?.stockPreparationDetails?.findIndex(o=>o.item==n.item);if("RL"==n.UOM||"SHT"==n.UOM){let o=0;if(n?.primaryToSecondaryConversion&&(o=+(+n?.GTQty*+n.primaryToSecondaryConversion).toFixed(2)),o>n.inventoryItemsAmounts)return this.toastService.warning("GT Input Quantity Should not be greater than Total Inventory Qty. !"),void(this.stockCutting.stockPreparationDetails[e].GTQty=0)}else if(n.GTQty>n.inventoryItemsAmounts)return this.toastService.warning("GT Qty. Should not be greater than Total Inventory Qty. !"),void(this.stockCutting.stockPreparationDetails[e].GTQty=0)}setJobCardId(n){this.selectedDetails={jobCard:n?._id,jobCardNo:n?.jobCardNo,SKU:n?.SKU,batchQty:n?.batchQty,processName:"Stock Preparation"},this.jobCardDetails={jobCardNo:n?.jobCardNo,SKUNo:n?.SKUNo,SKUName:n?.SKUName,SKUDescription:n?.SKUDescription,UOM:n?.UOM,SKUBatchQty:n?.batchQty},this.spinner.show(),this.stockPreparationService.getAllMasterData(this.selectedDetails).subscribe(e=>{this.stockCutting=e.stockCutting,this.sourceOfManufacturing=e?.SKUProcessData?.sourceOfManufacturing,(0==e?.stockCutting?.stockPreparationDetails?.length||!e?.stockCutting?.stockPreparationDetails)&&(this.toastService.warning("Please define the Bill of Material of the SKU"),this.stockCutting=this.jobCardDetails),this.stockCutting.stockPreparationDetails=this.stockCutting?.stockPreparationDetails?.map(o=>(o.select=!1,o.addOnGTQty=0,o)),this.GTInputQuantity=0,this.shiftOptions=e.shiftOptions,this.collection=this.stockCutting?.stockPreparationDetails?.length,this.spinner.hide()})}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.spinner.hide()})}openJobCardDetailsModal(){const n=this.modalService.open(T.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.stockCutting.jobCard,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.stockCutting.jobCard=e?.selectedJobCardDetails?._id,this.stockCutting.jobCardNo=e?.selectedJobCardDetails?.jobCardNo,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}reset(){this.stockCutting={},this.getInitialData()}openLogEntryModal(n){const e=this.modalService.open(P.M,{centered:!0,size:"md",backdrop:"static",keyboard:!1});e.componentInstance.logDetails=n.logEntry,e.componentInstance.sourceOfManufacturing=this.sourceOfManufacturing,e.componentInstance.shiftOptions=this.shiftOptions,e.result.then(o=>{if(o){let s=this.stockCutting?.stockPreparationDetails?.findIndex(c=>c.item==n.item);this.stockCutting.stockPreparationDetails[s].logEntry=o}},o=>{})}openGTQtyModal(n){if(n.isSaved){if(!n.select)return void this.toastService.warning("Select the record");const e=this.modalService.open(Xt.o,{centered:!0,size:"md",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.itemDetails=n,e.componentInstance.inventoryItemsAmounts=n.inventoryItemsAmounts,e.componentInstance.GTInputQuantity=this.GTInputQuantity,e.result.then(o=>{if(o){let s=this.stockCutting.stockPreparationDetails.map(c=>c.item).indexOf(n.item);this.stockCutting.stockPreparationDetails[s].addOnGTQty=o,this.GTInputQuantity=o}},o=>{})}}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}onSort({column:n,direction:e}){this.headers.forEach(o=>{o.sortable!==n&&(o.direction="")}),this.stockCutting.stockPreparationDetails=""===e||""===n?this.stockCutting.stockPreparationDetails:[...this.stockCutting.stockPreparationDetails].sort((o,s)=>{let c="string"==typeof o[n]?o[n].toLowerCase():o[n],p="string"==typeof s[n]?s[n].toLowerCase():s[n];const h=c<p?-1:c>p?1:0;return"asc"===e?h:-h})}}return(r=a).\u0275fac=function(n){return new(n||r)(t.Y36(_.V),t.Y36(C.uN),t.Y36(_.kl),t.Y36(u.Kz),t.Y36(u.FF),t.Y36(C.G3),t.Y36(_.tI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stock-preparation-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(Vt.j_,5),2&n){let o;t.iGM(o=t.CRH())&&(e.headers=o)}},decls:84,vars:23,consts:[[1,"formCard","card"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row","mb-0"],[1,"col-4","pe-3"],[1,"row"],[1,"col-6","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo",3,"items","clearable","ngModel","ngModelChange","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"col-6","ps-2","pe-5"],["type","text","readonly","",1,"form-control","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"col-3","ps-0","pe-5"],[1,"col-5","ps-3"],[1,"col-6","ps-0","pe-3"],[1,"col-6"],[1,"col-7","ps-0"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center"],["type","button",1,"btn","bg-primary","px-5","me-3",3,"click"],["type","button",1,"btn","bg-primary","px-5",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange","change"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],[1,"d-flex","justify-content-between","align-items-center","px-2"],[1,"pointer","d-flex","align-items-center"],["class","unit-switch-rev",3,"click",4,"ngIf"],["class","unit-switch-gray",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],[1,"plusIconSvg","btn","btn-primary","me-1","py-0","px-0"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["class","form-control form-control-size-lg text-center","type","number",3,"ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["aria-hidden","true",2,"margin-right","0rem !important",3,"ngClass","click"],[1,"unit-switch-rev",3,"click"],[1,"unit-switch-gray"],["type","number",1,"form-control","form-control-size-lg","text-center",3,"ngModel","ngModelOptions","input","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Stock Preparation"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Job Card No. "),t.TgZ(13,"span",11),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",12)(16,"div",13)(17,"ng-select",14),t.NdJ("ngModelChange",function(s){return e.stockCutting.jobCardNo=s})("change",function(s){return e.setJobCardId(s)}),t.qZA()(),t.TgZ(18,"div",15),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(19,"i",16),t.qZA()()(),t.TgZ(20,"div",17)(21,"label",10),t._uU(22,"SKU No. "),t._UZ(23,"span",11),t.qZA(),t.TgZ(24,"input",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUNo=s}),t.qZA()()()(),t.TgZ(25,"div",19)(26,"label",10),t._uU(27,"SKU Name "),t._UZ(28,"span",11),t.qZA(),t.TgZ(29,"input",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUName=s}),t.qZA()(),t.TgZ(30,"div",20)(31,"div",8)(32,"div",21)(33,"label",10),t._uU(34,"SKU Description "),t._UZ(35,"span",11),t.qZA(),t.TgZ(36,"input",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUDescription=s}),t.qZA()(),t.TgZ(37,"div",22)(38,"div",8)(39,"div",20)(40,"label",10),t._uU(41,"UoM "),t._UZ(42,"span",11),t.qZA(),t.TgZ(43,"input",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.UOM=s}),t.qZA()(),t.TgZ(44,"div",23)(45,"label",10),t._uU(46,"Input Batch Qty "),t._UZ(47,"span",11),t.qZA(),t.TgZ(48,"input",18),t.NdJ("ngModelChange",function(s){return e.stockCutting.SKUBatchQty=s}),t.qZA()()()()()()()(),t._UZ(49,"hr",24),t.TgZ(50,"app-setting-header",25),t.NdJ("dataChange",function(s){return e.eventHeader(s)}),t.qZA(),t.TgZ(51,"div",26)(52,"table",27)(53,"thead",28)(54,"tr",29)(55,"th"),t._uU(56,"Select"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Item Code"),t.qZA(),t.TgZ(59,"th",30),t._uU(60,"Item Name"),t.qZA(),t.TgZ(61,"th",30),t._uU(62,"Item Description"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"UoM"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"MRP Qty"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Log Details"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"GT Qty"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Edit"),t.qZA()()(),t.TgZ(73,"tbody"),t.YNc(74,re,35,28,"tr",31),t.ALo(75,"slice"),t.ALo(76,"searchFi1ter"),t.qZA()()(),t._UZ(77,"hr",32),t.TgZ(78,"div",8)(79,"div",33)(80,"button",34),t.NdJ("click",function(){return e.reset()}),t._uU(81,"Reset"),t.qZA(),t.TgZ(82,"button",35),t.NdJ("click",function(){return e.submit()}),t._uU(83,"GT to Production"),t.qZA()()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.masterData.JCOptions)("clearable",!1)("ngModel",e.stockCutting.jobCardNo),t.xp6(7),t.Q6J("ngModel",e.stockCutting.SKUNo),t.xp6(5),t.Q6J("ngModel",e.stockCutting.SKUName),t.xp6(7),t.Q6J("ngModel",e.stockCutting.SKUDescription),t.xp6(7),t.Q6J("ngModel",e.stockCutting.UOM),t.xp6(5),t.Q6J("ngModel",e.stockCutting.SKUBatchQty),t.xp6(2),t.Q6J("data",t.l5B(18,ae,e.page,e.pageSize,e.collection,e.search)),t.xp6(24),t.Q6J("ngForOf",t.Dn7(75,11,t.xi3(76,15,e.stockCutting.stockPreparationDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn))},dependencies:[g.mk,g.sg,g.O5,y.P,u._L,l.Fj,l.wV,l.Wl,l.JJ,l.On,m.w9,g.OU,g.JJ,k.G,te.S],styles:[".editOpacity[_ngcontent-%COMP%]{opacity:.5}"]}),a})()}];let le=(()=>{var r;class a{}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[u.Kz],imports:[g.ez,b.Bz.forChild(ce),dt.m]}),a})()}}]);