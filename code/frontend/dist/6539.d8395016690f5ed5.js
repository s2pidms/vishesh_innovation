"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6539],{9202:(Q,S,m)=>{m.d(S,{K:()=>q});var g=m(43818),i=m(65879),r=m(37285),D=m(96814),x=m(88059),k=m(95346);function C(p,U){if(1&p){const l=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td",24,25)(5,"span",26),i._uU(6),i.qZA()(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA(),i.TgZ(13,"td"),i._uU(14),i.qZA(),i.TgZ(15,"td")(16,"input",27),i.NdJ("change",function(){const h=i.CHM(l).$implicit,f=i.oxw();return i.KtG(f.setSelectData(h))}),i.qZA()()()}if(2&p){const l=U.$implicit,_=U.index,u=i.MAs(4),h=i.oxw();i.xp6(2),i.Oqu(null==l?null:l.value),i.xp6(1),i.Udp("width",u.clientWidth),i.xp6(2),i.Q6J("positionTarget",u)("ngbTooltip",l.goodsDescription),i.xp6(1),i.hij(" ",null==l?null:l.goodsDescription," "),i.xp6(2),i.Oqu(null==l?null:l.gstRate),i.xp6(2),i.Oqu(null==l?null:l.igstRate),i.xp6(2),i.Oqu(null==l?null:l.cgstRate),i.xp6(2),i.Oqu(null==l?null:l.sgstRate),i.xp6(2),i.MGl("name","formValue",h.HSNCodeArr[_],""),i.Q6J("disabled","view"==h.action)("checked",l.select)}}function N(p,U){1&p&&i._UZ(0,"hr",32)}function J(p,U){if(1&p){const l=i.EpF();i.TgZ(0,"div",33)(1,"button",34),i.NdJ("click",function(){i.CHM(l);const u=i.oxw(2);return i.KtG(u.dismissModel())}),i._uU(2," Save & Close "),i.qZA()()}}const t=function(){return["create"]};function b(p,U){if(1&p&&(i.ynx(0),i.TgZ(1,"div",28)(2,"div",29),i.YNc(3,N,1,0,"hr",30),i.qZA()(),i.YNc(4,J,3,0,"div",31),i.BQk()),2&p){const l=i.oxw();i.xp6(3),i.Q6J("ngIf",i.DdM(2,t).includes(l.action)),i.xp6(1),i.Q6J("ngIf",i.DdM(3,t).includes(l.action))}}function M(p,U){1&p&&i._UZ(0,"hr",32)}function v(p,U){if(1&p){const l=i.EpF();i.TgZ(0,"div",33)(1,"button",34),i.NdJ("click",function(){i.CHM(l);const u=i.oxw(2);return i.KtG(u.dismissModel())}),i._uU(2," Save & Close "),i.qZA()()}}const Z=function(){return["view"]};function W(p,U){if(1&p&&(i.ynx(0),i.TgZ(1,"div",28)(2,"div",29),i.YNc(3,M,1,0,"hr",30),i.qZA()(),i.YNc(4,v,3,0,"div",31),i.BQk()),2&p){const l=i.oxw();i.xp6(3),i.Q6J("ngIf",!i.DdM(2,Z).includes(l.action)),i.xp6(1),i.Q6J("ngIf",!i.DdM(3,Z).includes(l.action))}}const w=function(p,U,l,_){return{page:p,pageSize:U,collection:l,search:_,excelDisplay:"none"}};let q=(()=>{class p{constructor(l){this.activeModal=l,this.action="edit",this.HSNValue="",this.HSNCode="",this.editScreen="",this.HSNCodeArr=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.HSNSelect=null,this.HSNSelectCode=null}ngOnInit(){(this.HSNValue||this.HSNCode)&&(this.HSNSelect=this.HSNValue,this.HSNSelectCode=this.HSNCode,this.HSNCodeArr=this.HSNCodeArr.map(l=>(l.select=!1,l.value==this.HSNCode&&(l.select=!0),l))),this.collection=this.HSNCodeArr.length}setSelectData(l){this.HSNSelect=l?._id,this.HSNSelectCode=l?.value}dismissModel(){let l={};l.HSNSelect=this.HSNSelect,l.HSNSelectCode=this.HSNSelectCode,this.activeModal.close(l)}eventHeader(l){switch(l.key){case"SEARCH":this.search=l.value;break;case"EXCEL":default:break;case"PAGE":this.page=l.value}}onSort({column:l,direction:_}){this.headers.forEach(u=>{u.sortable!==l&&(u.direction="")}),this.HSNCodeArr=""===_||""===l?this.HSNCodeArr:[...this.HSNCodeArr].sort((u,h)=>{let f="string"==typeof u[l]?u[l].toLowerCase():u[l],A="string"==typeof h[l]?h[l].toLowerCase():h[l];const I=f<A?-1:f>A?1:0;return"asc"===_?I:-I})}static#t=this.\u0275fac=function(_){return new(_||p)(i.Y36(r.Kz))};static#e=this.\u0275cmp=i.Xpm({type:p,selectors:[["app-ink-hsn-modal"]],viewQuery:function(_,u){if(1&_&&i.Gf(g.j,5),2&_){let h;i.iGM(h=i.CRH())&&(u.headers=h)}},inputs:{action:"action",HSNValue:"HSNValue",HSNCode:"HSNCode",editScreen:"editScreen",HSNCodeArr:"HSNCodeArr"},decls:37,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","value",3,"sort"],["sortable","goodsDescription",1,"text-start",3,"sort"],["sortable","gstRate",3,"sort"],["sortable","igstRate",3,"sort"],["sortable","cgstRate",3,"sort"],["sortable","sgstRate",3,"sort"],["sortable","UOM",3,"sort"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-start"],["goodsDescription",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(_,u){1&_&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3,"HSN Master"),i.qZA(),i.TgZ(4,"div")(5,"button",3),i.NdJ("click",function(){return u.activeModal.close()}),i._UZ(6,"i",4),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),i.NdJ("dataChange",function(f){return u.eventHeader(f)}),i.qZA()(),i.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th",15),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(18,"HSN Code"),i.qZA(),i.TgZ(19,"th",16),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(20," Description of Goods "),i.qZA(),i.TgZ(21,"th",17),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(22,"GST Rate %"),i.qZA(),i.TgZ(23,"th",18),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(24,"IGST Rate %"),i.qZA(),i.TgZ(25,"th",19),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(26,"CGST Rate %"),i.qZA(),i.TgZ(27,"th",20),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(28,"SGST Rate %"),i.qZA(),i.TgZ(29,"th",21),i.NdJ("sort",function(f){return u.onSort(f)}),i._uU(30,"Select"),i.qZA()()(),i.TgZ(31,"tbody"),i.YNc(32,C,17,13,"tr",22),i.ALo(33,"slice"),i.ALo(34,"searchFi1ter"),i.qZA()()()()(),i.YNc(35,b,5,4,"ng-container",23),i.YNc(36,W,5,4,"ng-container",23),i.qZA()()()),2&_&&(i.xp6(12),i.Q6J("data",i.l5B(11,w,u.page,u.pageSize,u.collection,u.search)),i.xp6(20),i.Q6J("ngForOf",i.Dn7(33,4,i.xi3(34,8,u.HSNCodeArr,u.search),(u.page-1)*u.pageSize,(u.page-1)*u.pageSize+u.pageSize)),i.xp6(3),i.Q6J("ngIf","Edit Screen"!=u.editScreen),i.xp6(1),i.Q6J("ngIf","Edit Screen"==u.editScreen))},dependencies:[D.sg,D.O5,x.P,r._L,g.j,D.OU,k.G],encapsulation:2})}return p})()},6539:(Q,S,m)=>{m.r(S),m.d(S,{JobWorkerItemMasterModule:()=>Tt});var g=m(96814),i=m(1076),r=m(60095),D=m(21631),x=m(22096),k=m(77203),C=m(25116),N=m(9202),J=m(66929),t=m(65879),b=m(37285),M=m(16897),v=m(2742),Z=m(59103);function W(s,c){if(1&s&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",null==e?null:e.label," ")}}function w(s,c){if(1&s&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",null==e?null:e.label," ")}}function q(s,c){if(1&s&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function p(s,c){if(1&s&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function U(s,c){if(1&s){const e=t.EpF();t.ynx(0,43),t._UZ(1,"hr",21)(2,"div",10),t.TgZ(3,"div",44)(4,"div",7)(5,"div",45)(6,"label",46),t._uU(7," Sheet Dimensions "),t.TgZ(8,"span",47),t._uU(9,"\u25b6"),t.qZA()()(),t.TgZ(10,"div",48)(11,"label",49),t._uU(12,"Width"),t.qZA(),t.TgZ(13,"div",50)(14,"div",51)(15,"input",52),t.NdJ("input",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setPrimaryToSecondaryValue())}),t.qZA()(),t.TgZ(16,"div",53)(17,"select",54),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setPrimaryToSecondaryValue())}),t.TgZ(18,"option",55),t._uU(19,"Select"),t.qZA(),t.YNc(20,q,2,2,"option",17),t.qZA()()()(),t.TgZ(21,"div",56)(22,"span",57),t._UZ(23,"div",58),t.qZA()(),t.TgZ(24,"div",59)(25,"label",49),t._uU(26,"Length "),t.qZA(),t.TgZ(27,"div",50)(28,"div",51)(29,"input",60),t.NdJ("input",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setPrimaryToSecondaryValue())}),t.qZA()(),t.TgZ(30,"div",53)(31,"select",61),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setPrimaryToSecondaryValue())}),t.TgZ(32,"option",55),t._uU(33,"Select"),t.qZA(),t.YNc(34,p,2,2,"option",17),t.qZA()()()()()(),t._UZ(35,"div",10),t.BQk()}if(2&s){const e=t.oxw();t.xp6(18),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",e.DimensionsUnits),t.xp6(12),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",e.DimensionsUnits)}}function l(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.dismissModel())}),t._uU(2,"Save & Close"),t.qZA()()}}function _(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.activeModal.close())}),t._uU(2,"Close"),t.qZA()()}}const u=function(){return["view"]};let h=(()=>{class s{get f(){return this.form.controls}get dualUnitsDimensionsData(){return this.form.get("dualUnitsDimensionsDetails")}constructor(e,o,n){this.activeModal=e,this.validationService=o,this.toastService=n,this.action="",this.PSPInventory=!1,this.flag=!1,this.ModalUOMsUnit=[],this.WXLDimensionsUnit=[],this.dualUnits={},this.dimensionData={},this.DDetailsFlag=null,this.DimensionsUnitsObj=C.An,this.DimensionsUnits=this.DimensionsUnitsObj.getAllSKUMasterDimensionsUnit(),this.form=new r.nJ({primaryUnit:new r.p4(null,[r.kI.required]),secondaryUnit:new r.p4(null,[r.kI.required]),unitConversionFlag:new r.p4(1),primaryConversion:new r.p4(1),secondaryConversion:new r.p4(1),primaryToSecondaryConversion:new r.p4(null),secondaryToPrimaryConversion:new r.p4(null),dualUnitsDimensionsDetails:new r.nJ({type:new r.p4(null),width:new r.p4(null),length:new r.p4(null),widthUnit:new r.p4(null),lengthUnit:new r.p4(null),widthInMM:new r.p4(null),lengthInM:new r.p4(null),sqmPerRoll:new r.p4(null)})})}ngOnInit(){console.log("WXLDimensionsUnit",this.WXLDimensionsUnit),this.setSecondaryValue(),this.form.patchValue(this.dualUnits),this.dimensionData&&this.form.controls.dualUnitsDimensionsDetails.patchValue(this.dimensionData),2==this.f.unitConversionFlag.value?(this.form.controls.primaryConversion.disable(),this.form.controls.primaryToSecondaryConversion.setValue(null),this.form.controls.primaryToSecondaryConversion.disable(),this.form.controls.secondaryConversion.enable(),this.form.controls.secondaryToPrimaryConversion.enable()):(this.form.controls.secondaryConversion.disable(),this.form.controls.secondaryToPrimaryConversion.setValue(null),this.form.controls.secondaryToPrimaryConversion.disable(),this.form.controls.primaryConversion.enable(),this.form.controls.primaryToSecondaryConversion.enable()),["view","Converted to SKU"].includes(this.action)&&this.form.disable(),this.flag&&(this.flag=!0),this.form.controls.primaryUnit.value&&this.setUnitsDimensions()}setSecondaryValue(){let e=this.form.controls.primaryUnit.value;console.log("secondaryUnit",this.form.controls.secondaryUnit.value),["RL","SHT"].includes(e)&&this.form.controls.secondaryUnit.setValue("sqm")}setWidthDetails(){let e=this.form.controls.primaryUnit.value,o=this.form.controls.secondaryUnit.value;console.log("secondaryUnit",o),["SHT"].includes(e)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm")),["RL"].includes(e)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("m")),["RL"].includes(e)&&["SHT"].includes(o)&&(!this.dualUnitsDimensionsData.controls.widthUnit.value&&this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),!this.dualUnitsDimensionsData.controls.lengthUnit.value&&this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm"))}setPrimaryToSecondaryValue(){}handleRadio(){2==this.f.unitConversionFlag.value?(this.form.controls.primaryConversion.disable(),this.form.controls.primaryToSecondaryConversion.setValue(null),this.form.controls.primaryToSecondaryConversion.disable(),this.form.controls.secondaryConversion.enable(),this.form.controls.secondaryToPrimaryConversion.enable()):(this.form.controls.secondaryConversion.disable(),this.form.controls.secondaryToPrimaryConversion.setValue(null),this.form.controls.secondaryToPrimaryConversion.disable(),this.form.controls.primaryConversion.enable(),this.form.controls.primaryToSecondaryConversion.enable())}unitConversionForWidthAndLength(){let e=this.dualUnitsDimensionsData.controls.width.value,o=this.dualUnitsDimensionsData.controls.length.value,n=this.dualUnitsDimensionsData.controls.widthUnit.value,a=this.dualUnitsDimensionsData.controls.lengthUnit.value;n==this.DimensionsUnitsObj.mm&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(e),n==this.DimensionsUnitsObj.cm&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(10*e),n==this.DimensionsUnitsObj.inch&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(25.4*e),n==this.DimensionsUnitsObj.ft&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(304.8*e),n==this.DimensionsUnitsObj.m&&this.dualUnitsDimensionsData.controls.widthInMM.setValue(1e3*e),a==this.DimensionsUnitsObj.mm&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.001*o),a==this.DimensionsUnitsObj.cm&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.01*o),a==this.DimensionsUnitsObj.inch&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.0254*o),a==this.DimensionsUnitsObj.ft&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(.3048*o),a==this.DimensionsUnitsObj.m&&this.dualUnitsDimensionsData.controls.lengthInM.setValue(o),this.dualUnitsDimensionsData.controls.sqmPerRoll.setValue(+(this.dualUnitsDimensionsData.controls.widthInMM.value/1e3*this.dualUnitsDimensionsData.controls.lengthInM.value).toFixed(4))}dismissModel(){if(!this.validationService.checkErrors(this.form,J.yQ)){if(1==this.flag&&this.WXLDimensionsUnit.includes(this.DDetailsFlag)&&"-"!=this.form.value.secondaryUnit){if(!this.dualUnitsDimensionsData.value.width)return void this.toastService.warning("Width is required !");if(!this.dualUnitsDimensionsData.value.length)return void this.toastService.warning("Length is required !")}if(!this.f.unitConversionFlag.value)return void this.toastService.warning("Radio Button is required !");if(1==this.f.unitConversionFlag.value&&!this.f.primaryToSecondaryConversion.value&&"-"!=this.form.value.secondaryUnit)return void this.toastService.warning("Conversion of Units is required !");if(2==this.f.unitConversionFlag.value&&!this.f.secondaryToPrimaryConversion.value&&"-"!=this.form.value.secondaryUnit)return void this.toastService.warning("Conversion of Units is required !");this.form.enable(),this.unitConversionForWidthAndLength(),this.activeModal.close(this.form.value)}}setUnitsDimensions(e=""){let o=this.form.controls.primaryUnit.value,n=this.form.controls.secondaryUnit.value;if(o){if(this.WXLDimensionsUnit.includes(n)){if(o&&n){let a=this.WXLDimensionsUnit.includes(n)?n:null;this.WXLDimensionsUnit.includes(o)&&(a=o),this.DDetailsFlag=a}}else this.DDetailsFlag=this.WXLDimensionsUnit.includes(o)?o:null;this.dualUnitsDimensionsData.controls.type.setValue(this.DDetailsFlag),this.DDetailsFlag||(this.dualUnitsDimensionsData.controls.type.setValue(null),this.dualUnitsDimensionsData.controls.width.setValue(null),this.dualUnitsDimensionsData.controls.length.setValue(null),this.dualUnitsDimensionsData.controls.widthUnit.setValue(null),this.dualUnitsDimensionsData.controls.lengthUnit.setValue(null)),"primaryUnit"==e&&this.setSecondaryValue(),this.setWidthDetails(),("primaryUnit"==e||"secondaryUnit"==e)&&this.setDualUnitsWidthDetails(),"-"==n?(this.f.primaryConversion.setValue(null),this.f.secondaryConversion.setValue(null),this.f.primaryToSecondaryConversion.setValue(null),this.f.secondaryToPrimaryConversion.setValue(null),this.f.unitConversionFlag.disable()):this.f.unitConversionFlag.enable()}else this.toastService.warning("first Select Primary Unit !")}setDualUnitsWidthDetails(){let e=this.form.controls.primaryUnit.value,o=this.form.controls.secondaryUnit.value;console.log("secondaryUnit",o),["SHT"].includes(e)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm")),["RL"].includes(e)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("m")),["RL"].includes(e)&&["SHT"].includes(o)&&(this.dualUnitsDimensionsData.controls.widthUnit.setValue("mm"),this.dualUnitsDimensionsData.controls.lengthUnit.setValue("mm"))}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(b.Kz),t.Y36(M.RJ),t.Y36(v.kl))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-dual-unit-modal"]],inputs:{action:"action",PSPInventory:"PSPInventory",flag:"flag",ModalUOMsUnit:"ModalUOMsUnit",WXLDimensionsUnit:"WXLDimensionsUnit",dualUnits:"dualUnits",dimensionData:"dimensionData"},decls:88,vars:25,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row"],[3,"formGroup"],[1,"row","p-0","mt-4"],[1,"col-1"],[1,"col-5","ps-5"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","primaryUnit",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-5","pe-5"],["formControlName","secondaryUnit",1,"form-select",3,"change"],["class","mt-3",4,"ngIf"],[1,"line-border","mt-4","px-5"],[1,"col-md-10","mt-4","text-end"],[1,"text-center","text-primary","mb-5"],[1,"row","justify-content-center","align-items-center","mt-4"],[1,"col-md-auto"],["type","radio","formControlName","unitConversionFlag",1,"form-check-input","form-check-input-lg","pointer",3,"value","change"],[1,"col-md-4","d-flex","inputGroup"],["type","number","formControlName","primaryConversion","value","1","readOnly","",1,"form-control"],[1,"input-group-text","bg-secondary","text-white","ms-1"],[1,"col-md-1","text-center"],["type","number","formControlName","primaryToSecondaryConversion",1,"form-control",3,"readOnly"],[1,"row","justify-content-center","align-items-center","my-4"],["type","radio",1,"form-check-input","form-check-input-lg","invisible"],[1,"col-md-4"],[1,"text-primary"],[1,"row","justify-content-center","align-items-center"],["type","radio","name","unitConversionFlag","formControlName","unitConversionFlag",1,"form-check-input","form-check-input-lg","pointer",3,"value","change"],["type","number","readonly","","formControlName","secondaryConversion",1,"form-control"],["type","number","formControlName","secondaryToPrimaryConversion",1,"form-control",3,"readOnly"],[1,"input-group-text","rounded-0","bg-secondary","text-white","ms-1"],[1,"line-border","my-5","px-05"],["class","text-center mb-5",4,"ngIf"],[1,"mt-3"],["formGroupName","dualUnitsDimensionsDetails",1,"col-10","px-5"],[1,"col-3","d-flex","align-items-center","mt-4"],[1,"form-label","text-nowrap","mt-1"],[1,"ms-1"],[1,"col-4","pe-0"],[1,"form-label"],[1,"d-flex"],[1,"col-7"],["type","number","formControlName","width",1,"form-control","ps-2","pe-0",3,"input"],[1,"col-5"],["formControlName","widthUnit",1,"form-select",3,"change"],["disabled","",3,"value"],[1,"col-1","d-flex","align-items-center","justify-content-center","px-0"],[1,"d-flex","justify-content-center","mt-1"],[1,"drawingIcon","mt-4"],[1,"col-4","ps-0"],["type","number","formControlName","length",1,"form-control","ps-2","pe-0",3,"input"],["formControlName","lengthUnit",1,"form-select",3,"change"],[1,"text-center","mb-5"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return n.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9),t._UZ(12,"div",10),t.TgZ(13,"div",11)(14,"label",12),t._uU(15," Primary Unit "),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"select",14),t.NdJ("change",function(){return n.setUnitsDimensions("primaryUnit")}),t.TgZ(19,"option",15),t._uU(20,"Select Primary Unit"),t.qZA(),t.TgZ(21,"option",16),t._uU(22,"Unit"),t.qZA(),t.YNc(23,W,2,2,"option",17),t.qZA()(),t.TgZ(24,"div",18)(25,"label",12),t._uU(26," Secondary Unit "),t.TgZ(27,"span",13),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"select",19),t.NdJ("change",function(){return n.setUnitsDimensions("secondaryUnit")}),t.TgZ(30,"option",15),t._uU(31,"Select Secondary Unit"),t.qZA(),t.TgZ(32,"option",16),t._uU(33,"NA - Not Applicable"),t.qZA(),t.TgZ(34,"option",16),t._uU(35,"Unit"),t.qZA(),t.YNc(36,w,2,2,"option",17),t.qZA()(),t._UZ(37,"div",10),t.YNc(38,U,36,4,"ng-container",20),t._UZ(39,"hr",21)(40,"div",10),t.TgZ(41,"div",22)(42,"h3",23),t._uU(43,"Conversion of Units"),t.qZA(),t.TgZ(44,"div",24)(45,"div",25)(46,"input",26),t.NdJ("change",function(){return n.handleRadio()}),t.qZA()(),t.TgZ(47,"div",27),t._UZ(48,"input",28),t.TgZ(49,"div",29),t._uU(50),t.ALo(51,"UOMUnitsMaster"),t.qZA()(),t.TgZ(52,"div",30)(53,"h3"),t._uU(54,"="),t.qZA()(),t.TgZ(55,"div",27),t._UZ(56,"input",31),t.TgZ(57,"div",29),t._uU(58),t.ALo(59,"UOMUnitsMaster"),t.qZA()()(),t.TgZ(60,"div",32)(61,"div",25),t._UZ(62,"input",33),t.qZA(),t.TgZ(63,"div",34),t._UZ(64,"hr",13),t.qZA(),t.TgZ(65,"div",30)(66,"h4",35),t._uU(67,"OR"),t.qZA()(),t.TgZ(68,"div",34),t._UZ(69,"hr",13),t.qZA()(),t.TgZ(70,"div",36)(71,"div",25)(72,"input",37),t.NdJ("change",function(){return n.handleRadio()}),t.qZA()(),t.TgZ(73,"div",27),t._UZ(74,"input",38),t.TgZ(75,"div",29),t._uU(76),t.qZA()(),t.TgZ(77,"div",30)(78,"h3"),t._uU(79,"="),t.qZA()(),t.TgZ(80,"div",27),t._UZ(81,"input",39),t.TgZ(82,"div",40),t._uU(83),t.qZA()()()(),t._UZ(84,"div",10),t.qZA()(),t._UZ(85,"hr",41),t.YNc(86,l,3,0,"div",42),t.YNc(87,_,3,0,"div",42),t.qZA()()()()),2&o&&(t.xp6(3),t.hij(" ",1==n.PSPInventory?"Dual Unit Conversion (DUC)":"Set Dual Units of Measurement"," "),t.xp6(7),t.Q6J("formGroup",n.form),t.xp6(9),t.Q6J("value",null),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",n.ModalUOMsUnit),t.xp6(7),t.Q6J("value",null),t.xp6(2),t.Q6J("value","-"),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",n.ModalUOMsUnit),t.xp6(2),t.Q6J("ngIf",n.flag&&n.WXLDimensionsUnit.includes(n.DDetailsFlag)&&"-"!=n.form.value.secondaryUnit),t.xp6(8),t.Q6J("value",1),t.xp6(4),t.hij(" ","-"==n.form.value.secondaryUnit?"-":n.form.value.primaryUnit?t.lcZ(51,20,n.form.value.primaryUnit):"Unit"," "),t.xp6(6),t.Q6J("readOnly","-"==n.form.value.secondaryUnit),t.xp6(2),t.hij(" ",n.form.value.secondaryUnit?t.lcZ(59,22,n.form.value.secondaryUnit):"Unit"," "),t.xp6(14),t.Q6J("value",2),t.xp6(4),t.hij(" ","-"==n.form.value.secondaryUnit?"-":"Unit 2"," "),t.xp6(5),t.Q6J("readOnly","-"==n.form.value.secondaryUnit),t.xp6(2),t.hij(" ","-"==n.form.value.secondaryUnit?"-":"Unit 1"," "),t.xp6(3),t.Q6J("ngIf",!t.DdM(24,u).includes(n.action)),t.xp6(1),t.Q6J("ngIf",n.PSPInventory))},dependencies:[g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r._,r.JJ,r.JL,r.sg,r.u,r.x0,Z.S],encapsulation:2})}return s})();const f=[{label:"JW Code",value:"jobWorkerCode",class:""},{label:"Job Worker Name",value:"label",class:""},{label:"Currency",value:"currency",class:""},{label:"State/Province",value:"state",class:""},{label:"city/District",value:"cityOrDistrict",class:""},{label:"PinCode",value:"pinCode",class:""}];var A=m(88059),I=m(50363),Y=m(95346),R=m(83344);function E(s,c){if(1&s&&(t._UZ(0,"input",56),t.ALo(1,"UOMUnitsMaster")),2&s){const e=t.oxw(),o=t.MAs(112);t.s9C("value",t.lcZ(1,2,e.form.controls.uom1.value)),t.Q6J("ngbTooltip",o)}}function G(s,c){if(1&s&&(t._UZ(0,"input",57),t.ALo(1,"UOMUnitsMaster")),2&s){const e=t.oxw();t.s9C("value",t.lcZ(1,1,e.form.controls.uom1.value))}}function $(s,c){if(1&s&&(t._UZ(0,"input",58),t.ALo(1,"UOMUnitsMaster")),2&s){const e=t.oxw(),o=t.MAs(114);t.s9C("value",t.lcZ(1,2,e.form.controls.uom2.value)),t.Q6J("ngbTooltip",o)}}function z(s,c){if(1&s&&(t._UZ(0,"input",57),t.ALo(1,"UOMUnitsMaster")),2&s){const e=t.oxw();t.s9C("value",t.lcZ(1,1,e.form.controls.uom2.value))}}function K(s,c){1&s&&(t.TgZ(0,"span",73),t._uU(1),t.ALo(2,"companyCurrency"),t._UZ(3,"div",31),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INR")," "))}function B(s,c){1&s&&(t.TgZ(0,"span",73),t._uU(1),t.ALo(2,"companyCurrency"),t._UZ(3,"div",31),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INR")," "))}function X(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td",49,59)(3,"span",60),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",49,61)(9,"span",60),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"UOMUnitsMaster"),t.qZA(),t.TgZ(14,"td",62)(15,"div",63),t.YNc(16,K,4,3,"span",64),t.TgZ(17,"span",65),t._uU(18),t.qZA()()(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"UOMUnitsMaster"),t.qZA(),t.TgZ(22,"td",62)(23,"div",63),t.YNc(24,B,4,3,"span",64),t.TgZ(25,"span",65),t._uU(26),t.qZA()()(),t.TgZ(27,"td")(28,"div",66),t._UZ(29,"button",67),t.TgZ(30,"div",68)(31,"a",69),t.NdJ("click",function(){const n=t.CHM(e),a=n.$implicit,d=n.index,y=t.oxw();return t.KtG(y.patchItem(a,d,"view"))}),t._UZ(32,"i",70),t._uU(33," View "),t.qZA(),t.TgZ(34,"a",69),t.NdJ("click",function(){const n=t.CHM(e),a=n.$implicit,d=n.index,y=t.oxw();return t.KtG(y.patchItem(a,d,"edit"))}),t._UZ(35,"i",71),t._uU(36," Edit "),t.qZA(),t.TgZ(37,"a",69),t.NdJ("click",function(){const a=t.CHM(e).index,d=t.oxw();return t.KtG(d.deleteItem(a))}),t._UZ(38,"i",72),t._uU(39," Delete "),t.qZA()()()()()}if(2&s){const e=c.$implicit,o=t.MAs(2),n=t.MAs(8),a=t.oxw();t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",e.jobWorkerName),t.xp6(1),t.hij(" ",null==e?null:e.jobWorkerName," "),t.xp6(2),t.Oqu(null==e?null:e.partNo),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("positionTarget",n)("ngbTooltip",e.partName),t.xp6(1),t.hij(" ",null==e?null:e.partName," "),t.xp6(2),t.Oqu(null!=e&&e.uom1?t.lcZ(13,19,null==e?null:e.uom1):null),t.xp6(4),t.Q6J("ngIf",null==e?null:e.stdCostUom1),t.xp6(2),t.hij(" ",null==e?null:e.stdCostUom1," "),t.xp6(2),t.Oqu(null!=e&&e.uom2?t.lcZ(21,21,null==e?null:e.uom2):null),t.xp6(4),t.Q6J("ngIf",null==e?null:e.stdCostUom2),t.xp6(2),t.hij(" ",null==e?null:e.stdCostUom2," "),t.xp6(11),t.ekj("disable","view"==a.action)}}function tt(s,c){if(1&s&&(t.TgZ(0,"div",75)(1,"span",49),t._uU(2),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.conversionOfUnitsForPrimary," ")}}function et(s,c){if(1&s&&t.YNc(0,tt,3,1,"div",74),2&s){const e=t.oxw();t.Q6J("ngIf",e.primaryUnit||e.secondaryUnit)}}function nt(s,c){if(1&s&&(t.TgZ(0,"div",75)(1,"span",49),t._uU(2),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.conversionOfUnitsForSecondary," ")}}function ot(s,c){if(1&s&&t.YNc(0,nt,3,1,"div",74),2&s){const e=t.oxw();t.Q6J("ngIf",e.primaryUnit||e.secondaryUnit)}}const it=function(s,c,e,o){return{page:s,pageSize:c,collection:e,search:o,excelDisplay:"none"}};let st=(()=>{class s{constructor(e,o,n,a){this.activeModal=e,this.validationService=o,this.toastService=n,this.modalService=a,this.action="",this.primaryUnit="",this.secondaryUnit="",this.unitConversionFlag=0,this.primaryToSecondaryConversion="",this.secondaryToPrimaryConversion="",this.jobWorkerOptions=[],this.jobWorkerDetails=[],this.selectedSupplierDetails={},this.btnDisable=!1,this.page=1,this.pageSize=4,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.conversionOfUnitsForPrimary="",this.conversionOfUnitsForSecondary="",this.selectedDetails={},this.tableHead=f,this.form=new r.nJ({index:new r.p4(-1),jobWorker:new r.p4(null),jobWorkerName:new r.p4(null),currency:new r.p4(null),partNo:new r.p4(null),partName:new r.p4(null),uom1:new r.p4(null),uom2:new r.p4(null),stdCostUom1:new r.p4(null),stdCostUom2:new r.p4(null)}),this.findFormErrors=[{message:"Job Worker Name",key:"jobWorker"}]}ngOnInit(){this.collection=this.jobWorkerDetails.length,this.secondaryUnit||(this.form.controls.uom2.disable(),this.form.controls.stdCostUom2.disable()),this.primaryUnit&&this.form.controls.uom1.setValue(this.primaryUnit),this.secondaryUnit&&this.form.controls.uom2.setValue(this.secondaryUnit),(this.primaryUnit||this.secondaryUnit)&&(this.conversionOfUnitsForPrimary=`${1==this.unitConversionFlag?1:2==this.unitConversionFlag?this.secondaryToPrimaryConversion:1} ${this.primaryUnit} = ${1==this.unitConversionFlag?this.primaryToSecondaryConversion:1} ${this.secondaryUnit??this.primaryUnit}`,this.conversionOfUnitsForSecondary=`${1==this.unitConversionFlag?this.primaryToSecondaryConversion:1} ${this.secondaryUnit} = ${1==this.unitConversionFlag?1:2==this.unitConversionFlag?this.secondaryToPrimaryConversion:1} ${this.primaryUnit}`)}setUnit2PurchaseCost(){let e=this.form.controls.stdCostUom1.value;this.secondaryUnit&&this.primaryUnit&&1==this.unitConversionFlag&&this.form.controls.stdCostUom2.setValue(+(e/this.primaryToSecondaryConversion).toFixed(2)),this.secondaryUnit&&this.primaryUnit&&2==this.unitConversionFlag&&this.form.controls.stdCostUom2.setValue(+(e/this.secondaryToPrimaryConversion).toFixed(2))}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value;break;case"EXCEL":default:break;case"PAGE":this.page=e.value}}addJobWorker(){if(this.validationService.checkErrors(this.form,this.findFormErrors))return;let e=this.form.value;e.jobWorkerName?e.uom1?e.stdCostUom1?((e.index||0==e.index)&&e.index>=0?this.jobWorkerDetails.splice(e.index,1,e):this.jobWorkerDetails.push(e),this.collection=this.jobWorkerDetails.length,this.form.reset(),this.primaryUnit&&this.form.controls.uom1.setValue(this.primaryUnit),this.secondaryUnit&&this.form.controls.uom2.setValue(this.secondaryUnit)):this.toastService.warning("Process Cost is required !"):this.toastService.warning("Unit 1 is required !"):this.toastService.warning("Job Worker Name is required !")}patchItem(e,o,n){e.index=o,this.form.patchValue(e),"view"==n?(this.btnDisable=!0,this.form.disable()):(this.form.enable(),this.btnDisable=!1)}deleteItem(e){"view"!=this.action&&(this.jobWorkerDetails.splice(e+(this.page-1)*this.pageSize,1),this.collection=this.jobWorkerDetails.length)}setJobWorkerCurrency(e){e.currency&&this.form.controls.currency.setValue(e?.currency),e.label&&this.form.controls.jobWorkerName.setValue(e?.label)}dismissModal(){this.form.enable(),this.activeModal.close(this.jobWorkerDetails)}openJobWorkDetailsModal(){if("create"==this.action){const e=this.modalService.open(k.xv,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.title="Job Work Details",e.componentInstance.selectedDetails=this.selectedDetails,e.componentInstance.tableHead=this.tableHead,e.componentInstance.bodyList=this.jobWorkerOptions,e.componentInstance._id=this.form.controls.jobWorker.value,e.result.then(o=>{o&&(this.selectedDetails=o?.selectedDetails,this.form.controls.jobWorker.setValue(o?.selectedDetails?._id),this.setJobWorkerCurrency(o?.selectedDetails))},o=>{})}}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(b.Kz),t.Y36(M.RJ),t.Y36(v.kl),t.Y36(b.FF))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-job-worker-modal"]],inputs:{action:"action",primaryUnit:"primaryUnit",secondaryUnit:"secondaryUnit",unitConversionFlag:"unitConversionFlag",primaryToSecondaryConversion:"primaryToSecondaryConversion",secondaryToPrimaryConversion:"secondaryToPrimaryConversion",jobWorkerOptions:"jobWorkerOptions",jobWorkerDetails:"jobWorkerDetails"},decls:115,vars:29,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid","px-0"],[3,"formGroup"],[1,"row","px-5","mt-4"],[1,"col-7","separate-row"],[1,"row"],[1,"col-5","ps-1","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","jobWorker",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-3","ps-0"],["type","text","formControlName","partNo",1,"form-control"],[1,"col-4","px-0"],["type","text","formControlName","partName",1,"form-control"],[1,"col-5"],[1,"col-5","pe-0"],[1,"d-flex"],[1,"col-4","me-1"],["type","text","class","form-control ps-2 pe-0 pointer","readonly","","placement","bottom",3,"ngbTooltip","value",4,"ngIf"],["type","text","class","form-control ps-2 pe-0","readonly","",3,"value",4,"ngIf"],[1,"col-8"],[1,"input-group-text","combine-INR","text-secondary"],[1,"vr","ms-3"],["formControlName","stdCostUom1","type","number",1,"form-control","border-start-0",3,"input"],[1,"col-1","d-flex","align-items-center","justify-content-center","px-0"],[1,"d-flex","justify-content-center","mt-1"],[1,"fs-3","mt-4","text-secondary"],[1,"col-5","ps-0"],["type","text","class","form-control ps-2 pe-0 pointer","readonly","","placement","bottom",3,"value","ngbTooltip",4,"ngIf"],["formControlName","stdCostUom2","type","number",1,"form-control","border-start-0"],[1,"col-1","d-flex","align-items-end","ps-0"],["type","button",1,"plusIconSvg","btn","btn-primary",3,"disabled","click"],[1,"line-border","mt-4","px-5"],[1,"row","justify-content-center","px-4"],[1,"col-12"],[3,"data","dataChange"],[1,"table-responsive","mt-1",2,"min-height","17rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"line-border","my-5","px-5"],[1,"text-center","mb-5"],["type","button",1,"btn","bg-primary","px-5",3,"disabled","click"],["list",""],["list2",""],["type","text","readonly","","placement","bottom",1,"form-control","ps-2","pe-0","pointer",3,"ngbTooltip","value"],["type","text","readonly","",1,"form-control","ps-2","pe-0",3,"value"],["type","text","readonly","","placement","bottom",1,"form-control","ps-2","pe-0","pointer",3,"value","ngbTooltip"],["jobWorkerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["partName",""],[1,"py-0"],[1,"d-flex","justify-content-start","align-items-center"],["class","input-group-text text-secondary combine-INR border border-0",4,"ngIf"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-trash","me-2","text-primary"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Add Job Worker"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return n.dismissModal()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"form",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),t._uU(15," Job Worker Name"),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"ng-select",16),t.NdJ("change",function(d){return n.setJobWorkerCurrency(d)}),t.qZA()(),t.TgZ(21,"div",17),t.NdJ("click",function(){return n.openJobWorkDetailsModal()}),t._UZ(22,"i",18),t.qZA()()(),t.TgZ(23,"div",19)(24,"label",12),t._uU(25," Part No. (JW) "),t.qZA(),t._UZ(26,"input",20),t.qZA(),t.TgZ(27,"div",21)(28,"label",12),t._uU(29," Part Name (JW) "),t._UZ(30,"span",13),t.qZA(),t._UZ(31,"input",22),t.qZA()()(),t.TgZ(32,"div",23)(33,"div",10)(34,"div",24)(35,"div",25)(36,"div",26)(37,"label",12),t._uU(38,"Unit 1 "),t.TgZ(39,"span",13),t._uU(40,"*"),t.qZA()(),t.YNc(41,E,2,4,"input",27),t.YNc(42,G,2,3,"input",28),t.qZA(),t.TgZ(43,"div",29)(44,"label",12),t._uU(45," Process Cost "),t.TgZ(46,"span",13),t._uU(47,"*"),t.qZA()(),t.TgZ(48,"div",25)(49,"span",30),t._uU(50),t.ALo(51,"companyCurrency"),t._UZ(52,"div",31),t.qZA(),t.TgZ(53,"input",32),t.NdJ("input",function(){return n.setUnit2PurchaseCost()}),t.qZA()()()()(),t.TgZ(54,"div",33)(55,"span",34)(56,"div",35),t._uU(57,"="),t.qZA()()(),t.TgZ(58,"div",36)(59,"div",25)(60,"div",26)(61,"label",12),t._uU(62,"Unit 2"),t.qZA(),t.YNc(63,$,2,4,"input",37),t.YNc(64,z,2,3,"input",28),t.qZA(),t.TgZ(65,"div",29)(66,"label",12),t._uU(67," Process Cost "),t.TgZ(68,"span",13),t._uU(69,"*"),t.qZA()(),t.TgZ(70,"div",25)(71,"span",30),t._uU(72),t.ALo(73,"companyCurrency"),t._UZ(74,"div",31),t.qZA(),t._UZ(75,"input",38),t.qZA()()()(),t.TgZ(76,"div",39)(77,"button",40),t.NdJ("click",function(){return n.addJobWorker()}),t.qZA()()()()()(),t._UZ(78,"hr",41),t.TgZ(79,"div",42)(80,"div",43)(81,"div")(82,"app-setting-header",44),t.NdJ("dataChange",function(d){return n.eventHeader(d)}),t.qZA()(),t.TgZ(83,"div",45)(84,"table",46)(85,"thead",47)(86,"tr",48)(87,"th",49),t._uU(88,"Job Worker Name"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Part No. (JW)"),t.qZA(),t.TgZ(91,"th",49),t._uU(92,"Part Name (JW)"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Unit 1"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Process Cost"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Unit 2"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Process Cost"),t.qZA(),t.TgZ(101,"th"),t._uU(102,"Action"),t.qZA()()(),t.TgZ(103,"tbody"),t.YNc(104,X,40,23,"tr",50),t.ALo(105,"slice"),t.ALo(106,"searchFi1ter"),t.qZA()()()()(),t._UZ(107,"hr",51),t.TgZ(108,"div",52)(109,"button",53),t.NdJ("click",function(){return n.dismissModal()}),t._uU(110," Save & Close "),t.qZA()()()()(),t.YNc(111,et,1,1,"ng-template",null,54,t.W1O),t.YNc(113,ot,1,1,"ng-template",null,55,t.W1O)),2&o&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(11),t.Q6J("items",n.jobWorkerOptions)("clearable",!1),t.xp6(21),t.Q6J("ngIf",n.secondaryUnit&&(n.primaryToSecondaryConversion||n.secondaryToPrimaryConversion)),t.xp6(1),t.Q6J("ngIf",!n.secondaryUnit||!n.primaryToSecondaryConversion&&!n.secondaryToPrimaryConversion),t.xp6(8),t.hij(" ",t.lcZ(51,13,"INR")," "),t.xp6(13),t.Q6J("ngIf",n.secondaryUnit&&(n.primaryToSecondaryConversion||n.secondaryToPrimaryConversion)),t.xp6(1),t.Q6J("ngIf",!n.secondaryUnit||!n.primaryToSecondaryConversion&&!n.secondaryToPrimaryConversion),t.xp6(8),t.hij(" ",t.lcZ(73,15,"INR")," "),t.xp6(5),t.Q6J("disabled",n.btnDisable||"view"==n.action),t.xp6(5),t.Q6J("data",t.l5B(24,it,n.page,n.pageSize,n.collection,n.search)),t.xp6(22),t.Q6J("ngForOf",t.Dn7(105,17,t.xi3(106,21,n.jobWorkerDetails,n.search),(n.page-1)*n.pageSize,(n.page-1)*n.pageSize+n.pageSize)),t.xp6(5),t.Q6J("disabled",n.btnDisable||"view"==n.action))},dependencies:[g.sg,g.O5,A.P,b._L,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,I.w9,g.OU,Y.G,R.f,Z.S],encapsulation:2})}return s})();var T=m(37398);let P=(()=>{class s{constructor(e){this.http=e,this.routes={createPath:"/purchase/jobWorkItemMaster/create",getAllPath:"/purchase/jobWorkItemMaster/getAll",getAllMasterDataPath:"/purchase/jobWorkItemMaster/getAllMasterData",updatePath:o=>`/purchase/jobWorkItemMaster/update/${o}`,getByIdPath:o=>`/purchase/jobWorkItemMaster/getById/${o}`,deletePath:o=>`/purchase/jobWorkItemMaster/delete/${o}`}}create(e){return this.http.post(this.routes.createPath,e).pipe((0,T.U)(o=>o))}getAll(e){return this.http.get(this.routes.getAllPath,e).pipe((0,T.U)(o=>o))}getAllMasterData(e){return this.http.get(this.routes.getAllMasterDataPath,e).pipe((0,T.U)(o=>o))}update(e,o){return this.http.put(this.routes.updatePath(e),o).pipe((0,T.U)(n=>n))}getById(e){return this.http.get(this.routes.getByIdPath(e)).pipe((0,T.U)(o=>o))}delete(e){return this.http.delete(this.routes.deletePath(e)).pipe((0,T.U)(o=>o))}static#t=this.\u0275fac=function(o){return new(o||s)(t.LFG(v.sM))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function rt(s,c){if(1&s&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function at(s,c){if(1&s&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",null==e?null:e.label," ")}}function lt(s,c){if(1&s&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",null==e?null:e.value," ")}}function ct(s,c){1&s&&t._UZ(0,"div",42)}function ut(s,c){1&s&&t._UZ(0,"div",43)}function dt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",44)(1,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.submit())}),t._uU(4,"Save"),t.qZA()()}}let mt=(()=>{class s{constructor(e,o,n,a,d,y,O,j,F){this.activatedRoute=e,this.spinner=o,this.toastService=n,this.validationService=a,this.jobWorkerItemsMasterService=d,this.modalService=y,this.location=O,this.utilityService=j,this.appGlobalService=F,this.unsavedChanges=!1,this.jobWorkerDetails=[],this.active=1,this.collection=0,this.filterItems=[],this.action="create",this.submitted=!1,this.itemCategory={},this.TDSFile=null,this.MSDSFile=null,this.drawingFile=null,this.empAadharCardFile=null,this.QCLevelsArr=C.xs,this.selectedChannelPartnerDetails={},this.POTypeObj=C.LJ,this.channelPartnerOptions=[],this.UOMUintMasterOptions=[],this.UOMDefaultValueOptions=[],this.masterData={QCLevelsOptions:[],HSNCodesList:[],itemCategories:[],WXLDimensionsUnit:"",jobWorkerOptions:[]},this.companyTypeIPManufacturing=C.pr,this.form=new r.nJ({_id:new r.p4(null),itemCategory:new r.p4(null,[r.kI.required]),jobWorkItemCode:new r.p4(null,[r.kI.required]),jobWorkItemName:new r.p4(null,[r.kI.required]),jobWorkItemDescription:new r.p4(null,[r.kI.required]),primaryUnit:new r.p4(null),secondaryUnit:new r.p4(null),conversionFactor:new r.p4(null),primaryToSecondaryConversion:new r.p4(null),secondaryToPrimaryConversion:new r.p4(null),conversionOfUnits:new r.p4(null),orderInfoUOM:new r.p4(null,[r.kI.required]),unitConversionFlag:new r.p4(null),primaryConversion:new r.p4(null),secondaryConversion:new r.p4(null),dualUnitsDimensionsDetails:new r.p4(null),HSN:new r.p4(null),HSNCode:new r.p4(null,[r.kI.required]),gst:new r.p4(null),igst:new r.p4(null),cgst:new r.p4(null),sgst:new r.p4(null),ugst:new r.p4(null),shelfLife:new r.p4(null,[r.kI.required]),QCLevels:new r.p4(null,[r.kI.required]),status:new r.p4(null),jobWorkerDetails:new r.nJ({jobWorker:new r.p4(null),jobWorkerName:new r.p4(null),currency:new r.p4(null),partNo:new r.p4(null),partName:new r.p4(null),uom1:new r.p4(null),uom2:new r.p4(null),stdCostUom1:new r.p4(null),stdCostUom2:new r.p4(null)})})}get dimensionData(){return this.form.get("dualUnitsDimensionsDetails")}get f(){return this.form.controls}ngOnInit(){if(this.UOMUintMasterOptions=this.appGlobalService.UOMUintMasterOptions,this.getInitialData(),this.form.valueChanges.subscribe(e=>{this.unsavedChanges=!0}),this.UOMDefaultValueOptions=this.appGlobalService?.UOMDefaultValueOptions,this.UOMDefaultValueOptions?.length>0){if(!this.f.orderInfoUOM.value){let e=null;e=this.findValue(this.UOMDefaultValueOptions,"PURCHASE_UOM"),this.f.orderInfoUOM.setValue(e)}if(!this.f.primaryUnit.value){let e=null;e=this.findValue(this.UOMDefaultValueOptions,"PURCHASE_PRIMARY_UNIT"),this.f.primaryUnit.setValue(e)}}}findValue(e,o){return e?.find(n=>n?.parameterLabel==o)?.parameterName}canDeactivate(){return!this.unsavedChanges||this.openCanDeactivateModal()}openCanDeactivateModal(){return new Promise((e,o)=>{const n=this.modalService.open(k.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.heading="Warning Message",n.componentInstance.cancelText="Do you want to leave this page without saving data ?",n.result.then(a=>{e("Yes"==a)},a=>{})})}selectItemCategory(e){""==e.target.value?this.form.controls.jobWorkItemCode.setValue(this.itemCategory[e.target.value]):(e.target.value&&this.form.controls.jobWorkItemCode.setValue(this.itemCategory[e.target.value]),this.form.enable())}trackByFn(e,o){return o?._id}reset(){this.form.reset(),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,J.Ym))return;if(0==this.jobWorkerDetails.length)return void this.toastService.warning("Please add at least one Job Worker detail !");let e=this.form.value;e.jobWorkerDetails=this.jobWorkerDetails,e.rmSpecifications&&(e.rmSpecifications=[e.rmSpecifications]),e.conversionOfUnits=e.primaryUnit&&e.secondaryUnit&&"-"!=e.secondaryUnit?e.primaryToSecondaryConversion?`1 ${e.primaryUnit} = ${e.primaryToSecondaryConversion} ${e.secondaryUnit}`:`1 ${e.secondaryUnit??"Unit"} = ${e.secondaryToPrimaryConversion??1} ${e.primaryUnit??"Unit"}`:"",this.unsavedChanges=!1,e._id?this.update(e._id,e):(delete e._id,this.create(e))}create(e){this.spinner.show(),this.jobWorkerItemsMasterService.create(e).subscribe(o=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(o.message),this.location.back()},o=>{console.log(o)})}update(e,o){this.spinner.show(),this.jobWorkerItemsMasterService.update(e,o).subscribe(n=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(n.message),this.location.back()},n=>{console.log(n)})}getInitialData(){this.spinner.show(),this.jobWorkerItemsMasterService.getAllMasterData({}).subscribe(e=>{this.masterData=e,this.itemCategory=e?.autoIncValues,this.masterData.QCLevelsOptions=this.masterData.QCLevelsOptions.map(o=>({label:`${o.parameterName} - ${o.parameterLabel}`,value:o.parameterName})),1==this.masterData?.itemCategories?.length&&(this.form.controls.itemCategory.setValue(this.masterData?.itemCategories[0]),this.form.controls.jobWorkItemCode.setValue(this.itemCategory[this.form.controls.itemCategory.value]),this.form.controls.itemCategory.disable()),this.form.controls.status.setValue("Active"),this.form.controls.unitConversionFlag.setValue(1),this.form.controls.primaryConversion.setValue(1),this.form.controls.secondaryConversion.setValue(1),this.activatedRoute.queryParams.pipe((0,D.z)(o=>(this.action=o.action,this.utilityService.accessDenied(this.action),o.id?this.jobWorkerItemsMasterService.getById(o.id):(0,x.of)({})))).subscribe(o=>{this.spinner.hide(),0!=Object.keys(o).length?(o.jobWorkerDetails.length&&(this.jobWorkerDetails=o.jobWorkerDetails),this.form.patchValue(o),"edit"!=this.action&&this.form.disable(),this.unsavedChanges=!1):this.unsavedChanges=!1})})}setPrimaryUnit(e){this.form.controls.primaryUnit.setValue(e.target.value)}setGST(){let e=this.masterData?.HSNCodesList.find(o=>o.value==this.f.HSNCode.value.trim());this.form.controls.gst.setValue(e?.gstRate??0),this.form.controls.igst.setValue(e?.igstRate??0),this.form.controls.cgst.setValue(e?.cgstRate??0),this.form.controls.sgst.setValue(e?.sgstRate??0),this.form.controls.ugst.setValue(e?.ugstRate??0),this.form.controls.HSN.setValue(e?._id)}openFormulationHSNModal(){const e=this.modalService.open(N.K,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.HSNCodeArr=this.masterData?.HSNCodesList,e.componentInstance.editScreen="Edit Screen",e.componentInstance.HSNCode=this.form.controls.HSNCode.value,e.result.then(o=>{o&&(this.form.controls.HSNCode.setValue(o?.HSNSelectCode),this.setGST())},o=>{})}openJobWorkerDetailsModal(){const e=this.modalService.open(st,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.primaryUnit=this.form.controls.orderInfoUOM.value,e.componentInstance.unitConversionFlag=this.form.controls.unitConversionFlag.value,e.componentInstance.secondaryUnit=this.form.controls.secondaryUnit.value,e.componentInstance.primaryToSecondaryConversion=this.form.controls.primaryToSecondaryConversion.value,e.componentInstance.secondaryToPrimaryConversion=this.form.controls.secondaryToPrimaryConversion.value,e.componentInstance.jobWorkerDetails=this.jobWorkerDetails,e.componentInstance.jobWorkerOptions=this.masterData?.jobWorkerOptions,e.result.then(o=>{["create","edit"].includes(this.action)&&(console.log("success",o),this.jobWorkerDetails=o,this.unsavedChanges=!0)},o=>{})}openUOMDetailsModal(){const e=this.modalService.open(h,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.ModalUOMsUnit=this.UOMUintMasterOptions,e.componentInstance.flag=!0,e.componentInstance.dimensionData=this.dimensionData.value,e.componentInstance.WXLDimensionsUnit=this.masterData?.WXLDimensionsUnit,e.componentInstance.dualUnits={primaryUnit:this.form.value.primaryUnit,secondaryUnit:this.form.value.secondaryUnit,unitConversionFlag:this.form.value.unitConversionFlag,primaryConversion:this.form.value.primaryConversion,secondaryConversion:this.form.value.secondaryConversion,primaryToSecondaryConversion:this.form.value.primaryToSecondaryConversion,secondaryToPrimaryConversion:this.form.value.secondaryToPrimaryConversion},e.result.then(o=>{o&&["create","edit"].includes(this.action)&&(console.log("success",o),this.form.patchValue(o),this.form.controls.orderInfoUOM.setValue(o.primaryUnit),this.form.controls.dualUnitsDimensionsDetails.patchValue(o?.dualUnitsDimensionsDetails),this.unsavedChanges=!0)},o=>{})}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(i.gz),t.Y36(v.V),t.Y36(v.kl),t.Y36(M.RJ),t.Y36(P),t.Y36(b.FF),t.Y36(g.Ye),t.Y36(v.tI),t.Y36(v.P0))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-job-worker-item-master-form"]],decls:102,vars:19,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row","mb-4"],[1,"col-3"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","itemCategory",1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","jobWorkItemCode","readonly","",1,"form-control"],["type","text","formControlName","jobWorkItemName",1,"form-control"],["type","text","formControlName","jobWorkItemDescription",1,"form-control"],[1,"form-label","mb-1","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"disabled","click"],["formControlName","orderInfoUOM",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["formControlName","HSNCode",1,"form-select",3,"change"],["disabled","","selected","",3,"value"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],["type","number","formControlName","shelfLife",1,"form-control"],["bindLabel","label","bindValue","value","formControlName","QCLevels",3,"items","clearable"],[1,"row","line-border","mb-4"],[1,"col-2","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1",3,"disabled"],["type","button",1,"btn","btn-primary","me-4","px-3",3,"disabled","click"],[1,"col-3","ps-0"],[1,"col-md-auto","text-nowrap"],["type","button",1,"btn","btn-primary","px-3"],["formControlName","status",1,"form-select","statusSelectBorder"],["value","Active"],["value","Inactive"],[1,"input-group-text","statusSpanHeight"],["class","statusActive","class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"statusActive"],[1,"statusInActive"],[1,"col","text-end"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11," Item Category "),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",9),t.NdJ("change",function(d){return n.selectItemCategory(d)}),t.TgZ(15,"option",10),t._uU(16,"Select Item Category"),t.qZA(),t.YNc(17,rt,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",6)(19,"label",7),t._uU(20," Job Work Item Code"),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",12),t.qZA(),t.TgZ(24,"div",6)(25,"label",7),t._uU(26," Job Work Item Name "),t.TgZ(27,"span",8),t._uU(28,"*"),t.qZA()(),t._UZ(29,"input",13),t.qZA(),t.TgZ(30,"div",6)(31,"label",7),t._uU(32," Job Work Item Description "),t.TgZ(33,"span",8),t._uU(34,"*"),t.qZA()(),t._UZ(35,"input",14),t.qZA()(),t.TgZ(36,"div",5)(37,"div",6)(38,"label",15),t._uU(39," Unit of Measurement "),t.TgZ(40,"span",8),t._uU(41,"*"),t.qZA(),t._UZ(42,"span")(43,"span")(44,"span")(45,"span")(46,"span"),t.TgZ(47,"button",16),t.NdJ("click",function(){return n.openUOMDetailsModal()}),t._uU(48," Dual Units "),t.qZA()(),t.TgZ(49,"select",17),t.NdJ("change",function(d){return n.setPrimaryUnit(d)}),t.TgZ(50,"option",18),t._uU(51,"Select Primary Unit"),t.qZA(),t.TgZ(52,"option",19),t._uU(53,"Unit"),t.qZA(),t.YNc(54,at,2,2,"option",11),t.qZA()(),t.TgZ(55,"div",6)(56,"label",7),t._uU(57," HSN Code "),t.TgZ(58,"span",8),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",20)(61,"div",21)(62,"select",22),t.NdJ("change",function(){return n.setGST()}),t.TgZ(63,"option",23),t._uU(64,"Select HSN Code"),t.qZA(),t.YNc(65,lt,2,2,"option",11),t.qZA()(),t.TgZ(66,"div",24),t.NdJ("click",function(){return n.openFormulationHSNModal()}),t._UZ(67,"i",25),t.qZA()()(),t.TgZ(68,"div",6)(69,"label",7),t._uU(70,"Shelf Life (Months) "),t.TgZ(71,"span",8),t._uU(72,"*"),t.qZA()(),t._UZ(73,"input",26),t.qZA(),t.TgZ(74,"div",6)(75,"label",7),t._uU(76,"Quality Control Level "),t.TgZ(77,"span",8),t._uU(78,"*"),t.qZA()(),t._UZ(79,"ng-select",27),t.qZA()()(),t._UZ(80,"hr",28),t.TgZ(81,"div",5)(82,"div",29),t._UZ(83,"button",30),t.TgZ(84,"button",31),t.NdJ("click",function(){return n.openJobWorkerDetailsModal()}),t._uU(85," Job Worker "),t.qZA()(),t.TgZ(86,"div",32)(87,"div",20)(88,"div",33)(89,"button",34),t._uU(90,"Status"),t.qZA()(),t.TgZ(91,"select",35)(92,"option",18),t._uU(93,"Select Status"),t.qZA(),t.TgZ(94,"option",36),t._uU(95,"Active"),t.qZA(),t.TgZ(96,"option",37),t._uU(97,"Inactive"),t.qZA()(),t.TgZ(98,"span",38),t.YNc(99,ct,1,0,"div",39),t.YNc(100,ut,1,0,"div",40),t.qZA()()(),t.YNc(101,dt,5,0,"div",41),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.form),t.xp6(5),t.hij("Job Work Item Master (",t.lcZ(6,17,n.action),")"),t.xp6(12),t.Q6J("ngForOf",null==n.masterData?null:n.masterData.itemCategories),t.xp6(30),t.Q6J("disabled",!n.form.controls.orderInfoUOM.value),t.xp6(3),t.Q6J("value",null),t.xp6(2),t.Q6J("value","Unit"),t.xp6(2),t.Q6J("ngForOf",n.UOMUintMasterOptions),t.xp6(9),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",null==n.masterData?null:n.masterData.HSNCodesList),t.xp6(14),t.Q6J("items",n.masterData.QCLevelsOptions)("clearable",!1),t.xp6(4),t.Q6J("disabled",!n.form.controls.orderInfoUOM.value),t.xp6(1),t.Q6J("disabled",!n.form.controls.orderInfoUOM.value),t.xp6(8),t.Q6J("value","null"),t.xp6(7),t.Q6J("ngIf","Active"==n.form.value.status),t.xp6(1),t.Q6J("ngIf","Inactive"==n.form.value.status),t.xp6(1),t.Q6J("ngIf","view"!=n.action))},dependencies:[g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,I.w9,g.rS],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]})}return s})();var H=m(43818),L=m(11909),pt=m(53421);function ht(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.setConversionOfUnit(n))}),t.qZA()}}function ft(s,c){1&s&&t._UZ(0,"div",41)}function _t(s,c){1&s&&t._UZ(0,"div",42)}function gt(s,c){1&s&&t._UZ(0,"div",43)}function vt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.openConfirmModal(null==n?null:n._id,null==n?null:n.jobWorkItemCode))}),t._UZ(1,"i",45),t._uU(2," Delete "),t.qZA()}}function Ut(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t.ynx(12),t.TgZ(13,"div",25)(14,"span",26),t._uU(15),t.ALo(16,"UOMUnitsMaster"),t.qZA(),t.TgZ(17,"span",27),t.YNc(18,ht,1,0,"div",28),t.YNc(19,ft,1,0,"div",29),t.qZA()(),t.BQk(),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td")(27,"span",30),t.YNc(28,_t,1,0,"div",31),t.YNc(29,gt,1,0,"div",32),t.qZA()(),t.TgZ(30,"td")(31,"div",33),t._UZ(32,"button",34),t.TgZ(33,"div",35)(34,"a",36),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.navigateTo("../form",a,"view"))}),t._UZ(35,"i",37),t._uU(36," View "),t.qZA(),t.TgZ(37,"a",36),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.navigateTo("../form",a,"edit"))}),t._UZ(38,"i",38),t._uU(39," Edit "),t.qZA(),t.YNc(40,vt,3,0,"a",39),t.qZA()()()()}if(2&s){const e=c.$implicit,o=t.MAs(4),n=t.MAs(8),a=t.oxw();t.xp6(2),t.Oqu(null==e?null:e.jobWorkItemCode),t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",e.jobWorkItemName),t.xp6(1),t.hij(" ",e.jobWorkItemName," "),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("positionTarget",n)("ngbTooltip",e.jobWorkItemDescription),t.xp6(1),t.hij(" ",e.jobWorkItemDescription," "),t.xp6(4),t.Q6J("ngbTooltip",e.conversionOfUnits)("ngClass",e.orderInfoUOM==e.secondaryUnit?"text-primary pointer":"text-secondary pointer"),t.xp6(1),t.hij("",t.lcZ(16,24,null==e?null:e.orderInfoUOM)," "),t.xp6(3),t.Q6J("ngIf",e.primaryUnit&&e.secondaryUnit&&"-"!=e.secondaryUnit),t.xp6(1),t.Q6J("ngIf",!(e.primaryUnit&&e.secondaryUnit&&"-"!=e.secondaryUnit)),t.xp6(2),t.Oqu(null==e?null:e.HSNCode),t.xp6(2),t.Oqu(null==e?null:e.shelfLife),t.xp6(2),t.Oqu(null==e?null:e.QCLevels),t.xp6(3),t.Q6J("ngIf","Active"==e.status),t.xp6(1),t.Q6J("ngIf","Inactive"==e.status),t.xp6(5),t.Q6J("accessType",a.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",a.rolePermissionActions.editAction),t.xp6(3),t.Q6J("ngIf",a.user==a.superAdminId)}}const bt=function(s,c,e,o){return{page:s,pageSize:c,collection:e,search:o,type:"list"}};let yt=(()=>{class s{constructor(e,o,n,a,d,y,O,j,F,Dt){this.exportExcelService=e,this.router=o,this.jobWorkerItemsMasterService=n,this.spinner=a,this.activatedRoute=d,this.exportToPDFService=y,this.storageService=O,this.toastService=j,this.modalService=F,this.utilityService=Dt,this.page=1,this.pageSize=8,this.collection=0,this.search="",this.column="itemCode",this.direction=1,this.itemData=[],this.superAdminId=C.dA,this.user="",this.rolePermissionActions=C.a1}ngOnInit(){this.user=this.storageService.get("IDMSAUser")?.roles?.find(e=>e==this.superAdminId),this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(e,o,n){if("Inactive"==o.isActive&&"copy"==n)return null;this.router.navigate([e],{relativeTo:this.activatedRoute,queryParams:{id:o?._id,action:n}})}trackByFn(e,o){return o?._id}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=e.value,this.getAll()}}getAll(e=!1,o=""){this.spinner.show();let n={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:e};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.jobWorkerItemsMasterService.getAll(n).subscribe(a=>{"EXCEL"==o?this.excelDownload(a.rows):"PDF"==o?this.pdfDownload(a.rows):(this.itemData=a.rows,this.collection=a.count),this.spinner.hide()})}delete(e){this.spinner.show(),this.jobWorkerItemsMasterService.delete(e).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message),this.getAll()})}openConfirmModal(e,o){const n=this.modalService.open(k.hn,{centered:!0,size:"md",backdrop:"static",keyboard:!1});n.componentInstance.heading="Confirm Deletion",n.componentInstance.confirmText=`Confirm Deletion of Job Worker Item Code ${o} ?`,n.result.then(a=>{"Yes"==a.title&&this.delete(e)},a=>{})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}excelDownload(e){this.exportExcelService.exportExcel((0,L.jV)(e))}pdfDownload(e){let o=(0,L.i$)(e);this.exportToPDFService.generatePdf(o.tableData,o.title)}onSort({column:e,direction:o}){this.headers.forEach(n=>{n.sortable!==e&&(n.direction="")}),this.column=e,this.direction="asc"==o?1:-1,this.getAll()}setConversionOfUnit(e){return e.orderInfoUOM=e.orderInfoUOM==e.secondaryUnit?e.primaryUnit:e.secondaryUnit,e}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(v.Ol),t.Y36(i.F0),t.Y36(P),t.Y36(v.V),t.Y36(i.gz),t.Y36(v.$L),t.Y36(v.V1),t.Y36(v.kl),t.Y36(b.FF),t.Y36(v.tI))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-job-worker-item-master-list"]],viewQuery:function(o,n){if(1&o&&t.Gf(H.j,5),2&o){let a;t.iGM(a=t.CRH())&&(n.headers=a)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],["type","button",1,"btn","btn-primary","btn-add",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square","fa-lg","me-2"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","jobWorkItemCode",3,"sort"],["sortable","jobWorkItemName",1,"text-start",3,"sort"],["sortable","jobWorkItemDescription",1,"text-start",3,"sort"],["sortable","orderInfoUOM",3,"sort"],["sortable","HSNCode",3,"sort"],["sortable","shelfLife",3,"sort"],["sortable","QCLevels",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["jobWorkItemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["jobWorkItemDescription",""],[1,"d-flex","justify-content-between","px-2"],["placement","top",3,"ngbTooltip","ngClass"],[1,"pointer","d-flex","align-items-center"],["class","unit-switch-rev",3,"click",4,"ngIf"],["class","unit-switch-gray",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"unit-switch-rev",3,"click"],[1,"unit-switch-gray"],[1,"statusActive"],[1,"statusInActive"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-primary"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Job Work Item Master Summary"),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.navigateTo("../form",{},"create")}),t._UZ(6,"i",5),t._uU(7," Job Work Item "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(d){return n.eventHeader(d)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(15,"Job Work Item Code"),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(17,"Job Work Item Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(19," Job Work Item Description "),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(23,"HSN Code"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(25,"Shelf Life (Mo)"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(27,"QC Level"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(d){return n.onSort(d)}),t._uU(29,"Status"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,Ut,41,26,"tr",20),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("accessType",n.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,bt,n.page,n.pageSize,n.collection,n.search)),t.xp6(23),t.Q6J("ngForOf",n.itemData)("ngForTrackBy",n.trackByFn))},dependencies:[g.mk,g.sg,g.O5,A.P,b._L,H.j,pt.J,Z.S],encapsulation:2})}return s})();var V=m(19964),Ct=m(56208);const Zt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:yt},{path:"form",component:mt,resolve:{accessScreen:V.xr},canDeactivate:[V.Ox]}];let Tt=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[g.ez,i.Bz.forChild(Zt),Ct.m]})}return s})()}}]);