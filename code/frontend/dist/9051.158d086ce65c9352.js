"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9051],{9202:(P,D,u)=>{u.d(D,{K:()=>m});var y=u(43818),e=u(65879),I=u(37285),U=u(96814),k=u(88059),t=u(95346);function S(h,a){if(1&h){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",24,25)(5,"span",26),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"input",27),e.NdJ("change",function(){const _=e.CHM(s).$implicit,f=e.oxw();return e.KtG(f.setSelectData(_))}),e.qZA()()()}if(2&h){const s=a.$implicit,g=a.index,d=e.MAs(4),_=e.oxw();e.xp6(2),e.Oqu(null==s?null:s.value),e.xp6(1),e.Udp("width",d.clientWidth),e.xp6(2),e.Q6J("positionTarget",d)("ngbTooltip",s.goodsDescription),e.xp6(1),e.hij(" ",null==s?null:s.goodsDescription," "),e.xp6(2),e.Oqu(null==s?null:s.gstRate),e.xp6(2),e.Oqu(null==s?null:s.igstRate),e.xp6(2),e.Oqu(null==s?null:s.cgstRate),e.xp6(2),e.Oqu(null==s?null:s.sgstRate),e.xp6(2),e.MGl("name","formValue",_.HSNCodeArr[g],""),e.Q6J("disabled","view"==_.action)("checked",s.select)}}function N(h,a){1&h&&e._UZ(0,"hr",32)}function M(h,a){if(1&h){const s=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(s);const d=e.oxw(2);return e.KtG(d.dismissModel())}),e._uU(2," Save & Close "),e.qZA()()}}const A=function(){return["create"]};function x(h,a){if(1&h&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,N,1,0,"hr",30),e.qZA()(),e.YNc(4,M,3,0,"div",31),e.BQk()),2&h){const s=e.oxw();e.xp6(3),e.Q6J("ngIf",e.DdM(2,A).includes(s.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,A).includes(s.action))}}function w(h,a){1&h&&e._UZ(0,"hr",32)}function b(h,a){if(1&h){const s=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(s);const d=e.oxw(2);return e.KtG(d.dismissModel())}),e._uU(2," Save & Close "),e.qZA()()}}const T=function(){return["view"]};function p(h,a){if(1&h&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,w,1,0,"hr",30),e.qZA()(),e.YNc(4,b,3,0,"div",31),e.BQk()),2&h){const s=e.oxw();e.xp6(3),e.Q6J("ngIf",!e.DdM(2,T).includes(s.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(3,T).includes(s.action))}}const C=function(h,a,s,g){return{page:h,pageSize:a,collection:s,search:g,excelDisplay:"none"}};let m=(()=>{class h{constructor(s){this.activeModal=s,this.action="edit",this.HSNValue="",this.HSNCode="",this.editScreen="",this.HSNCodeArr=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.HSNSelect=null,this.HSNSelectCode=null}ngOnInit(){(this.HSNValue||this.HSNCode)&&(this.HSNSelect=this.HSNValue,this.HSNSelectCode=this.HSNCode,this.HSNCodeArr=this.HSNCodeArr.map(s=>(s.select=!1,s.value==this.HSNCode&&(s.select=!0),s))),this.collection=this.HSNCodeArr.length}setSelectData(s){this.HSNSelect=s?._id,this.HSNSelectCode=s?.value}dismissModel(){let s={};s.HSNSelect=this.HSNSelect,s.HSNSelectCode=this.HSNSelectCode,this.activeModal.close(s)}eventHeader(s){switch(s.key){case"SEARCH":this.search=s.value;break;case"EXCEL":default:break;case"PAGE":this.page=s.value}}onSort({column:s,direction:g}){this.headers.forEach(d=>{d.sortable!==s&&(d.direction="")}),this.HSNCodeArr=""===g||""===s?this.HSNCodeArr:[...this.HSNCodeArr].sort((d,_)=>{let f="string"==typeof d[s]?d[s].toLowerCase():d[s],K="string"==typeof _[s]?_[s].toLowerCase():_[s];const q=f<K?-1:f>K?1:0;return"asc"===g?q:-q})}static#t=this.\u0275fac=function(g){return new(g||h)(e.Y36(I.Kz))};static#e=this.\u0275cmp=e.Xpm({type:h,selectors:[["app-ink-hsn-modal"]],viewQuery:function(g,d){if(1&g&&e.Gf(y.j,5),2&g){let _;e.iGM(_=e.CRH())&&(d.headers=_)}},inputs:{action:"action",HSNValue:"HSNValue",HSNCode:"HSNCode",editScreen:"editScreen",HSNCodeArr:"HSNCodeArr"},decls:37,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","value",3,"sort"],["sortable","goodsDescription",1,"text-start",3,"sort"],["sortable","gstRate",3,"sort"],["sortable","igstRate",3,"sort"],["sortable","cgstRate",3,"sort"],["sortable","sgstRate",3,"sort"],["sortable","UOM",3,"sort"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-start"],["goodsDescription",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(g,d){1&g&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"HSN Master"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return d.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(f){return d.eventHeader(f)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th",15),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(18,"HSN Code"),e.qZA(),e.TgZ(19,"th",16),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(20," Description of Goods "),e.qZA(),e.TgZ(21,"th",17),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(22,"GST Rate %"),e.qZA(),e.TgZ(23,"th",18),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(24,"IGST Rate %"),e.qZA(),e.TgZ(25,"th",19),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(26,"CGST Rate %"),e.qZA(),e.TgZ(27,"th",20),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(28,"SGST Rate %"),e.qZA(),e.TgZ(29,"th",21),e.NdJ("sort",function(f){return d.onSort(f)}),e._uU(30,"Select"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,S,17,13,"tr",22),e.ALo(33,"slice"),e.ALo(34,"searchFi1ter"),e.qZA()()()()(),e.YNc(35,x,5,4,"ng-container",23),e.YNc(36,p,5,4,"ng-container",23),e.qZA()()()),2&g&&(e.xp6(12),e.Q6J("data",e.l5B(11,C,d.page,d.pageSize,d.collection,d.search)),e.xp6(20),e.Q6J("ngForOf",e.Dn7(33,4,e.xi3(34,8,d.HSNCodeArr,d.search),(d.page-1)*d.pageSize,(d.page-1)*d.pageSize+d.pageSize)),e.xp6(3),e.Q6J("ngIf","Edit Screen"!=d.editScreen),e.xp6(1),e.Q6J("ngIf","Edit Screen"==d.editScreen))},dependencies:[U.sg,U.O5,k.P,I._L,y.j,U.OU,t.G],encapsulation:2})}return h})()},6244:(P,D,u)=>{u.d(D,{Z:()=>w});var y=u(43818),e=u(65879),I=u(37285),U=u(96814),k=u(88059),t=u(95346);const S=function(){return["view","edit"]};function N(b,T){if(1&b){const p=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",24)(8,"span",25),e._uU(9),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"input",26),e.NdJ("change",function(){const h=e.CHM(p).$implicit,a=e.oxw();return e.KtG(a.setSelectData(h))}),e.qZA()()()}if(2&b){const p=T.$implicit,C=T.index,m=e.oxw();e.xp6(2),e.Oqu(1+C+(m.page-1)*m.pageSize),e.xp6(2),e.Oqu(null==p?null:p.productNumber),e.xp6(2),e.Oqu(null==p?null:p.productCode),e.xp6(2),e.Q6J("ngbTooltip",null==p?null:p.label),e.xp6(1),e.hij(" ",null!=p&&p.label?null==p?null:p.label:null," "),e.xp6(2),e.Oqu(null==p?null:p.application),e.xp6(2),e.MGl("name","formValue",m.productCategoryList[C],""),e.Q6J("disabled",e.DdM(9,S).includes(m.action))("checked",p.select)}}function M(b,T){1&b&&e._UZ(0,"hr",27)}function A(b,T){if(1&b){const p=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.dismissModel())}),e._uU(2,"Save & Close"),e.qZA()()}}const x=function(b,T,p,C){return{page:b,pageSize:T,collection:p,search:C,excelDisplay:"none"}};let w=(()=>{class b{constructor(p){this.activeModal=p,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(p=>(p.select=!1,p.value==this.productCategory&&(p.select=!0),p))),this.collection=this.productCategoryList.length}setSelectData(p){this.selectedProductCategory=p?.value}dismissModel(){let p={};p.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(p)}eventHeader(p){switch(p.key){case"SEARCH":this.search=p.value;break;case"EXCEL":default:break;case"PAGE":this.page=p.value}}onSort({column:p,direction:C}){this.headers.forEach(m=>{m.sortable!==p&&(m.direction="")}),this.productCategoryList=""===C||""===p?this.productCategoryList:[...this.productCategoryList].sort((m,h)=>{let a="string"==typeof m[p]?m[p].toLowerCase():m[p],s="string"==typeof h[p]?h[p].toLowerCase():h[p];const g=a<s?-1:a>s?1:0;return"asc"===C?g:-g})}static#t=this.\u0275fac=function(C){return new(C||b)(e.Y36(I.Kz))};static#e=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-product-category-modal"]],viewQuery:function(C,m){if(1&C&&e.Gf(y.j,5),2&C){let h;e.iGM(h=e.CRH())&&(m.headers=h)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(C,m){1&C&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Product Category"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return m.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(a){return m.eventHeader(a)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),e._uU(18,"Sr. No."),e.qZA(),e.TgZ(19,"th",15),e.NdJ("sort",function(a){return m.onSort(a)}),e._uU(20,"Product No."),e.qZA(),e.TgZ(21,"th",16),e.NdJ("sort",function(a){return m.onSort(a)}),e._uU(22,"Product Code"),e.qZA(),e.TgZ(23,"th",17),e.NdJ("sort",function(a){return m.onSort(a)}),e._uU(24," Display Name "),e.qZA(),e.TgZ(25,"th",18),e.NdJ("sort",function(a){return m.onSort(a)}),e._uU(26,"Application"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Select"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,N,14,10,"tr",19),e.ALo(31,"slice"),e.ALo(32,"searchFi1ter"),e.qZA()()()()(),e.TgZ(33,"div",20)(34,"div",21),e.YNc(35,M,1,0,"hr",22),e.qZA()(),e.YNc(36,A,3,0,"div",23),e.qZA()()()),2&C&&(e.xp6(12),e.Q6J("data",e.l5B(11,x,m.page,m.pageSize,m.collection,m.search)),e.xp6(18),e.Q6J("ngForOf",e.Dn7(31,4,e.xi3(32,8,m.productCategoryList,m.search),(m.page-1)*m.pageSize,(m.page-1)*m.pageSize+m.pageSize)),e.xp6(5),e.Q6J("ngIf",!e.DdM(16,S).includes(m.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(17,S).includes(m.action)))},dependencies:[U.sg,U.O5,k.P,I._L,y.j,U.OU,t.G],encapsulation:2})}return b})()},59051:(P,D,u)=>{u.r(D),u.d(D,{SKUModule:()=>rt});var y=u(96814),e=u(1076),I=u(43818),U=u(25116),k=u(66558),t=u(65879),S=u(98977),N=u(59840),M=u(88059),A=u(37285),x=u(53421),w=u(14906),b=u(84231);function T(l,v){1&l&&t._UZ(0,"div",36)}function p(l,v){1&l&&t._UZ(0,"div",37)}function C(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",22,23)(5,"span",24),t._uU(6),t.qZA()(),t.TgZ(7,"td",22,15)(9,"span",24),t._uU(10),t.qZA()(),t.TgZ(11,"td",22,25)(13,"span",24),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td")(23,"span",26),t.YNc(24,T,1,0,"div",27),t.YNc(25,p,1,0,"div",28),t.qZA()(),t.TgZ(26,"td")(27,"div",29),t._UZ(28,"button",30),t.TgZ(29,"div",31)(30,"a",32),t.NdJ("click",function(){const r=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.navigateTo("../form",r,"view"))}),t._UZ(31,"i",33),t._uU(32," View "),t.qZA(),t.TgZ(33,"a",32),t.NdJ("click",function(){const r=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.navigateTo("../form",r,"edit"))}),t._UZ(34,"i",34),t._uU(35," Edit "),t.qZA(),t.TgZ(36,"a",32),t.NdJ("click",function(){const r=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.navigateTo("../form",r,"copy"))}),t._UZ(37,"i",35),t._uU(38," Copy "),t.qZA()()()()()}if(2&l){const n=v.$implicit,i=t.MAs(4),o=t.MAs(8),r=t.MAs(12),c=t.oxw();t.xp6(2),t.Oqu(null==n?null:n.SKUNo),t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",n.SKUName),t.xp6(1),t.hij(" ",n.SKUName," "),t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",n.SKUDescription),t.xp6(1),t.hij(" ",n.SKUDescription," "),t.xp6(1),t.Udp("width",r.clientWidth),t.xp6(2),t.Q6J("positionTarget",r)("ngbTooltip",n.productCategory),t.xp6(1),t.hij(" ",n.productCategory," "),t.xp6(2),t.Oqu(null==n?null:n.hsn),t.xp6(2),t.Oqu(t.lcZ(19,26,null==n?null:n.primaryUnit)),t.xp6(3),t.Oqu(n.SKUStage),t.xp6(3),t.Q6J("ngIf","A"==n.isActive),t.xp6(1),t.Q6J("ngIf","I"==n.isActive),t.xp6(5),t.Q6J("accessType",c.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",c.rolePermissionActions.editAction),t.xp6(3),t.ekj("disable","I"==n.isActive),t.Q6J("accessType",c.rolePermissionActions.editAction)}}const m=function(l,v,n,i){return{page:l,pageSize:v,collection:n,search:i,type:"list"}};let h=(()=>{class l{constructor(n,i,o,r,c,Z){this.exportExcelService=n,this.SKUServices=i,this.router=o,this.spinner=r,this.activatedRoute=c,this.exportToPDFService=Z,this.page=1,this.pageSize=8,this.collection=0,this.column="SKUNo",this.direction=-1,this.search="",this.tableData=[],this.originTableData=[],this.imgIcon=!1,this.rolePermissionActions=U.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(n,i,o){if("I"==i.isActive&&"copy"==o)return null;this.router.navigate([n],{relativeTo:this.activatedRoute,queryParams:{id:i?._id,action:o}})}trackByFn(n,i){return i?._id}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=n.value,this.getAll()}}getAll(n=!1,i=""){this.spinner.show();let o={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:n};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.SKUServices.getAll(o).subscribe(r=>{"EXCEL"==i?this.excelDownload(r.rows):"PDF"==i?this.pdfDownload(r.rows):(this.tableData=r.rows,this.collection=r.count,this.spinner.hide())})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(n){let i=(0,k.p9)(n);this.exportToPDFService.generatePdf(i.tableData,i.title)}excelDownload(n){this.exportExcelService.exportExcel((0,k.JL)(n))}onSort({column:n,direction:i}){this.headers.forEach(o=>{o.sortable!==n&&(o.direction="")}),this.column=n,this.direction="asc"==i?1:-1,this.getAll()}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(S.Ol),t.Y36(N.cG),t.Y36(e.F0),t.Y36(S.V),t.Y36(e.gz),t.Y36(S.$L))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-list"]],viewQuery:function(i,o){if(1&i&&t.Gf(I.j,5),2&i){let r;t.iGM(r=t.CRH())&&(o.headers=r)}},decls:37,vars:17,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-5",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["SKUDescription",""],["sortable","productCategory",1,"text-start",3,"sort"],["sortable","hsn",3,"sort"],["sortable","primaryUnit",3,"sort"],["sortable","SKUStage",3,"sort"],["sortable","isActive",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["productCategory",""],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-clone","fa-lg","me-2","text-primary"],[1,"statusActive"],[1,"statusInActive"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"SKU Summary"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.navigateTo("../form",{},"create")}),t._uU(7," SKU "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(c){return o.eventHeader(c)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(17),t.ALo(18,"labelTranslate"),t.qZA(),t.TgZ(19,"th",14,15),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(21),t.ALo(22,"labelTranslate"),t.qZA(),t.TgZ(23,"th",16),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(24,"Product"),t.qZA(),t.TgZ(25,"th",17),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(26,"HSN Code"),t.qZA(),t.TgZ(27,"th",18),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(28,"UoM"),t.qZA(),t.TgZ(29,"th",19),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(30,"Stage"),t.qZA(),t.TgZ(31,"th",20),t.NdJ("sort",function(c){return o.onSort(c)}),t._uU(32,"Status"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,C,39,28,"tr",21),t.qZA()()()()),2&i){const r=t.MAs(20);t.xp6(4),t.Q6J("accessType",o.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(12,m,o.page,o.pageSize,o.collection,o.search)),t.xp6(7),t.hij(" ",t.lcZ(18,8,"SKU Name")," "),t.xp6(2),t.Udp("width",r.clientWidth),t.xp6(2),t.hij(" ",t.lcZ(22,10,"SKU Description")," "),t.xp6(15),t.Q6J("ngForOf",o.tableData)("ngForTrackBy",o.trackByFn)}},dependencies:[y.sg,y.O5,M.P,A._L,I.j,x.J,w.c,b.Q],encapsulation:2})}return l})();var a=u(60095),s=u(21631),g=u(22096),d=u(77609),_=u(4092),f=u(82108),K=u(9202),q=u(6244);const H=[{value:"productMasterNo",label:"Product Code",class:"text-start"},{value:"productCategory",label:"Product Category",class:"text-start"},{value:"shoulderType",label:"Shoulder",class:""},{value:"capDia",label:"Diameter mm",class:""},{value:"capHeight",label:"Height mm",class:""},{value:"capFinish",label:"Finish",class:""},{value:"threadType",label:"Thread",class:""},{value:"orifice",label:"Orifice mm",class:""},{value:"weight",label:"Weight g",class:""}];var O=u(16897),J=u(50363),L=u(95346);function F(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"tr")(1,"td",33,39)(3,"span",40),t._uU(4),t.qZA()(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",41),t._UZ(15,"button",42),t.TgZ(16,"div",43)(17,"a",44),t.NdJ("click",function(){const o=t.CHM(n),r=o.$implicit,c=o.index,Z=t.oxw();return t.KtG(Z.patchItem(r,c,"view"))}),t._UZ(18,"i",45),t._uU(19," View "),t.qZA(),t.TgZ(20,"a",44),t.NdJ("click",function(){const o=t.CHM(n),r=o.$implicit,c=o.index,Z=t.oxw();return t.KtG(Z.patchItem(r,c,"edit"))}),t._UZ(21,"i",46),t._uU(22," Edit "),t.qZA(),t.TgZ(23,"a",44),t.NdJ("click",function(){const r=t.CHM(n).index,c=t.oxw();return t.KtG(c.deleteItem(r))}),t._UZ(24,"i",47),t._uU(25," Delete "),t.qZA()()()()()}if(2&l){const n=v.$implicit,i=t.MAs(2),o=t.oxw();t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",n.customerName),t.xp6(1),t.hij(" ",null==n?null:n.customerName," "),t.xp6(2),t.Oqu(null==n?null:n.customerPartDescription),t.xp6(2),t.Oqu(null==n?null:n.customerPartNo),t.xp6(2),t.Oqu(null==n?null:n.customerCurrency),t.xp6(2),t.Oqu(null==n?null:n.standardSellingRate),t.xp6(11),t.ekj("disable","view"==o.action)}}const E=function(l,v,n,i){return{page:l,pageSize:v,collection:n,search:i,excelDisplay:"none"}};let Q=(()=>{class l{constructor(n,i,o,r){this.activeModal=n,this.validationService=i,this.toastService=o,this.modalService=r,this.action="",this.customerInfoArray=[],this.cusInfo=[],this.btnDisable=!1,this.page=1,this.pageSize=6,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedCustomerDetails={},this.form=new a.nJ({index:new a.p4(-1),customerName:new a.p4(null,[a.kI.required]),customer:new a.p4(null),customerPartDescription:new a.p4(null,[a.kI.required]),customerPartNo:new a.p4(null,[a.kI.required]),customerCurrency:new a.p4({value:null,disabled:!0}),standardSellingRate:new a.p4(null)}),this.findFormErrors=[{message:"Customer Name",key:"customerName"},{message:"Customer Part Description.",key:"customerPartDescription"},{message:"Customer Part No.",key:"customerPartNo"}]}ngOnInit(){this.collection=this.customerInfoArray.length}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}addCustomer(){if(this.validationService.checkErrors(this.form,this.findFormErrors))return;this.form.controls.customerCurrency.enable();let n=this.form.value;if(!n.standardSellingRate)return this.toastService.warning("Rate/U1 is required !"),void this.form.controls.customerCurrency.disable();(n.index||0==n.index)&&n.index>=0?this.customerInfoArray.splice(n.index,1,n):this.customerInfoArray.push(n),this.collection=this.customerInfoArray.length,this.selectedCustomerDetails={},this.form.reset(),this.form.controls.customerCurrency.disable()}patchItem(n,i,o){n.index=i,this.form.patchValue(n),"view"==o?(this.btnDisable=!0,this.form.disable()):(this.form.enable(),this.btnDisable=!1,this.form.controls.customerCurrency.disable())}deleteItem(n){"view"!=this.action&&(this.customerInfoArray.splice(n+(this.page-1)*this.pageSize,1),this.collection=this.customerInfoArray.length)}setSupplierCurrency(n){n.currency&&this.form.controls.customerCurrency.setValue(n?.currency),n.label&&this.form.controls.customerName.setValue(n?.label)}openCustomersDetailsModal(){const n=this.modalService.open(d.e7,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action="edit"==this.action?"create":this.action,n.componentInstance.selectedCustomerDetails=this.selectedCustomerDetails,n.componentInstance.customerOptions=this.cusInfo,n.componentInstance.customer=this.form.controls.customer.value,n.result.then(i=>{i&&(this.selectedCustomerDetails=i?.selectedCustomerDetails,this.form.controls.customer.setValue(i?.selectedCustomerDetails?._id),this.setSupplierCurrency(this.selectedCustomerDetails))},i=>{})}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(A.Kz),t.Y36(O.RJ),t.Y36(S.kl),t.Y36(A.FF))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-customer-injection-molding"]],inputs:{action:"action",customerInfoArray:"customerInfoArray",cusInfo:"cusInfo"},decls:77,vars:19,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[3,"formGroup"],[1,"row","mb-4","px-5","mt-4"],[1,"col-3","pe-5"],[1,"form-label","mb-1"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","customer",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-md-3"],["type","text","formControlName","customerPartDescription",1,"form-control"],["type","text","formControlName","customerPartNo",1,"form-control"],[1,"row"],[1,"col-4","pe-0"],["type","text","formControlName","customerCurrency","readonly","",1,"form-control"],[1,"col-5","ps-2","pe-0"],["type","text","formControlName","standardSellingRate",1,"form-control"],[1,"col-2","d-flex","align-items-end"],["type","button",1,"plusIconSvg","btn","btn-primary",3,"disabled","click"],[1,"line-border","mt-4","px-0","mb-0"],[1,"px-5"],[3,"data","dataChange"],[1,"table-responsive","mt-0","px-5",2,"min-height","23.5rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"line-border","mt-3","px-5"],[1,"col"],[1,"text-center","mt-3","mb-4"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],["customerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-trash","me-2","text-primary"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Add Customers"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return o.activeModal.close(o.customerInfoArray)}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),t._uU(12,"Customer Name "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("change",function(c){return o.setSupplierCurrency(c)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return o.openCustomersDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",9),t._uU(22," Customer Part Description "),t.TgZ(23,"span",10),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",17),t.qZA(),t.TgZ(26,"div",16)(27,"label",9),t._uU(28," Customer Part No. "),t.TgZ(29,"span",10),t._uU(30,"*"),t.qZA()(),t._UZ(31,"input",18),t.qZA(),t.TgZ(32,"div",16)(33,"div",19)(34,"div",20)(35,"label",9),t._uU(36," Ccy "),t.TgZ(37,"span",10),t._uU(38,"*"),t.qZA()(),t._UZ(39,"input",21),t.qZA(),t.TgZ(40,"div",22)(41,"label",9),t._uU(42," Rate/U1 "),t.TgZ(43,"span",10),t._uU(44,"*"),t.qZA()(),t._UZ(45,"input",23),t.qZA(),t.TgZ(46,"div",24)(47,"button",25),t.NdJ("click",function(){return o.addCustomer()}),t.qZA()()()()()(),t._UZ(48,"hr",26),t.TgZ(49,"div",27)(50,"app-setting-header",28),t.NdJ("dataChange",function(c){return o.eventHeader(c)}),t.qZA()(),t.TgZ(51,"div",29)(52,"table",30)(53,"thead",31)(54,"tr",32)(55,"th",33),t._uU(56,"Customer Name"),t.qZA(),t.TgZ(57,"th",33),t._uU(58,"Customer Part Description"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Customer Part No."),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Ccy"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Rate/U1"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Action"),t.qZA()()(),t.TgZ(67,"tbody"),t.YNc(68,F,26,11,"tr",34),t.ALo(69,"slice"),t.ALo(70,"searchFi1ter"),t.qZA()()(),t._UZ(71,"hr",35),t.TgZ(72,"div",19)(73,"div",36)(74,"div",37)(75,"button",38),t.NdJ("click",function(){return o.activeModal.close(o.customerInfoArray)}),t._uU(76," Save & Close "),t.qZA()()()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",o.form),t.xp6(9),t.Q6J("items",o.cusInfo)("clearable",!1),t.xp6(30),t.Q6J("disabled",o.btnDisable||"view"==o.action),t.xp6(3),t.Q6J("data",t.l5B(14,E,o.page,o.pageSize,o.collection,o.search)),t.xp6(18),t.Q6J("ngForOf",t.Dn7(69,7,t.xi3(70,11,o.customerInfoArray,o.search),(o.page-1)*o.pageSize,(o.page-1)*o.pageSize+o.pageSize)),t.xp6(7),t.Q6J("disabled",o.btnDisable||"view"==o.action))},dependencies:[y.sg,M.P,A._L,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,J.w9,y.OU,L.G],encapsulation:2})}return l})();function j(l,v){if(1&l&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&l){const n=v.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function V(l,v){1&l&&(t.TgZ(0,"div",6)(1,"label",7),t._uU(2),t.ALo(3,"labelTranslate"),t.TgZ(4,"span",8),t._uU(5,"*"),t.qZA()(),t._UZ(6,"input",53),t.qZA()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SKU Name"),""))}function R(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"div",12)(1,"label",7),t._uU(2," SKU Name/Product Code "),t.TgZ(3,"span",8),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"div",13)(6,"div",14),t._UZ(7,"input",53),t.qZA(),t.TgZ(8,"div",16),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openSKUNameModal())}),t._UZ(9,"i",17),t.qZA()()()}}function Y(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"label",54),t._uU(1," Unit of Measurement"),t.TgZ(2,"span",8),t._uU(3,"*"),t.qZA(),t._UZ(4,"span")(5,"span")(6,"span")(7,"span")(8,"span"),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openUOMDetailsModal())}),t._uU(10," Dual Units "),t.qZA()()}}function G(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"label",54),t._uU(1," Primary UoM (U1)"),t.TgZ(2,"span",8),t._uU(3,"*"),t.qZA(),t._UZ(4,"span")(5,"span")(6,"span")(7,"span")(8,"span"),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openUOMDetailsModal())}),t._uU(10," Dual Units "),t.qZA()()}}function z(l,v){if(1&l&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&l){const n=v.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",null==n?null:n.label," ")}}function W(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openCustomerDetailsModel())}),t._uU(1," Customers "),t.qZA()}}function B(l,v){if(1&l){const n=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openInjectionMoldingCustomerDetailsModel())}),t._uU(1," Customers "),t.qZA()}}function X(l,v){1&l&&t._UZ(0,"div",57)}function $(l,v){1&l&&t._UZ(0,"div",58)}function tt(l,v){1&l&&(t.TgZ(0,"div",59)(1,"div",13)(2,"div",39)(3,"button",40),t._uU(4,"Remarks"),t.qZA()(),t._UZ(5,"input",60),t.qZA()())}let et=(()=>{class l{get f(){return this.form.controls}get addressPermanent(){return this.form.get("empPermanentAddress")}get addressPresent(){return this.form.get("empPresentAddress")}get dimensionsDetailsData(){return this.form.get("dimensionsDetails")}get bomDimData(){return this.form.get("BOMDimensionInfo")}get offTakeData(){return this.form.get("offTakeInfo")}get toolInfoData(){return this.form.get("toolInfo")}get specsAttributeData(){return this.form.get("specsAttribute")}get mouldsIDAttributeData(){return this.form.get("mouldsIDAttribute")}get packingStdAttributeData(){return this.form.get("packingStdAttribute")}constructor(n,i,o,r,c,Z,st,lt,ct){this.skuService=n,this.activatedRoute=i,this.spinner=o,this.toastService=r,this.validationService=c,this.modalService=Z,this.utilityService=st,this.location=lt,this.appGlobalService=ct,this.unsavedChanges=!1,this.active=1,this.submitted=!1,this.action="create",this.tableData=[],this.mouldData=[],this.customerInfoArray=[],this.photoFile=null,this.companyTypeInjectionMolding=U.x3,this.SKUCategoryValues={},this.selectedDetails={},this.UOMDefaultValueOptions=[],this.tableHead=H,this.SKUStageObj=U.mR,this.salesUOMUintMasterOptions=[],this.SKUStageArr=this.SKUStageObj.getAllSKUStage(),this.masterData={companyType:"",attributesList:[],customersOptions:[],productCategoryOptions:[],UOMOptions:[],materialList:[],inkList:[],hsnCodesOptions:[],mapHSNCategoryList:[],WXLDimensionsUnit:[],mouldInfo:[],shoulderTypeOptions:[]},this.form=new a.nJ({_id:new a.p4(null),SKUStage:new a.p4(null,[a.kI.required]),productCategory:new a.p4(null,[a.kI.required]),SKUNo:new a.p4(null,[a.kI.required]),productCode:new a.p4(null),SKUName:new a.p4(null,[a.kI.required]),SKUDescription:new a.p4(null,[a.kI.required]),hsn:new a.p4(null,[a.kI.required]),primaryUnit:new a.p4(null,[a.kI.required]),secondaryUnit:new a.p4(null),primaryConversion:new a.p4(1),secondaryConversion:new a.p4(1),conversionFactor:new a.p4(null),unitConversionFlag:new a.p4(1),primaryToSecondaryConversion:new a.p4(null),secondaryToPrimaryConversion:new a.p4(null),locationId:new a.p4(null),locationName:new a.p4(null),internalPartNo:new a.p4(null),artWorkNo:new a.p4(null),artWorkHyperLink:new a.p4(null),shelfLife:new a.p4(null),storageTemp:new a.p4(null),storageHumidity:new a.p4(null),specialStorageInstruction:new a.p4(null),generalSpecifications:new a.p4(null),inkDetails:new a.p4([]),specificationInfo:new a.p4([]),totalNoOfColors:new a.p4(null),remarks:new a.p4(null),isActive:new a.p4("A"),customerInfo:new a.p4([]),BOMDimensionInfo:new a.nJ({unit1:new a.p4("mm"),unit2:new a.p4("mm"),width:new a.p4(null),length:new a.p4(null),mSqArea:new a.p4(null)}),dimensionsDetails:new a.nJ({actualDimensions:new a.nJ({unit:new a.p4("mm"),width:new a.p4(null),length:new a.p4(null),ups:new a.p4(1),area:new a.p4(null),mSqArea:new a.p4(null)}),layoutDimensions:new a.nJ({unit:new a.p4("mm"),width:new a.p4(null),length:new a.p4(null),ups:new a.p4(null),area:new a.p4(null),mSqArea:new a.p4(null),wastePercentage:new a.p4(null)})}),offTakeInfo:new a.nJ({annualOffTake:new a.p4(0),offTakeFrequency:new a.p4(0),avgMonthlyOffTake:new a.p4(0),proposedBatchQty:new a.p4(0),processCAQty:new a.p4(0),toolingCAQty:new a.p4(0)}),toolInfo:new a.nJ({tool1Id:new a.p4(null),tool2Id:new a.p4(null),tool3Id:new a.p4(null)}),specsAttribute:new a.nJ({diameter:new a.p4(null),height:new a.p4(null),finish:new a.p4(null),shoulderType:new a.p4(null),threadType:new a.p4(null),orifice:new a.p4(null),weight:new a.p4(null),placeHolder:new a.p4(null)}),mouldsIDAttribute:new a.p4([]),packingStdAttribute:new a.nJ({primaryPacking:new a.p4(null),secondaryPacking:new a.p4(null)}),materialInfo:new a.p4([]),costSheetInfo:new a.p4([])})}ngOnInit(){if(this.salesUOMUintMasterOptions=this.appGlobalService.salesUOMUintMasterOptions,this.getInitialData(),this.form.valueChanges.subscribe(n=>{this.unsavedChanges=!0}),this.UOMDefaultValueOptions=this.appGlobalService?.UOMDefaultValueOptions,this.UOMDefaultValueOptions?.length>0){if(!this.f.primaryUnit.value){let n=null;n=this.findValue(this.UOMDefaultValueOptions,"SALES_UOM"),this.f.primaryUnit.setValue(n)}if(!this.f.secondaryUnit.value){let n=null;n=this.findValue(this.UOMDefaultValueOptions,"SALES_SECONDARY_UNIT"),this.f.secondaryUnit.setValue(n)}}}findValue(n,i){return n?.find(o=>o?.parameterLabel==i)?.parameterName}canDeactivate(){return!this.unsavedChanges||this.openCanDeactivateModal()}openCanDeactivateModal(){return new Promise((n,i)=>{const o=this.modalService.open(d.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});o.componentInstance.action=this.action,o.componentInstance.heading="Warning Message",o.componentInstance.cancelText="Do you want to leave this page without saving data ?",o.result.then(r=>{n("Yes"==r)},r=>{})})}reset(){this.form.reset(),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,_.Sy))return;if(0==this.customerInfoArray.length)return void this.toastService.warning("Please add atleast one customer detail !");let n=this.form.value;"copy"==this.action&&delete n._id,n.customerInfo=this.customerInfoArray,n.inkDetails=this.masterData?.inkList.filter(o=>o.colSeq>0),n.materialInfo=this.masterData?.materialList.filter(o=>1==o.isSelect).map(o=>(o.ups=this.dimensionsDetailsData?.value?.layoutDimensions?.ups,o));let i=new FormData;i.append("key","Sku");for(let o=0;o<Object.keys(n).length;o++){const r=Object.keys(n)[o];n[r]&&"object"==typeof n[r]?n[r]&&i.append(r,JSON.stringify(n[r])):n[r]&&i.append(r,n[r])}this.unsavedChanges=!1,n._id?this.update(n._id,i):(delete n._id,this.create(i))}create(n){this.spinner.show(),this.skuService.create(n).subscribe(i=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(i.message),this.location.back()})}update(n,i){this.spinner.show(),this.skuService.update(n,i).subscribe(o=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(o.message),this.location.back()})}setAutoIncrementNo(n){this.form.controls.SKUNo.setValue(this.SKUCategoryValues[n.value]),this.masterData?.mapHSNCategoryList.length>0&&this.form.controls.hsn.setValue(this.masterData?.mapHSNCategoryList.find(i=>i.productCategory==n.value)?.HSNCode??null),this.getMouldDataBySKUId(n.value)}getInitialData(){this.spinner.show(),this.skuService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.form.controls.isActive.setValue("A"),this.form.controls.unitConversionFlag.setValue(1),this.form.controls.primaryConversion.setValue(1),this.form.controls.secondaryConversion.setValue(1),this.SKUCategoryValues=n?.autoIncValues,this.activatedRoute.queryParams.pipe((0,s.z)(i=>(this.action=i.action,this.utilityService.accessDenied(this.action),i.id?this.skuService.getById(i.id):(0,g.of)({})))).subscribe(i=>{if(this.spinner.hide(),0==Object.keys(i).length)return void(this.unsavedChanges=!1);i.customerInfo.length&&(this.customerInfoArray=i.customerInfo.map(c=>(c.PODate&&(c.PODate=this.utilityService.getFormatDate(c.PODate,"YYYY-MM-DD")),c.POValidDate&&(c.POValidDate=this.utilityService.getFormatDate(c.POValidDate,"YYYY-MM-DD")),c))),this.getMouldDataBySKUId(i.productCategory),i.isActive=i.isActive,i.inkDetails=i.inkDetails;let o=this.masterData?.inkList;for(const c of i.inkDetails)o=o.filter(Z=>Z.itemCode!=c.itemCode),this.masterData.inkList=[...i.inkDetails,...o];i.materialInfo=i.materialInfo;let r=this.masterData?.materialList;for(const c of i.materialInfo)r=r.filter(Z=>Z.itemCode!=c.itemCode),this.masterData.materialList=[...i.materialInfo,...r];this.form.patchValue(i),this.form.controls.productCategory.disable(),"edit"!=this.action&&this.form.disable(),"copy"==this.action&&(this.form.enable(),this.setAutoIncrementNo({value:i?.productCategory}),delete i._id),this.unsavedChanges=!1})})}openCustomerDetailsModel(){const n=this.modalService.open(d.S9,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});n.componentInstance.action=this.action,n.componentInstance.customerInfoArray=this.customerInfoArray,n.componentInstance.cusInfo=this.masterData?.customersOptions,n.result.then(i=>{["create","edit","copy"].includes(this.action)&&(this.customerInfoArray=i,this.unsavedChanges=!0)},i=>{})}openInjectionMoldingCustomerDetailsModel(){const n=this.modalService.open(Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});n.componentInstance.action=this.action,n.componentInstance.customerInfoArray=this.customerInfoArray,n.componentInstance.cusInfo=this.masterData?.customersOptions,n.result.then(i=>{["create","edit","copy"].includes(this.action)&&(this.customerInfoArray=i,this.unsavedChanges=!0)},i=>{})}openUOMDetailsModal(){const n=this.modalService.open(d.dQ,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.ModalUOMsUnit=this.salesUOMUintMasterOptions,n.componentInstance.WXLDimensionsUnit=this.masterData?.WXLDimensionsUnit,n.componentInstance.dualUnits={primaryUnit:this.form.value.primaryUnit,secondaryUnit:this.form.value.secondaryUnit,unitConversionFlag:this.form.value.unitConversionFlag,primaryConversion:this.form.value.primaryConversion,secondaryConversion:this.form.value.secondaryConversion,primaryToSecondaryConversion:this.form.value.primaryToSecondaryConversion,secondaryToPrimaryConversion:this.form.value.secondaryToPrimaryConversion},n.result.then(i=>{["create","edit","copy"].includes(this.action)&&(this.form.patchValue(i),this.unsavedChanges=!0)},i=>{})}openAttributesModal(){let n=this.dimensionsDetailsData.value;const i=this.modalService.open(f.n,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});i.componentInstance.action=this.action,i.componentInstance.primaryUnit=this.form.controls.primaryUnit.value,i.componentInstance.storage={storageTemp:this.form.controls.storageTemp.value,storageHumidity:this.form.controls.storageHumidity.value,specialStorageInstruction:this.form.controls.specialStorageInstruction.value},i.componentInstance.dimensionsDetails=this.form.controls.dimensionsDetails.value,i.componentInstance.bomDimData=this.bomDimData.value,i.componentInstance.offTakeData=this.offTakeData.value,i.componentInstance.SKUAttributes=this.masterData?.attributesList.map((o,r)=>(o.order=r+1,o)),i.componentInstance.totalNoOfColors=this.form.controls.totalNoOfColors.value,i.componentInstance.inkDetailsArr=this.masterData?.inkList.sort((o,r)=>o.colSeq+r.colSeq),i.componentInstance.materialInfoArr=this.masterData?.materialList,i.componentInstance.materialSKUUnit=n?.layoutDimensions?.mSqArea,i.componentInstance.drawingArtWork={internalPartNo:this.form.value.internalPartNo,artWorkNo:this.form.value.artWorkNo,artWorkHyperLink:this.form.value.artWorkHyperLink},i.componentInstance.companyType=this.masterData.companyType,i.componentInstance.shoulderTypeOptions=this.masterData.shoulderTypeOptions,i.componentInstance.mouldData=this.mouldData,i.componentInstance.toolInfo=this.toolInfoData.value,i.componentInstance.specsAttribute=this.specsAttributeData.value,i.componentInstance.mouldsIDAttribute=this.mouldsIDAttributeData.value,i.componentInstance.packingStdAttribute=this.packingStdAttributeData.value,i.result.then(o=>{o&&["create","edit","copy"].includes(this.action)&&(this.form.controls.dimensionsDetails.patchValue(o.dimensionsDetails),this.form.controls.BOMDimensionInfo.patchValue(o.bomDimData),this.form.controls.offTakeInfo.patchValue(o.offTakeData),this.form.patchValue(o.genSpecs),this.form.patchValue(o.storage),this.masterData.materialList=o.materialInfoArr,this.masterData.inkList=o.inkDetailsArr,this.f.artWorkNo.setValue(o?.drawingArtWork?.artWorkNo),this.f.internalPartNo.setValue(o?.drawingArtWork?.internalPartNo),this.f.artWorkHyperLink.setValue(o?.drawingArtWork?.artWorkHyperLink),this.toolInfoData.patchValue(o?.toolInfo),this.specsAttributeData.patchValue(o?.specsAttribute),this.mouldsIDAttributeData.patchValue(o?.mouldsIDAttribute),this.packingStdAttributeData.patchValue(o?.packingStdAttribute),this.form.controls.totalNoOfColors.setValue(o.totalNoOfColors),this.unsavedChanges=!0)},o=>{})}openFormulationHSNModal(){const n=this.modalService.open(K.K,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.HSNCodeArr=this.masterData?.hsnCodesOptions,n.componentInstance.editScreen="Edit Screen",n.componentInstance.HSNCode=this.form.controls.hsn.value,n.result.then(i=>{i&&this.form.controls.hsn.setValue(i?.HSNSelectCode)},i=>{})}openProductCategoryModal(){const n=this.modalService.open(q.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.productCategoryList=this.masterData?.productCategoryOptions,n.componentInstance.productCategory=this.form.controls.productCategory.value,n.result.then(i=>{i&&(this.form.controls.productCategory.setValue(i?.selectedProductCategory),this.setAutoIncrementNo({value:i?.selectedProductCategory}),this.getMouldDataBySKUId(i?.selectedProductCategory))},i=>{})}openCancelModal(){if("I"!=this.f.isActive.value||this.f.remarks.value)this.submit();else{const n=this.modalService.open(d.er,{centered:!0,size:"md",backdrop:"static",keyboard:!1});n.componentInstance.action="create",n.componentInstance.forNPDReview="NPD Review for Feasibility",n.componentInstance.heading="Inactive SKU Data",n.componentInstance.labelText="Reason to Inactive",n.componentInstance.cancelText="Do you want to Inactive SKU Data ?",n.result.then(i=>{"Yes"==i.title?(this.f.remarks.setValue(i?.reasonToConvert),this.submit()):this.location.back()},i=>{})}}openSKUNameModal(){if(!this.form.controls.productCategory.value)return void this.toastService.warning("Please select Product Category first!");const n=this.modalService.open(d.xv,{centered:!0,windowClass:"modelPage",backdrop:"static",keyboard:!1});n.componentInstance.action="edit"==this.action?"create":this.action,n.componentInstance.title="SKU Name/Product Code",n.componentInstance.selectedDetails=this.selectedDetails,n.componentInstance.tableHead=this.tableHead,n.componentInstance.bodyList=this.masterData?.mouldInfo,n.componentInstance._id=this.form.controls.SKUName.value,n.result.then(i=>{i&&(this.selectedDetails=i?.selectedDetails,this.form.controls.SKUName.setValue(i?.selectedDetails?.productMasterNo),this.form.controls.specsAttribute.patchValue({diameter:i?.selectedDetails?.capDia,height:i?.selectedDetails?.capHeight,finish:i?.selectedDetails?.capFinish,shoulderType:i?.selectedDetails?.shoulderType,threadType:i?.selectedDetails?.threadType,orifice:i?.selectedDetails?.orifice,weight:i?.selectedDetails?.weight,placeHolder:i?.selectedDetails?.productMasterNo}),this.form.controls.packingStdAttribute.patchValue({primaryPacking:i?.selectedDetails?.packingStdDetails?.qtyPerPrimaryPack,secondaryPacking:i?.selectedDetails?.packingStdDetails?.qtyPerSecondaryPack}))},i=>{})}getMouldDataBySKUId(n){this.spinner.show(),this.skuService.getMouldDataBySKUId({category:n}).subscribe(i=>{this.mouldData=i.mouldData,this.masterData.mouldInfo=i.mouldInfo,this.spinner.hide()})}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(N.cG),t.Y36(e.gz),t.Y36(S.V),t.Y36(S.kl),t.Y36(O.RJ),t.Y36(A.FF),t.Y36(S.tI),t.Y36(y.Ye),t.Y36(S.P0))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-form"]],decls:98,vars:25,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-3"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","SKUStage",1,"form-select"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-3","pe-5"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"flex-grow-1"],["bindLabel","hsnCode","bindValue","hsnCode","formControlName","hsn",3,"items","clearable"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer",2,"height","2.9rem",3,"click"],["type","text","formControlName","SKUNo","readonly","",1,"form-control"],[1,"row","mt-5"],["class","col-3",4,"ngIf"],["class","col-3 pe-5",4,"ngIf"],["type","text","formControlName","SKUDescription",1,"form-control"],["class","form-label mb-1 d-flex justify-content-between",4,"ngIf"],["formControlName","primaryUnit",1,"form-select"],["type","number","formControlName","shelfLife",1,"form-control"],[1,"row","line-border","mt-4"],[1,"row","my-4"],[1,"col-4","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1",3,"disabled"],["type","button",1,"btn","btn-primary","me-5","px-4",3,"disabled","click"],[1,"plusIconSvg","btn","btn-primary","me-1"],["class","btn btn-primary me-4 px-4","type","button",3,"click",4,"ngIf"],[1,"col-5","px-0"],[1,"row","mb-0"],[1,"col-6","ps-0"],[1,"col-md-auto","text-nowrap"],["type","button",1,"btn","btn-primary","px-3"],["formControlName","isActive",1,"form-select","statusSelectBorder"],["selected","","disabled","",3,"value"],["value","A"],["value","I"],[1,"input-group-text","statusSpanHeight"],["class","statusActive","class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],["class","col-6 pe-0",4,"ngIf"],[1,"col-3","text-end"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[3,"value"],["type","text","formControlName","SKUName",1,"form-control"],[1,"form-label","mb-1","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","button",1,"btn","btn-primary","me-4","px-4",3,"click"],[1,"statusActive"],[1,"statusInActive"],[1,"col-6","pe-0"],["type","text","formControlName","remarks","readonly","",1,"form-control"]],template:function(i,o){1&i&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11," SKU Stage"),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",9)(15,"option",10),t._uU(16,"Select SKU Stage"),t.qZA(),t.YNc(17,j,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",12)(19,"label",7),t._uU(20," Product Category "),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"div",13)(24,"div",14)(25,"ng-select",15),t.NdJ("change",function(c){return o.setAutoIncrementNo(c)}),t.qZA()(),t.TgZ(26,"div",16),t.NdJ("click",function(){return o.openProductCategoryModal()}),t._UZ(27,"i",17),t.qZA()()(),t.TgZ(28,"div",6)(29,"label",7),t._uU(30," HSN Code "),t.TgZ(31,"span",8),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"div",13)(34,"div",18),t._UZ(35,"ng-select",19),t.qZA(),t.TgZ(36,"div",20),t.NdJ("click",function(){return o.openFormulationHSNModal()}),t._UZ(37,"i",17),t.qZA()()(),t.TgZ(38,"div",6)(39,"label",7),t._uU(40," SKU No. "),t.TgZ(41,"span",8),t._uU(42,"*"),t.qZA()(),t._UZ(43,"input",21),t.qZA()(),t.TgZ(44,"div",22),t.YNc(45,V,7,3,"div",23),t.YNc(46,R,10,0,"div",24),t.TgZ(47,"div",6)(48,"label",7),t._uU(49),t.ALo(50,"labelTranslate"),t.TgZ(51,"span",8),t._uU(52,"*"),t.qZA()(),t._UZ(53,"input",25),t.qZA(),t.TgZ(54,"div",6),t.YNc(55,Y,11,0,"label",26),t.YNc(56,G,11,0,"label",26),t.TgZ(57,"select",27)(58,"option",10),t._uU(59,"Select Primary Unit"),t.qZA(),t.YNc(60,z,2,2,"option",11),t.qZA()(),t.TgZ(61,"div",6)(62,"label",7),t._uU(63," Shelf Life (Months) "),t._UZ(64,"span",8),t.qZA(),t._UZ(65,"input",28),t.qZA()()(),t._UZ(66,"hr",29),t.TgZ(67,"div",30)(68,"div",31),t._UZ(69,"button",32),t.TgZ(70,"button",33),t.NdJ("click",function(){return o.openAttributesModal()}),t._uU(71," Attributes "),t.qZA(),t._UZ(72,"button",34),t.YNc(73,W,2,0,"button",35),t.YNc(74,B,2,0,"button",35),t.qZA(),t.TgZ(75,"div",36)(76,"div",37)(77,"div",38)(78,"div",13)(79,"div",39)(80,"button",40),t._uU(81,"Status"),t.qZA()(),t.TgZ(82,"select",41)(83,"option",42),t._uU(84,"Select Status"),t.qZA(),t.TgZ(85,"option",43),t._uU(86,"Active"),t.qZA(),t.TgZ(87,"option",44),t._uU(88,"Inactive"),t.qZA()(),t.TgZ(89,"span",45),t.YNc(90,X,1,0,"div",46),t.YNc(91,$,1,0,"div",47),t.qZA()()(),t.YNc(92,tt,6,0,"div",48),t.qZA()(),t.TgZ(93,"div",49)(94,"button",50),t.NdJ("click",function(){return o.reset()}),t._uU(95,"Reset"),t.qZA(),t.TgZ(96,"button",51),t.NdJ("click",function(){return o.openCancelModal()}),t._uU(97,"Save"),t.qZA()()()()()),2&i&&(t.Q6J("formGroup",o.form),t.xp6(5),t.hij("SKU (",t.lcZ(6,21,o.action),")"),t.xp6(12),t.Q6J("ngForOf",o.SKUStageArr),t.xp6(8),t.Q6J("items",o.masterData.productCategoryOptions)("clearable",!1),t.xp6(10),t.Q6J("items",o.masterData.hsnCodesOptions)("clearable",!1),t.xp6(10),t.Q6J("ngIf",o.masterData.companyType!=o.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",o.masterData.companyType==o.companyTypeInjectionMolding),t.xp6(3),t.hij(" ",t.lcZ(50,23,"SKU Description")," "),t.xp6(6),t.Q6J("ngIf",o.masterData.companyType!=o.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",o.masterData.companyType==o.companyTypeInjectionMolding),t.xp6(4),t.Q6J("ngForOf",o.salesUOMUintMasterOptions),t.xp6(9),t.Q6J("disabled",o.masterData.companyType==o.companyTypeInjectionMolding&&!o.f.productCategory.value&&!o.f.SKUName.value),t.xp6(1),t.Q6J("disabled",o.masterData.companyType==o.companyTypeInjectionMolding&&!o.f.productCategory.value&&!o.f.SKUName.value),t.xp6(3),t.Q6J("ngIf",o.masterData.companyType!=o.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",o.masterData.companyType==o.companyTypeInjectionMolding),t.xp6(9),t.Q6J("value","null"),t.xp6(7),t.Q6J("ngIf","A"==o.form.value.isActive),t.xp6(1),t.Q6J("ngIf","I"==o.form.value.isActive),t.xp6(1),t.Q6J("ngIf",o.f.remarks.value))},dependencies:[y.sg,y.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,J.w9,y.rS,w.c],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]})}return l})();var nt=u(56208),ot=u(65876),it=u(19964);const at=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:h},{path:"form",component:et,resolve:{accessScreen:ot.x},canDeactivate:[it.Ox]}];let rt=(()=>{class l{static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275mod=t.oAB({type:l});static#n=this.\u0275inj=t.cJS({imports:[y.ez,e.Bz.forChild(at),nt.m]})}return l})()}}]);