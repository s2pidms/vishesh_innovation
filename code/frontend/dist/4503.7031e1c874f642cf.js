"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4503],{24503:(U,h,s)=>{s.r(h),s.d(h,{PurchaseOrderSummaryReportModule:()=>D});var m=s(96814),d=s(1076),g=s(43818),c=s(98687),e=s(65879),y=s(74659),p=s(98977),Z=s(88059),f=s(37285),u=s(60095),b=s(50363),T=s(83344);function _(i,l){if(1&i&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&i){const n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function A(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td",45,46)(3,"span",47),e._uU(4),e.qZA()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"number"),e.qZA()()),2&i){const n=l.$implicit,o=e.MAs(2);e.xp6(1),e.Udp("width",o.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",n.supplierName)("positionTarget",o),e.xp6(1),e.hij(" ",null==n?null:n.supplierName," "),e.xp6(2),e.Oqu(null==n?null:n.dateRange),e.xp6(2),e.Oqu(null==n?null:n.itemCategory),e.xp6(2),e.Oqu(null==n?null:n.totalOrders),e.xp6(2),e.Oqu(null==n?null:n.currency),e.xp6(2),e.Oqu(e.xi3(15,11,null==n?null:n.totalAmount,".2-2")),e.xp6(3),e.Oqu(e.xi3(18,14,null==n?null:n.avgOrderValue,".2-2"))}}const v=function(i,l,n,o){return{page:i,pageSize:l,collection:n,search:o,type:"list",pdfDisplay:!0}};let C=(()=>{var i;class l{constructor(o,t,a,r,P,R){this.purchaseOrderService=o,this.exportExcelService=t,this.spinner=a,this.utilityService=r,this.activatedRoute=P,this.exportToPDFService=R,this.page=1,this.pageSize=12,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.company={},this.supplierOptions=[],this.itemsOptions=[],this.supplier="",this.itemCategory="",this.totalAmount=0,this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}trackByFn(o,t){return t?._id}eventHeader(o){switch(o.key){case"SEARCH":this.search=o.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=o.value,this.getAll()}}reset(){this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate,this.supplier="",this.itemCategory="",this.getAll()}getAll(o=!1,t=""){this.spinner.show();let a={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:o,supplier:this.supplier,itemCategory:this.itemCategory,fromDate:this.fromDate,toDate:this.toDate};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.purchaseOrderService.getAllPOSummaryReports(a).subscribe(r=>{"EXCEL"==t?this.excelDownload(r.rows):"PDF"==t?this.pdfDownload(r.rows):(this.tableData=r.rows,this.supplierOptions=r.suppliers,this.itemsOptions=r.itemsOptions,this.collection=r.count,this.totalAmount=r?.totalAmounts?.totalSumAmount?r?.totalAmounts?.totalSumAmount:0),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(o){let t=(0,c.EV)(o);this.exportToPDFService.generatePdf(t.tableData,t.title)}excelDownload(o){this.exportExcelService.exportExcel((0,c.TJ)(o))}onSort({column:o,direction:t}){this.headers.forEach(a=>{a.sortable!==o&&(a.direction="")}),this.column=o,this.direction="asc"==t?1:-1,this.getAll()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.Y36(y.x$),e.Y36(p.Ol),e.Y36(p.V),e.Y36(p.tI),e.Y36(d.gz),e.Y36(p.$L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-purchase-order-summary-report"]],viewQuery:function(o,t){if(1&o&&e.Gf(g.j,5),2&o){let a;e.iGM(a=e.CRH())&&(t.headers=a)}},decls:74,vars:22,consts:[[1,"reportTablePage"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5"],[1,"form-label"],["bindLabel","supplierName","bindValue","_id",3,"items","clearable","ngModel","ngModelChange"],[1,"col-2","ps-0","separate-row"],[1,"form-select",3,"ngModel","ngModelChange"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"set-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],[1,"col-2"],[1,"text-danger"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","align-self-end","separate-image"],[1,"image-position"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","ms-4",3,"click"],[1,"row","line-border"],[1,"table-responsive","mb-0"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","supplierName",1,"text-start",3,"sort"],["sortable","dateRange",3,"sort"],["sortable","itemCategory",3,"sort"],["sortable","totalOrders",3,"sort"],["sortable","currency",3,"sort"],["sortable","totalAmount",3,"sort"],["sortable","avgOrderValue",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-footer"],[1,"row","align-items-center","mt-3"],[1,"col-3","pe-0"],[1,"d-flex","justify-content-center"],[1,"col-form-label","text-nowrap","pe-1","pt-0","ms-3"],[1,"fa","fa-caret-right","fs-4","mx-2"],["type","button",1,"btn","btn-info","py-1","ms-2"],["type","text","readonly","",1,"form-control",3,"value"],[3,"value"],[1,"text-start"],["supplierName",""],[1,"pointer",3,"ngbTooltip","positionTarget"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Purchase Order Summary Report"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Supplier"),e.qZA(),e.TgZ(10,"ng-select",8),e.NdJ("ngModelChange",function(r){return t.supplier=r}),e.qZA()(),e.TgZ(11,"div",9)(12,"label",7),e._uU(13,"Item Category"),e.qZA(),e.TgZ(14,"select",10),e.NdJ("ngModelChange",function(r){return t.itemCategory=r}),e.TgZ(15,"option",11),e._uU(16,"Select Item Category"),e.qZA(),e.YNc(17,_,2,2,"option",12),e.qZA(),e.TgZ(18,"span",13),e._UZ(19,"img",14),e.qZA()(),e.TgZ(20,"div",15)(21,"label",7),e._uU(22," From Date "),e.TgZ(23,"span",16),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"input",17),e.NdJ("ngModelChange",function(r){return t.fromDate=r}),e.qZA()(),e.TgZ(26,"div",15)(27,"label",7),e._uU(28," To Date "),e.TgZ(29,"span",16),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"input",17),e.NdJ("ngModelChange",function(r){return t.toDate=r}),e.qZA()(),e.TgZ(32,"div",18)(33,"span",19),e._UZ(34,"img",14),e.qZA(),e.TgZ(35,"button",20),e.NdJ("click",function(){return t.getAll()}),e._uU(36,"Apply Filter"),e.qZA(),e.TgZ(37,"button",21),e.NdJ("click",function(){return t.reset()}),e._uU(38,"Reset Filter"),e.qZA()()(),e._UZ(39,"hr",22),e.TgZ(40,"div",23)(41,"app-setting-header",24),e.NdJ("dataChange",function(r){return t.eventHeader(r)}),e.qZA(),e.TgZ(42,"table",25)(43,"thead",26)(44,"tr",27)(45,"th",28),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(46,"Supplier"),e.qZA(),e.TgZ(47,"th",29),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(48,"Date Range"),e.qZA(),e.TgZ(49,"th",30),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(50,"Item Category"),e.qZA(),e.TgZ(51,"th",31),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(52,"Total Orders"),e.qZA(),e.TgZ(53,"th",32),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(54,"Currency"),e.qZA(),e.TgZ(55,"th",33),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(56,"Total Amount"),e.qZA(),e.TgZ(57,"th",34),e.NdJ("sort",function(r){return t.onSort(r)}),e._uU(58,"Average Order Value"),e.qZA()()(),e.TgZ(59,"tbody"),e.YNc(60,A,19,17,"tr",35),e.qZA()()(),e.TgZ(61,"div",36),e._UZ(62,"hr",22),e.TgZ(63,"div",37)(64,"div",38)(65,"div",39)(66,"div",40),e._uU(67," Total Amount Value"),e._UZ(68,"i",41),e.TgZ(69,"button",42),e._uU(70),e.ALo(71,"companyCurrency"),e.qZA()(),e._UZ(72,"input",43),e.ALo(73,"number"),e.qZA()()()()()()),2&o&&(e.xp6(10),e.Q6J("items",t.supplierOptions)("clearable",!1)("ngModel",t.supplier),e.xp6(4),e.Q6J("ngModel",t.itemCategory),e.xp6(3),e.Q6J("ngForOf",t.itemsOptions),e.xp6(8),e.Q6J("ngModel",t.fromDate),e.xp6(6),e.Q6J("ngModel",t.toDate),e.xp6(10),e.Q6J("data",e.l5B(17,v,t.page,t.pageSize,t.collection,t.search)),e.xp6(19),e.Q6J("ngForOf",t.tableData)("ngForTrackBy",t.trackByFn),e.xp6(10),e.Oqu(e.lcZ(71,12,"INR")),e.xp6(2),e.Q6J("value",e.xi3(73,14,t.totalAmount,"1.2-2")))},dependencies:[m.sg,Z.P,f._L,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.On,b.w9,g.j,m.JJ,T.f],encapsulation:2}),l})();var S=s(56208);const O=[{path:"",component:C}];let D=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,d.Bz.forChild(O),S.m]}),l})()}}]);