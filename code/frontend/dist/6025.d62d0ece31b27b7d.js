"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6025],{96025:(R,h,a)=>{a.r(h),a.d(h,{MenuItemModule:()=>Q});var u=a(96814),d=a(1076),r=a(60095),v=a(21631),b=a(22096),Z=a(70202),e=a(65879),f=a(31384),m=a(2742),A=a(16897),T=a(1551),M=a(50363);function _(n,c){if(1&n&&(e.TgZ(0,"div",18)(1,"label",7),e._uU(2," Role "),e.TgZ(3,"span",8),e._uU(4,"*"),e.qZA()(),e._UZ(5,"ng-select",19)(6,"validation-messages",20),e.qZA()),2&n){const s=e.oxw();e.xp6(5),e.Q6J("items",s.roles)("multiple",!0)("clearable",!1),e.xp6(1),e.Q6J("control",s.f.roles)}}function C(n,c){if(1&n){const s=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.reset())}),e._uU(1," Reset "),e.qZA()}}function y(n,c){if(1&n){const s=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.submit())}),e._uU(1," Save "),e.qZA()}}const S=function(n){return{"d-none":n}},U=function(){return["view","edit"]},x=function(){return["create","edit"]};let J=(()=>{var n;class c{get f(){return this.form.controls}constructor(t,i,o,l,p,E,z,G){this.menuService=t,this.activatedRoute=i,this.spinner=o,this.toastService=l,this.validationService=p,this.storageService=E,this.utilityService=z,this.location=G,this.submitted=!1,this.action="create",this.image=null,this.roles=[],this.user={},this.superAdminId="64a687b4e9143bffd820fb3d",this.form=new r.nJ({_id:new r.p4(null),title:new r.p4("",[r.kI.required]),path:new r.p4("",[r.kI.required]),activeClass:new r.p4(""),isMenuActive:new r.p4(!0,[r.kI.required]),menuOrder:new r.p4("",[r.kI.required]),color:new r.p4(""),image:new r.p4(""),roles:new r.p4([],[r.kI.required])})}ngOnInit(){this.getInitialData(),this.user=this.storageService.get("IDMSAUser")?.roles,this.user=this.user.find(t=>t==this.superAdminId)}reset(){this.form.reset()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,Z.DP))return;let t=this.form.value;t._id?this.update(t):(delete t._id,this.create(t))}create(t){this.spinner.show(),this.menuService.create(t).subscribe(i=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(i.message),this.location.back()})}update(t){this.spinner.show(),this.menuService.update(t._id,t).subscribe(i=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(i.message),this.location.back()})}getInitialData(){this.spinner.show(),this.activatedRoute.queryParams.pipe((0,v.z)(t=>(this.action=t.action,this.utilityService.accessDenied(this.action),t.id?this.menuService.getById(t.id):(0,b.of)({})))).subscribe(t=>{this.spinner.hide(),0!=Object.keys(t).length&&(this.roles=t.roles,this.form.patchValue(t.menuDetails),"edit"!=this.action&&this.form.disable())}),this.spinner.hide()}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(f.hl),e.Y36(d.gz),e.Y36(m.V),e.Y36(m.kl),e.Y36(A.RJ),e.Y36(m.V1),e.Y36(m.tI),e.Y36(u.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-form"]],decls:37,vars:15,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","title",1,"form-control"],["type","number","formControlName","menuOrder",1,"form-control"],["formControlName","isMenuActive",1,"form-select"],["disabled","","selected","",3,"value"],[3,"value"],["class","col-12 mt-4",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center","mb-3",3,"ngClass"],["class","btn bg-primary mt-2 px-5 me-2","type","button",3,"click",4,"ngIf"],["class","btn bg-primary mt-2 px-5","type","button",3,"click",4,"ngIf"],[1,"col-12","mt-4"],["bindLabel","label","bindValue","value","formControlName","roles",3,"items","multiple","clearable"],[1,"error-left",3,"control"],["type","button",1,"btn","bg-primary","mt-2","px-5","me-2",3,"click"],["type","button",1,"btn","bg-primary","mt-2","px-5",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11," Title "),e.TgZ(12,"span",8),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",6)(16,"label",7),e._uU(17," Menu Order "),e.TgZ(18,"span",8),e._uU(19,"*"),e.qZA()(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"div",6)(22,"label",7),e._uU(23," Status "),e.TgZ(24,"span",8),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"select",11)(27,"option",12),e._uU(28,"Status"),e.qZA(),e.TgZ(29,"option",13),e._uU(30,"Enable"),e.qZA(),e.TgZ(31,"option",13),e._uU(32,"Disable"),e.qZA()()(),e.YNc(33,_,7,4,"div",14),e.qZA()(),e.TgZ(34,"div",15),e.YNc(35,C,2,0,"button",16),e.YNc(36,y,2,0,"button",17),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(5),e.hij("Menu Item [",e.lcZ(6,9,i.action),"]"),e.xp6(22),e.Q6J("value",null),e.xp6(2),e.Q6J("value","true"),e.xp6(2),e.Q6J("value","false"),e.xp6(2),e.Q6J("ngIf",i.user==i.superAdminId),e.xp6(1),e.Q6J("ngClass",e.VKq(11,S,"View"==i.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(13,U).includes(i.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(14,x).includes(i.action)))},dependencies:[u.mk,u.O5,T.s,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,M.w9,u.rS],encapsulation:2}),c})();var g=a(43818),I=a(25116),F=a(88059),k=a(53421),q=a(95346);function w(n,c){if(1&n){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",12),e._UZ(9,"button",13),e.TgZ(10,"div",14)(11,"a",15),e.NdJ("click",function(){const o=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.navigateTo("../menu-form",null==o?null:o._id,"view"))}),e._UZ(12,"i",16),e._uU(13," View "),e.qZA(),e.TgZ(14,"a",15),e.NdJ("click",function(){const o=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.navigateTo("../menu-form",null==o?null:o._id,"edit"))}),e._UZ(15,"i",17),e._uU(16," Edit "),e.qZA(),e.TgZ(17,"a",18),e.NdJ("click",function(){const o=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.update(o))}),e._UZ(18,"i",19),e._uU(19," Status "),e.qZA()()()()()}if(2&n){const s=c.$implicit,t=e.oxw();e.xp6(2),e.Oqu(null==s?null:s.menuOrder),e.xp6(2),e.Oqu(null==s?null:s.title),e.xp6(2),e.Oqu(null!=s&&s.isMenuActive?"Enable":"Disable"),e.xp6(5),e.Q6J("accessType",t.rolePermissionActions.viewAction),e.xp6(3),e.Q6J("accessType",t.rolePermissionActions.editAction)}}const Y=function(n,c,s,t){return{page:n,pageSize:c,collection:s,search:t,type:"list",excelDisplay:"none"}};let L=(()=>{var n;class c{constructor(t,i,o,l,p){this.menuService=t,this.activatedRoute=i,this.router=o,this.toastService=l,this.spinner=p,this.page=1,this.pageSize=10,this.collection=0,this.column="menuOrder",this.system="main",this.direction=1,this.search="",this.tableData=[],this.rolePermissionActions=I.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(t,i,o){this.router.navigate([t],{relativeTo:this.activatedRoute,queryParams:{id:i,action:o}})}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value;break;case"EXCEL":default:break;case"PAGE":this.page=t.value}}getAll(){this.spinner.show();let t={system:this.system,column:this.column,direction:this.direction};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.menuService.getAll(t).subscribe(i=>{this.tableData=i,this.collection=this.tableData.length,this.spinner.hide()})}update(t){this.spinner.show(),t.isMenuActive=1!=t.isMenuActive,this.menuService.update(t._id,{isMenuActive:t.isMenuActive}).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}trackByFn(t,i){return i?._id}onSort({column:t,direction:i}){this.headers.forEach(o=>{o.sortable!==t&&(o.direction="")}),this.column=t,this.direction="asc"==i?1:-1,this.getAll()}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(f.hl),e.Y36(d.gz),e.Y36(d.F0),e.Y36(m.kl),e.Y36(m.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(g.j,5),2&t){let o;e.iGM(o=e.CRH())&&(i.headers=o)}},decls:21,vars:15,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],[1,"table-responsive",2,"min-height","40.5rem"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","menuOrder",3,"sort"],["sortable","title",3,"sort"],["sortable","isMenuActive",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-check","fa-lg","text-success"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Menu Item Summary"),e.qZA()(),e.TgZ(4,"div",3)(5,"app-setting-header",4),e.NdJ("dataChange",function(l){return i.eventHeader(l)}),e.qZA(),e.TgZ(6,"table",5)(7,"thead",6)(8,"tr",7)(9,"th",8),e.NdJ("sort",function(l){return i.onSort(l)}),e._uU(10,"Menu Order"),e.qZA(),e.TgZ(11,"th",9),e.NdJ("sort",function(l){return i.onSort(l)}),e._uU(12,"Title"),e.qZA(),e.TgZ(13,"th",10),e.NdJ("sort",function(l){return i.onSort(l)}),e._uU(14,"Status"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Action"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,w,20,5,"tr",11),e.ALo(19,"slice"),e.ALo(20,"searchFi1ter"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("data",e.l5B(10,Y,i.page,i.pageSize,i.collection,i.search)),e.xp6(13),e.Q6J("ngForOf",e.Dn7(19,3,e.xi3(20,7,i.tableData,i.search),(i.page-1)*i.pageSize,(i.page-1)*i.pageSize+i.pageSize))("ngForTrackBy",i.trackByFn))},dependencies:[u.sg,F.P,g.j,k.J,u.OU,q.G],encapsulation:2}),c})();var N=a(56208);const D=[{path:"",redirectTo:"menu-list",pathMatch:"full"},{path:"menu-list",component:L},{path:"menu-form",component:J,resolve:{accessScreen:a(65876).x}}];let Q=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,d.Bz.forChild(D),N.m]}),c})()}}]);