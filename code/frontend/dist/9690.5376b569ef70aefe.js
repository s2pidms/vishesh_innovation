"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9690],{22751:(Q,Z,d)=>{d.d(Z,{B:()=>F});var e=d(43818),n=d(65879),I=d(37285),O=d(96814),y=d(60095),v=d(59103);function S(g,f){1&g&&n._UZ(0,"div",26)}function x(g,f){1&g&&n._UZ(0,"div",27)}function U(g,f){1&g&&n._UZ(0,"div",28)}function A(g,f){if(1&g&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"UOMUnitsMaster"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"number"),n.qZA(),n.TgZ(12,"td")(13,"span",22),n.YNc(14,S,1,0,"div",23),n.YNc(15,x,1,0,"div",24),n.YNc(16,U,1,0,"div",25),n.qZA()()()),2&g){const t=f.$implicit;n.xp6(2),n.Oqu(null==t?null:t.batchNo),n.xp6(2),n.hij(" ",null!=t&&t.batchDate?n.xi3(5,7,null==t?null:t.batchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",n.lcZ(8,10,null==t?null:t.UOM)," "),n.xp6(3),n.hij(" ",n.xi3(11,12,null==t?null:t.FGQty,"1.2-2")," "),n.xp6(4),n.Q6J("ngIf","green"==(null==t?null:t.aging)),n.xp6(1),n.Q6J("ngIf","red"==(null==t?null:t.aging)),n.xp6(1),n.Q6J("ngIf","yellow"==(null==t?null:t.aging))}}let F=(()=>{var g;class f{constructor(_){this.activeModal=_,this.FGInventoryInfo=[],this.action="",this.totalFGQty=0,this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){}dismissModel(){let _={};_.FGInventoryInfo=this.FGInventoryInfo,_.totalFGQty=this.totalFGQty,this.activeModal.close(_)}eventHeader(_){switch(_.key){case"SEARCH":this.search=_.value;break;case"EXCEL":default:break;case"PAGE":this.page=_.value}}trackByFn(_,m){return m?._id}}return(g=f).\u0275fac=function(_){return new(_||g)(n.Y36(I.Kz))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-fg-inventory-modal"]],viewQuery:function(_,m){if(1&_&&n.Gf(e.j,5),2&_){let T;n.iGM(T=n.CRH())&&(m.headers=T)}},inputs:{FGInventoryInfo:"FGInventoryInfo",action:"action",totalFGQty:"totalFGQty",customerContactInfoArray:"customerContactInfoArray"},decls:37,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-5"],[1,"table-responsive",2,"min-height","19rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-border","my-4"],[1,"row","px-5"],[1,"col-5","ps-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-7","text-end","mb-4","pe-5"],["type","button",1,"btn","bg-primary","px-5",3,"disabled","click"],[1,"d-flex","justify-content-center"],["class","flaggreen",4,"ngIf"],["class","flagred",4,"ngIf"],["class","flagYellow",4,"ngIf"],[1,"flaggreen"],[1,"flagred"],[1,"flagYellow"]],template:function(_,m){1&_&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"FG Inventory"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return m.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th"),n._uU(15,"Batch No."),n.qZA(),n.TgZ(16,"th"),n._uU(17,"Batch Date"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"UoM"),n.qZA(),n.TgZ(20,"th"),n._uU(21,"FG Qty"),n.qZA(),n.TgZ(22,"th"),n._uU(23,"Aging"),n.qZA()()(),n.TgZ(24,"tbody"),n.YNc(25,A,17,15,"tr",12),n.qZA()()()()(),n._UZ(26,"hr",13),n.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"div",17),n._uU(31," Total FG Qty. "),n._UZ(32,"i",18),n.qZA(),n.TgZ(33,"input",19),n.NdJ("ngModelChange",function(P){return m.totalFGQty=P}),n.qZA()()(),n.TgZ(34,"div",20)(35,"button",21),n.NdJ("click",function(){return m.dismissModel()}),n._uU(36," Save & Close "),n.qZA()()()()()),2&_&&(n.xp6(25),n.Q6J("ngForOf",m.FGInventoryInfo)("ngForTrackBy",m.trackByFn),n.xp6(8),n.Q6J("ngModel",m.totalFGQty)("disabled","view"==m.action),n.xp6(2),n.Q6J("disabled",m.btnDisable||"view"==m.action))},dependencies:[O.sg,O.O5,y.Fj,y.wV,y.JJ,y.On,O.JJ,O.uU,v.S],encapsulation:2}),f})()},6573:(Q,Z,d)=>{d.d(Z,{_0:()=>u,B$:()=>a.B,tC:()=>i.t,$G:()=>w});var e=d(43818),I=d(98977);d(88059),d(52464);var t=d(65879),_=d(37285),m=d(96814),T=d(60095);function P(c,b){1&c&&t._UZ(0,"hr",19)}function C(c,b){if(1&c){const o=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.dismissModel())}),t._uU(1," Save & Close "),t.qZA()}}const M=function(){return["create","edit"]};let u=(()=>{var c;class b{constructor(l,r){this.activeModal=l,this.utilityService=r,this.action="",this.totalBatchQuantity=null,this.batchInfo={},this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.manufacturingDate="",this.batchNumber="",this.customerContactInfoArray=[]}ngOnInit(){this.totalBatchQuantity=this.batchInfo?.totalBatchQuantity,this.manufacturingDate=this.batchInfo?.manufacturingDate,this.batchNumber=this.batchInfo?.batchNumber}dismissModel(){let l={};l.totalBatchQuantity=this.totalBatchQuantity,l.manufacturingDate=this.manufacturingDate,l.batchNumber=this.batchNumber,this.activeModal.close(l)}eventHeader(l){switch(l.key){case"SEARCH":this.search=l.value;break;case"EXCEL":default:break;case"PAGE":this.page=l.value}}trackByFn(l,r){return r?._id}}return(c=b).\u0275fac=function(l){return new(l||c)(t.Y36(_.Kz),t.Y36(I.tI))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-batch-info-modal"]],viewQuery:function(l,r){if(1&l&&t.Gf(e.j,5),2&l){let h;t.iGM(h=t.CRH())&&(r.headers=h)}},inputs:{action:"action",totalBatchQuantity:"totalBatchQuantity",batchInfo:"batchInfo",customerContactInfoArray:"customerContactInfoArray"},decls:33,vars:13,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center"],[1,"col-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"row","justify-content-center","mt-4"],["type","date",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","line-border my-4",4,"ngIf"],[1,"row"],[1,"col","text-center","mb-4"],["class","btn bg-primary px-5","type","button",3,"click",4,"ngIf"],[1,"line-border","my-4"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Batch Info"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return r.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t._uU(12," Total Batch Qty. "),t._UZ(13,"i",10),t.qZA(),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(D){return r.totalBatchQuantity=D}),t.qZA()()()(),t.TgZ(15,"div",12)(16,"div",7)(17,"div",8)(18,"div",9),t._uU(19," Batch/Mfg Date "),t._UZ(20,"i",10),t.qZA(),t.TgZ(21,"input",13),t.NdJ("ngModelChange",function(D){return r.manufacturingDate=D}),t.qZA()()()(),t.TgZ(22,"div",12)(23,"div",7)(24,"div",8)(25,"div",9),t._uU(26," Batch Number # "),t._UZ(27,"i",10),t.qZA(),t.TgZ(28,"input",14),t.NdJ("ngModelChange",function(D){return r.batchNumber=D}),t.qZA()()()(),t.YNc(29,P,1,0,"hr",15),t.TgZ(30,"div",16)(31,"div",17),t.YNc(32,C,2,0,"button",18),t.qZA()()()()),2&l&&(t.xp6(14),t.Q6J("ngModel",r.totalBatchQuantity)("disabled",!t.DdM(8,M).includes(r.action)),t.xp6(7),t.Q6J("ngModel",r.manufacturingDate)("disabled",!t.DdM(9,M).includes(r.action)),t.xp6(7),t.Q6J("ngModel",r.batchNumber)("disabled",!t.DdM(10,M).includes(r.action)),t.xp6(1),t.Q6J("ngIf",t.DdM(11,M).includes(r.action)),t.xp6(3),t.Q6J("ngIf",t.DdM(12,M).includes(r.action)))},dependencies:[m.O5,T.Fj,T.wV,T.JJ,T.On],encapsulation:2}),b})();var a=d(22751),i=d(16250),s=d(95346);function p(c,b){1&c&&t._UZ(0,"img",28)}function J(c,b){1&c&&t._UZ(0,"img",29)}function N(c,b){if(1&c&&(t.TgZ(0,"li",31)(1,"span",32),t._uU(2),t.qZA()()),2&c){const o=t.oxw(),l=o.$implicit,r=o.pages;t.xp6(2),t.AsE(" Page ",l," of ",r[r.length-1]," ")}}function K(c,b){1&c&&t.YNc(0,N,3,2,"li",30),2&c&&t.Q6J("ngIf",b.pages.length>0)}function E(c,b){if(1&c){const o=t.EpF();t.TgZ(0,"ngb-pagination",24),t.NdJ("pageChange",function(r){t.CHM(o);const h=t.oxw();return t.KtG(h.page=r)}),t.YNc(1,p,1,0,"ng-template",25),t.YNc(2,J,1,0,"ng-template",26),t.YNc(3,K,1,1,"ng-template",27),t.qZA()}if(2&c){const o=t.oxw();t.Q6J("collectionSize",o.tableData.length)("page",o.page)("pageSize",o.pageSize)("boundaryLinks",!1)}}function B(c,b){if(1&c&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",22,33)(5,"span",34),t._uU(6),t.qZA()(),t.TgZ(7,"td",22,35)(9,"span",34),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&c){const o=b.$implicit,l=t.MAs(4),r=t.MAs(8);t.xp6(2),t.Oqu(null==o?null:o.itemCode),t.xp6(1),t.Udp("width",l.clientWidth),t.xp6(2),t.Q6J("positionTarget",l)("ngbTooltip",o.itemName),t.xp6(1),t.hij(" ",o.itemName," "),t.xp6(1),t.Udp("width",r.clientWidth),t.xp6(2),t.Q6J("positionTarget",r)("ngbTooltip",o.itemDescription),t.xp6(1),t.hij(" ",o.itemDescription," "),t.xp6(2),t.hij(" ",null==o?null:o.UOM," "),t.xp6(2),t.Oqu(null!=o&&o.partCount?t.xi3(15,13,null==o?null:o.partCount,"1.2-2"):null)}}let w=(()=>{var c;class b{constructor(l){this.activeModal=l,this.itemDetailsList=[],this.action="",this.totalBatchQuantity=0,this.tableData=[],this.btnDisable=!1,this.page=1,this.pageSize=12,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){this.tableData=structuredClone(this.itemDetailsList),this.tableData.length>0&&(this.tableData=this.tableData?.map(l=>(l.partCount=l.partCount*this.totalBatchQuantity,l)))}dismissModel(){let l={};l.tableData=this.tableData,this.activeModal.close(l)}setPagination(){this.page=1}eventHeader(l){switch(l.key){case"SEARCH":this.search=l.value;break;case"EXCEL":default:break;case"PAGE":this.page=l.value}}trackByFn(l,r){return r?._id}}return(c=b).\u0275fac=function(l){return new(l||c)(t.Y36(_.Kz))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-job-card-mrp-modal"]],viewQuery:function(l,r){if(1&l&&t.Gf(e.j,5),2&l){let h;t.iGM(h=t.CRH())&&(r.headers=h)}},inputs:{itemDetailsList:"itemDetailsList",action:"action",totalBatchQuantity:"totalBatchQuantity",customerContactInfoArray:"customerContactInfoArray"},decls:40,vars:11,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-4"],[1,"row","justify-content-between","mb-3"],[1,"col-4","d-flex","align-items-center"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"ms-1","me-2","col-form-label","text-nowrap"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange",4,"ngIf"],[1,"col-1"],[1,"col-3"],[1,"table-responsive",2,"min-height","44rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],["itemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["itemDescription",""]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Material Requirement Planning (MRP)"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return r.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),t._uU(14," Total Batch Quantity "),t.TgZ(15,"span",12),t._uU(16,"\u25b6"),t.qZA()(),t.TgZ(17,"input",13),t.NdJ("ngModelChange",function(D){return r.totalBatchQuantity=D}),t.qZA()()(),t.TgZ(18,"div",14),t.YNc(19,E,4,4,"ngb-pagination",15),t.qZA(),t._UZ(20,"div",16)(21,"div",17),t.qZA(),t.TgZ(22,"div",18)(23,"table",19)(24,"thead",20)(25,"tr",21)(26,"th"),t._uU(27,"Item Code"),t.qZA(),t.TgZ(28,"th",22),t._uU(29,"Item Name"),t.qZA(),t.TgZ(30,"th",22),t._uU(31,"Item Description"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"UoM"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Qty/Part Count"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,B,16,16,"tr",23),t.ALo(38,"slice"),t.ALo(39,"searchFi1ter"),t.qZA()()()()()()()),2&l&&(t.xp6(17),t.Q6J("ngModel",r.totalBatchQuantity),t.xp6(2),t.Q6J("ngIf",r.tableData.length>0),t.xp6(18),t.Q6J("ngForOf",t.Dn7(38,4,t.xi3(39,8,r.tableData,r.search),(r.page-1)*r.pageSize,(r.page-1)*r.pageSize+r.pageSize))("ngForTrackBy",r.trackByFn))},dependencies:[m.sg,m.O5,_.N9,_.GZ,_.ju,_.Qy,_._L,T.Fj,T.JJ,T.On,m.OU,m.JJ,s.G],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}"]}),b})()},16250:(Q,Z,d)=>{d.d(Z,{t:()=>U});var e=d(43818),n=d(65879),I=d(37285),O=d(98977),y=d(96814),v=d(60095);function S(A,F){if(1&A&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"number"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"date"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"date"),n.qZA()()),2&A){const g=F.$implicit;n.xp6(2),n.Oqu(null==g?null:g.scheduleNo),n.xp6(2),n.hij(" ",n.xi3(5,5,null==g?null:g.quantity,"1.2-2")," "),n.xp6(3),n.Oqu(null==g?null:g.UOM),n.xp6(2),n.hij(" ",null!=g&&g.dispatchDate?n.xi3(10,8,null==g?null:g.dispatchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",null!=g&&g.PPICDate?n.xi3(13,11,null==g?null:g.PPICDate,"dd-MM-YYYY"):null," ")}}const x=function(){return["create","edit"]};let U=(()=>{var A;class F{constructor(f,t){this.activeModal=f,this.toastService=t,this.action="edit",this.SOQty=0,this.deliveryCount=0,this.UOM=null,this.deliveryScheduleArr=[],this.btnDisable=!1,this.minDate=new Date}ngOnInit(){if(this.deliveryScheduleArr.length>0){this.deliveryScheduleArr=this.deliveryScheduleArr.map(t=>(t.UOM=this.UOM,t)),this.deliveryCount=this.deliveryScheduleArr.length;let f=this.deliveryScheduleArr.map(t=>t.quantity||0).reduce((t,_)=>+t+ +_,0);this.SOQty=f}}}return(A=F).\u0275fac=function(f){return new(f||A)(n.Y36(I.Kz),n.Y36(O.kl))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-job-card-disp-modal"]],viewQuery:function(f,t){if(1&f&&n.Gf(e.j,5),2&f){let _;n.iGM(_=n.CRH())&&(t.headers=_)}},inputs:{action:"action",UOM:"UOM",deliveryScheduleArr:"deliveryScheduleArr"},decls:41,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","px-5","mt-5"],[1,"ps-0","col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-4","mx-1"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6","pe-0"],["for","deliveryCount",1,"col-form-label","text-nowrap"],["type","number","id","deliveryCount","name","deliveryCount","min","1","max","5","readonly","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"row"],[1,"col-12","my-3","px-0"],[1,"line-border"],[1,"row","px-5"],[1,"table-responsive","ps-0","pe-0",2,"min-height","25rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf"]],template:function(f,t){1&f&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"Dispatch Schedule"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return t.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),n._uU(12," Quantity "),n._UZ(13,"i",10),n.qZA(),n.TgZ(14,"input",11),n.NdJ("ngModelChange",function(m){return t.SOQty=m}),n.qZA()()(),n.TgZ(15,"div",12)(16,"div",8)(17,"div",13),n._uU(18," Delivery Count "),n._UZ(19,"i",10),n.qZA(),n.TgZ(20,"input",14),n.NdJ("ngModelChange",function(m){return t.deliveryCount=m}),n.qZA()()()(),n.TgZ(21,"div",15)(22,"div",16),n._UZ(23,"hr",17),n.qZA()(),n.TgZ(24,"div",18)(25,"div",19)(26,"table",20)(27,"thead",21)(28,"tr",22)(29,"th"),n._uU(30,"Schedule #"),n.qZA(),n.TgZ(31,"th"),n._uU(32,"Quantity"),n.qZA(),n.TgZ(33,"th"),n._uU(34,"UoM"),n.qZA(),n.TgZ(35,"th"),n._uU(36,"Expected Dispatch Date"),n.qZA(),n.TgZ(37,"th"),n._uU(38,"PPIC Date"),n.qZA()()(),n.TgZ(39,"tbody"),n.YNc(40,S,14,14,"tr",23),n.qZA()()()()()()),2&f&&(n.xp6(14),n.Q6J("ngModel",t.SOQty),n.xp6(6),n.Q6J("disabled",!n.DdM(4,x).includes(t.action))("ngModel",t.deliveryCount),n.xp6(20),n.Q6J("ngForOf",t.deliveryScheduleArr))},dependencies:[y.sg,v.Fj,v.wV,v.JJ,v.qQ,v.Fd,v.On,y.JJ,y.uU],encapsulation:2}),F})()},52464:(Q,Z,d)=>{d.d(Z,{U:()=>P});var e=d(65879),n=d(43818),I=d(22751),O=d(16250),y=d(37285),v=d(98977),S=d(96814),x=d(88059),U=d(60095),A=d(95346),F=d(14906);function g(C,M){if(1&C&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&C){const u=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==u?null:u.batchQty,"1.2-2")," ")}}const f=function(){return{standalone:!0}};function t(C,M){if(1&C){const u=e.EpF();e.TgZ(0,"input",29),e.NdJ("ngModelChange",function(i){e.CHM(u);const s=e.oxw().$implicit;return e.KtG(s.batchQty=i)})("input",function(){e.CHM(u);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.setBatchQty(i))}),e.qZA()}if(2&C){const u=e.oxw().$implicit,a=e.oxw();e.Q6J("ngModel",u.batchQty)("ngModelOptions",e.DdM(3,f))("disabled",a.selectDSKU&&a.selectDSKU!=u.SKUNo)}}const _=function(){return["approve","reject","view","generate","cancel"]};function m(C,M){if(1&C){const u=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",15)(7,"div",16),e._UZ(8,"div"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",15,17)(13,"span",18),e._uU(14),e.qZA()(),e.TgZ(15,"td",15,19)(17,"span",18),e._uU(18),e.qZA()(),e.TgZ(19,"td",null,20)(21,"span",21)(22,"div",22),e.NdJ("click",function(){const s=e.CHM(u).$implicit,p=e.oxw();return e.KtG(p.openDrawing(s.drawing))}),e.qZA()()(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td")(29,"span",23)(30,"div",24),e.NdJ("click",function(){const s=e.CHM(u).$implicit,p=e.oxw();return e.KtG(p.openFGInventoryModal(s))}),e.qZA()()(),e.TgZ(31,"td")(32,"div",25),e.YNc(33,g,3,4,"span",26),e.YNc(34,t,1,4,"input",27),e.qZA()(),e.TgZ(35,"td")(36,"span",23)(37,"div",28),e.NdJ("click",function(){const s=e.CHM(u).$implicit,p=e.oxw();return e.KtG(p.openSOScheduleModal(s))}),e.qZA()()()()}if(2&C){const u=M.$implicit,a=e.MAs(12),i=e.MAs(16),s=e.MAs(20),p=e.oxw();e.xp6(2),e.Oqu(null==u?null:u.SO_FCNumber),e.xp6(2),e.hij(" ",null!=u&&u.SO_FCDate?e.xi3(5,21,null==u?null:u.SO_FCDate,"dd-MM-YYYY"):null," "),e.xp6(4),e.Udp("background-color",null==u?null:u.code),e.xp6(2),e.hij(" ",null==u?null:u.SKUNo," "),e.xp6(1),e.Udp("width",a.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",u.SKUName)("positionTarget",a),e.xp6(1),e.hij(" ",null==u?null:u.SKUName," "),e.xp6(1),e.Udp("width",i.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",u.SKUDescription)("positionTarget",i),e.xp6(1),e.hij(" ",null==u?null:u.SKUDescription," "),e.xp6(3),e.Q6J("ngbTooltip",u.internalPartNo)("positionTarget",s),e.xp6(3),e.hij(" ",null==u?null:u.UOM," "),e.xp6(2),e.Oqu(e.xi3(27,24,null==u?null:u.balQty,"1.2-2")),e.xp6(7),e.Q6J("ngIf",e.DdM(27,_).includes(p.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(28,_).includes(p.action))}}const T=function(C,M,u,a){return{page:C,pageSize:M,collection:u,search:a,excelDisplay:"none"}};let P=(()=>{var C;class M{constructor(a,i,s,p){this.activeModal=a,this.toastService=i,this.modalService=s,this.utilityService=p,this.action="",this.totalBatchQty=null,this.orderType=null,this.collection=0,this.SKUDetailsOfJC=[],this.btnDisable=!1,this.page=1,this.pageSize=5,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.selectDSKU=null,this.saveData=new e.vpe,this.customerContactInfoArray=[]}ngOnInit(){this.collection=this.SKUDetailsOfJC.length}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=a.value}}trackByFn(a,i){return i?._id}openDrawing(a){a?window.open(a,"_blank"):this.toastService.warning("Drawing File Not Present")}openFGInventoryModal(a){if(!this.selectDSKU||this.selectDSKU==a.SKUNo){const i=this.modalService.open(I.B,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});i.componentInstance.action=this.action,i.componentInstance.FGInventoryInfo=a?.FGInventoryInfo,i.componentInstance.totalFGQty=a?.totalFGQty,i.result.then(s=>{if(s&&["create","edit"].includes(this.action)){let p=-1;p=this.SKUDetailsOfJC.findIndex("SalesOrder"==a.referenceModel?J=>J.reference==a?.reference&&J.SKU==a.SKU&&J.SO_FCLineTargetDate==a?.SO_FCLineTargetDate:J=>J.reference==a?.reference&&J.SKU==a.SKU),this.SKUDetailsOfJC[p].FGInventoryInfo=s?.FGInventoryInfo,a.balQty>s.totalFGQty?(this.SKUDetailsOfJC[p].batchQty=+a.balQty-+s.totalFGQty,this.SKUDetailsOfJC[p].previousQty=+a.balQty-+s.totalFGQty):this.SKUDetailsOfJC[p].batchQty=0,this.selectDSKU="number"==typeof+a.batchQty&&+a.batchQty>0?a?.SKUNo:null,this.calTotalBatchQuantity()}},s=>{})}}openSOScheduleModal(a){if(a.dispatchSchedule&&a.dispatchSchedule.length>0&&(!this.selectDSKU||this.selectDSKU==a.SKUNo)){const i=this.modalService.open(O.t,{centered:!0,windowClass:"custom-modal-sm",backdrop:"static",keyboard:!1});i.componentInstance.action=this.action,i.componentInstance.UOM=a.UOM,i.componentInstance.deliveryScheduleArr=a?.dispatchSchedule,i.result.then(s=>{s&&["create","edit"].includes(this.action)},s=>{})}}setBatchQty(a){let i=-1;i=this.SKUDetailsOfJC.findIndex("SalesOrder"==a.referenceModel?s=>s.reference==a?.reference&&s.SKU==a.SKU&&s.SO_FCLineTargetDate==a?.SO_FCLineTargetDate:s=>s.reference==a?.reference&&s.SKU==a.SKU),a.balQty>a.totalFGQty&&(this.SKUDetailsOfJC[i].previousQty=+a.balQty-+a.totalFGQty),+a.batchQty<+a.previousQty&&(this.selectDSKU=null),this.selectDSKU="number"==typeof+a.batchQty&&+a.batchQty>0?a?.SKUNo:null,this.calTotalBatchQuantity(),this.collection=this.SKUDetailsOfJC.length}calTotalBatchQuantity(){let a=this.SKUDetailsOfJC.map(i=>i.batchQty||0).reduce((i,s)=>+i+ +s,0);this.saveData.emit({data:a,key:"totalBatchQuantitySKU"})}onSort({column:a,direction:i}){this.headers.forEach(s=>{s.sortable!==a&&(s.direction="")}),this.SKUDetailsOfJC=""===i||""===a?this.SKUDetailsOfJC:[...this.SKUDetailsOfJC].sort((s,p)=>{let J="string"==typeof s[a]?s[a].toLowerCase():s[a],N="string"==typeof p[a]?p[a].toLowerCase():p[a];const K=J<N?-1:J>N?1:0;return"asc"===i?K:-K})}}return(C=M).\u0275fac=function(a){return new(a||C)(e.Y36(y.Kz),e.Y36(v.kl),e.Y36(y.FF),e.Y36(v.tI))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-job-card-sku-details-table"]],viewQuery:function(a,i){if(1&a&&e.Gf(n.j,5),2&a){let s;e.iGM(s=e.CRH())&&(i.headers=s)}},inputs:{action:"action",totalBatchQty:"totalBatchQty",orderType:"orderType",collection:"collection",SKUDetailsOfJC:"SKUDetailsOfJC",customerContactInfoArray:"customerContactInfoArray"},outputs:{saveData:"saveData"},decls:35,vars:24,consts:[[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","SO_FCNumber",3,"sort"],["sortable","SO_FCDate",3,"sort"],["sortable","code",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","balQty",3,"sort"],["sortable","batchQty",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],[1,"box"],["SKUName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["SKUDescription",""],["internalPartNo",""],[1,"d-flex","justify-content-center","pointer",3,"ngbTooltip","positionTarget"],[1,"drawingIcon",3,"click"],[1,"d-flex","justify-content-center","pointer"],[1,"FGMip",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["type","number","class","form-control form-control-xs w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input",4,"ngIf"],[1,"assetCalendarTD",3,"click"],["type","number",1,"form-control","form-control-xs","w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"app-setting-header",1),e.NdJ("dataChange",function(p){return i.eventHeader(p)}),e.qZA(),e.TgZ(2,"table",2)(3,"thead",3)(4,"tr",4)(5,"th",5),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(6),e.qZA(),e.TgZ(7,"th",6),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(8),e.qZA(),e.TgZ(9,"th",7),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(10,"Code"),e.qZA(),e.TgZ(11,"th",8),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(12,"SKU Code"),e.qZA(),e.TgZ(13,"th",9),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(14),e.ALo(15,"labelTranslate"),e.qZA(),e.TgZ(16,"th",10),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(17),e.ALo(18,"labelTranslate"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"DWG"),e.qZA(),e.TgZ(21,"th",11),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(22,"UoM"),e.qZA(),e.TgZ(23,"th",12),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(24),e.qZA(),e.TgZ(25,"th"),e._uU(26,"FG Inv"),e.qZA(),e.TgZ(27,"th",13),e.NdJ("sort",function(p){return i.onSort(p)}),e._uU(28,"Batch Qty"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Disp."),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,m,38,29,"tr",14),e.ALo(33,"slice"),e.ALo(34,"searchFi1ter"),e.qZA()()()),2&a&&(e.xp6(1),e.Q6J("data",e.l5B(19,T,i.page,i.pageSize,i.collection,i.search)),e.xp6(5),e.hij(" ","All"===i.orderType?"SO/FC No.":"FC"===i.orderType?"FC No.":"SO"===i.orderType?"SO No.":"NPD"===i.orderType?"SR No.":"SO No."," "),e.xp6(2),e.hij(" ","All"===i.orderType?"SO/FC Date":"FC"===i.orderType?"FC Date":"SO"===i.orderType?"SO Date":"NPD"===i.orderType?"SR Date":"SO Date"," "),e.xp6(6),e.hij(" ",e.lcZ(15,8,"SKU Name")," "),e.xp6(3),e.hij(" ",e.lcZ(18,10,"SKU Description")," "),e.xp6(7),e.hij(" ","All"===i.orderType?"Bal SO/FC Qty":"FC"===i.orderType?"Bal FC Qty":"SO"===i.orderType?"Bal SO Qty":"NPD"===i.orderType?"Bal SR Qty":"Bal SO Qty"," "),e.xp6(8),e.Q6J("ngForOf",e.Dn7(33,12,e.xi3(34,16,i.SKUDetailsOfJC,i.search),(i.page-1)*i.pageSize,(i.page-1)*i.pageSize+i.pageSize))("ngForTrackBy",i.trackByFn))},dependencies:[S.sg,S.O5,x.P,y._L,U.Fj,U.wV,U.JJ,U.On,n.j,S.OU,S.JJ,S.uU,A.G,F.c],styles:[".box[_ngcontent-%COMP%]{display:grid;place-items:center}.box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:1rem;width:1rem}"]}),M})()},13107:(Q,Z,d)=>{d.d(Z,{t:()=>e});const e={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(Q,Z,d)=>{d.d(Z,{J:()=>e});const e=({data:n,headers:I,widths:O,title:y})=>({tableData:{widths:O,headerRows:1,body:[I.map(x=>({text:x.header,style:"header"})),...n.map(x=>I.map(U=>({style:"subheader",text:x[U.key]})))]},title:y})}}]);