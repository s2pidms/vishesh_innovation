"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6025],{96025:(G,p,o)=>{o.r(p),o.d(p,{MenuItemModule:()=>Q});var u=o(96814),m=o(1076),r=o(60095),f=o(21631),v=o(22096),b=o(73275),t=o(65879),h=o(88354),d=o(98977),Z=o(16897),T=o(1551),y=o(50363);function A(s,c){if(1&s&&(t.TgZ(0,"div",18)(1,"label",7),t._uU(2," Role "),t.TgZ(3,"span",8),t._uU(4,"*"),t.qZA()(),t._UZ(5,"ng-select",19)(6,"validation-messages",20),t.qZA()),2&s){const e=t.oxw();t.xp6(5),t.Q6J("items",e.roles)("multiple",!0)("clearable",!1),t.xp6(1),t.Q6J("control",e.f.roles)}}function C(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.reset())}),t._uU(1," Reset "),t.qZA()}}function _(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t._uU(1," Save "),t.qZA()}}const M=function(s){return{"d-none":s}},S=function(){return["view","edit"]},U=function(){return["create","edit"]};let J=(()=>{class s{get f(){return this.form.controls}constructor(e,n,i,a,l,k,E,z){this.menuService=e,this.router=n,this.activatedRoute=i,this.spinner=a,this.toastService=l,this.validationService=k,this.storageService=E,this.utilityService=z,this.submitted=!1,this.action="create",this.image=null,this.roles=[],this.user={},this.superAdminId="64a687b4e9143bffd820fb3d",this.form=new r.nJ({_id:new r.p4(null),title:new r.p4("",[r.kI.required]),path:new r.p4("",[r.kI.required]),activeClass:new r.p4(""),isMenuActive:new r.p4(!0,[r.kI.required]),menuOrder:new r.p4("",[r.kI.required]),color:new r.p4(""),image:new r.p4(""),roles:new r.p4([],[r.kI.required])})}ngOnInit(){this.getInitialData(),this.user=this.storageService.get("IDMSAUser")?.roles,this.user=this.user.find(e=>e==this.superAdminId)}reset(){this.form.reset()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,b.DP))return;let e=this.form.value;e._id?this.update(e):(delete e._id,this.create(e))}create(e){this.spinner.show(),this.menuService.create(e).subscribe(n=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(n.message),this.router.navigate(["/default/settings/master/security_master/menu-item/menu-list"])})}update(e){this.spinner.show(),this.menuService.update(e._id,e).subscribe(n=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(n.message),this.router.navigate(["/default/settings/master/security_master/menu-item/menu-list"])})}getInitialData(){this.spinner.show(),this.activatedRoute.queryParams.pipe((0,f.z)(e=>(this.action=e.action,this.utilityService.accessDenied(this.action),e.id?this.menuService.getById(e.id):(0,v.of)({})))).subscribe(e=>{this.spinner.hide(),0!=Object.keys(e).length&&(this.roles=e.roles,this.form.patchValue(e.menuDetails),"edit"!=this.action&&this.form.disable())}),this.spinner.hide()}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(h.hl),t.Y36(m.F0),t.Y36(m.gz),t.Y36(d.V),t.Y36(d.kl),t.Y36(Z.RJ),t.Y36(d.V1),t.Y36(d.tI))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-menu-form"]],decls:37,vars:15,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","title",1,"form-control"],["type","number","formControlName","menuOrder",1,"form-control"],["formControlName","isMenuActive",1,"form-select"],["disabled","","selected","",3,"value"],[3,"value"],["class","col-12 mt-4",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center","mb-3",3,"ngClass"],["class","btn bg-primary mt-2 px-5 me-2","type","button",3,"click",4,"ngIf"],["class","btn bg-primary mt-2 px-5","type","button",3,"click",4,"ngIf"],[1,"col-12","mt-4"],["bindLabel","label","bindValue","value","formControlName","roles",3,"items","multiple","clearable"],[1,"error-left",3,"control"],["type","button",1,"btn","bg-primary","mt-2","px-5","me-2",3,"click"],["type","button",1,"btn","bg-primary","mt-2","px-5",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11," Title "),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17," Menu Order "),t.TgZ(18,"span",8),t._uU(19,"*"),t.qZA()(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",6)(22,"label",7),t._uU(23," Status "),t.TgZ(24,"span",8),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"select",11)(27,"option",12),t._uU(28,"Status"),t.qZA(),t.TgZ(29,"option",13),t._uU(30,"Enable"),t.qZA(),t.TgZ(31,"option",13),t._uU(32,"Disable"),t.qZA()()(),t.YNc(33,A,7,4,"div",14),t.qZA()(),t.TgZ(34,"div",15),t.YNc(35,C,2,0,"button",16),t.YNc(36,_,2,0,"button",17),t.qZA()()()),2&n&&(t.Q6J("formGroup",i.form),t.xp6(5),t.hij("Menu Item [",t.lcZ(6,9,i.action),"]"),t.xp6(22),t.Q6J("value",null),t.xp6(2),t.Q6J("value","true"),t.xp6(2),t.Q6J("value","false"),t.xp6(2),t.Q6J("ngIf",i.user==i.superAdminId),t.xp6(1),t.Q6J("ngClass",t.VKq(11,M,"View"==i.action)),t.xp6(1),t.Q6J("ngIf",!t.DdM(13,S).includes(i.action)),t.xp6(1),t.Q6J("ngIf",t.DdM(14,U).includes(i.action)))},dependencies:[u.mk,u.O5,T.s,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,y.w9,u.rS],encapsulation:2})}return s})();var g=o(43818),x=o(25116),F=o(88059),I=o(53421),q=o(95346);function w(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",12),t._UZ(9,"button",13),t.TgZ(10,"div",14)(11,"a",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.navigateTo("/default/settings/master/security_master/menu-item/menu-form",null==a?null:a._id,"view"))}),t._UZ(12,"i",16),t._uU(13," View "),t.qZA(),t.TgZ(14,"a",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.navigateTo("/default/settings/master/security_master/menu-item/menu-form",null==a?null:a._id,"edit"))}),t._UZ(15,"i",17),t._uU(16," Edit "),t.qZA()()()()()}if(2&s){const e=c.$implicit,n=t.oxw();t.xp6(2),t.Oqu(null==e?null:e.menuOrder),t.xp6(2),t.Oqu(null==e?null:e.title),t.xp6(2),t.Oqu(null!=e&&e.isMenuActive?"Enable":"Disable"),t.xp6(5),t.Q6J("accessType",n.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",n.rolePermissionActions.editAction)}}const N=function(s,c,e,n){return{page:s,pageSize:c,collection:e,search:n,type:"list",excelDisplay:"none"}};let O=(()=>{class s{constructor(e,n,i,a){this.menuService=e,this.activatedRoute=n,this.router=i,this.spinner=a,this.page=1,this.pageSize=10,this.collection=0,this.column="menuOrder",this.system="main",this.direction=1,this.search="",this.tableData=[],this.rolePermissionActions=x.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(e,n,i){this.router.navigate([e],{queryParams:{id:n,action:i}})}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value;break;case"EXCEL":default:break;case"PAGE":this.page=e.value}}getAll(){this.spinner.show();let e={system:this.system,column:this.column,direction:this.direction};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.menuService.getAll(e).subscribe(n=>{this.tableData=n,this.collection=this.tableData.length,this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}trackByFn(e,n){return n?._id}onSort({column:e,direction:n}){this.headers.forEach(i=>{i.sortable!==e&&(i.direction="")}),this.column=e,this.direction="asc"==n?1:-1,this.getAll()}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(h.hl),t.Y36(m.gz),t.Y36(m.F0),t.Y36(d.V))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-menu-list"]],viewQuery:function(n,i){if(1&n&&t.Gf(g.j,5),2&n){let a;t.iGM(a=t.CRH())&&(i.headers=a)}},decls:21,vars:15,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],[1,"table-responsive",2,"min-height","40.5rem"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","menuOrder",3,"sort"],["sortable","title",3,"sort"],["sortable","isMenuActive",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Menu Item Summary"),t.qZA()(),t.TgZ(4,"div",3)(5,"app-setting-header",4),t.NdJ("dataChange",function(l){return i.eventHeader(l)}),t.qZA(),t.TgZ(6,"table",5)(7,"thead",6)(8,"tr",7)(9,"th",8),t.NdJ("sort",function(l){return i.onSort(l)}),t._uU(10,"Menu Order"),t.qZA(),t.TgZ(11,"th",9),t.NdJ("sort",function(l){return i.onSort(l)}),t._uU(12,"Title"),t.qZA(),t.TgZ(13,"th",10),t.NdJ("sort",function(l){return i.onSort(l)}),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Action"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,w,17,5,"tr",11),t.ALo(19,"slice"),t.ALo(20,"searchFi1ter"),t.qZA()()()()),2&n&&(t.xp6(5),t.Q6J("data",t.l5B(10,N,i.page,i.pageSize,i.collection,i.search)),t.xp6(13),t.Q6J("ngForOf",t.Dn7(19,3,t.xi3(20,7,i.tableData,i.search),(i.page-1)*i.pageSize,(i.page-1)*i.pageSize+i.pageSize))("ngForTrackBy",i.trackByFn))},dependencies:[u.sg,F.P,g.j,I.J,u.OU,q.G],encapsulation:2})}return s})();var Y=o(56208);const L=[{path:"",redirectTo:"menu-list",pathMatch:"full"},{path:"menu-list",component:O},{path:"menu-form",component:J,resolve:{accessScreen:o(65876).x}}];let Q=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[u.ez,m.Bz.forChild(L),Y.m]})}return s})()}}]);