"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4035],{44035:(D,u,a)=>{a.r(u),a.d(u,{SubmodulePermissionsModule:()=>P});var c=a(96814),_=a(1076),e=a(65879),p=a(88354),m=a(98977),d=a(60095),g=a(50363);function h(i,l){1&i&&(e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"h5"),e._uU(5," Note: C \u2013 Create, V \u2013 View, E \u2013 Edit, D \u2013 Download, A \u2013 Approve, G \u2013 Generate Report "),e.qZA()()()()())}function C(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectMasterSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.createAction=t)}),e.qZA()(),e.TgZ(5,"td")(6,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectMasterSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.viewAction=t)}),e.qZA()(),e.TgZ(7,"td")(8,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectMasterSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.editAction=t)}),e.qZA()(),e.TgZ(9,"td")(10,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectMasterSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.downloadAction=t)}),e.qZA()()()}if(2&i){const o=l.$implicit;e.xp6(2),e.hij(" ",o.subModuleName," "),e.xp6(2),e.Q6J("ngModel",o.createAction),e.xp6(2),e.Q6J("ngModel",o.viewAction),e.xp6(2),e.Q6J("ngModel",o.editAction),e.xp6(2),e.Q6J("ngModel",o.downloadAction)}}function b(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"div",19)(3,"h3",25),e._uU(4,"Masters"),e.qZA()(),e.TgZ(5,"div",27)(6,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.selectAllMasters=t)})("change",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.setAllMastersChecked(t))}),e.qZA()(),e.TgZ(7,"div",29)(8,"h5",30),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",31)(11,"table",32)(12,"thead",33)(13,"tr",34)(14,"th",35),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"C"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"V"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"E"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"D"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,C,11,5,"tr",36),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(6),e.Q6J("ngModel",o.selectAllMasters),e.xp6(19),e.Q6J("ngForOf",o.mastersData)}}function A(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.createAction=t)}),e.qZA()(),e.TgZ(5,"td")(6,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.viewAction=t)}),e.qZA()(),e.TgZ(7,"td")(8,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.editAction=t)}),e.qZA()(),e.TgZ(9,"td")(10,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.approveAction=t)}),e.qZA()(),e.TgZ(11,"td")(12,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.downloadAction=t)}),e.qZA()(),e.TgZ(13,"td")(14,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectTransactionSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.generateReportAction=t)}),e.qZA()()()}if(2&i){const o=l.$implicit;e.xp6(2),e.hij(" ",o.subModuleName," "),e.xp6(2),e.Q6J("ngModel",o.createAction),e.xp6(2),e.Q6J("ngModel",o.viewAction),e.xp6(2),e.Q6J("ngModel",o.editAction),e.xp6(2),e.Q6J("ngModel",o.approveAction),e.xp6(2),e.Q6J("ngModel",o.downloadAction),e.xp6(2),e.Q6J("ngModel",o.generateReportAction)}}function M(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"div",19)(3,"h3",25),e._uU(4,"Transactions"),e.qZA()(),e.TgZ(5,"div",27)(6,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.selectAllTransaction=t)})("change",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.setAllTransactionsChecked(t))}),e.qZA()(),e.TgZ(7,"div",29)(8,"h5",30),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",31)(11,"table",32)(12,"thead",33)(13,"tr",34)(14,"th",35),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"C"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"V"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"E"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"A"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"D"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"G"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,A,15,7,"tr",36),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(6),e.Q6J("ngModel",o.selectAllTransaction),e.xp6(23),e.Q6J("ngForOf",o.transactionsData)}}function T(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectReportSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.viewAction=t)}),e.qZA()(),e.TgZ(5,"td")(6,"input",37),e.NdJ("change",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.selectReportSubModule())})("ngModelChange",function(t){const r=e.CHM(o).$implicit;return e.KtG(r.downloadAction=t)}),e.qZA()()()}if(2&i){const o=l.$implicit;e.xp6(2),e.hij(" ",o.subModuleName," "),e.xp6(2),e.Q6J("ngModel",o.viewAction),e.xp6(2),e.Q6J("ngModel",o.downloadAction)}}function v(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"div",16)(3,"h3",25),e._uU(4,"Reports"),e.qZA()(),e.TgZ(5,"div",27)(6,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.selectAllReports=t)})("change",function(t){e.CHM(o);const s=e.oxw();return e.KtG(s.setAllReportsChecked(t))}),e.qZA()(),e.TgZ(7,"div",38)(8,"h5",30),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",31)(11,"table",32)(12,"thead",33)(13,"tr",34)(14,"th",35),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"V"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"D"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,T,7,3,"tr",36),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(6),e.Q6J("ngModel",o.selectAllReports),e.xp6(15),e.Q6J("ngForOf",o.reportsData)}}const f=function(i){return{"d-none":i}};function Z(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",40)(1,"button",41),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.reset())}),e._uU(2,"Reset"),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.submit())}),e._uU(4,"Save"),e.qZA()()}if(2&i){const o=e.oxw(2);e.Q6J("ngClass",e.VKq(1,f,"View"==o.action))}}function S(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Z,5,3,"div",39),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngIf","view"!=o.action)}}let x=(()=>{var i;class l{constructor(n,t,s){this.subModulesPermissionService=n,this.spinner=t,this.toastService=s,this.submitted=!1,this.action="create",this.permissionId="",this.roles=[],this.tableData=[],this.roleList=[],this.menuItemList=[],this.mastersData=[],this.transactionsData=[],this.reportsData=[],this.view="",this.selectAllMasters=!1,this.selectAllReports=!1,this.selectAllTransaction=!1,this.role="",this.roleName="",this.menuItemId="",this.module="",this.existingRoles=[]}ngOnInit(){this.getInitialData()}setAllMastersChecked(n){this.mastersData=this.mastersData.map(t=>(t.createAction=n.target.checked,t.viewAction=n.target.checked,t.editAction=n.target.checked,t.downloadAction=n.target.checked,t))}setAllReportsChecked(n){this.reportsData=this.reportsData.map(t=>(t.viewAction=n.target.checked,t.downloadAction=n.target.checked,t))}setAllTransactionsChecked(n){this.transactionsData=this.transactionsData.map(t=>(t.createAction=n.target.checked,t.viewAction=n.target.checked,t.editAction=n.target.checked,t.approveAction=n.target.checked,t.downloadAction=n.target.checked,t.generateReportAction=n.target.checked,t))}submit(){this.spinner.show();let n={};n.masters=this.mastersData,n.transactions=this.transactionsData,n.reports=this.reportsData,this.subModulesPermissionService.update(this.permissionId,n).subscribe(t=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(t.message),this.reset()})}selectMasterSubModule(){this.selectAllMasters=!!this.mastersData.every(n=>n.createAction&&n.viewAction&&n.editAction&&n.downloadAction)}selectTransactionSubModule(){this.selectAllTransaction=!!this.transactionsData.every(n=>n.createAction&&n.viewAction&&n.editAction&&n.approveAction&&n.downloadAction&&n.generateReportAction)}selectReportSubModule(){this.selectAllReports=!!this.reportsData.every(n=>n.viewAction&&n.downloadAction)}getFilterData(){this.spinner.show(),this.subModulesPermissionService.getAllFilterData({module:this.module,menuItemId:this.menuItemId,role:this.role,roleName:this.roleName}).subscribe(t=>{this.permissionId=t._id,this.mastersData=t.masters,this.selectMasterSubModule(),this.transactionsData=t.transactions,this.selectTransactionSubModule(),this.reportsData=t.reports,this.selectReportSubModule()}),this.spinner.hide()}reset(){this.role="",this.menuItemId="",this.selectAllMasters=!1,this.selectAllReports=!1,this.selectAllTransaction=!1,this.mastersData=[],this.transactionsData=[],this.reportsData=[]}getInitialData(){this.spinner.show(),this.subModulesPermissionService.getAllMasterData({}).subscribe(n=>{this.roleList=n.roleList,this.menuItemList=n.menuItemList}),this.spinner.hide()}setRoleId(n){this.roleName=n.roleName}setModuleName(n){this.module=n.title}}return(i=l).\u0275fac=function(n){return new(n||i)(e.Y36(p.kY),e.Y36(m.V),e.Y36(m.kl))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-submodule-permissions-form"]],decls:36,vars:11,consts:[[1,"formCard","card"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label"],[1,"text-danger"],["bindLabel","roleName","bindValue","_id",3,"items","ngModel","clearable","change","ngModelChange"],["bindLabel","title","bindValue","_id",3,"items","ngModel","clearable","change","ngModelChange"],[1,"col-auto","align-self-end","ps-3","pe-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-auto","align-self-end","ps-3"],["class","row justify-content-center dashboard-page",4,"ngIf"],[1,"row","line-border"],[1,"col-4"],["class","",4,"ngIf"],[1,"col-5","px-0"],[1,"col-3"],[4,"ngIf"],[1,"row","justify-content-center","dashboard-page"],[1,"col-12","mb-4","mt-2"],[1,"card","h-100"],[1,"card-body","ms-3","align-items-start"],[1,""],[1,"row","mb-0","justify-content-center"],[1,"col-2","text-end","pe-0"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"col-2","text-start","ps-2"],[1,"mt-1","text-nowrap"],[1,"table-responsive"],[1,"table","table-bordered","mt-4"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"ngModel","change","ngModelChange"],[1,"col-3","text-start","ps-2"],["class","d-grid gap-2 d-md-flex justify-content-md-center mb-3",3,"ngClass",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center","mb-3",3,"ngClass"],["type","button",1,"btn","bg-primary","px-5","me-3",3,"click"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5,"Submodule Permissions "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10," Role "),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA()(),e.TgZ(13,"ng-select",9),e.NdJ("change",function(r){return t.setRoleId(r)})("ngModelChange",function(r){return t.role=r}),e.qZA()(),e.TgZ(14,"div",6)(15,"label",7),e._uU(16," Business Function/Module "),e.TgZ(17,"span",8),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"ng-select",10),e.NdJ("change",function(r){return t.setModuleName(r)})("ngModelChange",function(r){return t.menuItemId=r}),e.qZA()(),e.TgZ(20,"div",11)(21,"button",12),e.NdJ("click",function(){return t.getFilterData()}),e._uU(22,"Apply Filter"),e.qZA()(),e.TgZ(23,"div",13)(24,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(25,"Reset Filter"),e.qZA()()(),e.YNc(26,h,6,0,"div",14),e.qZA(),e._UZ(27,"hr",15),e.TgZ(28,"div",5)(29,"div",16),e.YNc(30,b,26,2,"div",17),e.qZA(),e.TgZ(31,"div",18),e.YNc(32,M,30,2,"div",17),e.qZA(),e.TgZ(33,"div",19),e.YNc(34,v,22,2,"div",17),e.qZA()(),e.YNc(35,S,2,1,"div",20),e.qZA()()),2&n&&(e.xp6(13),e.Q6J("items",t.roleList)("ngModel",t.role)("clearable",!1),e.xp6(6),e.Q6J("items",t.menuItemList)("ngModel",t.menuItemId)("clearable",!1),e.xp6(7),e.Q6J("ngIf",(null==t.mastersData?null:t.mastersData.length)>0||(null==t.transactionsData?null:t.transactionsData.length)>0||(null==t.reportsData?null:t.reportsData.length)>0),e.xp6(4),e.Q6J("ngIf",(null==t.mastersData?null:t.mastersData.length)>0),e.xp6(2),e.Q6J("ngIf",(null==t.transactionsData?null:t.transactionsData.length)>0),e.xp6(2),e.Q6J("ngIf",(null==t.reportsData?null:t.reportsData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.mastersData?null:t.mastersData.length)>0||(null==t.transactionsData?null:t.transactionsData.length)>0||(null==t.reportsData?null:t.reportsData.length)>0))},dependencies:[c.mk,c.sg,c.O5,d.Wl,d.JJ,d.On,g.w9],encapsulation:2}),l})();var F=a(56208);const w=[{path:"form",component:x}];let P=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,_.Bz.forChild(w),F.m]}),l})()}}]);