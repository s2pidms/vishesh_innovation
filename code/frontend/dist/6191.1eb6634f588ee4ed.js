"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6191],{26191:(Y,c,l)=>{l.r(c),l.d(c,{InventoryReportModule:()=>L});var u=l(96814),h=l(1076),g=l(43818),_=l(25116),v=l(31655),e=l(65879),I=l(73374),d=l(98977),f=l(88059),Z=l(37285),p=l(60095),y=l(50363),b=l(83344),T=l(59103);function A(r,a){if(1&r&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function N(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",47)(1,"label",7),e._uU(2,"Report Specific Search"),e.qZA(),e.TgZ(3,"ng-select",48),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.supplierId=n)}),e.qZA(),e.TgZ(4,"span",10),e._UZ(5,"img",11),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("items",t.suppliersArr)("clearable",!1)("ngModel",t.supplierId)}}function C(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",47)(1,"label",7),e._uU(2,"Report Specific Search"),e.qZA(),e.TgZ(3,"ng-select",49),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.itemId=n)}),e.qZA(),e.TgZ(4,"span",10),e._UZ(5,"img",11),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("items",t.itemsListArr)("clearable",!1)("ngModel",t.itemId)}}function R(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",47)(1,"label",7),e._uU(2,"Report Specific Search"),e.qZA(),e.TgZ(3,"ng-select",50),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.location=n)}),e.qZA(),e.TgZ(4,"span",10),e._UZ(5,"img",11),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("items",t.locationArr)("clearable",!1)("ngModel",t.location)}}function U(r,a){1&r&&e._UZ(0,"div",58)}function M(r,a){1&r&&e._UZ(0,"div",59)}function x(r,a){1&r&&e._UZ(0,"div",60)}function q(r,a){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",51,52)(5,"span",53),e._uU(6),e.qZA()(),e.TgZ(7,"td",51,54)(9,"span",53),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"UOMUnitsMaster"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.ALo(27,"date"),e.qZA(),e.TgZ(28,"td")(29,"span",41),e.YNc(30,U,1,0,"div",55),e.YNc(31,M,1,0,"div",56),e.YNc(32,x,1,0,"div",57),e.qZA()(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA()()),2&r){const t=a.$implicit,i=e.MAs(4),n=e.MAs(8);e.xp6(2),e.Oqu(null==t?null:t.itemCode),e.xp6(1),e.Udp("width",i.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",t.itemName)("positionTarget",i),e.xp6(1),e.hij(" ",null==t?null:t.itemName," "),e.xp6(1),e.Udp("width",n.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",t.itemDescription)("positionTarget",n),e.xp6(1),e.hij(" ",null==t?null:t.itemDescription," "),e.xp6(2),e.Oqu(e.lcZ(13,23,null==t?null:t.UOM)),e.xp6(3),e.Oqu(e.xi3(16,25,null==t?null:t.closedIRQty,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(19,28,null==t?null:t.purchaseRatINR,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(22,31,null==t?null:t.lineValue,"1.2-2")),e.xp6(3),e.hij(" ",null==t?null:t.MRNNumber," "),e.xp6(2),e.Oqu(e.xi3(27,34,null==t?null:t.batchDate,"dd-MM-YYYY")),e.xp6(4),e.Q6J("ngIf","green"==(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf","red"==(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf","orange"==(null==t?null:t.status)),e.xp6(2),e.hij(" ",null==t?null:t.expiryDate," "),e.xp6(2),e.Oqu(null==t?null:t.supplierName),e.xp6(2),e.hij(" ",null==t?null:t.deliveryLocation," ")}}const m=function(r){return[r]},J=function(r,a,t,i){return{page:r,pageSize:a,collection:t,search:i,type:"list",pdfDisplay:!0}};let S=(()=>{var r;class a{constructor(i,n,s,o,F,Q,w){this.inventoryCorrectionService=i,this.exportToPDFService=n,this.spinner=s,this.exportExcelService=o,this.utilityService=F,this.activatedRoute=Q,this.appGlobalService=w,this.page=1,this.pageSize=12,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.suppliersArr=[],this.locationArr=[],this.itemsListArr=[],this.toDate="",this.reportNameObj=_._X,this.reportNameArr=this.reportNameObj.getAllInventoryReportName(),this.reportName=this.reportNameObj.aodInventory,this.itemId="",this.supplierId="",this.location="",this.inventoryValue=0,this.rolePermissionActions=_.a1,this.accessType=this.rolePermissionActions.downloadAction,this.menuItemId="",this.menuItemName="",this.planningMenuItemId="64a6c1e33339d4dc9d8141a4",this.purchaseMenuItemId="64a6c1e33339d4dc9d8141a5",this.storesMenuItemId="64a6c1e33339d4dc9d8141a6",this.productionMenuItemId="64a6c1e33339d4dc9d8141a8"}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.menuItemId=this.appGlobalService.menuItemId,this.menuItemId==this.planningMenuItemId?this.menuItemName="Planning":this.menuItemId==this.purchaseMenuItemId||this.menuItemId==this.storesMenuItemId?this.menuItemName="Stores":this.menuItemId==this.productionMenuItemId&&(this.menuItemName="Production"),this.getFiscalDate(),this.getAll()}getFiscalDate(){let i=this.utilityService.getCurrentMonthDates();this.toDate=i.toDate}trackByFn(i,n){return n?._id}reset(){this.getFiscalDate(),this.reportName=this.reportNameObj.aodInventory,this.supplierId="",this.location="",this.getAll()}setReportName(){this.reportName==this.reportNameObj.aodInventoryBySupplier?(this.location="",this.itemId=""):this.reportName==this.reportNameObj.aodInventoryByLocation?(this.supplierId="",this.itemId=""):this.reportName==this.reportNameObj.aodInventoryByItem?(this.supplierId="",this.location=""):(this.location="",this.supplierId="")}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=i.value,this.getAll()}}getAll(i=!1,n=""){this.spinner.show();let s={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:i,supplierId:this.supplierId,location:this.location,itemId:this.itemId,toDate:this.toDate,department:this.menuItemName};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.inventoryCorrectionService.getAllLocationSupplierItemWiseReports(s).subscribe(o=>{"EXCEL"==n?this.excelDownload(o.rows):"PDF"==n?this.pdfDownload(o.rows):(this.tableData=o.rows,this.suppliersArr=o.suppliersList,this.itemsListArr=o.itemsList,this.locationArr=o.locations,this.collection=o.count,this.inventoryValue=o?.totalAmounts?.value),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(i){let n=(0,v.Jz)(i);this.exportToPDFService.generatePdf(n.tableData,n.title)}excelDownload(i){this.exportExcelService.exportExcel((0,v.CT)(i))}onSort({column:i,direction:n}){this.headers.forEach(s=>{s.sortable!==i&&(s.direction="")}),this.column=i,this.direction="asc"==n?1:-1,this.getAll()}}return(r=a).\u0275fac=function(i){return new(i||r)(e.Y36(I.Ee),e.Y36(d.$L),e.Y36(d.V),e.Y36(d.Ol),e.Y36(d.tI),e.Y36(h.gz),e.Y36(d.P0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-inventory-report"]],viewQuery:function(i,n){if(1&i&&e.Gf(g.j,5),2&i){let s;e.iGM(s=e.CRH())&&(n.headers=s)}},decls:76,vars:27,consts:[[1,"reportTablePage"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5","separate-row"],[1,"form-label"],[1,"form-select",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"set-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],["class","col-3 separate-row",4,"ngIf"],[1,"col-3"],[1,"text-danger"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","align-self-end","separate-image"],[1,"image-position"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","ms-4",3,"click"],[1,"row","line-border"],[1,"table-responsive","mb-0"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","closedIRQty",3,"sort"],["sortable","purchaseRatINR",3,"sort"],["sortable","lineValue",3,"sort"],["sortable","MRNNumber",3,"sort"],["sortable","batchDate",3,"sort"],["sortable","expiryDate",3,"sort"],["sortable","supplierName",3,"sort"],["sortable","deliveryLocation",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-footer"],[1,"row","align-items-center","mt-3"],[1,"d-flex","justify-content-center"],[1,"col-form-label","text-nowrap","pe-1","pt-0","ms-3"],[1,"fa","fa-caret-right","fa-5x","mx-2"],["type","button",1,"btn","btn-info","py-1","ms-2"],["type","text","readonly","",1,"form-control",3,"value"],[3,"value"],[1,"col-3","separate-row"],["bindLabel","supplierName","bindValue","_id",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","itemName","bindValue","_id",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","label","bindValue","value",3,"items","clearable","ngModel","ngModelChange"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],["style","height: 1.8rem","class","flaggreen",4,"ngIf"],["style","height: 1.8rem","class","flagred",4,"ngIf"],["style","height: 1.8rem","class","flagYellow",4,"ngIf"],[1,"flaggreen",2,"height","1.8rem"],[1,"flagred",2,"height","1.8rem"],[1,"flagYellow",2,"height","1.8rem"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Inventory Report (IR) - Stores"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Report Name"),e.qZA(),e.TgZ(10,"select",8),e.NdJ("change",function(){return n.setReportName()})("ngModelChange",function(o){return n.reportName=o}),e.YNc(11,A,2,2,"option",9),e.qZA(),e.TgZ(12,"span",10),e._UZ(13,"img",11),e.qZA()(),e.YNc(14,N,6,3,"div",12),e.YNc(15,C,6,3,"div",12),e.YNc(16,R,6,3,"div",12),e.TgZ(17,"div",13)(18,"label",7),e._uU(19," As on Date "),e._UZ(20,"span",14),e.qZA(),e.TgZ(21,"input",15),e.NdJ("ngModelChange",function(o){return n.toDate=o}),e.qZA()(),e.TgZ(22,"div",16)(23,"span",17),e._UZ(24,"img",11),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){return n.getAll()}),e._uU(26,"Apply Filter"),e.qZA(),e.TgZ(27,"button",19),e.NdJ("click",function(){return n.reset()}),e._uU(28,"Reset Filter"),e.qZA()()(),e._UZ(29,"hr",20),e.TgZ(30,"div",21)(31,"app-setting-header",22),e.NdJ("dataChange",function(o){return n.eventHeader(o)}),e.qZA(),e.TgZ(32,"table",23)(33,"thead",24)(34,"tr",25)(35,"th",26),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(36,"Item Code"),e.qZA(),e.TgZ(37,"th",27),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(38,"Item Name"),e.qZA(),e.TgZ(39,"th",28),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(40,"Item Description"),e.qZA(),e.TgZ(41,"th",29),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(42,"UoM"),e.qZA(),e.TgZ(43,"th",30),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(44,"Quantity"),e.qZA(),e.TgZ(45,"th",31),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(46,"Unit Rate"),e.qZA(),e.TgZ(47,"th",32),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(48,"Line Value"),e.qZA(),e.TgZ(49,"th",33),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(50,"MRN No."),e.qZA(),e.TgZ(51,"th",34),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(52,"Batch Date"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Aging"),e.qZA(),e.TgZ(55,"th",35),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(56,"B/B Date"),e.qZA(),e.TgZ(57,"th",36),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(58,"Supplier N'/Name"),e.qZA(),e.TgZ(59,"th",37),e.NdJ("sort",function(o){return n.onSort(o)}),e._uU(60,"Location"),e.qZA()()(),e.TgZ(61,"tbody"),e.YNc(62,q,39,37,"tr",38),e.qZA()()(),e.TgZ(63,"div",39),e._UZ(64,"hr",20),e.TgZ(65,"div",40)(66,"div",13)(67,"div",41)(68,"div",42),e._uU(69," Inventory Value "),e._UZ(70,"i",43),e.TgZ(71,"button",44),e._uU(72),e.ALo(73,"companyCurrency"),e.qZA()(),e._UZ(74,"input",45),e.ALo(75,"number"),e.qZA()()()()()()),2&i&&(e.xp6(10),e.Q6J("ngModel",n.reportName),e.xp6(1),e.Q6J("ngForOf",n.reportNameArr),e.xp6(3),e.Q6J("ngIf",e.VKq(16,m,n.reportNameObj.aodInventoryBySupplier).includes(n.reportName)),e.xp6(1),e.Q6J("ngIf",e.VKq(18,m,n.reportNameObj.aodInventoryByItem).includes(n.reportName)),e.xp6(1),e.Q6J("ngIf",e.VKq(20,m,n.reportNameObj.aodInventoryByLocation).includes(n.reportName)),e.xp6(5),e.Q6J("ngModel",n.toDate),e.xp6(10),e.Q6J("data",e.l5B(22,J,n.page,n.pageSize,n.collection,n.search)),e.xp6(31),e.Q6J("ngForOf",n.tableData)("ngForTrackBy",n.trackByFn),e.xp6(10),e.Oqu(e.lcZ(73,11,"INR")),e.xp6(2),e.Q6J("value",e.xi3(75,13,n.inventoryValue,"1.2-2")))},dependencies:[u.sg,u.O5,f.P,Z._L,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On,y.w9,g.j,u.JJ,u.uU,b.f,T.S],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]}),a})();var D=l(56208);const O=[{path:"",component:S}];let L=(()=>{var r;class a{}return(r=a).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,h.Bz.forChild(O),D.m]}),a})()}}]);