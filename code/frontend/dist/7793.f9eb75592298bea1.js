"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7793],{60945:(C,p,l)=>{l.r(p),l.d(p,{RejectionSummaryModule:()=>st});var m=l(96814),_=l(1076),s=l(60095),b=l(21631),v=l(22096),Z=l(3959),T=l(74834),u=l(43818),t=l(65879),d=l(37285),g=l(2742);const S=function(){return["view"]};function x(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"div",27)(1,"div",7)(2,"input",28),t.NdJ("ngModelChange",function(e){const r=t.CHM(o).$implicit;return t.KtG(r.defect=e)}),t.qZA()(),t.TgZ(3,"div",11)(4,"input",28),t.NdJ("ngModelChange",function(e){const r=t.CHM(o).$implicit;return t.KtG(r.remarks=e)}),t.qZA()(),t.TgZ(5,"div",14)(6,"input",28),t.NdJ("ngModelChange",function(e){const r=t.CHM(o).$implicit;return t.KtG(r.remarksBy=e)}),t.qZA()()()}if(2&a){const o=c.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngModel",o.defect)("disabled",t.DdM(6,S).includes(n.action)),t.xp6(2),t.Q6J("ngModel",o.remarks)("disabled",t.DdM(7,S).includes(n.action)),t.xp6(2),t.Q6J("ngModel",o.remarksBy)("disabled",t.DdM(8,S).includes(n.action))}}let M=(()=>{var a;class c{constructor(n,e){this.activeModal=n,this.utilityService=e,this.action="create",this.rejectRemarks=[]}ngOnInit(){console.log("rejectRemarks",this.rejectRemarks),(!this.rejectRemarks||0==this.rejectRemarks.length)&&(this.rejectRemarks=[],this.rejectRemarks.push({defect:"",remarks:"",remarksBy:null}))}deleteTableRow(){this.rejectRemarks?.length>1&&this.rejectRemarks.pop()}addTableRow(){this.rejectRemarks.push({defect:"",remarks:"",remarksBy:null})}dismissModel(){this.activeModal.close({rejectRemarks:this.rejectRemarks})}}return(a=c).\u0275fac=function(n){return new(n||a)(t.Y36(d.Kz),t.Y36(g.tI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-remarks-modal"]],viewQuery:function(n,e){if(1&n&&t.Gf(u.j,5),2&n){let i;t.iGM(i=t.CRH())&&(e.headers=i)}},inputs:{action:"action",rejectRemarks:"rejectRemarks"},decls:36,vars:3,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"col-3","pe-0"],[1,"row"],[1,"col","pe-4"],[1,"form-label"],[1,"col-7","pe-1","ps-1"],["type","text",1,"form-label"],[1,"text-primary","span"],[1,"col-2","ps-0"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"line-border"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"cold-flex","justify-content-center","text-center"],["type","button",1,"btn","btn-primary","px-4",3,"disabled","click"],[1,"row","mx-4","px-3","mb-2"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Remarks"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13,"Defects"),t.qZA()()()(),t.TgZ(14,"div",11)(15,"label",12),t._uU(16," Remarks/Observation/Analysis "),t._UZ(17,"span",13),t.qZA()(),t.TgZ(18,"div",14)(19,"label",12),t._uU(20,"Remarks by"),t.qZA()()(),t.YNc(21,x,7,9,"div",15),t.TgZ(22,"div",16)(23,"div",17)(24,"div",18)(25,"img",19),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()(),t._UZ(26,"hr",20),t.TgZ(27,"div",21)(28,"img",22),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()()()(),t.TgZ(29,"div",8)(30,"div",23),t._UZ(31,"hr",20),t.qZA()(),t.TgZ(32,"div",24)(33,"div",25)(34,"button",26),t.NdJ("click",function(){return e.dismissModel()}),t._uU(35," Save & Close "),t.qZA()()()()()),2&n&&(t.xp6(21),t.Q6J("ngForOf",e.rejectRemarks),t.xp6(13),t.Q6J("disabled",t.DdM(2,S).includes(e.action)))},dependencies:[m.sg,s.Fj,s.JJ,s.On],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}.row.mx-4.px-3[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center}.row.mx-4.px-3[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-left:10px}.form-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px}.label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border-color:#fa0096}"]}),c})();var A=l(57656),q=l(16897),D=l(95346),U=l(84231);function N(a,c){1&a&&t._UZ(0,"img",59)}function J(a,c){1&a&&t._UZ(0,"img",60)}function O(a,c){if(1&a&&(t.TgZ(0,"li",62)(1,"span",63),t._uU(2),t.qZA()()),2&a){const o=t.oxw(),n=o.$implicit,e=o.pages;t.xp6(2),t.AsE(" Page ",n," of ",e[e.length-1]," ")}}function Q(a,c){1&a&&t.YNc(0,O,3,2,"li",61),2&a&&t.Q6J("ngIf",c.pages.length>0)}function F(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"ngb-pagination",55),t.NdJ("pageChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.page=e)}),t.YNc(1,N,1,0,"ng-template",56),t.YNc(2,J,1,0,"ng-template",57),t.YNc(3,Q,1,1,"ng-template",58),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("collectionSize",o.JCEntryDetailsList.length)("page",o.page)("pageSize",o.pageSize)("boundaryLinks",!1)}}function L(a,c){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==o?null:o.quantity," ")}}const I=function(){return{standalone:!0}};function E(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"input",70),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw().$implicit;return t.KtG(i.quantity=e)})("input",function(){t.CHM(o);const e=t.oxw().$implicit,i=t.oxw();return t.KtG(i.calRejectQty(e))}),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.Q6J("ngModel",o.quantity)("ngModelOptions",t.DdM(2,I))}}const k=function(){return["view","accept"]};function P(a,c){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",64,65)(5,"span",66),t._uU(6),t.qZA()(),t.TgZ(7,"td")(8,"div",67),t.YNc(9,L,2,1,"span",68),t.YNc(10,E,1,3,"input",69),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA()()),2&a){const o=c.$implicit,n=c.index,e=t.MAs(4),i=t.oxw();t.xp6(2),t.hij(" ",n+1+(i.page-1)*i.pageSize," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",o.rejectionType)("positionTarget",e),t.xp6(1),t.hij(" ",null==o?null:o.rejectionType," "),t.xp6(3),t.Q6J("ngIf",t.DdM(12,k).includes(i.action)),t.xp6(1),t.Q6J("ngIf",!t.DdM(13,k).includes(i.action)),t.xp6(2),t.hij(" ",null!=o&&o.percentage?t.xi3(13,9,null==o?null:o.percentage,"1.2-2"):0," ")}}function K(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.submit())}),t._uU(1),t.qZA()}if(2&a){const o=t.oxw();t.xp6(1),t.hij(" ","accept"==o.action?"Accept":" Save"," ")}}const Y=function(){return["reject","approve","view"]};let G=(()=>{var a;class c{constructor(n,e,i,r,h,y,f,R,j){this.jobCardEntryService=n,this.activatedRoute=e,this.spinner=i,this.toastService=r,this.validationService=h,this.modalService=y,this.utilityService=f,this.location=R,this.appGlobalService=j,this.isPreview=!1,this.submitted=!1,this.isESCPreview=!1,this.action="create",this.page=1,this.pageSize=8,this.collection=0,this.totalQuantity=0,this.totalPercentage=0,this.column="SN",this.direction=-1,this.search="",this.selectedJobCardDetails={},this.batchInputQty=0,this.processDetailsList=[],this.ESCPreviewArr=[],this.menuItemId="",this.masterData={autoIncrementNo:"",JCOptions:[],billFromLocationOptions:[],shiftOptions:[]},this.JCEntryDetailsList=[],this.prodInfoList=[{prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null}],this.IPQAInfoList={},this.rejectRemarks=[],this.drawingLink="",this.showSKUFlow=!1,this.form=new s.nJ({jobCardEntryCode:new s.p4(null),jobCard:new s.p4(null,[s.kI.required]),jobCardNo:new s.p4(null),SKU:new s.p4(null),SKUStage:new s.p4(null),SKUNo:new s.p4(null),SKUName:new s.p4(null),SKUDescription:new s.p4(null),UOM:new s.p4(null),batchQty:new s.p4(null),batchDate:new s.p4(null),customer:new s.p4(null),customerName:new s.p4(null),location:new s.p4(null),batchOutputQty:new s.p4(null),batchNumber:new s.p4(null),generateReport:new s.nJ({batchInputQty:new s.p4(null),batchOutputQty:new s.p4(null),batchRejQty:new s.p4(null),jobCardClosureDate:new s.p4(null),location:new s.p4(null),checkoutStatus:new s.p4(null)}),rejectStatus:new s.p4("In-Process"),rejectionData:new s.p4([]),rejectedTotalQty:new s.p4(null),rejectedPercent:new s.p4(null),rejectRemarks:new s.p4([])})}get f(){return this.form.controls}get generateReportData(){return this.form.get("generateReport")}ngOnInit(){this.menuItemId=this.appGlobalService.menuItemId,this.getInitialData()}openDrawing(){this.drawingLink?window.open(this.drawingLink,"_blank"):this.toastService.warning("Drawing File Not Present")}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,Z.m5))return;if(!this.f.rejectedTotalQty.value)return void this.toastService.warning("Total Count Cannot be zero");this.form.enable();let n=this.form.value;"accept"==this.action&&(n.rejectStatus="Accepted"),n.rejectionData=this.JCEntryDetailsList,n.rejectRemarks=this.rejectRemarks,"Skip Integration"!=n.generateReport.checkoutStatus||n.generateReport.batchOutputQty?this.create(n):this.toastService.warning("In Generate Report Batch Output Quantity is Required")}skipIntegration(){"Skip Integration"==this.form.value.generateReport.checkoutStatus||this.submit()}trackByFn(n,e){return e?._id}create(n){this.spinner.show(),this.jobCardEntryService.createOrUpdate(n).subscribe(e=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(e.message),this.reset(),this.location.back()})}reset(){this.form.reset(),this.JCEntryDetailsList=[],this.collection=this.JCEntryDetailsList.length,this.isESCPreview=!1}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.form.controls.jobCardEntryCode.setValue(this.masterData?.autoIncrementNo),this.activatedRoute.queryParams.pipe((0,b.z)(e=>(this.action=e.action,e.id?this.jobCardEntryService.getById(e.id):(0,v.of)({})))).subscribe(e=>{if(this.selectedJobCardDetails=e,this.spinner.hide(),0!=Object.keys(e).length){if(e.batchDate&&(e.batchDate=this.utilityService.getFormatDate(e.batchDate,"YYYY-MM-DD")),0==e?.rejectionData?.length)this.JCEntryDetailsList=n?.defectList?.map(i=>(i.quantity=0,i.percentage=0,i));else{e.rejectionData=e.rejectionData;let i=n?.defectList?.map(r=>(r.quantity=0,r.percentage=0,r));for(const r of e.rejectionData)i=i.filter(h=>h.SN!=r.SN),this.JCEntryDetailsList=[...e.rejectionData,...i]}e?.rejectRemarks&&(this.rejectRemarks=e?.rejectRemarks),this.collection=this.JCEntryDetailsList.length,this.form.patchValue(e),this.f.jobCardNo.disable(),["view","approve"].includes(this.action)&&this.form.disable()}})})}calRejectQty(n){let e=+this.generateReportData?.controls.batchRejQty.value,i=this.JCEntryDetailsList.map(r=>r.SN).indexOf(n.SN);this.JCEntryDetailsList=this.JCEntryDetailsList.map(r=>(r.percentage=+ +r?.quantity/e*100,r)),this.reduceData(),this.f.rejectedTotalQty.value>this.generateReportData?.value?.batchRejQty&&(this.toastService.warning("Quantity Should be less than equal to Rejection Qty"),this.JCEntryDetailsList[i].percentage=0,this.JCEntryDetailsList[i].quantity=0,this.reduceData())}reduceData(){let n=this.JCEntryDetailsList?.map(i=>i.quantity)?.reduce((i,r)=>+i+ +r,0),e=this.JCEntryDetailsList?.map(i=>i.percentage)?.reduce((i,r)=>+i+ +r,0);this.f.rejectedTotalQty.setValue(+n.toFixed(2)),this.f.rejectedPercent.setValue(+e.toFixed(2))}openRemarksModal(){const n=this.modalService.open(M,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.rejectRemarks=this.rejectRemarks,n.result.then(e=>{e&&(console.log("success",e),this.rejectRemarks=e?.rejectRemarks)},e=>{})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}onSort({column:n,direction:e}){this.headers.forEach(i=>{i.sortable!==n&&(i.direction="")}),this.JCEntryDetailsList=""===e||""===n?this.JCEntryDetailsList:[...this.JCEntryDetailsList].sort((i,r)=>{let h="string"==typeof i[n]?i[n].toLowerCase():i[n],y="string"==typeof r[n]?r[n].toLowerCase():r[n];const f=h<y?-1:h>y?1:0;return"asc"===e?f:-f})}}return(a=c).\u0275fac=function(n){return new(n||a)(t.Y36(A.G3),t.Y36(_.gz),t.Y36(g.V),t.Y36(g.kl),t.Y36(q.RJ),t.Y36(d.FF),t.Y36(g.tI),t.Y36(m.Ye),t.Y36(g.P0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-rejection-summary-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j_,5),2&n){let i;t.iGM(i=t.CRH())&&(e.headers=i)}},decls:141,vars:19,consts:[[1,"row"],[1,"col-5","pe-0"],[1,"formCard","card","mt-3",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body","pb-3"],[1,"row","mt-4"],[1,"col-4","pe-0","d-flex","justify-content-between","align-items-center"],[1,"form-label"],[1,"text-danger"],[1,"text-secondary","fs-5"],[1,"col-8","ps-3"],["type","text","formControlName","jobCardNo","readonly","",1,"form-control","bg-white-smoke"],["type","date","formControlName","batchDate","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUNo","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUName","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control","bg-white-smoke"],["type","text","readonly","",1,"form-control","bg-white-smoke",3,"value"],["formGroupName","generateReport",1,"row","mt-4"],["type","text","formControlName","batchInputQty","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","batchOutputQty","readonly","",1,"form-control","bg-white-smoke"],["formGroupName","generateReport",1,"row","mt-4","mb-4"],["type","text","formControlName","batchRejQty","readonly","",1,"form-control","bg-white-smoke"],[1,"col-7","ps-0"],[1,"formCard","ms-0","card","mt-3",3,"formGroup"],[1,"row","form-header","mb-2"],[1,"row","pt-2","justify-content-between"],[1,"col-4"],[1,"col-4","d-flex","justify-content-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange",4,"ngIf"],[1,"row","line-border"],[1,"table-responsive",2,"min-height","27.7rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SN",2,"width","4rem !important",3,"sort"],["sortable","rejectionType",1,"text-start",2,"width","18rem !important",3,"sort"],["sortable","quantity",2,"width","7rem !important"],["sortable","percentage",2,"width","4rem !important"],[4,"ngFor","ngForOf","ngForTrackBy"],[2,"width","7.5rem !important"],[2,"width","32.5rem !important"],[1,"col-form-label","text-nowrap","pt-1","text-end"],[1,"mx-2"],[1,"border","border-1","bg-mix-pink-color","text-center",2,"width","14.5rem !important","border-color","#c8c8c8 !important"],[2,"font-size","1.2rem"],[1,"border","border-1","bg-mix-pink-color","text-center",2,"width","7.3rem !important","border-color","#c8c8c8 !important"],[1,"row","line-border","mt-3"],[1,"col-6"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"col-md-auto","ms-auto","d-flex","align-items-end"],["type","button","class","btn btn-primary px-5",3,"click",4,"ngIf"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],[1,"text-start"],["rejectionType",""],[1,"pointer",3,"ngbTooltip","positionTarget"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["class","form-control form-control-sm","type","number",3,"ngModel","ngModelOptions","ngModelChange","input",4,"ngIf"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","input"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Job Card Details "),t.qZA()()(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12," Job Card No "),t._UZ(13,"span",11),t.qZA(),t.TgZ(14,"span",12),t._uU(15,"\u25b6"),t.qZA()(),t.TgZ(16,"div",13),t._UZ(17,"input",14),t.qZA()(),t.TgZ(18,"div",8)(19,"div",9)(20,"label",10),t._uU(21," Batch Date "),t._UZ(22,"span",11),t.qZA(),t.TgZ(23,"span",12),t._uU(24,"\u25b6"),t.qZA()(),t.TgZ(25,"div",13),t._UZ(26,"input",15),t.qZA()(),t.TgZ(27,"div",8)(28,"div",9)(29,"label",10),t._uU(30," SKU Number "),t._UZ(31,"span",11),t.qZA(),t.TgZ(32,"span",12),t._uU(33,"\u25b6"),t.qZA()(),t.TgZ(34,"div",13),t._UZ(35,"input",16),t.qZA()(),t.TgZ(36,"div",8)(37,"div",9)(38,"label",10),t._uU(39," SKU Name "),t._UZ(40,"span",11),t.qZA(),t.TgZ(41,"span",12),t._uU(42,"\u25b6"),t.qZA()(),t.TgZ(43,"div",13),t._UZ(44,"input",17),t.qZA()(),t.TgZ(45,"div",8)(46,"div",9)(47,"label",10),t._uU(48," SKU Description "),t._UZ(49,"span",11),t.qZA(),t.TgZ(50,"span",12),t._uU(51,"\u25b6"),t.qZA()(),t.TgZ(52,"div",13),t._UZ(53,"input",18),t.qZA()(),t.TgZ(54,"div",8)(55,"div",9)(56,"label",10),t._uU(57," SKU UoM "),t._UZ(58,"span",11),t.qZA(),t.TgZ(59,"span",12),t._uU(60,"\u25b6"),t.qZA()(),t.TgZ(61,"div",13),t._UZ(62,"input",19),t.ALo(63,"SalesUOMUnitMaster"),t.qZA()(),t.TgZ(64,"div",20)(65,"div",9)(66,"label",10),t._uU(67,"Input Qty"),t._UZ(68,"span",11),t.qZA(),t.TgZ(69,"span",12),t._uU(70,"\u25b6"),t.qZA()(),t.TgZ(71,"div",13),t._UZ(72,"input",21),t.qZA()(),t.TgZ(73,"div",20)(74,"div",9)(75,"label",10),t._uU(76,"Output Qty"),t._UZ(77,"span",11),t.qZA(),t.TgZ(78,"span",12),t._uU(79,"\u25b6"),t.qZA()(),t.TgZ(80,"div",13),t._UZ(81,"input",22),t.qZA()(),t.TgZ(82,"div",23)(83,"div",9)(84,"label",10),t._uU(85,"Rejection Qty"),t._UZ(86,"span",11),t.qZA(),t.TgZ(87,"span",12),t._uU(88,"\u25b6"),t.qZA()(),t.TgZ(89,"div",13),t._UZ(90,"input",24),t.qZA()()()()()(),t.TgZ(91,"div",25)(92,"form",26)(93,"div",3)(94,"div",27)(95,"div",5)(96,"label",6),t._uU(97," Rejection Data "),t.qZA()()(),t.TgZ(98,"div",28),t._UZ(99,"div",29),t.TgZ(100,"div",30),t.YNc(101,F,4,4,"ngb-pagination",31),t.qZA(),t._UZ(102,"div",29),t.qZA(),t._UZ(103,"hr",32),t.TgZ(104,"div",33)(105,"table",34)(106,"thead",35)(107,"tr",36)(108,"th",37),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(109,"SN"),t.qZA(),t.TgZ(110,"th",38),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(111," Rejection Type/Defect "),t.qZA(),t.TgZ(112,"th",39),t._uU(113,"Quantity"),t.qZA(),t.TgZ(114,"th",40),t._uU(115,"%"),t.qZA()()(),t.TgZ(116,"tbody"),t.YNc(117,P,14,14,"tr",41),t.ALo(118,"slice"),t.ALo(119,"searchFi1ter"),t.qZA()()(),t.TgZ(120,"tr",6),t._UZ(121,"td",42),t.TgZ(122,"td",43)(123,"div",44),t._uU(124," Total Count "),t.TgZ(125,"span",45),t._uU(126,"\u25b6"),t.qZA()()(),t.TgZ(127,"td",46)(128,"span",47),t._uU(129),t.qZA()(),t.TgZ(130,"td",48)(131,"span",47),t._uU(132),t.qZA()()(),t._UZ(133,"hr",49),t.TgZ(134,"div",0)(135,"div",50),t._UZ(136,"button",51),t.TgZ(137,"button",52),t.NdJ("click",function(){return e.openRemarksModal()}),t._uU(138,"Remarks"),t.qZA()(),t.TgZ(139,"div",53),t.YNc(140,K,2,1,"button",54),t.qZA()()()()()()),2&n&&(t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(60),t.s9C("value",t.lcZ(63,9,e.form.controls.UOM.value)),t.xp6(30),t.Q6J("formGroup",e.form),t.xp6(9),t.Q6J("ngIf",e.JCEntryDetailsList.length>0),t.xp6(16),t.Q6J("ngForOf",t.Dn7(118,11,t.xi3(119,15,e.JCEntryDetailsList,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(12),t.hij(" ",e.f.rejectedTotalQty.value," "),t.xp6(3),t.hij(" ",e.f.rejectedPercent.value?e.f.rejectedPercent.value:0," "),t.xp6(8),t.Q6J("ngIf",!t.DdM(18,Y).includes(e.action)))},dependencies:[m.sg,m.O5,d.N9,d.GZ,d.ju,d.Qy,d._L,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,s.x0,s.On,u.j,m.OU,m.JJ,D.G,U.Q],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}.fa[_ngcontent-%COMP%]{font-size:1.6rem!important}.set-input-group-text[_ngcontent-%COMP%]{border-radius:0!important;height:2.8rem!important;width:3rem}"]}),c})();var B=l(25116);let z=(()=>{var a;class c{constructor(n){this.activeModal=n,this.action="",this.totalAmounts={},this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.customerContactInfoArray=[]}ngOnInit(){}dismissModel(){this.activeModal.close(this.totalAmounts)}trackByFn(n,e){return e?._id}}return(a=c).\u0275fac=function(n){return new(n||a)(t.Y36(d.Kz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-status-summary"]],viewQuery:function(n,e){if(1&n&&t.Gf(u.j,5),2&n){let i;t.iGM(i=t.CRH())&&(e.headers=i)}},inputs:{action:"action",totalAmounts:"totalAmounts",customerContactInfoArray:"customerContactInfoArray"},decls:33,vars:2,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-4"],[1,"row","justify-content-center","px-5","mt-4"],[1,"col-12"],[1,"row","mt-4"],[1,"col-6","pe-0"],[1,"form-label","text-nowrap"],[1,"col-1","px-2","d-flex","align-items-center","justify-content-end"],[1,"ms-1","me-2","text-secondary"],[1,"col-5","ps-0","setInputMargin"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],[1,"line-border","my-4"],[1,"row"],[1,"col","text-center","mb-4"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Status Summary"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13," Total Entry Count "),t.qZA()(),t.TgZ(14,"div",11)(15,"span",12),t._uU(16,"\u25b6"),t.qZA()(),t.TgZ(17,"div",13)(18,"input",14),t.NdJ("ngModelChange",function(r){return e.totalAmounts.totalEntry=r}),t.qZA()()(),t.TgZ(19,"div",8)(20,"div",9)(21,"label",15),t._uU(22," Rejected Entry Count "),t.qZA()(),t.TgZ(23,"div",11)(24,"span",12),t._uU(25,"\u25b6"),t.qZA()(),t.TgZ(26,"div",13)(27,"input",14),t.NdJ("ngModelChange",function(r){return e.totalAmounts.rejectedEntry=r}),t.qZA()()()()(),t._UZ(28,"hr",16),t.TgZ(29,"div",17)(30,"div",18)(31,"button",19),t.NdJ("click",function(){return e.dismissModel()}),t._uU(32,"Close"),t.qZA()()()()()),2&n&&(t.xp6(18),t.Q6J("ngModel",e.totalAmounts.totalEntry),t.xp6(9),t.Q6J("ngModel",e.totalAmounts.rejectedEntry))},dependencies:[s.Fj,s.wV,s.JJ,s.On],encapsulation:2}),c})();var w=l(95975),H=l(88059),$=l(50363),X=l(53421),V=l(14906);function W(a,c){1&a&&t._UZ(0,"div",42)}function tt(a,c){1&a&&t._UZ(0,"div",43)}function et(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",29,30)(9,"span",31),t._uU(10),t.qZA()(),t.TgZ(11,"td",29,32)(13,"span",31),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td")(25,"span",33),t.YNc(26,W,1,0,"div",34),t.YNc(27,tt,1,0,"div",35),t.qZA()(),t.TgZ(28,"td")(29,"div",36),t._UZ(30,"button",37),t.TgZ(31,"div",38)(32,"a",39),t.NdJ("click",function(){const i=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",i,"rejectionData"))}),t._UZ(33,"i",40),t._uU(34," + Rejection Data "),t.qZA(),t.TgZ(35,"a",39),t.NdJ("click",function(){const i=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",i,"view"))}),t._UZ(36,"i",41),t._uU(37," View "),t.qZA(),t.TgZ(38,"a",39),t.NdJ("click",function(){const i=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",i,"edit"))}),t._UZ(39,"i",40),t._uU(40," Edit "),t.qZA(),t.TgZ(41,"a",39),t.NdJ("click",function(){const i=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",i,"accept"))}),t._UZ(42,"i",40),t._uU(43," Accept "),t.qZA()()()()()}if(2&a){const o=c.$implicit,n=t.MAs(8),e=t.MAs(12),i=t.oxw();t.xp6(2),t.Oqu(null==o?null:o.jobCardNo),t.xp6(2),t.Oqu(null==o?null:o.batchDate),t.xp6(2),t.Oqu(null==o?null:o.SKUNo),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",o.SKUName)("positionTarget",n),t.xp6(1),t.hij(" ",o.SKUName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",o.SKUDescription)("positionTarget",e),t.xp6(1),t.hij(" ",o.SKUDescription," "),t.xp6(2),t.Oqu(t.lcZ(17,31,null==o?null:o.UOM)),t.xp6(3),t.Oqu(null==o?null:o.batchInputQty),t.xp6(2),t.Oqu(o.batchOutputQty),t.xp6(2),t.Oqu(o.batchRejQty),t.xp6(3),t.Q6J("ngIf","Active"==o.status),t.xp6(1),t.Q6J("ngIf","Inactive"==o.status),t.xp6(5),t.ekj("disable","Inactive"===o.status),t.Q6J("accessType",i.rolePermissionActions.editAction),t.xp6(3),t.ekj("disable","Active"===o.status),t.Q6J("accessType",i.rolePermissionActions.viewAction),t.xp6(3),t.ekj("disable","Active"===o.status),t.Q6J("accessType",i.rolePermissionActions.editAction),t.xp6(3),t.ekj("disable","Active"===o.status),t.Q6J("accessType",i.rolePermissionActions.editAction)}}const nt=function(a,c,o,n){return{page:a,pageSize:c,collection:o,search:n,type:"list"}};let it=(()=>{var a;class c{constructor(n,e,i,r,h,y,f,R,j){this.exportExcelService=n,this.jobCardEntryService=e,this.spinner=i,this.activatedRoute=r,this.exportToPDFService=h,this.utilityService=y,this.toastService=f,this.router=R,this.modalService=j,this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.status=[],this.search="",this.tableData=[],this.statusOptions=[],this.totalAmounts={},this.rolePermissionActions=B.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(n,e,i){if("Inactive"==e?.status&&["rejectionData"].includes(i)||"Active"==e?.status&&["view","edit","accept"].includes(i))return null;this.router.navigate([n],{relativeTo:this.activatedRoute,queryParams:{id:e?._id,action:i}})}reset(){this.status="",this.getAll()}eventHeader(n){switch(n.key){case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=n.value,this.getAll()}}trackByFn(n,e){return e?._id}getAll(n=!1,e=""){this.spinner.show();let i={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:n,status:this.status};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.jobCardEntryService.getAllForRejectionData(i).subscribe(r=>{"EXCEL"==e?this.excelDownload(r.rows):"PDF"==e?this.pdfDownload(r.rows):(this.tableData=r.rows,this.totalAmounts=r?.totalAmounts,this.statusOptions=r?.statusOptions,this.collection=r.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(n){let e=(0,w.A)(n);this.exportToPDFService.generatePdf(e.tableData,e.title)}excelDownload(n){this.exportExcelService.exportExcel((0,w.i)(n))}onSort({column:n,direction:e}){this.headers.forEach(i=>{i.sortable!==n&&(i.direction="")}),this.column=n,this.direction="asc"==e?1:-1,this.getAll()}openRejectionStatusSummaryModal(){const n=this.modalService.open(z,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.totalAmounts=this.totalAmounts,n.result.then(e=>{e&&console.log("success",e)},e=>{})}}return(a=c).\u0275fac=function(n){return new(n||a)(t.Y36(g.Ol),t.Y36(A.G3),t.Y36(g.V),t.Y36(_.gz),t.Y36(g.$L),t.Y36(g.tI),t.Y36(g.kl),t.Y36(_.F0),t.Y36(d.FF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-rejection-summary-list"]],viewQuery:function(n,e){if(1&n&&t.Gf(u.j,5),2&n){let i;t.iGM(i=t.CRH())&&(e.headers=i)}},decls:49,vars:17,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5","m-2","separate-row"],["bindLabel","label","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],[1,"col-3","mt-1","separate-image"],[1,"image-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"col","text-end","mt-1"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","jobCardNo",3,"sort"],["sortable","batchDate",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","batchInputQty",3,"sort"],["sortable","batchOutputQty",3,"sort"],["sortable","batchRejQty",3,"sort"],["sortable","status",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["SKUDescription",""],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],[1,"statusActive"],[1,"statusInActive"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Rejection Summary"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"ng-select",5),t.NdJ("ngModelChange",function(r){return e.status=r}),t.qZA()(),t.TgZ(7,"div",6)(8,"span",7),t._UZ(9,"img",8),t.qZA(),t.TgZ(10,"button",9),t.NdJ("click",function(){return e.getAll()}),t._uU(11,"Apply Filter"),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return e.reset()}),t._uU(13,"Clear Filter"),t.qZA()(),t.TgZ(14,"div",11)(15,"button",9),t.NdJ("click",function(){return e.openRejectionStatusSummaryModal()}),t._uU(16," Status Summary "),t.qZA()()(),t._UZ(17,"hr",12),t.TgZ(18,"div",13)(19,"app-setting-header",14),t.NdJ("dataChange",function(r){return e.eventHeader(r)}),t.qZA(),t.TgZ(20,"table",15)(21,"thead",16)(22,"tr",17)(23,"th",18),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(24,"JC No."),t.qZA(),t.TgZ(25,"th",19),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(26,"Batch Date"),t.qZA(),t.TgZ(27,"th",20),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(28,"SKU No."),t.qZA(),t.TgZ(29,"th",21),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(30),t.ALo(31,"labelTranslate"),t.qZA(),t.TgZ(32,"th",22),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(33),t.ALo(34,"labelTranslate"),t.qZA(),t.TgZ(35,"th",23),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(36,"UoM"),t.qZA(),t.TgZ(37,"th",24),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(38,"Input Qty"),t.qZA(),t.TgZ(39,"th",25),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(40,"Output Qty"),t.qZA(),t.TgZ(41,"th",26),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(42,"Rej. Qty"),t.qZA(),t.TgZ(43,"th",27),t.NdJ("sort",function(r){return e.onSort(r)}),t._uU(44,"Status"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Action"),t.qZA()()(),t.TgZ(47,"tbody"),t.YNc(48,et,44,33,"tr",28),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("items",e.statusOptions)("ngModel",e.status)("clearable",!1),t.xp6(13),t.Q6J("data",t.l5B(12,nt,e.page,e.pageSize,e.collection,e.search)),t.xp6(11),t.hij(" ",t.lcZ(31,8,"SKU Name")," "),t.xp6(3),t.hij(" ",t.lcZ(34,10,"SKU Description")," "),t.xp6(15),t.Q6J("ngForOf",e.tableData)("ngForTrackBy",e.trackByFn))},dependencies:[m.sg,m.O5,H.P,d._L,s.JJ,s.On,$.w9,u.j,X.J,V.c,U.Q],encapsulation:2}),c})();var ot=l(19964),rt=l(56208);const at=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:it},{path:"form",component:G,resolve:{accessScreen:ot.xr}}];let st=(()=>{var a;class c{}return(a=c).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.ez,_.Bz.forChild(at),rt.m]}),c})()},13107:(C,p,l)=>{l.d(p,{t:()=>m});const m={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(C,p,l)=>{l.d(p,{J:()=>m});const m=({data:_,headers:s,widths:b,title:v})=>({tableData:{widths:b,headerRows:1,body:[s.map(u=>({text:u.header,style:"header"})),..._.map(u=>s.map(t=>({style:"subheader",text:u[t.key]})))]},title:v})},68922:(C,p,l)=>{l.d(p,{T:()=>m});const m=[{message:"Location is Required",key:"deliveryLocation"}]},3959:(C,p,l)=>{l.d(p,{Gu:()=>b,kq:()=>s,JH:()=>_,Nh:()=>v,m5:()=>u,sg:()=>Z}),l(68922);const _=[{message:"SKU No. is Required",key:"SKUId"},{message:"FGIN Quantity is Required",key:"FGINQuantity"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"Manufacturing Date is Required",key:"manufacturingDate"},{message:"Batch No. is Required",key:"batchNo"}],s=[{message:"SKU No. is Required",key:"SKU"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"Correction Category is Required",key:"correctionCategory"},{message:"Source Batch (From) is Required",key:"sourceBatch"}],b=[{message:"Process Name is Required",key:"processName"},{message:"Machine Name is Required",key:"machineName"},{message:"Production Date is Required",key:"productionDate"},{message:"Production Shift is Required",key:"productionShift"}],v=[{message:"Item Code is Required",key:"itemCode"},{message:"Item Name is Required",key:"itemName"},{message:"Item Description is Required",key:"itemDescription"},{message:"UoM is Required",key:"UoM"}],Z=[{message:"Job Card No. is Required",key:"jobCard"},{message:"Batch Output Qty is Required",key:"batchOutputQty"}],u=[{message:"Job Card No. is Required",key:"jobCard"}]}}]);