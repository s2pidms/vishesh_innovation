"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7418],{67418:(x,P,d)=>{d.r(P),d.d(P,{DirectCostModule:()=>L});var e=d(96814),o=d(1076),D=d(43818),y=d(25116),f=d(65129),t=d(65879),g=d(98977),b=d(99007),M=d(88059),T=d(37285),Z=d(53421),v=d(83344),C=d(84231);function U(u,k){if(1&u){const r=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(14,"td",25)(15,"div",26)(16,"span",27),t._uU(17),t.ALo(18,"companyCurrency"),t._UZ(19,"div",28),t.qZA(),t.TgZ(20,"span",29),t._uU(21),t.ALo(22,"number"),t.qZA()()(),t.TgZ(23,"td",25)(24,"div",26)(25,"span",27),t._uU(26),t.ALo(27,"companyCurrency"),t._UZ(28,"div",28),t.qZA(),t.TgZ(29,"span",29),t._uU(30),t.ALo(31,"number"),t.qZA()()(),t.TgZ(32,"td",25)(33,"div",26)(34,"span",27),t._uU(35),t.ALo(36,"companyCurrency"),t._UZ(37,"div",28),t.qZA(),t.TgZ(38,"span",29),t._uU(39),t.ALo(40,"number"),t.qZA()()(),t.TgZ(41,"td",25)(42,"div",26)(43,"span",27),t._uU(44),t.ALo(45,"companyCurrency"),t._UZ(46,"div",28),t.qZA(),t.TgZ(47,"span",29),t._uU(48),t.ALo(49,"number"),t.qZA()()(),t.TgZ(50,"td")(51,"div",30),t._UZ(52,"button",31),t.TgZ(53,"div",32)(54,"a",33),t.NdJ("click",function(){const c=t.CHM(r).$implicit,h=t.oxw();return t.KtG(h.navigateTo("../form",c,"view"))}),t._UZ(55,"i",34),t._uU(56," View "),t.qZA(),t.TgZ(57,"a",33),t.NdJ("click",function(){const c=t.CHM(r).$implicit,h=t.oxw();return t.KtG(h.navigateTo("../form",c,"edit"))}),t._UZ(58,"i",35),t._uU(59," Edit "),t.qZA()()()()()}if(2&u){const r=k.$implicit,s=t.MAs(4),a=t.MAs(8),c=t.oxw();t.xp6(2),t.Oqu(r.SKUNo),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("positionTarget",s)("ngbTooltip",r.SKUName),t.xp6(1),t.hij(" ",r.SKUName?r.SKUName:null," "),t.xp6(1),t.Udp("width",a.clientWidth),t.xp6(2),t.Q6J("positionTarget",a)("ngbTooltip",r.SKUDescription),t.xp6(1),t.hij(" ",r.SKUDescription?r.SKUDescription:null," "),t.xp6(2),t.Oqu(t.lcZ(13,22,r.UOM)),t.xp6(5),t.hij(" ",t.lcZ(18,24,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(22,26,null==r?null:r.totalLabourCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(27,29,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(31,31,null==r?null:r.totalAssetCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(36,34,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(40,36,null==r?null:r.totalToolingCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(45,39,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(49,41,null==r?null:r.totalCostPerUnit,"1.2-2")," "),t.xp6(6),t.Q6J("accessType",c.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",c.rolePermissionActions.editAction)}}const l=function(u,k,r,s){return{page:u,pageSize:k,collection:r,search:s,type:"list"}};let p=(()=>{class u{constructor(r,s,a,c,h,O){this.exportExcelService=r,this.router=s,this.spinner=a,this.activatedRoute=c,this.directCostService=h,this.exportToPDFService=O,this.page=1,this.pageSize=8,this.collection=0,this.column="processId",this.direction=-1,this.search="",this.tableData=[],this.rolePermissionActions=y.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(r=!1,s=""){this.spinner.show();let a={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:r};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.directCostService.getAll(a).subscribe(c=>{"EXCEL"==s?this.excelDownload(c.rows):"PDF"==s?this.pdfDownload(c.rows):(this.tableData=c.rows,this.collection=c.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(r,s,a){this.router.navigate([r],{relativeTo:this.activatedRoute,queryParams:{id:s?._id,action:a}})}eventHeader(r){switch(r.key){case"SEARCH":this.search=r.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=r.value,this.getAll()}}trackByFn(r,s){return s?._id}pdfDownload(r){let s=(0,f.sm)(r);this.exportToPDFService.generatePdf(s.tableData,s.title)}excelDownload(r){this.exportExcelService.exportExcel((0,f.t8)(r))}onSort({column:r,direction:s}){this.headers.forEach(a=>{a.sortable!==r&&(a.direction="")}),this.column=r,this.direction="asc"==s?1:-1,this.getAll()}static#t=this.\u0275fac=function(s){return new(s||u)(t.Y36(g.Ol),t.Y36(o.F0),t.Y36(g.V),t.Y36(o.gz),t.Y36(b.m$),t.Y36(g.$L))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-direct-cost-list"]],viewQuery:function(s,a){if(1&s&&t.Gf(D.j,5),2&s){let c;t.iGM(c=t.CRH())&&(a.headers=c)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-3",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","totalLabourCostPerUnit",3,"sort"],["sortable","totalAssetCostPerUnit",3,"sort"],["sortable","totalToolingCostPerUnit",3,"sort"],["sortable","totalCostPerUnit",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],[1,"py-0","text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],[1,"vr","ms-3"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Direct Cost Summary (by SKU)"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return a.navigateTo("../form",{},"create")}),t._uU(7," Direct Cost "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(h){return a.eventHeader(h)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(17,"SKU Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(19,"SKU Description"),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(23,"Labour Cost/Unit"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(25,"Asset Cost/Unit"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(27,"Tooling Cost/Unit"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(h){return a.onSort(h)}),t._uU(29,"Total Direct Process Cost/Unit"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,U,60,44,"tr",20),t.qZA()()()()),2&s&&(t.xp6(4),t.Q6J("accessType",a.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,l,a.page,a.pageSize,a.collection,a.search)),t.xp6(23),t.Q6J("ngForOf",a.tableData)("ngForTrackBy",a.trackByFn))},dependencies:[e.sg,M.P,T._L,D.j,Z.J,e.JJ,v.f,C.Q],encapsulation:2})}return u})();var i=d(60095),_=d(21631),m=d(22096),S=d(35469),A=d(9013),F=d(6244),w=d(16897),N=d(50363);function K(u,k){if(1&u){const r=t.EpF();t.TgZ(0,"div",35)(1,"button",36),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.submit())}),t._uU(4,"Save"),t.qZA()()}}let q=(()=>{class u{get f(){return this.form.controls}constructor(r,s,a,c,h,O,R,E){this.activatedRoute=r,this.spinner=s,this.toastService=a,this.directCostService=c,this.validationService=h,this.modalService=O,this.location=R,this.utilityService=E,this.oldAssetAllocationData=[],this.labourOldAllocationData=[],this.SKUList=[],this.ESCPreviewArr=[],this.toolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.oldToolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.submitted=!1,this.action="create",this.toolingCAQty=0,this.masterData={autoIncrementNo:"",productCategories:[],processList:[]},this.form=new i.nJ({_id:new i.p4(null),directCostNo:new i.p4(null),productCategory:new i.p4(null,[i.kI.required]),SKU:new i.p4(null),SKUNo:new i.p4(null,[i.kI.required]),SKUName:new i.p4(null,[i.kI.required]),SKUDescription:new i.p4(null),UOM:new i.p4(null),totalLabourCostPerUnit:new i.p4(null,[i.kI.required]),totalAssetCostPerUnit:new i.p4(null,[i.kI.required]),totalToolingCostPerUnit:new i.p4(null,[i.kI.required]),totalCostPerUnit:new i.p4(null),directCostDetails:new i.p4([]),toolingCostDetails:new i.p4([])})}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.getInitialData()}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,S._r))return;this.form.enable();let r=this.form.value;r.directCostDetails=this.masterData?.processList,r.toolingCostDetails=this.toolingCostDetails,r._id?this.update(r):(delete r._id,this.create(r))}create(r){this.spinner.show(),this.directCostService.create(r).subscribe(s=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(s.message),this.location.back()})}update(r){this.spinner.show(),this.directCostService.update(r._id,r).subscribe(s=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(s.message),this.location.back()})}getInitialData(){this.spinner.show(),this.directCostService.getAllMasterData({}).subscribe(r=>{this.masterData=r,this.form.controls.directCostNo.setValue(this.masterData.autoIncrementNo),this.masterData.processList&&(this.labourOldAllocationData=JSON.parse(JSON.stringify(this.masterData.processList)),this.oldAssetAllocationData=JSON.parse(JSON.stringify(this.masterData.processList))),this.activatedRoute.queryParams.pipe((0,_.z)(s=>(this.action=s.action,this.utilityService.accessDenied(this.action),s.id?this.directCostService.getById(s.id):(0,m.of)({})))).subscribe(s=>{if(this.spinner.hide(),0==Object.keys(s).length)return;s.directCostDetails=s.directCostDetails;let a=this.masterData?.processList;this.masterData.processList=s.directCostDetails;for(const c of s.directCostDetails)a=a.filter(h=>h.processId!=c.processId),this.ESCPreviewArr=[...s.directCostDetails,...a],this.oldAssetAllocationData=[...s.directCostDetails,...a];this.toolingCostDetails=s.toolingCostDetails,this.form.patchValue(s),this.form.controls.productCategory.disable(),this.form.controls.SKUNo.disable(),this.form.controls.SKUName.disable(),"view"==this.action&&this.form.disable()})})}getSKUData(){this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.form.controls.SKU.setValue(null),this.form.controls.SKUNo.setValue(null),this.form.controls.SKUName.setValue(null),this.form.controls.SKUDescription.setValue(null),this.form.controls.UOM.setValue(null),this.form.controls.totalLabourCostPerUnit.setValue(null),this.form.controls.totalAssetCostPerUnit.setValue(null),this.form.controls.totalToolingCostPerUnit.setValue(null),this.form.controls.totalCostPerUnit.setValue(null);let r=this.form.controls.productCategory.value;this.spinner.show(),this.directCostService.getSKUData({category:r}).subscribe(s=>{s&&(this.SKUList=s?.SKUObj),this.masterData.processList=s.processList.length>0?JSON.parse(JSON.stringify(s?.processList)):JSON.parse(JSON.stringify(this.oldAssetAllocationData)),this.spinner.hide()})}setSKUDetails(r){this.form.controls.SKU.setValue(r?._id),this.directCostService.checkSKUExistsBySKUId(r?._id).subscribe(),this.form.controls.SKUNo.setValue(r?.SKUNo),this.form.controls.SKUName.setValue(r?.SKUName),this.form.controls.SKUDescription.setValue(r?.SKUDescription),this.form.controls.UOM.setValue(r?.primaryUnit),this.toolingCAQty=r?.toolingCAQty||0,this.masterData.processList=this.masterData?.processList.map(s=>(s.CAUnits=r?.processCAQty||0,s)),this.toolingCostDetails=this.toolingCostDetails.map(s=>(s.CAUnits=r?.toolingCAQty||0,s))}calTotalCostPerUnit(){this.form.controls.totalCostPerUnit.setValue(+((+this.form.controls.totalLabourCostPerUnit.value||0)+(+this.form.controls.totalAssetCostPerUnit.value||0)+(+this.form.controls.totalToolingCostPerUnit.value||0)).toFixed(2))}openLabourCostModal(){const r=this.modalService.open(A.Fm,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});r.componentInstance.action=this.action,r.componentInstance.processList=this.masterData?.processList,r.componentInstance.ESCPreviewArr=this.ESCPreviewArr,r.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,r.componentInstance.labourOldAllocationData=this.labourOldAllocationData,r.componentInstance.totalLabourCostPerUnit=this.form.controls.totalLabourCostPerUnit.value,r.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,r.result.then(s=>{s&&(this.masterData.processList=s?.processList,this.oldAssetAllocationData=s?.oldAssetAllocationData,this.form.controls.totalLabourCostPerUnit.setValue(s?.totalLabourCostPerUnit),this.form.controls.totalAssetCostPerUnit.setValue(s?.totalAssetCostPerUnit),this.calTotalCostPerUnit())},s=>{})}openAssetCostModal(){const r=this.modalService.open(A.Wo,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});r.componentInstance.action=this.action,r.componentInstance.processList=this.masterData?.processList,r.componentInstance.ESCPreviewArr=this.ESCPreviewArr,r.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,r.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,r.result.then(s=>{s&&(this.masterData.processList=s?.processList,this.oldAssetAllocationData=s?.oldAssetAllocationData,this.form.controls.totalAssetCostPerUnit.setValue(s?.totalAssetCostPerUnit),this.form.controls.totalLabourCostPerUnit.setValue(s?.totalLabourCostPerUnit),this.calTotalCostPerUnit())},s=>{})}openToolingCostModal(){const r=this.modalService.open(A.$6,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});r.componentInstance.action=this.action,r.componentInstance.toolingCostDetails=this.toolingCostDetails,r.componentInstance.ESCPreviewArr=this.ESCPreviewArr,r.componentInstance.toolingCAQty=this.toolingCAQty,r.componentInstance.totalToolingCostPerUnit=this.form.controls.totalToolingCostPerUnit.value,r.result.then(s=>{s&&(this.toolingCostDetails=s?.toolingCostDetails,this.form.controls.totalToolingCostPerUnit.setValue(s?.totalToolingCostPerUnit),this.calTotalCostPerUnit())},s=>{})}openProductCategoryModal(){const r=this.modalService.open(F.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});r.componentInstance.action=this.action,r.componentInstance.productCategoryList=this.masterData?.productCategories,r.componentInstance.productCategory=this.form.controls.productCategory.value,r.result.then(s=>{s&&(this.form.controls.productCategory.setValue(s?.selectedProductCategory),this.getSKUData())},s=>{})}static#t=this.\u0275fac=function(s){return new(s||u)(t.Y36(o.gz),t.Y36(g.V),t.Y36(g.kl),t.Y36(b.m$),t.Y36(w.RJ),t.Y36(T.FF),t.Y36(e.Ye),t.Y36(g.tI))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-direct-cost-form"]],decls:97,vars:23,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-5"],[1,"col-8","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","fs-4","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-4","ps-0"],["bindLabel","SKUNo","bindValue","SKUNo","formControlName","SKUNo",3,"items","clearable","change"],[1,"col-7","ps-0"],[1,"col-5","pe-1"],["bindLabel","SKUName","bindValue","SKUName","formControlName","SKUName",3,"items","clearable","change"],[1,"col-5","ps-4"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control"],[1,"col-2","ps-0"],["type","text","readonly","",1,"form-control",3,"value"],[1,"row","line-border"],[1,"row","mb-4","justify-content-center"],[1,"col-3"],[1,"input-group-text","text-secondary","combine-INR"],[1,"vr","ms-3"],["type","number","formControlName","totalLabourCostPerUnit","readonly","",1,"form-control","border-start-0"],[1,"plusIconSvg","btn","btn-primary","ms-1",2,"padding","1.4rem 1.4rem 1.4rem 1.4rem",3,"click"],["type","number","formControlName","totalAssetCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalToolingCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalCostPerUnit","readonly","",1,"form-control","border-start-0"],["class","col-12 text-center",4,"ngIf"],[1,"col-12","text-center"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(s,a){1&s&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Direct Cost (Labour, Asset & Tooling)"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",5)(10,"div",7)(11,"label",8),t._uU(12,"Product Category "),t.TgZ(13,"span",9),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11)(17,"ng-select",12),t.NdJ("change",function(){return a.getSKUData()}),t.qZA()(),t.TgZ(18,"div",13),t.NdJ("click",function(){return a.openProductCategoryModal()}),t._UZ(19,"i",14),t.qZA()()(),t.TgZ(20,"div",15)(21,"label",8),t._uU(22,"SKU No. "),t.TgZ(23,"span",9),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"ng-select",16),t.NdJ("change",function(h){return a.setSKUDetails(h)}),t.qZA()()()(),t.TgZ(26,"div",17)(27,"div",5)(28,"div",18)(29,"label",8),t._uU(30,"SKU Name "),t.TgZ(31,"span",9),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"ng-select",19),t.NdJ("change",function(h){return a.setSKUDetails(h)}),t.qZA()(),t.TgZ(34,"div",20)(35,"label",8),t._uU(36," SKU Description "),t._UZ(37,"span",9),t.qZA(),t._UZ(38,"input",21),t.qZA(),t.TgZ(39,"div",22)(40,"label",8),t._uU(41," UoM "),t._UZ(42,"span",9),t.qZA(),t._UZ(43,"input",23),t.ALo(44,"SalesUOMUnitMaster"),t.qZA()()()()(),t._UZ(45,"hr",24),t.TgZ(46,"div",25)(47,"div",26)(48,"label",8),t._uU(49,"Total Labour Cost/Unit "),t.TgZ(50,"span",9),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"div",10)(53,"span",27),t._uU(54),t.ALo(55,"companyCurrency"),t._UZ(56,"div",28),t.qZA(),t._UZ(57,"input",29),t.TgZ(58,"button",30),t.NdJ("click",function(){return a.openLabourCostModal()}),t.qZA()()(),t.TgZ(59,"div",26)(60,"label",8),t._uU(61,"Total Asset Cost/Unit "),t.TgZ(62,"span",9),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"div",10)(65,"span",27),t._uU(66),t.ALo(67,"companyCurrency"),t._UZ(68,"div",28),t.qZA(),t._UZ(69,"input",31),t.TgZ(70,"button",30),t.NdJ("click",function(){return a.openAssetCostModal()}),t.qZA()()(),t.TgZ(71,"div",26)(72,"label",8),t._uU(73,"Total Tooling Cost/Unit "),t.TgZ(74,"span",9),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",10)(77,"span",27),t._uU(78),t.ALo(79,"companyCurrency"),t._UZ(80,"div",28),t.qZA(),t._UZ(81,"input",32),t.TgZ(82,"button",30),t.NdJ("click",function(){return a.openToolingCostModal()}),t.qZA()()(),t.TgZ(83,"div",26)(84,"label",8),t._uU(85,"Total Direct Process Cost/Unit "),t.TgZ(86,"span",9),t._uU(87,"*"),t.qZA()(),t.TgZ(88,"div",10)(89,"span",27),t._uU(90),t.ALo(91,"companyCurrency"),t._UZ(92,"div",28),t.qZA(),t._UZ(93,"input",33),t.qZA()()(),t._UZ(94,"hr",24),t.TgZ(95,"div",5),t.YNc(96,K,5,0,"div",34),t.qZA()()()),2&s&&(t.Q6J("formGroup",a.form),t.xp6(17),t.Q6J("items",a.masterData.productCategories)("clearable",!1),t.xp6(8),t.Q6J("items",a.SKUList)("clearable",!1),t.xp6(8),t.Q6J("items",a.SKUList)("clearable",!1),t.xp6(10),t.s9C("value",t.lcZ(44,13,a.form.controls.UOM.value)),t.xp6(11),t.hij(" ",t.lcZ(55,15,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(67,17,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(79,19,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(91,21,"INR")," "),t.xp6(6),t.Q6J("ngIf","view"!==a.action))},dependencies:[e.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,N.w9,v.f,C.Q],encapsulation:2})}return u})();var B=d(19964),J=d(56208);const I=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:p},{path:"form",component:q,resolve:{accessScreen:B.xr}}];let L=(()=>{class u{static#t=this.\u0275fac=function(s){return new(s||u)};static#e=this.\u0275mod=t.oAB({type:u});static#o=this.\u0275inj=t.cJS({imports:[e.ez,o.Bz.forChild(I),J.m]})}return u})()},6244:(x,P,d)=>{d.d(P,{Z:()=>v});var e=d(43818),o=d(65879),D=d(37285),y=d(96814),f=d(88059),t=d(95346);const g=function(){return["view","edit"]};function b(C,U){if(1&C){const l=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",24)(8,"span",25),o._uU(9),o.qZA()(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td")(13,"input",26),o.NdJ("change",function(){const _=o.CHM(l).$implicit,m=o.oxw();return o.KtG(m.setSelectData(_))}),o.qZA()()()}if(2&C){const l=U.$implicit,p=U.index,i=o.oxw();o.xp6(2),o.Oqu(1+p+(i.page-1)*i.pageSize),o.xp6(2),o.Oqu(null==l?null:l.productNumber),o.xp6(2),o.Oqu(null==l?null:l.productCode),o.xp6(2),o.Q6J("ngbTooltip",null==l?null:l.label),o.xp6(1),o.hij(" ",null!=l&&l.label?null==l?null:l.label:null," "),o.xp6(2),o.Oqu(null==l?null:l.application),o.xp6(2),o.MGl("name","formValue",i.productCategoryList[p],""),o.Q6J("disabled",o.DdM(9,g).includes(i.action))("checked",l.select)}}function M(C,U){1&C&&o._UZ(0,"hr",27)}function T(C,U){if(1&C){const l=o.EpF();o.TgZ(0,"div",28)(1,"button",29),o.NdJ("click",function(){o.CHM(l);const i=o.oxw();return o.KtG(i.dismissModel())}),o._uU(2,"Save & Close"),o.qZA()()}}const Z=function(C,U,l,p){return{page:C,pageSize:U,collection:l,search:p,excelDisplay:"none"}};let v=(()=>{class C{constructor(l){this.activeModal=l,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(l=>(l.select=!1,l.value==this.productCategory&&(l.select=!0),l))),this.collection=this.productCategoryList.length}setSelectData(l){this.selectedProductCategory=l?.value}dismissModel(){let l={};l.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(l)}eventHeader(l){switch(l.key){case"SEARCH":this.search=l.value;break;case"EXCEL":default:break;case"PAGE":this.page=l.value}}onSort({column:l,direction:p}){this.headers.forEach(i=>{i.sortable!==l&&(i.direction="")}),this.productCategoryList=""===p||""===l?this.productCategoryList:[...this.productCategoryList].sort((i,_)=>{let m="string"==typeof i[l]?i[l].toLowerCase():i[l],S="string"==typeof _[l]?_[l].toLowerCase():_[l];const A=m<S?-1:m>S?1:0;return"asc"===p?A:-A})}static#t=this.\u0275fac=function(p){return new(p||C)(o.Y36(D.Kz))};static#e=this.\u0275cmp=o.Xpm({type:C,selectors:[["app-product-category-modal"]],viewQuery:function(p,i){if(1&p&&o.Gf(e.j,5),2&p){let _;o.iGM(_=o.CRH())&&(i.headers=_)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(p,i){1&p&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Product Category"),o.qZA(),o.TgZ(4,"div")(5,"button",3),o.NdJ("click",function(){return i.activeModal.close()}),o._UZ(6,"i",4),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),o.NdJ("dataChange",function(m){return i.eventHeader(m)}),o.qZA()(),o.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),o._uU(18,"Sr. No."),o.qZA(),o.TgZ(19,"th",15),o.NdJ("sort",function(m){return i.onSort(m)}),o._uU(20,"Product No."),o.qZA(),o.TgZ(21,"th",16),o.NdJ("sort",function(m){return i.onSort(m)}),o._uU(22,"Product Code"),o.qZA(),o.TgZ(23,"th",17),o.NdJ("sort",function(m){return i.onSort(m)}),o._uU(24," Display Name "),o.qZA(),o.TgZ(25,"th",18),o.NdJ("sort",function(m){return i.onSort(m)}),o._uU(26,"Application"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Select"),o.qZA()()(),o.TgZ(29,"tbody"),o.YNc(30,b,14,10,"tr",19),o.ALo(31,"slice"),o.ALo(32,"searchFi1ter"),o.qZA()()()()(),o.TgZ(33,"div",20)(34,"div",21),o.YNc(35,M,1,0,"hr",22),o.qZA()(),o.YNc(36,T,3,0,"div",23),o.qZA()()()),2&p&&(o.xp6(12),o.Q6J("data",o.l5B(11,Z,i.page,i.pageSize,i.collection,i.search)),o.xp6(18),o.Q6J("ngForOf",o.Dn7(31,4,o.xi3(32,8,i.productCategoryList,i.search),(i.page-1)*i.pageSize,(i.page-1)*i.pageSize+i.pageSize)),o.xp6(5),o.Q6J("ngIf",!o.DdM(16,g).includes(i.action)),o.xp6(1),o.Q6J("ngIf",!o.DdM(17,g).includes(i.action)))},dependencies:[y.sg,y.O5,f.P,D._L,e.j,y.OU,t.G],encapsulation:2})}return C})()},65129:(x,P,d)=>{d.d(P,{o7:()=>g,W0:()=>t,_D:()=>gt,xD:()=>Ct,TN:()=>v,CE:()=>Z,cz:()=>i,Xg:()=>p,B7:()=>pt,cX:()=>F,W5:()=>A,FY:()=>k,t_:()=>u,sm:()=>Tt,t8:()=>ft,KY:()=>h,lX:()=>c,e7:()=>At,Do:()=>yt,PQ:()=>dt,OX:()=>ct,rw:()=>nt,EW:()=>at,Tf:()=>bt,$k:()=>Pt});var e=d(13107),o=d(28402);let D=["*","*","*","*","*","*","*","*","*"],y="Bill of Material (BoM) of Child Item",f=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Item Code",key:"childItemCode",...e.t},{header:"Item Name",key:"childItemName",...e.t},{header:"Item Description",key:"childItemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const t=n=>({title:y,csvData:n,headers:f}),g=n=>(0,o.J)({data:n,headers:f,widths:D,title:y});let b=["*","*","*","*","*","*","*","*"],M="Bill of Material (BoM) of Gr. Child Item",T=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Item Code",key:"grandChildItemCode",...e.t},{header:"Item Name",key:"grandChildItemName",...e.t},{header:"Item Description",key:"grandChildItemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const Z=n=>({title:M,csvData:n,headers:T}),v=n=>(0,o.J)({data:n,headers:T,widths:b,title:M});let C=["*","*","*","*","*","*","*","*","*","*"],U="Bill of Material (BoM) of Product",l=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"Product No.",key:"productNo",...e.t},{header:"Product Category",key:"productCategory",...e.t},{header:"Product Name",key:"productName",...e.t},{header:"Product Description",key:"productDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const p=n=>({title:U,csvData:n,headers:l}),i=n=>(0,o.J)({data:n,headers:l,widths:C,title:U});let _=["*","*","*","*","*","*","*","*","*"],m="Bill of Material (BoM) of SKU",S=[{header:"BoM No.",key:"BOMNo",...e.t},{header:"SKU Code",key:"SKUCode",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Part Count",key:"partCount",...e.t},{header:"Total Material Cost",key:"totalMaterialCost",...e.t},{header:"Status",key:"status",...e.t}];const A=n=>({title:m,csvData:n,headers:S}),F=n=>(0,o.J)({data:n,headers:S,widths:_,title:m});let J=["*","*","*","*","*","*","*","*","*","*"],I="Child Item Master",L=[{header:"Child Item Category ",key:"childItemCategory",...e.t},{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"unitOfMeasurement",...e.t},{header:"HSN Code",key:"HSNCode",...e.t},{header:"Item Cost",key:"itemCost",...e.t},{header:"Source of mfg.",key:"sourceOfManufacturing",...e.t},{header:"Shelf Life (Months)",key:"shelfLife",...e.t},{header:"Status",key:"status",...e.t}];const u=n=>({title:I,csvData:n,headers:L}),k=n=>(0,o.J)({data:n,headers:L,widths:J,title:I});let r=["*","*","*","*","*","*","*","*","*","*","*","*","*","*","*","*"],s="Gr. Child Item Master",a=[{header:"Gr. Child Item Category ",key:"childItemCategory",...e.t},{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"unitOfMeasurement",...e.t},{header:"HSN Code",key:"HSNCode",...e.t},{header:"Item Cost",key:"itemCost",...e.t},{header:"Shelf Life (M) ",key:"shelfLife",...e.t},{header:"Source of mfg.",key:"sourceOfManufacturing",...e.t},{header:"Status",key:"status",...e.t}];const c=n=>({title:s,csvData:n,headers:a}),h=n=>(0,o.J)({data:n,headers:a,widths:r,title:s});let O=["*","*","*","*","*","*","*","*","*","*","*","*"],R="Product Master",E=[{header:"Product No.",key:"productNo",...e.t},{header:"Product Category/Code",key:"productCategory",...e.t},{header:"Product Name",key:"productName",...e.t},{header:"Product Description",key:"productDescription",...e.t},{header:"HSN Code",key:"hsn",...e.t},{header:"UoM",key:"primaryUnit",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Source Of MFG.",key:"sourceOfMFG",...e.t},{header:"Shelf Life [Months]",key:"shelfLife",...e.t},{header:"Storage Temperature",key:"storageTemp",...e.t},{header:"Storage Humidity",key:"storageHumidity",...e.t}];const at=n=>({title:R,csvData:n,headers:E}),nt=n=>(0,o.J)({data:n,headers:E,widths:O,title:R});let lt=["*","*","*","*","*","*","*","*","*"],G="Process Resource Management",H=[{header:"Process Name",key:"processName",...e.t},{header:"Work Centre/Machine Name",key:"machineName",...e.t},{header:"# of Manpower",key:"noOfManpower",...e.t},{header:"Output/hr",key:"outputPerHr",...e.t},{header:"Labour Cost/hr",key:"labourCostPerHr",...e.t},{header:"Power consumption cost/hr",key:"powerConsumptionPerHr",...e.t}];const ct=n=>({title:G,csvData:n,headers:H}),dt=n=>(0,o.J)({data:n,headers:H,widths:lt,title:G});let Y=[{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const pt=n=>({title:"Bill of Material (BoM) of SKU",csvData:n,headers:Y});let X=[{header:"Item Code<",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const Ct=n=>({title:"BOM Of Grand Child Part",csvData:n,headers:X});let $=[{header:"Item Code",key:"itemCode",...e.t},{header:"Item Name",key:"itemName",...e.t},{header:"Item Description",key:"itemDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Qty/SKU Unit",key:"qtyPerSKUUnit",...e.t},{header:"Waste %",key:"wastePercentage",...e.t},{header:"Qty/Part Count",key:"partCount",...e.t},{header:"Unit Cost",key:"unitCost",...e.t},{header:"Item Cost",key:"itemCost",...e.t}];const gt=n=>({title:"Bill of Material (BoM) of D-SKU",csvData:n,headers:$});let Ut=["*","*","*","*","*","*","*"],tt="Process Master",et=[{header:"Process ID",key:"processId",...e.t},{header:"Process Name",key:"processName",...e.t},{header:"Source",key:"sourceOfManufacturing",...e.t},{header:"Primary Assets/Allocation",key:"primaryAssetAllocation",...e.t},{header:"Std.Output/H",key:"unitProcessOutput",...e.t},{header:"Labour Rate/Hr",key:"totalRatePerHr",...e.t},{header:"Asset Rate/Hr",key:"totalAllocatedAssetCostPerHr",...e.t}];const yt=n=>({title:tt,csvData:n,headers:et}),At=n=>(0,o.J)({data:n,headers:et,widths:Ut,title:tt});let Dt=["*","*","*","*","*","*","*","*","*","*","*"],ot="Direct Cost",rt=[{header:"Product Category",key:"productCategory",...e.t},{header:"SKU No.",key:"SKUNo",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"Labour Cost/Unit",key:"totalLabourCostPerUnit",...e.t},{header:"Asset Cost/Unit",key:"totalAssetCostPerUnit",...e.t},{header:"Tooling Cost/Unit",key:"totalToolingCostPerUnit",...e.t},{header:"Total Direct Process Cost/Unit",key:"totalCostPerUnit",...e.t}];const ft=n=>({title:ot,csvData:n,headers:rt}),Tt=n=>(0,o.J)({data:n,headers:rt,widths:Dt,title:ot});let St=["*","*","*","*","*","*","*","*","*","*","*","*"],st="SKU Cost Sheet",it=[{header:"SKU No",key:"SKUNo",...e.t},{header:"SKU Name",key:"SKUName",...e.t},{header:"SKU Description",key:"SKUDescription",...e.t},{header:"UoM",key:"UOM",...e.t},{header:"COGS",key:"costOfGoodsSold",...e.t},{header:"OPEX",key:"operatingExpenses",...e.t},{header:"Total COO",key:"totalCostOfOperation",...e.t},{header:"Profit",key:"profit",...e.t},{header:"Selling Price",key:"sellingPrice",...e.t}];const Pt=n=>({title:st,csvData:n,headers:it}),bt=n=>(0,o.J)({data:n,headers:it,widths:St,title:st})}}]);