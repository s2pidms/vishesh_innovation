"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3270],{73270:(A,_,c)=>{c.r(_),c.d(_,{GRLModule:()=>ot});var n=c(1076),u=c(43818),y=c(25116),g=c(83110),t=c(65879),m=c(99328),v=c(23396),f=c(88059),h=c(96814),b=c(53421);function J(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",20),t._UZ(15,"button",21),t.TgZ(16,"div",22)(17,"a",23),t.NdJ("click",function(){const r=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",r,"view"))}),t._UZ(18,"i",24),t._uU(19," View "),t.qZA(),t.TgZ(20,"a",23),t.NdJ("click",function(){const r=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",r,"edit"))}),t._UZ(21,"i",25),t._uU(22," Edit "),t.qZA(),t.TgZ(23,"a",23),t.NdJ("click",function(){const r=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",r,"approve"))}),t._UZ(24,"i",26),t._uU(25," Approve "),t.qZA(),t.TgZ(26,"a",23),t.NdJ("click",function(){const r=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",r,"reject"))}),t._UZ(27,"i",27),t._uU(28," Reject "),t.qZA()()()()()}if(2&s){const o=d.$implicit,i=t.oxw();t.xp6(2),t.Oqu(o.GRNumber),t.xp6(2),t.Oqu(o.GRDateS),t.xp6(2),t.Oqu(o.deliveryLocation),t.xp6(2),t.Oqu(o.department),t.xp6(2),t.Oqu(o.salesOrderSKUReference),t.xp6(2),t.Oqu(o.GRStatus),t.xp6(5),t.Q6J("accessType",i.rolePermissionActions.viewAction),t.xp6(3),t.ekj("disable","Approved"===(null==o?null:o.GRStatus)||"Rejected"===(null==o?null:o.GRStatus)),t.Q6J("accessType",i.rolePermissionActions.editAction),t.xp6(3),t.ekj("disable","Approved"===(null==o?null:o.GRStatus)||"Rejected"===(null==o?null:o.GRStatus)),t.Q6J("accessType",i.rolePermissionActions.approveAction),t.xp6(3),t.ekj("disable","Approved"===(null==o?null:o.GRStatus)||"Rejected"===(null==o?null:o.GRStatus)),t.Q6J("accessType",i.rolePermissionActions.approveAction)}}const M=function(s,d,o,i){return{page:s,pageSize:d,collection:o,search:i,type:"list"}};let Q=(()=>{var s;class d{constructor(i,e,r,a,R,T){this.spinner=i,this.goodReqService=e,this.exportExcelService=r,this.activatedRoute=a,this.exportToPDFService=R,this.utilityService=T,this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.rolePermissionActions=y.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(i,e,r){this.utilityService.navigateToForm({path:i,status:e.GRStatus,action:r,id:e._id,activatedRoute:this.activatedRoute})}trackByFn(i,e){return e?._id}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=i.value,this.getAll()}}getAll(i=!1,e=""){this.spinner.show();let r={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:i};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.goodReqService.getAll(r).subscribe(a=>{"EXCEL"==e?this.excelDownload(a.rows):"PDF"==e?this.pdfDownload(a.rows):(this.tableData=a.rows,this.collection=a.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(i){let e=(0,g.oO)(i);this.exportToPDFService.generatePdf(e.tableData,e.title)}excelDownload(i){this.exportExcelService.exportExcel((0,g.rv)(i))}onSort({column:i,direction:e}){this.headers.forEach(r=>{r.sortable!==i&&(r.direction="")}),this.column=i,this.direction="asc"==e?1:-1,this.getAll()}}return(s=d).\u0275fac=function(i){return new(i||s)(t.Y36(m.V),t.Y36(v.Rm),t.Y36(m.Ol),t.Y36(n.gz),t.Y36(m.$L),t.Y36(m.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list"]],viewQuery:function(i,e){if(1&i&&t.Gf(u.j,5),2&i){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},decls:30,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-4",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","GRNumber",3,"sort"],["sortable","GRDateS",3,"sort"],["sortable","deliveryLocation",3,"sort"],["sortable","department",1,"text-start",3,"sort"],["sortable","salesOrderSKUReference",1,"text-start",3,"sort"],["sortable","GRStatus",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-check","fa-lg","me-2","text-success"],["aria-hidden","true",1,"fa","fa-close","me-3","text-primary"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Goods Requisition Summary"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return e.navigateTo("../form",{},"create")}),t._uU(7," Create Goods Requisition "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(a){return e.eventHeader(a)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(15,"GR No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(17,"GR Date"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(19,"Location (Store)"),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(21,"Department"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(23," Order Reference "),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(25,"Status"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Action"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,J,29,16,"tr",18),t.qZA()()()()),2&i&&(t.xp6(4),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,M,e.page,e.pageSize,e.collection,e.search)),t.xp6(19),t.Q6J("ngForOf",e.tableData)("ngForTrackBy",e.trackByFn))},dependencies:[f.P,h.sg,u.j,b.J],encapsulation:2}),d})();var p=c(60095),D=c(21631),E=c(22096),L=c(77609),Y=c(68922),S=c(16857),C=c(37285),j=c(95346),K=c(59103);function H(s,d){if(1&s&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&s){const o=d.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.label," ")}}function Z(s,d){if(1&s&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&s){const o=d.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function G(s,d){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.GRQty)}}const k=function(){return{standalone:!0}};function et(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"input",48),t.NdJ("input",function(){t.CHM(o);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.setGRQty(e))})("ngModelChange",function(e){t.CHM(o);const r=t.oxw().$implicit;return t.KtG(r.GRQty=e)}),t.qZA()}if(2&s){const o=t.oxw().$implicit;t.Q6J("ngModel",o.GRQty)("ngModelOptions",t.DdM(2,k))}}const O=function(){return["view","approve","reject"]};function U(s,d){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",42,43)(7,"span",44),t._uU(8),t.qZA()(),t.TgZ(9,"td",42,45)(11,"span",44),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"UOMUnitsMaster"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td")(21,"div",46),t.YNc(22,G,2,1,"span",40),t.YNc(23,et,1,3,"input",47),t.qZA()()()),2&s){const o=d.$implicit,i=t.MAs(6),e=t.MAs(10),r=t.oxw();t.xp6(2),t.Oqu(o.GRLineNumber),t.xp6(2),t.Oqu(o.itemCode),t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",o.itemName),t.xp6(1),t.hij(" ",null==o?null:o.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",o.itemDescription),t.xp6(1),t.hij(" ",null==o?null:o.itemDescription," "),t.xp6(2),t.Oqu(o.conversionOfUnits),t.xp6(2),t.Oqu(t.lcZ(17,17,o.primaryUnit)),t.xp6(3),t.Oqu(o.closedIRQty),t.xp6(3),t.Q6J("ngIf",t.DdM(19,O).includes(r.action)),t.xp6(1),t.Q6J("ngIf",!t.DdM(20,O).includes(r.action))}}function N(s,d){if(1&s&&(t.TgZ(0,"div",49)(1,"div",50)(2,"div",51)(3,"button",52),t._uU(4,"Order Reference"),t.qZA()(),t._UZ(5,"input",53),t.qZA()()),2&s){const o=t.oxw();t.Q6J("ngClass","create"===o.action?"col-8":"col-6")}}function B(s,d){if(1&s&&(t.TgZ(0,"div",49)(1,"div",50)(2,"div",51)(3,"button",52),t._uU(4,"Order Reference"),t.qZA()(),t._UZ(5,"input",53),t.qZA()()),2&s){const o=t.oxw();t.Q6J("ngClass","edit"===o.action?"col-8":"col")}}function z(s,d){1&s&&(t.TgZ(0,"div",54)(1,"div",55)(2,"button",52),t._uU(3,"Rejection Remarks"),t.qZA(),t._UZ(4,"input",56),t.qZA()())}function $(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div",57)(1,"button",58),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",59),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.ESCPreview())}),t._uU(4," Esc Preview "),t.qZA(),t.TgZ(5,"button",60),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.preview())}),t._uU(6,"Preview"),t.qZA(),t.TgZ(7,"button",61),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.submit())}),t._uU(8," Save "),t.qZA()()}if(2&s){const o=t.oxw();t.xp6(3),t.Q6J("disabled",!o.isESCPreview),t.xp6(4),t.Q6J("disabled",!o.isPreview)}}function x(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.submit())}),t._uU(2,"Save"),t.qZA()()}}function F(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div",62)(1,"button",63),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.submit())}),t._uU(2,"Reject"),t.qZA()()}}function V(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div",64)(1,"button",63),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.submit())}),t._uU(2,"Approve"),t.qZA()()}}function X(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div")(1,"button",63),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.navigateTo("../list",{},""))}),t._uU(2," Back "),t.qZA()()}}const q=function(){return["create"]},w=function(s,d,o,i){return{page:s,pageSize:d,collection:o,search:i}},I=function(){return["view"]};let W=(()=>{var s;class d{constructor(i,e,r,a,R,T,P,rt,nt,st,at,ct){this.goodReqService=i,this.router=e,this.activatedRoute=r,this.spinner=a,this.menuTitleService=R,this.toastService=T,this.validationService=P,this.modalService=rt,this.utilityService=nt,this.storageService=st,this.exportExcelService=at,this.location=ct,this.isPreview=!1,this.isESCPreview=!1,this.page=1,this.pageSize=6,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.submitted=!1,this.action="create",this.GRDetailsArray=[],this.itemCodes=[],this.ESCPreviewArr=[],this.itemCategory="",this.itemGroup="",this.userData={},this.statusArr={create:"Opened",edit:"Opened",approve:"Approved",reject:"Rejected"},this.masterData={autoIncrementNo:"",itemCategoryOptions:[],locationOptions:[]},this.form=new p.nJ({_id:new p.p4(null),GRNumber:new p.p4("",[p.kI.required]),GRDate:new p.p4(this.utilityService.getTodayDate("YYYY-MM-DD"),[p.kI.required]),GRStatus:new p.p4("Opened",[p.kI.required]),salesOrderSKUReference:new p.p4(""),deliveryLocation:new p.p4(null,[p.kI.required]),department:new p.p4(""),remarks:new p.p4(""),GRDetails:new p.p4([])})}ngOnInit(){this.userData=this.storageService.get("IDMSAUser"),this.getInitialData(),this.menuTitleService.set({title:"Goods Requisition",subTitle:null,type:this.action})}trackByFn(i,e){return e?._id}reset(){this.itemCategory="",this.itemGroup="",this.form.reset(),this.GRDetailsArray=[],this.collection=this.GRDetailsArray.length,this.getInitialData()}submit(){if(this.submitted=!0,"reject"==this.action&&!this.form.controls.remarks.value)return void this.toastService.warning("Remarks is Required");if(this.form.enable(),this.validationService.checkErrors(this.form,Y.T))return;if("reject"==this.action&&!this.form.controls.remarks.value)return void this.toastService.warning("Remarks is Required");let i=this.form.value;i.GRDetails=this.GRDetailsArray,i._id?this.update(i):(delete i._id,this.create(i))}navigateTo(i,e,r){this.router.navigate([i],{relativeTo:this.activatedRoute,queryParams:{id:e,action:r}})}create(i){this.spinner.show(),this.goodReqService.create(i).subscribe(e=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(e.message),this.itemCodes=e.itemCodes,this.location.back(),this.openAlertMessageModal()})}update(i){this.spinner.show(),this.goodReqService.update(i._id,i).subscribe(e=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(e.message),this.location.back()})}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value;break;case"EXCEL":this.exportExcelService.exportExcel((0,g.yz)(this.GRDetailsArray));break;case"PAGE":this.page=i.value}}setGRQty(i){i.GRQty>i.closedIRQty&&this.toastService.warning("GR Qty Should not be greater than IR Qty. !")}getInitialData(){this.spinner.show(),this.goodReqService.getAllMasterData({}).subscribe(i=>{this.masterData=i,this.form.controls.GRNumber.setValue(this.masterData.autoIncrementNo),this.form.controls.GRDate.setValue(this.utilityService.getTodayDate("YYYY-MM-DD")),this.form.controls.deliveryLocation.setValue(null),this.form.controls.department.setValue(this.userData?.departmentName),this.form.controls.GRStatus.setValue("Opened"),this.activatedRoute.queryParams.pipe((0,D.z)(e=>(this.action=e.action,this.utilityService.accessDenied(this.action),e.id?this.goodReqService.getById(e.id):(0,E.of)({})))).subscribe(e=>{this.spinner.hide(),0!=Object.keys(e).length&&(this.GRDetailsArray=e.GRDetails.map((r,a)=>(0==a&&(this.itemCategory=r?.item?.itemType,this.itemGroup=r?.item?.itemSubCategory),{GRLineNumber:a+1,primaryUnit:r.primaryUnit,GRQty:r.GRQty,closedIRQty:r.closedIRQty,balancedQty:r.GRQty,item:r?.item?._id,itemName:r?.item?.itemName,itemCode:r?.item?.itemCode,itemDescription:r?.item?.itemDescription,conversionOfUnits:r?.item?.conversionOfUnits,GRLineStatus:"Opened"})),this.collection=this.GRDetailsArray.length,e.GRDate&&(e.GRDate=e?.GRDate.split("T")[0]),e.GRStatus=this.statusArr[this.action],this.form.patchValue(e),"create"!=this.action&&(this.form.disable(),"edit"==this.action&&this.form.controls.salesOrderSKUReference.enable(),"reject"==this.action&&this.form.controls.remarks.enable()))}),this.menuTitleService.set({title:"Goods Requisition",subTitle:null,type:null})})}openAlertMessageModal(){if(this.itemCodes.length>0){const i=this.modalService.open(L.HF,{centered:!0,size:"md",backdrop:"static",keyboard:!1});i.componentInstance.action=this.action,i.componentInstance.alertMessage=`Dear GR Creator, it has been noticed that material you requested having Item Code No: ${this.itemCodes} are not presently available in store`,i.componentInstance.itemCodes=this.itemCodes,i.result.then(e=>{["create","edit"].includes(this.action)&&(this.itemCodes=e)},e=>{})}}getData(){this.spinner.show(),this.isESCPreview=!1,this.isPreview=!1,this.goodReqService.getAllFilterData({itemCategory:this.itemGroup,itemGroup:this.itemCategory,page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction}).subscribe(e=>{this.GRDetailsArray=e?.map((r,a)=>({GRLineNumber:a+1,primaryUnit:r.primaryUnit,issueQty:0,GRQty:0,closedIRQty:r.closedIRQty,balancedQty:0,item:r._id,itemName:r.itemName,itemCode:r.itemCode,itemDescription:r.itemDescription,conversionOfUnits:r.conversionOfUnits,GRLineStatus:"Opened"})),this.collection=this.GRDetailsArray.length,this.spinner.hide()})}preview(){this.search="",this.isPreview=!0,this.isESCPreview=!0,this.ESCPreviewArr=this.GRDetailsArray,this.GRDetailsArray=this.GRDetailsArray.filter(i=>i.GRQty>0),this.collection=this.GRDetailsArray.length}ESCPreview(){this.search="",this.isPreview=!1,this.GRDetailsArray=this.ESCPreviewArr,this.collection=this.GRDetailsArray.length}onSort({column:i,direction:e}){this.headers.forEach(r=>{r.sortable!==i&&(r.direction="")}),this.GRDetailsArray=""===e||""===i?this.GRDetailsArray:[...this.GRDetailsArray].sort((r,a)=>{let R="string"==typeof r[i]?r[i].toLowerCase():r[i],T="string"==typeof a[i]?a[i].toLowerCase():a[i];const P=R<T?-1:R>T?1:0;return"asc"===e?P:-P})}}return(s=d).\u0275fac=function(i){return new(i||s)(t.Y36(v.Rm),t.Y36(n.F0),t.Y36(n.gz),t.Y36(m.V),t.Y36(m.Uh),t.Y36(m.kl),t.Y36(S.R),t.Y36(C.FF),t.Y36(m.tI),t.Y36(m.V1),t.Y36(m.Ol),t.Y36(h.Ye))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-form"]],viewQuery:function(i,e){if(1&i&&t.Gf(u.j,5),2&i){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},decls:76,vars:36,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label","mb-2"],["type","text","formControlName","GRNumber","readonly","",1,"form-control"],["type","date","formControlName","GRDate",1,"form-control"],[1,"text-danger"],["formControlName","deliveryLocation",1,"form-select"],["selected","","disabled","","value","null"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","department","readonly","",1,"form-control"],[1,"form-select",3,"ngModel","ngModelOptions","disabled","change","ngModelChange"],["selected","","disabled","","value",""],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","23rem"],[1,"table","table-bordered","table-sticky","mt-1"],[1,"bg-primary"],[1,"text-white"],["sortable","GRLineNumber",3,"sort"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","conversionOfUnits",3,"sort"],["sortable","primaryUnit",3,"sort"],["sortable","closedIRQty",3,"sort"],["sortable","GRQty",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mb-0"],[3,"ngClass",4,"ngIf"],["class","col pe-5",4,"ngIf"],[1,"col-md-auto","ms-auto"],["class","d-grid gap-2 d-md-block",4,"ngIf"],["class","text-end",4,"ngIf"],["class","col-5 text-end",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"text-start"],["itemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["itemDescription",""],[1,"d-flex","justify-content-center"],["class","form-control form-control-sm w-25","type","number",3,"ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["type","number",1,"form-control","form-control-sm","w-25",3,"ngModel","ngModelOptions","input","ngModelChange"],[3,"ngClass"],[1,"d-flex","align-items-center"],[1,"col-md-auto","text-nowrap"],["type","button",1,"btn","btn-primary","px-3"],["type","text","formControlName","salesOrderSKUReference",1,"form-control"],[1,"col","pe-5"],[1,"d-flex","align-items-center","text-nowrap"],["type","text","formControlName","remarks",1,"form-control"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],[1,"text-end"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"col-5","text-end"]],template:function(i,e){1&i&&(t.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11,"Goods Requisition No."),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",7)(14,"label",8),t._uU(15,"Goods Requisition Date"),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"div",7)(18,"label",8),t._uU(19," Location (Store)"),t.TgZ(20,"span",11),t._uU(21,"*"),t.qZA()(),t.TgZ(22,"select",12)(23,"option",13),t._uU(24,"Select Location"),t.qZA(),t.YNc(25,H,2,2,"option",14),t.qZA()(),t.TgZ(26,"div",7)(27,"label",8),t._uU(28," Department"),t.qZA(),t._UZ(29,"input",15),t.qZA(),t.TgZ(30,"div",7)(31,"label",8),t._uU(32," Item Category"),t.qZA(),t.TgZ(33,"select",16),t.NdJ("change",function(){return e.getData()})("ngModelChange",function(a){return e.itemCategory=a}),t.TgZ(34,"option",17),t._uU(35,"Select Item Category"),t.qZA(),t.YNc(36,Z,2,2,"option",14),t.qZA()()(),t._UZ(37,"hr",18),t.TgZ(38,"app-setting-header",19),t.NdJ("dataChange",function(a){return e.eventHeader(a)}),t.qZA(),t.TgZ(39,"div",20)(40,"table",21)(41,"thead",22)(42,"tr",23)(43,"th",24),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(44,"#"),t.qZA(),t.TgZ(45,"th",25),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(46,"Item Code"),t.qZA(),t.TgZ(47,"th",26),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(48,"Item Name"),t.qZA(),t.TgZ(49,"th",27),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(50," Item Description "),t.qZA(),t.TgZ(51,"th",28),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(52,"Conversion of Units"),t.qZA(),t.TgZ(53,"th",29),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(54,"UoM"),t.qZA(),t.TgZ(55,"th",30),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(56,"IR Qty."),t.qZA(),t.TgZ(57,"th",31),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(58,"GR Qty."),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,U,24,21,"tr",32),t.ALo(61,"slice"),t.ALo(62,"searchFi1ter"),t.qZA()()(),t._UZ(63,"hr",18),t.TgZ(64,"div",33)(65,"div",7)(66,"div",6),t.YNc(67,N,6,1,"div",34),t.YNc(68,B,6,1,"div",34),t.YNc(69,z,5,0,"div",35),t.qZA()(),t.TgZ(70,"div",36),t.YNc(71,$,9,2,"div",37),t.YNc(72,x,3,0,"div",38),t.YNc(73,F,3,0,"div",38),t.YNc(74,V,3,0,"div",39),t.YNc(75,X,3,0,"div",40),t.qZA()()()()()),2&i&&(t.Q6J("formGroup",e.form),t.xp6(5),t.hij("Goods Requisition (",t.lcZ(6,18,e.action),")"),t.xp6(20),t.Q6J("ngForOf",e.masterData.locationOptions),t.xp6(8),t.Q6J("ngModel",e.itemCategory)("ngModelOptions",t.DdM(27,k))("disabled",!t.DdM(28,q).includes(e.action)),t.xp6(3),t.Q6J("ngForOf",e.masterData.itemCategoryOptions),t.xp6(2),t.Q6J("data",t.l5B(29,w,e.page,e.pageSize,e.collection,e.search)),t.xp6(22),t.Q6J("ngForOf",t.Dn7(61,20,t.xi3(62,24,e.GRDetailsArray,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(7),t.Q6J("ngIf","edit"!=e.action),t.xp6(1),t.Q6J("ngIf","edit"==e.action),t.xp6(1),t.Q6J("ngIf","reject"==e.action),t.xp6(2),t.Q6J("ngIf",t.DdM(34,q).includes(e.action)),t.xp6(1),t.Q6J("ngIf","edit"==e.action),t.xp6(1),t.Q6J("ngIf","reject"==e.action),t.xp6(1),t.Q6J("ngIf","approve"==e.action),t.xp6(1),t.Q6J("ngIf",t.DdM(35,I).includes(e.action)))},dependencies:[f.P,h.mk,h.sg,h.O5,C._L,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.sg,p.u,p.On,u.j,h.OU,h.rS,j.G,K.S],encapsulation:2}),d})();var tt=c(56208);const it=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Q},{path:"form",component:W,resolve:{accessScreen:c(65876).x}}];let ot=(()=>{var s;class d{}return(s=d).\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[n.Bz.forChild(it),tt.m]}),d})()},13107:(A,_,c)=>{c.d(_,{t:()=>n});const n={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(A,_,c)=>{c.d(_,{J:()=>n});const n=({data:u,headers:y,widths:g,title:t})=>({tableData:{widths:g,headerRows:1,body:[y.map(f=>({text:f.header,style:"header"})),...u.map(f=>y.map(h=>({style:"subheader",text:f[h.key]})))]},title:t})},83110:(A,_,c)=>{c.d(_,{yz:()=>k,oO:()=>v,rv:()=>m,cY:()=>tt,ho:()=>W,R6:()=>z,M5:()=>B,MO:()=>X,GF:()=>V,YJ:()=>M,kQ:()=>J,Y3:()=>L,Wb:()=>E,i4:()=>K,mU:()=>j});var n=c(13107),u=c(28402);let y=["*","*","*","*","*","*","*","*"],g="Goods Requisition",t=[{header:"GR No.",key:"GRNumber",...n.t},{header:"GR Date",key:"GRDateS",...n.t},{header:"Location (Store)",key:"deliveryLocation",...n.t},{header:"Department",key:"department",...n.t},{header:"Remarks/Order Reference",key:"salesOrderSKUReference",...n.t},{header:"Status",key:"GRStatus",...n.t}];const m=l=>({title:g,csvData:l,headers:t}),v=l=>(0,u.J)({data:l,headers:t,widths:y,title:g});let f=["*","*","*","*","*","*","*","*"],h="Child Part Production",b=[{header:"Process Name",key:"processName",...n.t},{header:"Machine Name",key:"machineName",...n.t},{header:"Prod. Date",key:"productionDate",...n.t},{header:"Shift",key:"productionShift",...n.t},{header:"Operating Staff",key:"operatingStaff",...n.t},{header:"Remarks",key:"remarks",...n.t},{header:"Status",key:"status",...n.t}];const J=l=>({title:h,csvData:l,headers:b}),M=l=>(0,u.J)({data:l,headers:b,widths:f,title:h});let Q=["*","*","*","*","*","*","*","*"],p="Gr. Child Part Production",D=[{header:"Process Name",key:"processName",...n.t},{header:"Machine Name",key:"machineName",...n.t},{header:"Prod. Date",key:"productionDate",...n.t},{header:"Shift",key:"productionShift",...n.t},{header:"Operating Staff",key:"operatingStaff",...n.t},{header:"Remarks",key:"remarks",...n.t},{header:"Status",key:"status",...n.t}];const E=l=>({title:p,csvData:l,headers:D}),L=l=>(0,u.J)({data:l,headers:D,widths:Q,title:p});let Y=["*","*","*","*","*","*","*","*"],S="SKU Production",C=[{header:"Process Name",key:"processName",...n.t},{header:"Machine Name",key:"machineName",...n.t},{header:"Prod. Date",key:"productionDate",...n.t},{header:"Shift",key:"productionShift",...n.t},{header:"Operating Staff",key:"operatingStaff",...n.t},{header:"Remarks",key:"remarks",...n.t},{header:"Status",key:"status",...n.t}];const j=l=>({title:S,csvData:l,headers:C}),K=l=>(0,u.J)({data:l,headers:C,widths:Y,title:S});let G=[{header:"#",key:"GRLineNumber",...n.t},{header:"Item Code",key:"itemCode",...n.t},{header:"Item Name",key:"itemName",...n.t},{header:"Item Description",key:"itemDescription",...n.t},{header:"Conversion Of Units",key:"conversionOfUnits",...n.t},{header:"UoM",key:"primaryUnit",...n.t},{header:"IR Qty.",key:"closedIRQty",...n.t},{header:"GR Qty.",key:"GRQty",...n.t}];const k=l=>({title:"Goods Requisition",csvData:l,headers:G});let O=["*","*","*","*","*","*","*","*"],U="Ink Mixing",N=[{header:"JC No.",key:"jobCardNo",...n.t},{header:"F20 Ink Code",key:"itemCode",...n.t},{header:"F20 Ink Name",key:"itemName",...n.t},{header:"F20 Ink Description",key:"itemDescription",...n.t},{header:"UoM",key:"UOM",...n.t},{header:"Batch Qty.",key:"batchQty",...n.t},{header:"Batch Date",key:"batchDate",...n.t},{header:"Log Book Ref",key:"logBookRef",...n.t}];const B=l=>({title:U,csvData:l,headers:N}),z=l=>(0,u.J)({data:l,headers:N,widths:O,title:U});let $=["*","*","*","*","*","*","*"],x="Job Card Entry",F=[{header:"Job Card No",key:"jobCardNo",...n.t},{header:"SKU No",key:"SKUNo",...n.t},{header:"SKU Name",key:"SKUName",...n.t},{header:"SKU Description",key:"SKUDescription",...n.t},{header:"UoM",key:"UOM",...n.t},{header:"Batch I/P Qty.",key:"totalBatchQuantity",...n.t},{header:"Batch O/P Qty.",key:"batchOutputQty",...n.t},{header:"Batch Number",key:"batchNumber",...n.t},{header:"Status",key:"status",...n.t}];const V=l=>({title:x,csvData:l,headers:F}),X=l=>(0,u.J)({data:l,headers:F,widths:$,title:x});let q=["*","*","*","*","*","*"],w="Goods Transfer Request (Intra) Report",I=[{header:"GT Req #",key:"GTRequestNo",...n.t},{header:"GT Request Dt.",key:"GTRequestDate",...n.t},{header:"Location",key:"location",...n.t},{header:"From Department",key:"fromDepartment",...n.t},{header:"To Department",key:"toDepartment",...n.t},{header:"Status",key:"status",...n.t}];const W=l=>({title:w,csvData:l,headers:I}),tt=l=>(0,u.J)({data:l,headers:I,widths:q,title:w})},68922:(A,_,c)=>{c.d(_,{T:()=>n});const n=[{message:"Location is Required",key:"deliveryLocation"}]}}]);