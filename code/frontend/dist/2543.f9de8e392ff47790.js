"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2543],{74779:(T,p,l)=>{l.r(p),l.d(p,{LeaveApplicationRModule:()=>L});var u=l(96814),d=l(1076),c=l(43818),_=l(63770),e=l(65879),A=l(68187),h=l(2742),m=l(88059),g=l(60095),Z=l(50363);function f(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA()()),2&r){const n=s.$implicit;e.xp6(2),e.Oqu(null==n?null:n.empCode),e.xp6(2),e.Oqu(null==n?null:n.empFullName),e.xp6(2),e.Oqu(null==n?null:n.fromDateS),e.xp6(2),e.Oqu(null==n?null:n.toDateS),e.xp6(2),e.Oqu(null==n?null:n.leaveType),e.xp6(2),e.Oqu(n.halfDay?n.halfDay:"-"),e.xp6(2),e.Oqu(null==n?null:n.leaveDays),e.xp6(2),e.Oqu(null==n?null:n.approvedBy),e.xp6(2),e.Oqu(null==n?null:n.updatedAt)}}const b=function(r,s,n,o){return{page:r,pageSize:s,collection:n,search:o,type:"list",pdfDisplay:!0}};let D=(()=>{var r;class s{constructor(o,t,i,a,v,R,S){this.leavesApplicationService=o,this.exportToPDFService=t,this.exportExcelService=i,this.activatedRoute=a,this.router=v,this.spinner=R,this.utilityService=S,this.page=1,this.pageSize=12,this.collection=0,this.column="empCode",this.direction=-1,this.search="",this.tableData=[],this.user=[],this.date=new Date,this.originTableData=[],this.employee=[],this.userId=[],this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getInitialData()}trackByFn(o,t){return t?._id}navigateTo(o,t,i){this.router.navigate([o],{queryParams:{id:t,action:i}})}eventHeader(o){switch(o.key){case"SEARCH":this.search=o.value,this.getInitialData();break;case"PDF":this.getInitialData(!0,"PDF");break;case"EXCEL":this.getInitialData(!0,"EXCEL");break;case"PAGE":this.page=o.value,this.getInitialData()}}onSort({column:o,direction:t}){this.headers.forEach(i=>{i.sortable!==o&&(i.direction="")}),this.column=o,this.direction="asc"==t?1:-1,this.getInitialData()}clearFilter(){this.search="",this.page=1,this.pageSize=10,this.collection=0,this.column="empCode",this.direction=-1,this.search="",this.employee="",this.userId="",this.fromDate=this.utilityService.getCurrentMonthDates().fromDate,this.toDate=this.utilityService.getCurrentMonthDates().toDate,this.tableData=[],this.getInitialData()}pdfDownload(o){let t=(0,_.m6)(o);this.exportToPDFService.generatePdf(t.tableData,t.title)}excelDownload(o){this.exportExcelService.exportExcel((0,_.P7)(o))}getInitialData(o=!1,t=""){let i={employeeId:this.userId,fromDate:this.fromDate,toDate:this.toDate,page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:o};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.leavesApplicationService.getAllReports(i).subscribe(a=>{"EXCEL"==t?this.excelDownload(a.rows):"PDF"==t?this.pdfDownload(a.rows):(this.employee=a.employees,this.collection=a.count,this.tableData=a.rows,this.user=this.employee.map(v=>({label:v.empCode+"  -  "+v.empFullName,value:v._id})))})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(r=s).\u0275fac=function(o){return new(o||r)(e.Y36(A.FL),e.Y36(h.$L),e.Y36(h.Ol),e.Y36(d.gz),e.Y36(d.F0),e.Y36(h.V),e.Y36(h.tI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-leave-application-r"]],viewQuery:function(o,t){if(1&o&&e.Gf(c.j,5),2&o){let i;e.iGM(i=e.CRH())&&(t.headers=i)}},decls:60,vars:14,consts:[[1,"reportTablePage"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5","separate-row"],[1,"form-label"],[1,"text-danger"],["bindLabel","label","bindValue","value",3,"items","multiple","ngModel","clearable","ngModelChange"],[1,"set-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],[1,"col-3"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","align-self-end","separate-image","pe-4"],[1,"image-position"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","ms-4",3,"click"],[1,"row","line-border"],[1,"table-responsive","mb-0"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","empCode",3,"sort"],["sortable","empFullName",1,"text-start",3,"sort"],["sortable","fromDate",3,"sort"],["sortable","toDate",3,"sort"],["sortable","leaveType",3,"sort"],["sortable","halfDay",3,"sort"],["sortable","leaveDays",3,"sort"],["sortable","approvedBy",3,"sort"],["sortable","updatedAt",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Leave Application Report"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9," Employee Name"),e.TgZ(10,"span",8),e._uU(11,"*"),e.qZA()(),e.TgZ(12,"ng-select",9),e.NdJ("ngModelChange",function(a){return t.userId=a}),e.qZA(),e.TgZ(13,"span",10),e._UZ(14,"img",11),e.qZA()(),e.TgZ(15,"div",12)(16,"label",7),e._uU(17," From Date"),e.TgZ(18,"span",8),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"input",13),e.NdJ("ngModelChange",function(a){return t.fromDate=a}),e.qZA()(),e.TgZ(21,"div",12)(22,"label",7),e._uU(23," To Date "),e.TgZ(24,"span",8),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"input",13),e.NdJ("ngModelChange",function(a){return t.toDate=a}),e.qZA()(),e.TgZ(27,"div",14)(28,"span",15),e._UZ(29,"img",11),e.qZA(),e.TgZ(30,"button",16),e.NdJ("click",function(){return t.getInitialData()}),e._uU(31,"Apply Filter"),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return t.clearFilter()}),e._uU(33,"Reset Filter"),e.qZA()()(),e._UZ(34,"hr",18),e.TgZ(35,"div",19)(36,"app-setting-header",20),e.NdJ("dataChange",function(a){return t.eventHeader(a)}),e.qZA(),e.TgZ(37,"table",21)(38,"thead",22)(39,"tr",23)(40,"th",24),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(41,"Employee Code"),e.qZA(),e.TgZ(42,"th",25),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(43,"Employee Name"),e.qZA(),e.TgZ(44,"th",26),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(45,"From Date"),e.qZA(),e.TgZ(46,"th",27),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(47,"To Date"),e.qZA(),e.TgZ(48,"th",28),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(49,"Leave Type"),e.qZA(),e.TgZ(50,"th",29),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(51,"Half Day"),e.qZA(),e.TgZ(52,"th",30),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(53,"Leave Days"),e.qZA(),e.TgZ(54,"th",31),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(55,"Approved By"),e.qZA(),e.TgZ(56,"th",32),e.NdJ("sort",function(a){return t.onSort(a)}),e._uU(57,"Approved Date"),e.qZA()()(),e.TgZ(58,"tbody"),e.YNc(59,f,19,9,"tr",33),e.qZA()()()()()),2&o&&(e.xp6(12),e.Q6J("items",t.user)("multiple",!1)("ngModel",t.userId)("clearable",!1),e.xp6(8),e.Q6J("ngModel",t.fromDate),e.xp6(6),e.Q6J("ngModel",t.toDate),e.xp6(10),e.Q6J("data",e.l5B(9,b,t.page,t.pageSize,t.collection,t.search)),e.xp6(23),e.Q6J("ngForOf",t.tableData)("ngForTrackBy",t.trackByFn))},dependencies:[u.sg,m.P,g.Fj,g.JJ,g.On,Z.w9,c.j],encapsulation:2}),s})();var y=l(56208);const C=[{path:"",component:D}];let L=(()=>{var r;class s{}return(r=s).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,d.Bz.forChild(C),y.m]}),s})()},13107:(T,p,l)=>{l.d(p,{t:()=>u});const u={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(T,p,l)=>{l.d(p,{J:()=>u});const u=({data:d,headers:c,widths:_,title:e})=>({tableData:{widths:_,headerRows:1,body:[c.map(m=>({text:m.header,style:"header"})),...d.map(m=>c.map(g=>({style:"subheader",text:m[g.key]})))]},title:e})}}]);