"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7418],{67418:(q,Z,c)=>{c.r(Z),c.d(Z,{DirectCostModule:()=>j});var f=c(96814),o=c(1076),b=c(43818),U=c(25116),y=c(61915),L=c(77609),t=c(65879),_=c(99328),T=c(99007),v=c(37285),N=c(88059),x=c(53421),m=c(83344),C=c(84231);function u(p,g){if(1&p){const l=t.EpF();t.TgZ(0,"a",37),t.NdJ("click",function(){t.CHM(l);const e=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openConfirmModal(null==e?null:e._id,null==e?null:e.SKUNo))}),t._UZ(1,"i",38),t._uU(2," Delete "),t.qZA()}}function n(p,g){if(1&p){const l=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",21,22)(5,"span",23),t._uU(6),t.qZA()(),t.TgZ(7,"td",21,24)(9,"span",23),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"SalesUOMUnitMaster"),t.qZA(),t.TgZ(14,"td",25)(15,"div",26)(16,"span",27),t._uU(17),t.ALo(18,"companyCurrency"),t._UZ(19,"div",28),t.qZA(),t.TgZ(20,"span",29),t._uU(21),t.ALo(22,"number"),t.qZA()()(),t.TgZ(23,"td",25)(24,"div",26)(25,"span",27),t._uU(26),t.ALo(27,"companyCurrency"),t._UZ(28,"div",28),t.qZA(),t.TgZ(29,"span",29),t._uU(30),t.ALo(31,"number"),t.qZA()()(),t.TgZ(32,"td",25)(33,"div",26)(34,"span",27),t._uU(35),t.ALo(36,"companyCurrency"),t._UZ(37,"div",28),t.qZA(),t.TgZ(38,"span",29),t._uU(39),t.ALo(40,"number"),t.qZA()()(),t.TgZ(41,"td",25)(42,"div",26)(43,"span",27),t._uU(44),t.ALo(45,"companyCurrency"),t._UZ(46,"div",28),t.qZA(),t.TgZ(47,"span",29),t._uU(48),t.ALo(49,"number"),t.qZA()()(),t.TgZ(50,"td")(51,"div",30),t._UZ(52,"button",31),t.TgZ(53,"div",32)(54,"a",33),t.NdJ("click",function(){const s=t.CHM(l).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",s,"view"))}),t._UZ(55,"i",34),t._uU(56," View "),t.qZA(),t.TgZ(57,"a",33),t.NdJ("click",function(){const s=t.CHM(l).$implicit,a=t.oxw();return t.KtG(a.navigateTo("../form",s,"edit"))}),t._UZ(58,"i",35),t._uU(59," Edit "),t.qZA(),t.YNc(60,u,3,0,"a",36),t.qZA()()()()}if(2&p){const l=g.$implicit,i=t.MAs(4),e=t.MAs(8),s=t.oxw();t.xp6(2),t.Oqu(l.SKUNo),t.xp6(1),t.Udp("width",i.clientWidth),t.xp6(2),t.Q6J("positionTarget",i)("ngbTooltip",l.SKUName),t.xp6(1),t.hij(" ",l.SKUName?l.SKUName:null," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("positionTarget",e)("ngbTooltip",l.SKUDescription),t.xp6(1),t.hij(" ",l.SKUDescription?l.SKUDescription:null," "),t.xp6(2),t.Oqu(t.lcZ(13,23,l.UOM)),t.xp6(5),t.hij(" ",t.lcZ(18,25,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(22,27,null==l?null:l.totalLabourCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(27,30,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(31,32,null==l?null:l.totalAssetCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(36,35,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(40,37,null==l?null:l.totalToolingCostPerUnit,"1.2-2")," "),t.xp6(5),t.hij(" ",t.lcZ(45,40,"INR")," "),t.xp6(4),t.hij(" ",t.xi3(49,42,null==l?null:l.totalCostPerUnit,"1.2-2")," "),t.xp6(6),t.Q6J("accessType",s.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",s.rolePermissionActions.editAction),t.xp6(3),t.Q6J("ngIf",s.user==s.superAdminId)}}const d=function(p,g,l,i){return{page:p,pageSize:g,collection:l,search:i,type:"list"}};let h=(()=>{var p;class g{constructor(i,e,s,a,A,K,I,J,Y){this.exportExcelService=i,this.router=e,this.spinner=s,this.activatedRoute=a,this.directCostService=A,this.exportToPDFService=K,this.storageService=I,this.toastService=J,this.modalService=Y,this.page=1,this.pageSize=8,this.collection=0,this.column="processId",this.direction=-1,this.search="",this.tableData=[],this.superAdminId=U.dA,this.user="",this.rolePermissionActions=U.a1}ngOnInit(){this.user=this.storageService.get("IDMSAUser")?.roles?.find(i=>i==this.superAdminId),this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(i=!1,e=""){this.spinner.show();let s={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:i};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.directCostService.getAll(s).subscribe(a=>{"EXCEL"==e?this.excelDownload(a.rows):"PDF"==e?this.pdfDownload(a.rows):(this.tableData=a.rows,this.collection=a.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(i,e,s){this.router.navigate([i],{relativeTo:this.activatedRoute,queryParams:{id:e?._id,action:s}})}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=i.value,this.getAll()}}trackByFn(i,e){return e?._id}pdfDownload(i){let e=(0,y.sm)(i);this.exportToPDFService.generatePdf(e.tableData,e.title)}excelDownload(i){this.exportExcelService.exportExcel((0,y.t8)(i))}onSort({column:i,direction:e}){this.headers.forEach(s=>{s.sortable!==i&&(s.direction="")}),this.column=i,this.direction="asc"==e?1:-1,this.getAll()}delete(i){this.spinner.show(),this.directCostService.delete(i).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.getAll()})}openConfirmModal(i,e){const s=this.modalService.open(L.hn,{centered:!0,size:"md",backdrop:"static",keyboard:!1});s.componentInstance.heading="Confirm Deletion",s.componentInstance.confirmText=`Confirm Deletion of SKU No. ${e} ?`,s.result.then(a=>{"Yes"==a.title&&this.delete(i)},a=>{})}}return(p=g).\u0275fac=function(i){return new(i||p)(t.Y36(_.Ol),t.Y36(o.F0),t.Y36(_.V),t.Y36(o.gz),t.Y36(T.m$),t.Y36(_.$L),t.Y36(_.V1),t.Y36(_.kl),t.Y36(v.FF))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-list"]],viewQuery:function(i,e){if(1&i&&t.Gf(b.j,5),2&i){let s;t.iGM(s=t.CRH())&&(e.headers=s)}},decls:34,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-3",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","totalLabourCostPerUnit",3,"sort"],["sortable","totalAssetCostPerUnit",3,"sort"],["sortable","totalToolingCostPerUnit",3,"sort"],["sortable","totalCostPerUnit",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["SKUDescription",""],[1,"py-0","text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"input-group-text","text-secondary","combine-INR","border","border-0"],[1,"vr","ms-3"],[1,"total-cost-color"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-primary"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Direct Cost Summary (by SKU)"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return e.navigateTo("../form",{},"create")}),t._uU(7," Direct Cost "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(a){return e.eventHeader(a)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(17,"SKU Name"),t.qZA(),t.TgZ(18,"th",14),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(19,"SKU Description"),t.qZA(),t.TgZ(20,"th",15),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(21,"UoM"),t.qZA(),t.TgZ(22,"th",16),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(23,"Labour Cost/Unit"),t.qZA(),t.TgZ(24,"th",17),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(25,"Asset Cost/Unit"),t.qZA(),t.TgZ(26,"th",18),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(27,"Tooling Cost/Unit"),t.qZA(),t.TgZ(28,"th",19),t.NdJ("sort",function(a){return e.onSort(a)}),t._uU(29,"Total Direct Process Cost/Unit"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,n,61,45,"tr",20),t.qZA()()()()),2&i&&(t.xp6(4),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(4,d,e.page,e.pageSize,e.collection,e.search)),t.xp6(23),t.Q6J("ngForOf",e.tableData)("ngForTrackBy",e.trackByFn))},dependencies:[f.sg,f.O5,N.P,v._L,b.j,x.J,f.JJ,m.f,C.Q],encapsulation:2}),g})();var r=c(60095),D=c(21631),S=c(22096),P=c(35469),M=c(9013),O=c(6244),w=c(16897),E=c(50363);function k(p,g){if(1&p){const l=t.EpF();t.TgZ(0,"div",35)(1,"button",36),t.NdJ("click",function(){t.CHM(l);const e=t.oxw();return t.KtG(e.reset())}),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(){t.CHM(l);const e=t.oxw();return t.KtG(e.submit())}),t._uU(4,"Save"),t.qZA()()}}let F=(()=>{var p;class g{get f(){return this.form.controls}constructor(i,e,s,a,A,K,I,J){this.activatedRoute=i,this.spinner=e,this.toastService=s,this.directCostService=a,this.validationService=A,this.modalService=K,this.location=I,this.utilityService=J,this.oldAssetAllocationData=[],this.labourOldAllocationData=[],this.SKUList=[],this.ESCPreviewArr=[],this.toolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.oldToolingCostDetails=[{toolingDescription:"",toolingCost:0,CAUnits:0,toolingCostPerUnit:0}],this.submitted=!1,this.action="create",this.toolingCAQty=0,this.masterData={autoIncrementNo:"",productCategories:[],processList:[]},this.form=new r.nJ({_id:new r.p4(null),directCostNo:new r.p4(null),productCategory:new r.p4(null,[r.kI.required]),SKU:new r.p4(null),SKUNo:new r.p4(null,[r.kI.required]),SKUName:new r.p4(null,[r.kI.required]),SKUDescription:new r.p4(null),UOM:new r.p4(null),totalLabourCostPerUnit:new r.p4(null,[r.kI.required]),totalAssetCostPerUnit:new r.p4(null,[r.kI.required]),totalToolingCostPerUnit:new r.p4(null,[r.kI.required]),totalCostPerUnit:new r.p4(null),directCostDetails:new r.p4([]),toolingCostDetails:new r.p4([])})}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.getInitialData()}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,P._r))return;this.form.enable();let i=this.form.value;i.directCostDetails=this.masterData?.processList,i.toolingCostDetails=this.toolingCostDetails,i._id?this.update(i):(delete i._id,this.create(i))}create(i){this.spinner.show(),this.directCostService.create(i).subscribe(e=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(e.message),this.location.back()})}update(i){this.spinner.show(),this.directCostService.update(i._id,i).subscribe(e=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(e.message),this.location.back()})}getInitialData(){this.spinner.show(),this.directCostService.getAllMasterData({}).subscribe(i=>{this.masterData=i,this.form.controls.directCostNo.setValue(this.masterData.autoIncrementNo),this.masterData.processList&&(this.labourOldAllocationData=JSON.parse(JSON.stringify(this.masterData.processList)),this.oldAssetAllocationData=JSON.parse(JSON.stringify(this.masterData.processList))),this.activatedRoute.queryParams.pipe((0,D.z)(e=>(this.action=e.action,this.utilityService.accessDenied(this.action),e.id?this.directCostService.getById(e.id):(0,S.of)({})))).subscribe(e=>{if(this.spinner.hide(),0==Object.keys(e).length)return;e.directCostDetails=e.directCostDetails;let s=this.masterData?.processList;this.masterData.processList=e.directCostDetails;for(const a of e.directCostDetails)s=s.filter(A=>A.processId!=a.processId),this.ESCPreviewArr=[...e.directCostDetails,...s],this.oldAssetAllocationData=[...e.directCostDetails,...s];this.toolingCostDetails=e.toolingCostDetails,this.form.patchValue(e),this.form.controls.productCategory.disable(),this.form.controls.SKUNo.disable(),this.form.controls.SKUName.disable(),"view"==this.action&&this.form.disable()})})}getSKUData(){this.SKUList=[],this.toolingCostDetails=JSON.parse(JSON.stringify(this.oldToolingCostDetails)),this.toolingCAQty=0,this.form.controls.SKU.setValue(null),this.form.controls.SKUNo.setValue(null),this.form.controls.SKUName.setValue(null),this.form.controls.SKUDescription.setValue(null),this.form.controls.UOM.setValue(null),this.form.controls.totalLabourCostPerUnit.setValue(null),this.form.controls.totalAssetCostPerUnit.setValue(null),this.form.controls.totalToolingCostPerUnit.setValue(null),this.form.controls.totalCostPerUnit.setValue(null);let i=this.form.controls.productCategory.value;this.spinner.show(),this.directCostService.getSKUData({category:i}).subscribe(e=>{e&&(this.SKUList=e?.SKUObj),this.masterData.processList=e.processList.length>0?JSON.parse(JSON.stringify(e?.processList)):JSON.parse(JSON.stringify(this.oldAssetAllocationData)),this.spinner.hide()})}setSKUDetails(i){this.form.controls.SKU.setValue(i?._id),this.directCostService.checkSKUExistsBySKUId(i?._id).subscribe(),this.form.controls.SKUNo.setValue(i?.SKUNo),this.form.controls.SKUName.setValue(i?.SKUName),this.form.controls.SKUDescription.setValue(i?.SKUDescription),this.form.controls.UOM.setValue(i?.primaryUnit),this.toolingCAQty=i?.toolingCAQty||0,this.masterData.processList=this.masterData?.processList.map(e=>(e.CAUnits=i?.processCAQty||0,e)),this.toolingCostDetails=this.toolingCostDetails.map(e=>(e.CAUnits=i?.toolingCAQty||0,e))}calTotalCostPerUnit(){this.form.controls.totalCostPerUnit.setValue(+((+this.form.controls.totalLabourCostPerUnit.value||0)+(+this.form.controls.totalAssetCostPerUnit.value||0)+(+this.form.controls.totalToolingCostPerUnit.value||0)).toFixed(2))}openLabourCostModal(){const i=this.modalService.open(M.Fm,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});i.componentInstance.action=this.action,i.componentInstance.processList=this.masterData?.processList,i.componentInstance.ESCPreviewArr=this.ESCPreviewArr,i.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,i.componentInstance.labourOldAllocationData=this.labourOldAllocationData,i.componentInstance.totalLabourCostPerUnit=this.form.controls.totalLabourCostPerUnit.value,i.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,i.result.then(e=>{e&&(this.masterData.processList=e?.processList,this.oldAssetAllocationData=e?.oldAssetAllocationData,this.form.controls.totalLabourCostPerUnit.setValue(e?.totalLabourCostPerUnit),this.form.controls.totalAssetCostPerUnit.setValue(e?.totalAssetCostPerUnit),this.calTotalCostPerUnit())},e=>{})}openAssetCostModal(){const i=this.modalService.open(M.Wo,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});i.componentInstance.action=this.action,i.componentInstance.processList=this.masterData?.processList,i.componentInstance.ESCPreviewArr=this.ESCPreviewArr,i.componentInstance.oldAssetAllocationData=this.oldAssetAllocationData,i.componentInstance.totalAssetCostPerUnit=this.form.controls.totalAssetCostPerUnit.value,i.result.then(e=>{e&&(this.masterData.processList=e?.processList,this.oldAssetAllocationData=e?.oldAssetAllocationData,this.form.controls.totalAssetCostPerUnit.setValue(e?.totalAssetCostPerUnit),this.form.controls.totalLabourCostPerUnit.setValue(e?.totalLabourCostPerUnit),this.calTotalCostPerUnit())},e=>{})}openToolingCostModal(){const i=this.modalService.open(M.$6,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});i.componentInstance.action=this.action,i.componentInstance.toolingCostDetails=this.toolingCostDetails,i.componentInstance.ESCPreviewArr=this.ESCPreviewArr,i.componentInstance.toolingCAQty=this.toolingCAQty,i.componentInstance.totalToolingCostPerUnit=this.form.controls.totalToolingCostPerUnit.value,i.result.then(e=>{e&&(this.toolingCostDetails=e?.toolingCostDetails,this.form.controls.totalToolingCostPerUnit.setValue(e?.totalToolingCostPerUnit),this.calTotalCostPerUnit())},e=>{})}openProductCategoryModal(){const i=this.modalService.open(O.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});i.componentInstance.action=this.action,i.componentInstance.productCategoryList=this.masterData?.productCategories,i.componentInstance.productCategory=this.form.controls.productCategory.value,i.result.then(e=>{e&&(this.form.controls.productCategory.setValue(e?.selectedProductCategory),this.getSKUData())},e=>{})}}return(p=g).\u0275fac=function(i){return new(i||p)(t.Y36(o.gz),t.Y36(_.V),t.Y36(_.kl),t.Y36(T.m$),t.Y36(w.RJ),t.Y36(v.FF),t.Y36(f.Ye),t.Y36(_.tI))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-direct-cost-form"]],decls:97,vars:23,consts:[[1,"formCard","card",3,"formGroup"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-5"],[1,"col-8","pe-5"],[1,"form-label"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","fs-4","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-4","ps-0"],["bindLabel","SKUNo","bindValue","SKUNo","formControlName","SKUNo",3,"items","clearable","change"],[1,"col-7","ps-0"],[1,"col-5","pe-1"],["bindLabel","SKUName","bindValue","SKUName","formControlName","SKUName",3,"items","clearable","change"],[1,"col-5","ps-4"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control"],[1,"col-2","ps-0"],["type","text","readonly","",1,"form-control",3,"value"],[1,"row","line-border"],[1,"row","mb-4","justify-content-center"],[1,"col-3"],[1,"input-group-text","text-secondary","combine-INR"],[1,"vr","ms-3"],["type","number","formControlName","totalLabourCostPerUnit","readonly","",1,"form-control","border-start-0"],[1,"plusIconSvg","btn","btn-primary","ms-1",2,"padding","1.4rem 1.4rem 1.4rem 1.4rem",3,"click"],["type","number","formControlName","totalAssetCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalToolingCostPerUnit","readonly","",1,"form-control","border-start-0"],["type","number","formControlName","totalCostPerUnit","readonly","",1,"form-control","border-start-0"],["class","col-12 text-center",4,"ngIf"],[1,"col-12","text-center"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Direct Cost (Labour, Asset & Tooling)"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",5)(10,"div",7)(11,"label",8),t._uU(12,"Product Category "),t.TgZ(13,"span",9),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11)(17,"ng-select",12),t.NdJ("change",function(){return e.getSKUData()}),t.qZA()(),t.TgZ(18,"div",13),t.NdJ("click",function(){return e.openProductCategoryModal()}),t._UZ(19,"i",14),t.qZA()()(),t.TgZ(20,"div",15)(21,"label",8),t._uU(22,"SKU No. "),t.TgZ(23,"span",9),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"ng-select",16),t.NdJ("change",function(a){return e.setSKUDetails(a)}),t.qZA()()()(),t.TgZ(26,"div",17)(27,"div",5)(28,"div",18)(29,"label",8),t._uU(30,"SKU Name "),t.TgZ(31,"span",9),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"ng-select",19),t.NdJ("change",function(a){return e.setSKUDetails(a)}),t.qZA()(),t.TgZ(34,"div",20)(35,"label",8),t._uU(36," SKU Description "),t._UZ(37,"span",9),t.qZA(),t._UZ(38,"input",21),t.qZA(),t.TgZ(39,"div",22)(40,"label",8),t._uU(41," UoM "),t._UZ(42,"span",9),t.qZA(),t._UZ(43,"input",23),t.ALo(44,"SalesUOMUnitMaster"),t.qZA()()()()(),t._UZ(45,"hr",24),t.TgZ(46,"div",25)(47,"div",26)(48,"label",8),t._uU(49,"Total Labour Cost/Unit "),t.TgZ(50,"span",9),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"div",10)(53,"span",27),t._uU(54),t.ALo(55,"companyCurrency"),t._UZ(56,"div",28),t.qZA(),t._UZ(57,"input",29),t.TgZ(58,"button",30),t.NdJ("click",function(){return e.openLabourCostModal()}),t.qZA()()(),t.TgZ(59,"div",26)(60,"label",8),t._uU(61,"Total Asset Cost/Unit "),t.TgZ(62,"span",9),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"div",10)(65,"span",27),t._uU(66),t.ALo(67,"companyCurrency"),t._UZ(68,"div",28),t.qZA(),t._UZ(69,"input",31),t.TgZ(70,"button",30),t.NdJ("click",function(){return e.openAssetCostModal()}),t.qZA()()(),t.TgZ(71,"div",26)(72,"label",8),t._uU(73,"Total Tooling Cost/Unit "),t.TgZ(74,"span",9),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",10)(77,"span",27),t._uU(78),t.ALo(79,"companyCurrency"),t._UZ(80,"div",28),t.qZA(),t._UZ(81,"input",32),t.TgZ(82,"button",30),t.NdJ("click",function(){return e.openToolingCostModal()}),t.qZA()()(),t.TgZ(83,"div",26)(84,"label",8),t._uU(85,"Total Direct Process Cost/Unit "),t.TgZ(86,"span",9),t._uU(87,"*"),t.qZA()(),t.TgZ(88,"div",10)(89,"span",27),t._uU(90),t.ALo(91,"companyCurrency"),t._UZ(92,"div",28),t.qZA(),t._UZ(93,"input",33),t.qZA()()(),t._UZ(94,"hr",24),t.TgZ(95,"div",5),t.YNc(96,k,5,0,"div",34),t.qZA()()()),2&i&&(t.Q6J("formGroup",e.form),t.xp6(17),t.Q6J("items",e.masterData.productCategories)("clearable",!1),t.xp6(8),t.Q6J("items",e.SKUList)("clearable",!1),t.xp6(8),t.Q6J("items",e.SKUList)("clearable",!1),t.xp6(10),t.s9C("value",t.lcZ(44,13,e.form.controls.UOM.value)),t.xp6(11),t.hij(" ",t.lcZ(55,15,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(67,17,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(79,19,"INR")," "),t.xp6(12),t.hij(" ",t.lcZ(91,21,"INR")," "),t.xp6(6),t.Q6J("ngIf","view"!==e.action))},dependencies:[f.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,E.w9,m.f,C.Q],encapsulation:2}),g})();var Q=c(19964),R=c(56208);const V=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:h},{path:"form",component:F,resolve:{accessScreen:Q.xr}}];let j=(()=>{var p;class g{}return(p=g).\u0275fac=function(i){return new(i||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[f.ez,o.Bz.forChild(V),R.m]}),g})()},6244:(q,Z,c)=>{c.d(Z,{Z:()=>x});var f=c(43818),o=c(65879),b=c(37285),U=c(96814),y=c(88059),L=c(95346);const t=function(){return["view","edit"]};function _(m,C){if(1&m){const u=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",24)(8,"span",25),o._uU(9),o.qZA()(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td")(13,"input",26),o.NdJ("change",function(){const h=o.CHM(u).$implicit,r=o.oxw();return o.KtG(r.setSelectData(h))}),o.qZA()()()}if(2&m){const u=C.$implicit,n=C.index,d=o.oxw();o.xp6(2),o.Oqu(1+n+(d.page-1)*d.pageSize),o.xp6(2),o.Oqu(null==u?null:u.productNumber),o.xp6(2),o.Oqu(null==u?null:u.productCode),o.xp6(2),o.Q6J("ngbTooltip",null==u?null:u.label),o.xp6(1),o.hij(" ",null!=u&&u.label?null==u?null:u.label:null," "),o.xp6(2),o.Oqu(null==u?null:u.application),o.xp6(2),o.MGl("name","formValue",d.productCategoryList[n],""),o.Q6J("disabled",o.DdM(9,t).includes(d.action))("checked",u.select)}}function T(m,C){1&m&&o._UZ(0,"hr",27)}function v(m,C){if(1&m){const u=o.EpF();o.TgZ(0,"div",28)(1,"button",29),o.NdJ("click",function(){o.CHM(u);const d=o.oxw();return o.KtG(d.dismissModel())}),o._uU(2,"Save & Close"),o.qZA()()}}const N=function(m,C,u,n){return{page:m,pageSize:C,collection:u,search:n,excelDisplay:"none"}};let x=(()=>{var m;class C{constructor(n){this.activeModal=n,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(n=>(n.select=!1,n.value==this.productCategory&&(n.select=!0),n))),this.collection=this.productCategoryList.length}setSelectData(n){this.selectedProductCategory=n?.value}dismissModel(){let n={};n.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(n)}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}onSort({column:n,direction:d}){this.headers.forEach(h=>{h.sortable!==n&&(h.direction="")}),this.productCategoryList=""===d||""===n?this.productCategoryList:[...this.productCategoryList].sort((h,r)=>{let D="string"==typeof h[n]?h[n].toLowerCase():h[n],S="string"==typeof r[n]?r[n].toLowerCase():r[n];const P=D<S?-1:D>S?1:0;return"asc"===d?P:-P})}}return(m=C).\u0275fac=function(n){return new(n||m)(o.Y36(b.Kz))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-product-category-modal"]],viewQuery:function(n,d){if(1&n&&o.Gf(f.j,5),2&n){let h;o.iGM(h=o.CRH())&&(d.headers=h)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(n,d){1&n&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Product Category"),o.qZA(),o.TgZ(4,"div")(5,"button",3),o.NdJ("click",function(){return d.activeModal.close()}),o._UZ(6,"i",4),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),o.NdJ("dataChange",function(r){return d.eventHeader(r)}),o.qZA()(),o.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),o._uU(18,"Sr. No."),o.qZA(),o.TgZ(19,"th",15),o.NdJ("sort",function(r){return d.onSort(r)}),o._uU(20,"Product No."),o.qZA(),o.TgZ(21,"th",16),o.NdJ("sort",function(r){return d.onSort(r)}),o._uU(22,"Product Code"),o.qZA(),o.TgZ(23,"th",17),o.NdJ("sort",function(r){return d.onSort(r)}),o._uU(24," Display Name "),o.qZA(),o.TgZ(25,"th",18),o.NdJ("sort",function(r){return d.onSort(r)}),o._uU(26,"Application"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Select"),o.qZA()()(),o.TgZ(29,"tbody"),o.YNc(30,_,14,10,"tr",19),o.ALo(31,"slice"),o.ALo(32,"searchFi1ter"),o.qZA()()()()(),o.TgZ(33,"div",20)(34,"div",21),o.YNc(35,T,1,0,"hr",22),o.qZA()(),o.YNc(36,v,3,0,"div",23),o.qZA()()()),2&n&&(o.xp6(12),o.Q6J("data",o.l5B(11,N,d.page,d.pageSize,d.collection,d.search)),o.xp6(18),o.Q6J("ngForOf",o.Dn7(31,4,o.xi3(32,8,d.productCategoryList,d.search),(d.page-1)*d.pageSize,(d.page-1)*d.pageSize+d.pageSize)),o.xp6(5),o.Q6J("ngIf",!o.DdM(16,t).includes(d.action)),o.xp6(1),o.Q6J("ngIf",!o.DdM(17,t).includes(d.action)))},dependencies:[U.sg,U.O5,y.P,b._L,f.j,U.OU,L.G],encapsulation:2}),C})()}}]);