"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1844],{81844:(U,d,e)=>{e.r(d),e.d(d,{TransactionsModule:()=>x});var u=e(96814),l=e(1076),t=e(65879);let p=(()=>{var i;class a{constructor(){}ngOnInit(){}}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transactions"]],decls:2,vars:0,consts:[[1,"container","main-content-wrapper"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[l.lC],encapsulation:2}),a})();var s=e(60095),f=e(21631),g=e(22096),v=e(21821),I=e(25116),T=e(35747),c=e(98977),C=e(16897),Z=e(50363),y=e(53421);const b=[{path:"",component:p,children:[{path:"tax_invoice",component:(()=>{var i;class a{get f(){return this.form.controls}constructor(n,o,m,h,N,A,S,D){this.router=n,this.salesInvoiceService=o,this.activatedRoute=m,this.spinner=h,this.toastService=N,this.validationService=A,this.storageService=S,this.utilityService=D,this.action="create",this.customerName="",this.shipmentIdArr=[],this.autoIncrementValues={},this.shipmentNameOptions=[],this.submitted=!1,this.rolePermissionActions=I.a1,this.form=new s.nJ({salesInvoiceNumber:new s.p4(null),salesInvoiceDate:new s.p4(this.utilityService.getTodayDate("YYYY-MM-DD")),shipmentPlanningId:new s.p4("",[s.kI.required]),customer:new s.p4(null)})}ngOnInit(){this.getInitialData()}navigateTo(){this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,v.l)||window.open(`${window.location.origin}/#/print/preview_tax_invoice?data=${JSON.stringify(this.form.value)}`,"_blank")}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,v.l))return;this.form.enable();let n=this.form.value;n._id?this.update(n):(delete n._id,this.create(n))}create(n){this.spinner.show(),this.salesInvoiceService.create(n).subscribe(o=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(o.message),this.form.reset(),this.getInitialData(),this.storageService.set("tab","REPORT"),window.open(`${window.location.origin}/#/default/sales/reports/sales_register_wo_tax`,"_blank")})}update(n){this.spinner.show(),this.salesInvoiceService.updateDirectTaxInvoice(n._id,n).subscribe(o=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(o.message),this.form.reset(),this.getInitialData(),window.open(`${window.location.origin}/#/default/sales/reports/sales_register_wo_tax`,"_blank")})}getInitialData(){this.spinner.show(),this.salesInvoiceService.getAllMasterData({}).subscribe(n=>{this.autoIncrementValues=n?.autoIncrementedValues,this.shipmentIdArr=n.shipmentList,this.activatedRoute.queryParams.pipe((0,f.z)(o=>(this.action=o.action,o.id?this.salesInvoiceService.getById(o.id):(0,g.of)({})))).subscribe(o=>{this.spinner.hide(),0!=Object.keys(o).length&&(this.form.patchValue(o),("edit"==this.action||"view"==this.action||"rejection"==this.action||"approval"==this.action)&&(this.form.disable(),this.form.controls.remarks.enable()))})})}setShipmentName(n){n.billFromLocation&&this.form.controls.salesInvoiceNumber.setValue(this.autoIncrementValues[n.billFromLocation]),this.shipmentNameOptions=[{customerName:n?.customer?.customerName,_id:n?.customer?._id}],this.f.customer.patchValue(n?.customer?._id),this.f.customer.disable()}}return(i=a).\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(T.GC),t.Y36(l.gz),t.Y36(c.V),t.Y36(c.kl),t.Y36(C.RJ),t.Y36(c.V1),t.Y36(c.tI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tax-invoice"]],decls:35,vars:6,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading","ms-2"],[1,"form-body"],[1,"row"],[1,"col-3"],[1,"form-label"],[1,"text-danger"],["bindLabel","DRNId.DRNNumber","bindValue","_id","formControlName","shipmentPlanningId",3,"items","clearable","change"],["type","text","readonly","","formControlName","salesInvoiceNumber",1,"form-control"],["type","date","formControlName","salesInvoiceDate","readonly","",1,"form-control"],["bindLabel","customerName","bindValue","_id","formControlName","customer",3,"items","clearable"],[1,"row","line-border","my-4"],[1,"row","justify-content-center","mb-4"],["appAccessControl","",1,"col-6","d-flex","justify-content-center",3,"accessType"],["type","button",1,"btn","btn-primary","text-white","mx-4","px-3",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5," Generate Tax Invoice"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),t._uU(10," DRN No. "),t._UZ(11,"span",8),t.qZA(),t.TgZ(12,"ng-select",9),t.NdJ("change",function(h){return o.setShipmentName(h)}),t.qZA()(),t.TgZ(13,"div",6)(14,"label",7),t._uU(15," Tax Invoice No. "),t._UZ(16,"span",8),t.qZA(),t._UZ(17,"input",10),t.qZA(),t.TgZ(18,"div",6)(19,"label",7),t._uU(20," Tax Invoice Date"),t._UZ(21,"span",8),t.qZA(),t._UZ(22,"input",11),t.qZA(),t.TgZ(23,"div",6)(24,"label",7),t._uU(25," Customer Name "),t._UZ(26,"span",8),t.qZA(),t._UZ(27,"ng-select",12),t.qZA()(),t._UZ(28,"hr",13),t.TgZ(29,"div",14)(30,"div",15)(31,"button",16),t.NdJ("click",function(){return o.navigateTo()}),t._uU(32," Preview Tax Invoice "),t.qZA(),t.TgZ(33,"button",16),t.NdJ("click",function(){return o.submit()}),t._uU(34," Generate Tax Invoice "),t.qZA()()()()()()),2&n&&(t.Q6J("formGroup",o.form),t.xp6(12),t.Q6J("items",o.shipmentIdArr)("clearable",!1),t.xp6(15),t.Q6J("items",o.shipmentNameOptions)("clearable",!1),t.xp6(3),t.Q6J("accessType",o.rolePermissionActions.createAction))},dependencies:[s.Fj,s.JJ,s.JL,s.sg,s.u,Z.w9,y.J],encapsulation:2}),a})()},{path:"shipment_creation",loadChildren:()=>e.e(8862).then(e.bind(e,28862)).then(i=>i.ShipmentCreationModule)},{path:"asn",loadChildren:()=>e.e(1580).then(e.bind(e,61580)).then(i=>i.AsnModule)},{path:"grl",loadChildren:()=>Promise.all([e.e(4935),e.e(3270)]).then(e.bind(e,73270)).then(i=>i.GRLModule)},{path:"generate-e-invoice",loadChildren:()=>Promise.all([e.e(5692),e.e(3448)]).then(e.bind(e,63448)).then(i=>i.GenerateEInvoiceModule)},{path:"generate_e_way_bills",loadChildren:()=>Promise.all([e.e(7539),e.e(970)]).then(e.bind(e,70970)).then(i=>i.GenerateEWayBillsModule)},{path:"generate_export_e_invoice",loadChildren:()=>Promise.all([e.e(5692),e.e(7636)]).then(e.bind(e,17636)).then(i=>i.GenerateExportEInvoiceModule)},{path:"generate_export_e_way_bills",loadChildren:()=>Promise.all([e.e(7539),e.e(4243)]).then(e.bind(e,34243)).then(i=>i.GenerateExportEWayBillsModule)}]}];let x=(()=>{var i;class a{}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,l.Bz.forChild(b)]}),a})()}}]);