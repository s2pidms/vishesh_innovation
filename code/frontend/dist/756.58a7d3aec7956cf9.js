"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[756],{60756:(E,f,r)=>{r.r(f),r.d(f,{MaintenanceTechnicianModule:()=>I});var h=r(96814),p=r(1076),v=r(43818),_=r(25116),g=r(39462),e=r(65879),u=r(98977),T=r(10583),b=r(88059),A=r(37285),C=r(53421);function U(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",19,20)(5,"span",21),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"div",22),e._UZ(17,"button",23),e.TgZ(18,"div",24)(19,"a",25),e.NdJ("click",function(){const c=e.CHM(a).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",c,"view"))}),e._UZ(20,"i",26),e._uU(21," View "),e.qZA(),e.TgZ(22,"a",25),e.NdJ("click",function(){const c=e.CHM(a).$implicit,o=e.oxw();return e.KtG(o.navigateTo("../form",c,"edit"))}),e._UZ(23,"i",27),e._uU(24," Edit "),e.qZA()()()()()}if(2&i){const a=l.$implicit,n=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==a?null:a.technicianCode),e.xp6(1),e.Udp("width",n.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",a.technicianName)("positionTarget",n),e.xp6(1),e.hij(" ",a.technicianName," "),e.xp6(2),e.Oqu(null==a?null:a.technicianRole),e.xp6(2),e.Oqu(null==a?null:a.contactNumber),e.xp6(2),e.Oqu(null==a?null:a.email),e.xp6(2),e.Oqu(null==a?null:a.skills),e.xp6(5),e.Q6J("accessType",t.rolePermissionActions.viewAction),e.xp6(3),e.Q6J("accessType",t.rolePermissionActions.editAction)}}const x=function(i,l,a,n){return{page:i,pageSize:l,collection:a,search:n,type:"list"}};let y=(()=>{var i;class l{constructor(n,t,c,o,m,d,Q){this.exportExcelService=n,this.menuTitleService=t,this.router=c,this.spinner=o,this.activatedRoute=m,this.technicianService=d,this.exportToPDFService=Q,this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.rolePermissionActions=_.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}getAll(n=!1,t=""){this.spinner.show();let c={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:n};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.technicianService.getAll(c).subscribe(o=>{"EXCEL"==t?this.excelDownload(o.rows):"PDF"==t?this.pdfDownload(o.rows):(this.tableData=o.rows,this.collection=o.count),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}navigateTo(n,t,c){this.router.navigate([n],{relativeTo:this.activatedRoute,queryParams:{id:t?._id,action:c}})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=n.value,this.getAll()}}trackByFn(n,t){return t?._id}excelDownload(n){this.exportExcelService.exportExcel((0,g.Yw)(n))}pdfDownload(n){let t=(0,g.Jk)(n);this.exportToPDFService.generatePdf(t.tableData,t.title)}onSort({column:n,direction:t}){this.headers.forEach(c=>{c.sortable!==n&&(c.direction="")}),this.column=n,this.direction="asc"==t?1:-1,this.getAll()}}return(i=l).\u0275fac=function(n){return new(n||i)(e.Y36(u.Ol),e.Y36(u.Uh),e.Y36(p.F0),e.Y36(u.V),e.Y36(p.gz),e.Y36(T.qv),e.Y36(u.$L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-maintenance-technician-list"]],viewQuery:function(n,t){if(1&n&&e.Gf(v.j,5),2&n){let c;e.iGM(c=e.CRH())&&(t.headers=c)}},decls:30,vars:9,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],["type","button",1,"btn","btn-primary","btn-add",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square","fa-lg","me-2"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-secondary"],[1,"text-white"],["sortable","technicianCode",3,"sort"],["sortable","technicianName",1,"text-start",3,"sort"],["sortable","technicianRole",3,"sort"],["sortable","contactNumber",3,"sort"],["sortable","email",3,"sort"],["sortable","skills",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["technicianName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Technician Summary"),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return t.navigateTo("../form",{},"create")}),e._UZ(6,"i",5),e._uU(7," Technician "),e.qZA()(),e._UZ(8,"hr",6),e.TgZ(9,"div",7)(10,"app-setting-header",8),e.NdJ("dataChange",function(o){return t.eventHeader(o)}),e.qZA(),e.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(15,"Technician Code"),e.qZA(),e.TgZ(16,"th",13),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(17,"Technician Name"),e.qZA(),e.TgZ(18,"th",14),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(19,"Technician Role"),e.qZA(),e.TgZ(20,"th",15),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(21,"Contact Number"),e.qZA(),e.TgZ(22,"th",16),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(23,"Email"),e.qZA(),e.TgZ(24,"th",17),e.NdJ("sort",function(o){return t.onSort(o)}),e._uU(25,"Technician Skills"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Action"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,U,25,12,"tr",18),e.qZA()()()()),2&n&&(e.xp6(4),e.Q6J("accessType",t.rolePermissionActions.createAction),e.xp6(6),e.Q6J("data",e.l5B(4,x,t.page,t.pageSize,t.collection,t.search)),e.xp6(19),e.Q6J("ngForOf",t.tableData)("ngForTrackBy",t.trackByFn))},dependencies:[h.sg,b.P,A._L,v.j,C.J],encapsulation:2}),l})();var s=r(60095),S=r(21631),M=r(22096);function N(i,l){if(1&i&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&i){const a=l.$implicit;e.Q6J("value",a.parameterName),e.xp6(1),e.hij(" ",a.parameterLabel," ")}}function q(i,l){1&i&&e._UZ(0,"div",29)}function J(i,l){1&i&&e._UZ(0,"div",30)}function w(i,l){1&i&&e._UZ(0,"hr",31)}const Z=function(i){return{"d-none":i}};function F(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"button",34),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.reset())}),e._uU(3,"Reset"),e.qZA()(),e.TgZ(4,"div",35)(5,"button",34),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.submit())}),e._uU(6,"Save"),e.qZA()()()}if(2&i){const a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Z,"View"==a.action)),e.xp6(3),e.Q6J("ngClass",e.VKq(4,Z,"View"==a.action))}}let D=(()=>{var i;class l{constructor(n,t,c,o,m,d){this.activatedRoute=n,this.spinner=t,this.toastService=c,this.technicianService=o,this.utilityService=m,this.location=d,this.submitted=!1,this.action="create",this.masterData={autoIncrementNo:"",technicianRoleOptions:[]},this.form=new s.nJ({_id:new s.p4(null),technicianCode:new s.p4(null),technicianName:new s.p4(null),experience:new s.p4(null),technicianStatus:new s.p4("Active"),technicianRole:new s.p4(null),contactNumber:new s.p4(null),email:new s.p4(null),address:new s.p4(null),skills:new s.p4(null)})}get f(){return this.form.controls}ngOnInit(){this.getInitialData()}reset(){this.form.reset(),this.getInitialData()}submit(){this.submitted=!0,this.form.enable();let n=this.form.value;n._id?this.update(n):(delete n._id,this.create(n))}create(n){this.spinner.show(),this.technicianService.create(n).subscribe(t=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(t.message),this.location.back()})}update(n){this.spinner.show(),this.technicianService.update(n._id,n).subscribe(t=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(t.message),this.location.back()})}getInitialData(){this.spinner.show(),this.technicianService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.form.controls.technicianCode.patchValue(this.masterData?.autoIncrementNo),this.form.controls.technicianStatus.patchValue("Active"),this.activatedRoute.queryParams.pipe((0,S.z)(t=>(this.action=t.action,this.utilityService.accessDenied(this.action),t.id?this.technicianService.getById(t.id):(0,M.of)({})))).subscribe(t=>{this.spinner.hide(),0!=Object.keys(t).length&&(this.form.patchValue(t),"edit"!=this.action&&this.form.disable())})})}}return(i=l).\u0275fac=function(n){return new(n||i)(e.Y36(p.gz),e.Y36(u.V),e.Y36(u.kl),e.Y36(T.qv),e.Y36(u.tI),e.Y36(h.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-maintenance-technician-form"]],decls:72,vars:13,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-md-4"],[1,"form-label"],[1,"text-danger"],["type","text","readonly","","formControlName","technicianCode",1,"form-control"],["type","text","formControlName","technicianName",1,"form-control"],["formControlName","technicianRole",1,"form-select"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","contactNumber",1,"form-control"],["type","email","formControlName","email",1,"form-control"],["type","text","formControlName","address",1,"form-control"],[1,"row","justify-content-center"],["type","text","formControlName","skills",1,"form-control"],["type","number","formControlName","experience",1,"form-control"],[1,"d-flex","inputGroup","skuForm"],["formControlName","technicianStatus",1,"form-select","statusSelectBorder"],[3,"value"],[1,"input-group-text","bg-white"],[1,"col-md-auto","align-self-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],["class","row line-border",4,"ngIf"],["class","d-flex justify-content-center mb-3",4,"ngIf"],[1,"statusActive"],[1,"statusInActive"],[1,"row","line-border"],[1,"d-flex","justify-content-center","mb-3"],[1,"d-grid","col-md-1","me-5",3,"ngClass"],["type","button",1,"btn","btn-primary",3,"click"],[1,"d-grid","col-md-1",3,"ngClass"]],template:function(n,t){1&n&&(e.TgZ(0,"Form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11," Technician Code"),e._UZ(12,"span",8),e.qZA(),e._UZ(13,"input",9),e.qZA(),e.TgZ(14,"div",6)(15,"label",7),e._uU(16," Technician Name "),e._UZ(17,"span",8),e.qZA(),e._UZ(18,"input",10),e.qZA(),e.TgZ(19,"div",6)(20,"label",7),e._uU(21," Technician Role "),e._UZ(22,"span",8),e.qZA(),e.TgZ(23,"select",11)(24,"option",12),e._uU(25,"Select Technician Role"),e.qZA(),e.YNc(26,N,2,2,"option",13),e.qZA()()(),e.TgZ(27,"div",5)(28,"div",6)(29,"label",7),e._uU(30," Contact Number "),e._UZ(31,"span",8),e.qZA(),e._UZ(32,"input",14),e.qZA(),e.TgZ(33,"div",6)(34,"label",7),e._uU(35," Email "),e._UZ(36,"span",8),e.qZA(),e._UZ(37,"input",15),e.qZA(),e.TgZ(38,"div",6)(39,"label",7),e._uU(40," Address "),e._UZ(41,"span",8),e.qZA(),e._UZ(42,"input",16),e.qZA()(),e.TgZ(43,"div",17)(44,"div",6)(45,"label",7),e._uU(46," Skills "),e._UZ(47,"span",8),e.qZA(),e._UZ(48,"input",18),e.qZA(),e.TgZ(49,"div",6)(50,"label",7),e._uU(51," Experience (Years) "),e._UZ(52,"span",8),e.qZA(),e._UZ(53,"input",19),e.qZA(),e.TgZ(54,"div",6)(55,"label",7),e._uU(56," Status "),e._UZ(57,"span",8),e.qZA(),e.TgZ(58,"div",20)(59,"select",21)(60,"option",12),e._uU(61,"Select Status"),e.qZA(),e.TgZ(62,"option",22),e._uU(63,"Active"),e.qZA(),e.TgZ(64,"option",22),e._uU(65,"Inactive"),e.qZA()(),e.TgZ(66,"div",23)(67,"div",24),e.YNc(68,q,1,0,"div",25),e.YNc(69,J,1,0,"div",26),e.qZA()()()()()(),e.YNc(70,w,1,0,"hr",27),e.YNc(71,F,7,6,"div",28),e.qZA()()),2&n&&(e.Q6J("formGroup",t.form),e.xp6(5),e.hij("",e.lcZ(6,11,t.action)," Technician Master"),e.xp6(19),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",null==t.masterData?null:t.masterData.technicianRoleOptions),e.xp6(34),e.Q6J("value",null),e.xp6(2),e.Q6J("value","Active"),e.xp6(2),e.Q6J("value","Inactive"),e.xp6(4),e.Q6J("ngIf","Active"==t.form.value.technicianStatus),e.xp6(1),e.Q6J("ngIf","Inactive"==t.form.value.technicianStatus),e.xp6(1),e.Q6J("ngIf","view"!==t.action),e.xp6(1),e.Q6J("ngIf","view"!==t.action))},dependencies:[h.mk,h.sg,h.O5,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,h.rS],encapsulation:2}),l})();var L=r(56208);const Y=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:y},{path:"form",component:D,resolve:{accessScreen:r(65876).x}}];let I=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,p.Bz.forChild(Y),L.m]}),l})()}}]);