"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4537],{61441:(Q,v,p)=>{p.d(v,{Q:()=>Z});var u=p(43818),a=p(65879),c=p(37285),A=p(96814),x=p(88059),I=p(95346);const D=function(){return["view","edit","rejection","reject","approval","approve","cancel"]};function w(b,U){if(1&b){const C=a.EpF();a.TgZ(0,"tr")(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td",26,27)(7,"span",28),a._uU(8),a.qZA()(),a.TgZ(9,"td",26,29)(11,"span",28),a._uU(12),a.qZA()(),a.TgZ(13,"td"),a._uU(14),a.qZA(),a.TgZ(15,"td"),a._uU(16),a.qZA(),a.TgZ(17,"td")(18,"input",30),a.NdJ("change",function(){const h=a.CHM(C).$implicit,f=a.oxw();return a.KtG(f.setSelectData(h))}),a.qZA()()()}if(2&b){const C=U.$implicit,g=U.index,_=a.MAs(6),h=a.MAs(10),f=a.oxw();a.xp6(2),a.Oqu(null==C?null:C.jobCardNo),a.xp6(2),a.Oqu(null==C?null:C.SKUNo),a.xp6(1),a.Udp("width",_.clientWidth),a.xp6(2),a.Q6J("ngbTooltip",C.SKUName)("positionTarget",_),a.xp6(1),a.hij(" ",C.SKUName," "),a.xp6(1),a.Udp("width",h.clientWidth),a.xp6(2),a.Q6J("ngbTooltip",C.SKUDescription)("positionTarget",h),a.xp6(1),a.hij(" ",C.SKUDescription," "),a.xp6(2),a.Oqu(null==C?null:C.UOM),a.xp6(2),a.Oqu(null==C?null:C.batchQty),a.xp6(2),a.MGl("name","formValue",f.JCOptions[g],""),a.Q6J("disabled",a.DdM(17,D).includes(f.action))("checked",C.select)}}function T(b,U){1&b&&a._UZ(0,"hr",31)}function t(b,U){if(1&b){const C=a.EpF();a.TgZ(0,"div",32)(1,"button",33),a.NdJ("click",function(){a.CHM(C);const _=a.oxw();return a.KtG(_.dismissModel())}),a._uU(2,"Save & Close"),a.qZA()()}}const m=function(b,U,C,g){return{page:b,pageSize:U,collection:C,search:g,excelDisplay:"none"}};let Z=(()=>{var b;class U{constructor(g){this.activeModal=g,this.action="edit",this.jobCard="",this.JCOptions=[],this.selectedJobCardDetails={},this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="jobCardNo",this.direction=-1}ngOnInit(){this.jobCard&&(this.selectedJobCardDetails._id=this.jobCard,this.JCOptions=this.JCOptions?.map(g=>(g.select=!1,g._id==this.jobCard&&(g.select=!0),g))),this.collection=this.JCOptions?.length}setSelectData(g){this.selectedJobCardDetails=g}dismissModel(){let g={};g.selectedJobCardDetails=this.selectedJobCardDetails,this.activeModal.close(g)}eventHeader(g){switch(g.key){case"SEARCH":this.search=g.value;break;case"EXCEL":default:break;case"PAGE":this.page=g.value}}onSort({column:g,direction:_}){this.headers.forEach(h=>{h.sortable!==g&&(h.direction="")}),this.JCOptions=""===_||""===g?this.JCOptions:[...this.JCOptions].sort((h,f)=>{let P="string"==typeof h[g]?h[g].toLowerCase():h[g],N="string"==typeof f[g]?f[g].toLowerCase():f[g];const S=P<N?-1:P>N?1:0;return"asc"===_?S:-S})}}return(b=U).\u0275fac=function(g){return new(g||b)(a.Y36(c.Kz))},b.\u0275cmp=a.Xpm({type:b,selectors:[["app-job-card-details-modal"]],viewQuery:function(g,_){if(1&g&&a.Gf(u.j,5),2&g){let h;a.iGM(h=a.CRH())&&(_.headers=h)}},inputs:{action:"action",jobCard:"jobCard",JCOptions:"JCOptions",selectedJobCardDetails:"selectedJobCardDetails"},decls:39,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","jobCardNo",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","batchQty",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["SKUDescription",""],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(g,_){1&g&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._uU(3,"Select Job Card"),a.qZA(),a.TgZ(4,"div")(5,"button",3),a.NdJ("click",function(){return _.activeModal.close()}),a._UZ(6,"i",4),a.qZA()()(),a.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),a.NdJ("dataChange",function(f){return _.eventHeader(f)}),a.qZA()(),a.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th",15),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(18,"Job Card No."),a.qZA(),a.TgZ(19,"th",16),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(20,"SKU No."),a.qZA(),a.TgZ(21,"th",17),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(22,"SKU Name"),a.qZA(),a.TgZ(23,"th",18),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(24," SKU Description "),a.qZA(),a.TgZ(25,"th",19),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(26,"UoM"),a.qZA(),a.TgZ(27,"th",20),a.NdJ("sort",function(f){return _.onSort(f)}),a._uU(28,"Batch Qty."),a.qZA(),a.TgZ(29,"th"),a._uU(30,"Select"),a.qZA()()(),a.TgZ(31,"tbody"),a.YNc(32,w,19,18,"tr",21),a.ALo(33,"slice"),a.ALo(34,"searchFi1ter"),a.qZA()()()()(),a.TgZ(35,"div",22)(36,"div",23),a.YNc(37,T,1,0,"hr",24),a.qZA()(),a.YNc(38,t,3,0,"div",25),a.qZA()()()),2&g&&(a.xp6(12),a.Q6J("data",a.l5B(11,m,_.page,_.pageSize,_.collection,_.search)),a.xp6(20),a.Q6J("ngForOf",a.Dn7(33,4,a.xi3(34,8,_.JCOptions,_.search),(_.page-1)*_.pageSize,(_.page-1)*_.pageSize+_.pageSize)),a.xp6(5),a.Q6J("ngIf",!a.DdM(16,D).includes(_.action)),a.xp6(1),a.Q6J("ngIf",!a.DdM(17,D).includes(_.action)))},dependencies:[A.sg,A.O5,x.P,c._L,u.j,A.OU,I.G],encapsulation:2}),U})()},74537:(Q,v,p)=>{p.r(v),p.d(v,{JcProductionEntryModule:()=>Vt});var u=p(96814),a=p(1076),c=p(60095),A=p(21631),x=p(22096),I=p(61441),D=p(3959),w=p(74834),T=p(43818),t=p(65879),m=p(37285),Z=p(98977);function b(s,l){if(1&s&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&s){const i=l.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",i.label," ")}}function U(s,l){1&s&&t._UZ(0,"div",33)}function C(s,l){1&s&&t._UZ(0,"div",34)}function g(s,l){1&s&&t._UZ(0,"div",35)}let _=(()=>{var s;class l{constructor(n,e){this.activeModal=n,this.utilityService=e,this.generateReport={},this.billFromLocationOptions={}}ngOnInit(){this.generateReport.jobCardClosureDate&&(this.generateReport.jobCardClosureDate=this.utilityService.getFormatDate(this.generateReport.jobCardClosureDate,"YYYY-MM-DD")),1===this.billFromLocationOptions.length&&(this.generateReport.location=this.billFromLocationOptions[0].value)}dismissModel(){this.activeModal.close(this.generateReport)}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.Kz),t.Y36(Z.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-generate-report-modal"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{generateReport:"generateReport",billFromLocationOptions:"billFromLocationOptions"},decls:94,vars:12,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-4"],[1,"row","justify-content-center","px-5","mt-4"],[1,"col-12"],[1,"row","mt-4"],[1,"col-4","pe-0"],[1,"form-label"],[1,"text-danger"],[1,"col-2","px-2","d-flex","align-items-center","justify-content-center"],[1,"ms-1","me-2","text-secondary"],[1,"col-6","ps-0","setInputMargin"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-select",3,"ngModel","ngModelChange"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","ps-0","setInputMargin","d-flex"],["value","Skip Integration"],["value","In-Process"],["value","Mark As Completed"],[1,"input-group-text","statusSpanHeight"],["class","statusInActive",4,"ngIf"],["class","statusYellow",4,"ngIf"],["class","statusActive",4,"ngIf"],[1,"line-border","my-4"],[1,"row"],[1,"col","text-center","mb-4"],["type","button",1,"btn","bg-primary","px-5",3,"click"],[3,"value"],[1,"statusInActive"],[1,"statusYellow"],[1,"statusActive"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Generate Report"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13,"Batch Input Quantity"),t.TgZ(14,"span",11),t._uU(15," * "),t.qZA()()(),t.TgZ(16,"div",12)(17,"span",13),t._uU(18,"\u25b6"),t.qZA()(),t.TgZ(19,"div",14)(20,"input",15),t.NdJ("ngModelChange",function(o){return e.generateReport.batchInputQty=o}),t.qZA()()(),t.TgZ(21,"div",8)(22,"div",9)(23,"label",10),t._uU(24,"Batch Output Quantity"),t.TgZ(25,"span",11),t._uU(26," * "),t.qZA()()(),t.TgZ(27,"div",12)(28,"span",13),t._uU(29,"\u25b6"),t.qZA()(),t.TgZ(30,"div",14)(31,"input",15),t.NdJ("ngModelChange",function(o){return e.generateReport.batchOutputQty=o}),t.qZA()()(),t.TgZ(32,"div",8)(33,"div",9)(34,"label",10),t._uU(35,"Batch Rejection Quantity"),t.TgZ(36,"span",11),t._uU(37," * "),t.qZA()()(),t.TgZ(38,"div",12)(39,"span",13),t._uU(40,"\u25b6"),t.qZA()(),t.TgZ(41,"div",14)(42,"input",15),t.NdJ("ngModelChange",function(o){return e.generateReport.batchRejQty=o}),t.qZA()()(),t.TgZ(43,"div",8)(44,"div",9)(45,"label",10),t._uU(46,"Job Card Closure Date"),t.TgZ(47,"span",11),t._uU(48," * "),t.qZA()()(),t.TgZ(49,"div",12)(50,"span",13),t._uU(51,"\u25b6"),t.qZA()(),t.TgZ(52,"div",14)(53,"input",16),t.NdJ("ngModelChange",function(o){return e.generateReport.jobCardClosureDate=o}),t.qZA()()(),t.TgZ(54,"div",8)(55,"div",9)(56,"label",10),t._uU(57," Location "),t.qZA()(),t.TgZ(58,"div",12)(59,"span",13),t._uU(60,"\u25b6"),t.qZA()(),t.TgZ(61,"div",14)(62,"select",17),t.NdJ("ngModelChange",function(o){return e.generateReport.location=o}),t.TgZ(63,"option",18),t._uU(64,"Select Location"),t.qZA(),t.YNc(65,b,2,2,"option",19),t.qZA()()(),t.TgZ(66,"div",8)(67,"div",9)(68,"label",10),t._uU(69," Job Card Status "),t.TgZ(70,"span",11),t._uU(71," * "),t.qZA()()(),t.TgZ(72,"div",12)(73,"span",13),t._uU(74,"\u25b6"),t.qZA()(),t.TgZ(75,"div",20)(76,"select",17),t.NdJ("ngModelChange",function(o){return e.generateReport.checkoutStatus=o}),t.TgZ(77,"option",18),t._uU(78,"Select Status"),t.qZA(),t.TgZ(79,"option",21),t._uU(80,"Skip Integration"),t.qZA(),t.TgZ(81,"option",22),t._uU(82,"In-Process"),t.qZA(),t.TgZ(83,"option",23),t._uU(84,"Mark As Completed"),t.qZA()(),t.TgZ(85,"span",24),t.YNc(86,U,1,0,"div",25),t.YNc(87,C,1,0,"div",26),t.YNc(88,g,1,0,"div",27),t.qZA()()()()(),t._UZ(89,"hr",28),t.TgZ(90,"div",29)(91,"div",30)(92,"button",31),t.NdJ("click",function(){return e.dismissModel()}),t._uU(93,"Save & Close"),t.qZA()()()()()),2&n&&(t.xp6(20),t.Q6J("ngModel",e.generateReport.batchInputQty),t.xp6(11),t.Q6J("ngModel",e.generateReport.batchOutputQty),t.xp6(11),t.Q6J("ngModel",e.generateReport.batchRejQty),t.xp6(11),t.Q6J("ngModel",e.generateReport.jobCardClosureDate),t.xp6(9),t.Q6J("ngModel",e.generateReport.location),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",e.billFromLocationOptions),t.xp6(11),t.Q6J("ngModel",e.generateReport.checkoutStatus),t.xp6(1),t.Q6J("value",null),t.xp6(9),t.Q6J("ngIf","Skip Integration"==e.generateReport.checkoutStatus),t.xp6(1),t.Q6J("ngIf","In-Process"==e.generateReport.checkoutStatus),t.xp6(1),t.Q6J("ngIf","Mark As Completed"==e.generateReport.checkoutStatus))},dependencies:[u.sg,u.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On],encapsulation:2}),l})();var h=p(50363);const f=function(){return["view","approve","reject"]};let P=(()=>{var s;class l{get f(){return this.form.controls}constructor(n,e){this.activeModal=n,this.utilityService=e,this.logDetails={},this.action="",this.shiftOptions=[],this.form=new c.nJ({prodSource:new c.p4("Inhouse"),prodShift:new c.p4(null),prodDate:new c.p4(null),operatingStaff:new c.p4(null),remarks:new c.p4(null),authorizedBy:new c.p4(null)})}ngOnInit(){this.logDetails.prodDate&&(this.logDetails.prodDate=this.utilityService.getFormatDate(this.logDetails?.prodDate,"YYYY-MM-DD")),this.form.patchValue(this.logDetails),["view","approve","reject"].includes(this.action)&&this.form.disable()}dismissModel(){this.activeModal.close(this.form.value)}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.Kz),t.Y36(Z.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-screen-making-log-entry"]],inputs:{logDetails:"logDetails",action:"action",shiftOptions:"shiftOptions"},decls:51,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[3,"formGroup"],[1,"row","my-4","px-5"],[1,"col-6"],[1,"form-label","mb-1"],[1,"text-danger"],["type","text","formControlName","prodSource",1,"form-control","bg-white-smoke"],["type","date","formControlName","prodDate",1,"form-control"],[1,"row","px-5","mb-4"],["bindValue","parameterName","bindLabel","parameterLabel","formControlName","prodShift",3,"items","clearable"],["type","text","formControlName","operatingStaff",1,"form-control"],[1,"row","px-5"],[1,"col-12"],["type","text","formControlName","remarks",1,"form-control"],[1,"line-border","my-4"],[1,"col-8"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","text","formControlName","authorizedBy",1,"form-control"],[1,"col-4","ps-0","d-flex","justify-content-end"],[1,"mb-4"],["type","button",1,"btn","bg-primary","px-2",3,"disabled","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Log Entry"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"form",6),t.ynx(9),t.TgZ(10,"div",7)(11,"div",8)(12,"label",9),t._uU(13," Prod. Source "),t._UZ(14,"span",10),t.qZA(),t._UZ(15,"input",11),t.qZA(),t.TgZ(16,"div",8)(17,"label",9),t._uU(18," Prod. Date "),t._UZ(19,"span",10),t.qZA(),t._UZ(20,"input",12),t.qZA()(),t.TgZ(21,"div",13)(22,"div",8)(23,"label",9),t._uU(24,"Production Shift "),t._UZ(25,"span",10),t.qZA(),t._UZ(26,"ng-select",14),t.qZA(),t.TgZ(27,"div",8)(28,"label",9),t._uU(29," Operating Staff"),t._UZ(30,"span",10),t.qZA(),t._UZ(31,"input",15),t.qZA()(),t.TgZ(32,"div",16)(33,"div",17)(34,"label",9),t._uU(35,"Remarks "),t._UZ(36,"span",10),t.qZA(),t._UZ(37,"input",18),t.qZA()(),t.BQk(),t._UZ(38,"hr",19),t.TgZ(39,"div",16)(40,"div",20)(41,"div",21)(42,"div",22),t._uU(43," Authorized by "),t._UZ(44,"i",23),t.qZA(),t.TgZ(45,"div",5),t._UZ(46,"input",24),t.qZA()()(),t.TgZ(47,"div",25)(48,"div",26)(49,"button",27),t.NdJ("click",function(){return e.dismissModel()}),t._uU(50," Save & Close "),t.qZA()()()()()()()),2&n&&(t.xp6(8),t.Q6J("formGroup",e.form),t.xp6(18),t.Q6J("items",e.shiftOptions)("clearable",!1),t.xp6(23),t.Q6J("disabled",t.DdM(4,f).includes(e.action)))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,h.w9],encapsulation:2}),l})();var N=p(88059),S=p(95346);const F=function(){return{standalone:!0}};function W(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",46),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",47)(15,"input",18),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.MF=e)})("ngModelChange",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.changeBatchQty(r))}),t.qZA()()(),t.TgZ(16,"td",48),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA()()}if(2&s){const i=l.$implicit;t.xp6(2),t.Oqu(null==i?null:i.SN),t.xp6(2),t.hij(" ",null==i?null:i.itemCode," "),t.xp6(2),t.Oqu(null==i?null:i.itemName),t.xp6(2),t.Oqu(null==i?null:i.itemDescription),t.xp6(2),t.Oqu(null==i?null:i.quantity1),t.xp6(2),t.Oqu(null==i?null:i.UOM1),t.xp6(3),t.Q6J("ngModel",i.MF)("ngModelOptions",t.DdM(10,F)),t.xp6(2),t.Oqu(null==i?null:i.quantity2),t.xp6(2),t.Oqu(null==i?null:i.UOM2)}}const X=function(s,l,i,n){return{page:s,pageSize:l,collection:i,search:n,excelDisplay:"none"}};let tt=(()=>{var s;class l{constructor(n,e,r,o){this.activeModal=n,this.spinner=e,this.toastService=r,this.modalService=o,this.inkLogNewBatch={},this.shiftOptions=[],this.resetData=[],this.collection=0,this.page=1,this.pageSize=4,this.column="createdAt",this.direction=-1,this.search="",this.active=1,this.batchDateNo=""}trackByFn(n,e){return e?._id}ngOnInit(){this.resetData=JSON.parse(JSON.stringify(this.inkLogNewBatch)),this.collection=this.inkLogNewBatch.length}changeTotalBatchQty(){this.inkLogNewBatch.inkBatchQty=+(this.inkLogNewBatch.BOMQty*this.inkLogNewBatch.MF).toFixed(5)}changeBatchQty(n){let e=this.inkLogNewBatch.newBatch.map(r=>r.item).indexOf(n?.item);this.inkLogNewBatch.newBatch[e].quantity2=+(n.quantity1*n.MF).toFixed(5)}reset(){this.inkLogNewBatch=JSON.parse(JSON.stringify(this.resetData)),this.collection=this.inkLogNewBatch.length}dismissModel(){this.activeModal.close({inkLogNewBatch:this.inkLogNewBatch})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(){const n=this.modalService.open(P,{centered:!0,size:"md",backdrop:"static",keyboard:!1});n.componentInstance.logDetails=this.inkLogNewBatch.logDetails,n.componentInstance.shiftOptions=this.shiftOptions,n.result.then(e=>{e&&(console.log("success",e),this.inkLogNewBatch.logDetails=e)},e=>{})}onSort({column:n,direction:e}){this.headers.forEach(r=>{r.sortable!==n&&(r.direction="")}),this.inkLogNewBatch=""===e||""===n?this.inkLogNewBatch:[...this.inkLogNewBatch].sort((r,o)=>{let d="string"==typeof r[n]?r[n].toLowerCase():r[n],M="string"==typeof o[n]?o[n].toLowerCase():o[n];const k=d<M?-1:d>M?1:0;return"asc"===e?k:-k})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.Kz),t.Y36(Z.V),t.Y36(Z.kl),t.Y36(m.FF))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ink-mixing-log-batch"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{inkLogNewBatch:"inkLogNewBatch",shiftOptions:"shiftOptions"},decls:90,vars:24,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4"],[1,"row","mb-2","px-4"],[1,"col-7"],[1,"row"],[1,"col-3"],[1,"form-label","mb-0"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-5","ps-2"],[1,"col-4","px-2"],[1,"col-5"],[1,"col-6"],[1,"col-7","ps-2"],["type","number","readonly","",1,"form-control","bg-magenta-black",3,"ngModel","ngModelChange"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["type","number","readonly","",1,"form-control","bg-pink-color",3,"ngModel","ngModelChange"],[1,"row","mt-4"],[1,"col","px-0"],[1,"line-border","mb-0"],[1,"col-12","px-5"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","19.2rem"],[1,"table","table-bordered","table-sticky","mt-1"],[1,"bg-primary"],[1,"text-white"],["sortable","seq",3,"sort"],["sortable","specificationCode",3,"sort"],["sortable","characteristic",1,"text-start",3,"sort"],["sortable","testStandard",3,"sort"],["sortable","UOM",3,"sort"],["sortable","measuringInstrument",3,"sort"],["sortable","LTL",3,"sort"],["sortable","specValue",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-border","mt-0"],[1,"row","px-4","mb-3"],[1,"col-4"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","px-3","me-4",3,"click"],[1,"col-8","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-5","me-4",3,"click"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"bg-magenta-black"],[1,"d-flex","justify-content-center"],[1,"bg-pink-color"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Ink Mixing Log (Entry)"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13," F20 Ink Code "),t.qZA(),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.colourCode=o}),t.qZA()(),t.TgZ(15,"div",12)(16,"label",10),t._uU(17," F20 Ink Name"),t.qZA(),t.TgZ(18,"input",11),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.colourName=o}),t.qZA()(),t.TgZ(19,"div",13)(20,"label",10),t._uU(21," F20 Ink Description "),t.qZA(),t.TgZ(22,"input",11),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.colourDescription=o}),t.qZA()()()(),t.TgZ(23,"div",14)(24,"div",8)(25,"div",15)(26,"div",8)(27,"div",14)(28,"label",10),t._uU(29," UoM "),t.qZA(),t.TgZ(30,"input",11),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.UOM=o}),t.qZA()(),t.TgZ(31,"div",16)(32,"label",10),t._uU(33," M/Batch Total "),t.qZA(),t.TgZ(34,"input",17),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.BOMQty=o}),t.qZA()()()(),t.TgZ(35,"div",15)(36,"div",8)(37,"div",12)(38,"label",10),t._uU(39," *MF "),t.qZA(),t.TgZ(40,"input",18),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.MF=o})("ngModelChange",function(){return e.changeTotalBatchQty()}),t.qZA()(),t.TgZ(41,"div",16)(42,"label",10),t._uU(43," Batch Qty "),t.qZA(),t.TgZ(44,"input",19),t.NdJ("ngModelChange",function(o){return e.inkLogNewBatch.inkBatchQty=o}),t.qZA()()()()()()(),t.TgZ(45,"div",20)(46,"div",21),t._UZ(47,"hr",22),t.qZA()(),t.TgZ(48,"div",8)(49,"div",23)(50,"app-setting-header",24),t.NdJ("dataChange",function(o){return e.eventHeader(o)}),t.qZA(),t.TgZ(51,"div",25)(52,"table",26)(53,"thead",27)(54,"tr",28)(55,"th",29),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(56,"SN"),t.qZA(),t.TgZ(57,"th",30),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(58,"Item Code"),t.qZA(),t.TgZ(59,"th",31),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(60,"Item Name"),t.qZA(),t.TgZ(61,"th",31),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(62," Item Description "),t.qZA(),t.TgZ(63,"th",32),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(64,"Quantity"),t.qZA(),t.TgZ(65,"th",33),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(66,"UoM"),t.qZA(),t.TgZ(67,"th",34),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(68,"*MF"),t.qZA(),t.TgZ(69,"th",35),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(70,"Quantity"),t.qZA(),t.TgZ(71,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(72,"UoM"),t.qZA()()(),t.TgZ(73,"tbody"),t.YNc(74,W,20,11,"tr",37),t.ALo(75,"slice"),t.ALo(76,"searchFi1ter"),t.qZA()()()()(),t.TgZ(77,"div",20)(78,"div",21),t._UZ(79,"hr",38),t.qZA()(),t.TgZ(80,"div",39)(81,"div",40),t._UZ(82,"button",41),t.TgZ(83,"button",42),t.NdJ("click",function(){return e.openLogEntryModal()}),t._uU(84,"Log Entry"),t.qZA()(),t.TgZ(85,"div",43)(86,"button",44),t.NdJ("click",function(){return e.reset()}),t._uU(87,"Reset"),t.qZA(),t.TgZ(88,"button",45),t.NdJ("click",function(){return e.dismissModel()}),t._uU(89,"Save & close"),t.qZA()()()()()),2&n&&(t.xp6(14),t.Q6J("ngModel",e.inkLogNewBatch.colourCode),t.xp6(4),t.Q6J("ngModel",e.inkLogNewBatch.colourName),t.xp6(4),t.Q6J("ngModel",e.inkLogNewBatch.colourDescription),t.xp6(8),t.Q6J("ngModel",e.inkLogNewBatch.UOM),t.xp6(4),t.Q6J("ngModel",e.inkLogNewBatch.BOMQty),t.xp6(6),t.Q6J("ngModel",e.inkLogNewBatch.MF)("ngModelOptions",t.DdM(18,F)),t.xp6(4),t.Q6J("ngModel",e.inkLogNewBatch.inkBatchQty),t.xp6(6),t.Q6J("data",t.l5B(19,X,e.page,e.pageSize,e.collection,e.search)),t.xp6(24),t.Q6J("ngForOf",t.Dn7(75,11,t.xi3(76,15,e.inkLogNewBatch.newBatch,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn))},dependencies:[u.sg,N.P,c.Fj,c.wV,c.JJ,c.On,T.j,u.OU,S.G],encapsulation:2}),l})();var y=p(37398);let et=(()=>{var s;class l{constructor(n){this.http=n,this.routes={createOrUpdatePath:"/production/inkMixingLog/createOrUpdate",getAllPath:"/production/inkMixingLog/getAll",getAllMasterDataPath:"/production/inkMixingLog/getAllMasterData",getByIdPath:e=>`/production/inkMixingLog/getById/${e}`}}createOrUpdate(n){return this.http.post(this.routes.createOrUpdatePath,n).pipe((0,y.U)(e=>e))}getAll(n){return this.http.get(this.routes.getAllPath,n).pipe((0,y.U)(e=>e))}getAllMasterData(n){return this.http.get(this.routes.getAllMasterDataPath,n).pipe((0,y.U)(e=>e))}getById(n){return this.http.get(this.routes.getByIdPath(n)).pipe((0,y.U)(e=>e))}}return(s=l).\u0275fac=function(n){return new(n||s)(t.LFG(Z.sM))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),l})();const nt=function(){return{standalone:!0}};function ot(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",25,30)(7,"span",31),t._uU(8),t.qZA()(),t.TgZ(9,"td",25,32)(11,"span",31),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"div",33)(21,"button",34),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openBatchModal(r))}),t._uU(22," New Batch "),t.qZA()()(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td")(26,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.processStatus=e)}),t.qZA()()()}if(2&s){const i=l.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(i.SN),t.xp6(2),t.Oqu(i.colourCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourName)("positionTarget",n),t.xp6(1),t.hij(" ",i.colourName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourDescription)("positionTarget",e),t.xp6(1),t.hij(" ",i.colourDescription," "),t.xp6(2),t.Oqu(i.mesh),t.xp6(2),t.Oqu(i.UOM),t.xp6(2),t.Oqu(i.BOMQty),t.xp6(6),t.Oqu(i.inkBatchQty),t.xp6(2),t.Q6J("ngModel",i.processStatus)("ngModelOptions",t.DdM(18,nt))}}const it=function(s,l,i,n){return{page:s,pageSize:l,collection:i,search:n,excelDisplay:"none"}};let rt=(()=>{var s;class l{constructor(n,e,r,o,d,M){this.inkMixingLogService=n,this.spinner=e,this.activeModal=r,this.toastService=o,this.modalService=d,this.utilityService=M,this.selectedDetails={},this.inkMixingLog={},this.shiftOptions=[],this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.selectedJobCardDetails={}}ngOnInit(){this.getInitialData()}reset(){this.getInitialData()}submit(){this.create()}trackByFn(n,e){return e?._id}create(){this.spinner.show(),this.inkMixingLogService.createOrUpdate(this.inkMixingLog).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.activeModal.close()})}getInitialData(){this.spinner.show(),this.inkMixingLogService.getAllMasterData(this.selectedDetails).subscribe(n=>{this.inkMixingLog=n.inkMixingLog,this.shiftOptions=n.shiftOptions,this.collection=this.inkMixingLog?.inkMixingLogDetails?.length,this.spinner.hide()})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(){this.modalService.open(P,{centered:!0,size:"md",backdrop:"static",keyboard:!1}).result.then(e=>{},e=>{})}openBatchModal(n){const e=this.modalService.open(tt,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.inkLogNewBatch=n,e.componentInstance.shiftOptions=this.shiftOptions,e.result.then(r=>{r&&console.log("success",r)},r=>{})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(et),t.Y36(Z.V),t.Y36(m.Kz),t.Y36(Z.kl),t.Y36(m.FF),t.Y36(Z.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ink-mixing-log-modal"]],inputs:{selectedDetails:"selectedDetails"},decls:82,vars:21,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"form-body","my-4"],[1,"row"],[1,"col-4","pe-3"],[1,"col-6"],[1,"form-label"],[1,"text-danger"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6","pe-5"],["type","text","readonly","",1,"form-control","bg-white-smoke",3,"ngModel","ngModelChange"],[1,"col-3","ps-0","pe-5"],[1,"col-5","ps-3"],[1,"col-6","ps-0","pe-3"],[1,"col-7","ps-0"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center"],["type","button",1,"btn","bg-primary","px-5","mb-3",3,"click"],["colourName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["colourDescription",""],[1,"d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Ink Mixing"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",7)(12,"div",9)(13,"label",10),t._uU(14,"Job Card No. "),t.TgZ(15,"span",11),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"input",12),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.jobCardNo=o}),t.qZA()(),t.TgZ(18,"div",13)(19,"label",10),t._uU(20,"SKU No. "),t._UZ(21,"span",11),t.qZA(),t.TgZ(22,"input",14),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.SKUNo=o}),t.qZA()()()(),t.TgZ(23,"div",15)(24,"label",10),t._uU(25,"SKU Name "),t._UZ(26,"span",11),t.qZA(),t.TgZ(27,"input",14),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.SKUName=o}),t.qZA()(),t.TgZ(28,"div",16)(29,"div",7)(30,"div",17)(31,"label",10),t._uU(32,"SKU Description "),t._UZ(33,"span",11),t.qZA(),t.TgZ(34,"input",14),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.SKUDescription=o}),t.qZA()(),t.TgZ(35,"div",9)(36,"div",7)(37,"div",16)(38,"label",10),t._uU(39,"UoM "),t._UZ(40,"span",11),t.qZA(),t.TgZ(41,"input",14),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.UOM=o}),t.qZA()(),t.TgZ(42,"div",18)(43,"label",10),t._uU(44,"SKU Batch Qty "),t._UZ(45,"span",11),t.qZA(),t.TgZ(46,"input",14),t.NdJ("ngModelChange",function(o){return e.inkMixingLog.SKUBatchQty=o}),t.qZA()()()()()()()(),t._UZ(47,"hr",19),t.TgZ(48,"app-setting-header",20),t.NdJ("dataChange",function(o){return e.eventHeader(o)}),t.qZA(),t.TgZ(49,"div",21)(50,"table",22)(51,"thead",23)(52,"tr",24)(53,"th"),t._uU(54,"SN"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Item Code"),t.qZA(),t.TgZ(57,"th",25),t._uU(58,"Item Name"),t.qZA(),t.TgZ(59,"th",25),t._uU(60,"Item Description"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Mesh"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"UoM"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"BoM Qty"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Add New Batch"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Ink Batch Qty."),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Status"),t.qZA()()(),t.TgZ(73,"tbody"),t.YNc(74,ot,27,19,"tr",26),t.ALo(75,"slice"),t.ALo(76,"searchFi1ter"),t.qZA()()(),t._UZ(77,"hr",27),t.TgZ(78,"div",7)(79,"div",28)(80,"button",29),t.NdJ("click",function(){return e.submit()}),t._uU(81,"Save"),t.qZA()()()()()),2&n&&(t.xp6(17),t.Q6J("ngModel",e.inkMixingLog.jobCardNo),t.xp6(5),t.Q6J("ngModel",e.inkMixingLog.SKUNo),t.xp6(5),t.Q6J("ngModel",e.inkMixingLog.SKUName),t.xp6(7),t.Q6J("ngModel",e.inkMixingLog.SKUDescription),t.xp6(7),t.Q6J("ngModel",e.inkMixingLog.UOM),t.xp6(5),t.Q6J("ngModel",e.inkMixingLog.SKUBatchQty),t.xp6(2),t.Q6J("data",t.l5B(16,it,e.page,e.pageSize,e.collection,e.search)),t.xp6(26),t.Q6J("ngForOf",t.Dn7(75,9,t.xi3(76,13,e.inkMixingLog.inkMixingLogDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn))},dependencies:[u.sg,N.P,m._L,c.Fj,c.Wl,c.JJ,c.On,u.OU,S.G],encapsulation:2}),l})();var E=p(54935);const R=function(){return{standalone:!0}},st=function(){return["view","approve"]};function at(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",21,26)(7,"span",27),t._uU(8),t.qZA()(),t.TgZ(9,"td",21,28)(11,"span",27),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"div",29)(17,"input",30),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.tension=e)}),t.qZA()()(),t.TgZ(18,"td")(19,"div",31)(20,"button",32),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openLogEntryModal(r))}),t._uU(21," Log Entry "),t.qZA()()(),t.TgZ(22,"td")(23,"input",33),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.status=e)}),t.qZA()()()}if(2&s){const i=l.$implicit,n=t.MAs(6),e=t.MAs(10),r=t.oxw();t.xp6(2),t.Oqu(i.SN),t.xp6(2),t.Oqu(i.colourCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourName)("positionTarget",n),t.xp6(1),t.hij(" ",i.colourName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.colourDescription)("positionTarget",e),t.xp6(1),t.hij(" ",i.colourDescription," "),t.xp6(2),t.Oqu(i.mesh),t.xp6(3),t.Q6J("ngModel",i.tension)("ngModelOptions",t.DdM(18,R)),t.xp6(6),t.Q6J("ngModel",i.status)("ngModelOptions",t.DdM(19,R))("disabled",t.DdM(20,st).includes(r.action))}}function lt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(1," Save "),t.qZA()}}const ct=function(s,l,i,n){return{page:s,pageSize:l,collection:i,search:n,excelDisplay:"none"}},dt=function(){return["reject","Acknowledged","approve","view"]};let gt=(()=>{var s;class l{constructor(n,e,r,o,d,M){this.screenMakingLogService=n,this.spinner=e,this.toastService=r,this.modalService=o,this.location=d,this.activeModal=M,this.selectedDetails={},this.action="Awaiting Approval",this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.screenMakingLog={},this.shiftOptions=[],this.masterData={autoIncrementNo:"",mergeList:[],JCOptions:[]}}dismissModel(){this.activeModal.close()}ngOnInit(){this.getInitialData()}submit(){this.create()}trackByFn(n,e){return e?._id}create(){this.spinner.show(),this.screenMakingLogService.createOrUpdate(this.screenMakingLog).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.activeModal.close()})}getInitialData(){this.spinner.show(),this.screenMakingLogService.getAllMasterData(this.selectedDetails).subscribe(n=>{this.screenMakingLog=n.screenMakingLog,this.shiftOptions=n.shiftOptions,this.collection=this.screenMakingLog?.screenMakingLogDetails?.length,this.spinner.hide()})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}openLogEntryModal(n){const e=this.modalService.open(P,{centered:!0,size:"md",backdrop:"static",keyboard:!1});e.componentInstance.logDetails=n.logDetails,e.componentInstance.shiftOptions=this.shiftOptions,e.result.then(r=>{if(r){let o=this.screenMakingLog.screenMakingLogDetails.findIndex(d=>d.ink==n.ink);this.screenMakingLog.screenMakingLogDetails[o].logDetails=r}},r=>{})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(E.M6),t.Y36(Z.V),t.Y36(Z.kl),t.Y36(m.FF),t.Y36(u.Ye),t.Y36(m.Kz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-screen-making-log-form"]],inputs:{selectedDetails:"selectedDetails"},decls:63,vars:21,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"form-body","my-4"],[1,"row"],[1,"col-5","pe-0"],[1,"col-6"],["for","",1,"form-label"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],[1,"col-7","ps-5"],[1,"col-6","pe-2"],[1,"row","line-border"],[3,"data","dataChange"],[1,"table-responsive",2,"min-height","20rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border","mt-4"],[1,"col-12","d-flex","justify-content-center","mb-3"],["type","button","class","btn bg-primary px-5",3,"click",4,"ngIf"],["colourName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["colourDescription",""],[1,"d-flex","justify-content-center"],["type","text",1,"form-control","form-control-size-xs","w-25",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Screen Making Log"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",7)(12,"div",9)(13,"label",10),t._uU(14,"Job Card No. "),t.qZA(),t.TgZ(15,"input",11),t.NdJ("ngModelChange",function(o){return e.screenMakingLog.jobCardNo=o}),t.qZA()(),t.TgZ(16,"div",9)(17,"label",10),t._uU(18,"SKU No. "),t._UZ(19,"span",12),t.qZA(),t.TgZ(20,"input",11),t.NdJ("ngModelChange",function(o){return e.screenMakingLog.SKUNo=o}),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",7)(23,"div",14)(24,"label",10),t._uU(25,"SKU Name "),t._UZ(26,"span",12),t.qZA(),t.TgZ(27,"input",11),t.NdJ("ngModelChange",function(o){return e.screenMakingLog.SKUName=o}),t.qZA()(),t.TgZ(28,"div",9)(29,"label",10),t._uU(30," SKU Description "),t._UZ(31,"span",12),t.qZA(),t.TgZ(32,"input",11),t.NdJ("ngModelChange",function(o){return e.screenMakingLog.SKUDescription=o}),t.qZA()()()()()(),t._UZ(33,"hr",15),t.TgZ(34,"app-setting-header",16),t.NdJ("dataChange",function(o){return e.eventHeader(o)}),t.qZA(),t.TgZ(35,"div",17)(36,"table",18)(37,"thead",19)(38,"tr",20)(39,"th"),t._uU(40,"SN"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Colour Code"),t.qZA(),t.TgZ(43,"th",21),t._uU(44,"Colour Name"),t.qZA(),t.TgZ(45,"th",21),t._uU(46,"Colour Description"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Mesh"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Tension N/cm"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Log Details"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Status"),t.qZA()()(),t.TgZ(55,"tbody"),t.YNc(56,at,24,21,"tr",22),t.ALo(57,"slice"),t.ALo(58,"searchFi1ter"),t.qZA()()(),t._UZ(59,"hr",23),t.TgZ(60,"div",7)(61,"div",24),t.YNc(62,lt,2,0,"button",25),t.qZA()()()()),2&n&&(t.xp6(15),t.Q6J("ngModel",e.screenMakingLog.jobCardNo),t.xp6(5),t.Q6J("ngModel",e.screenMakingLog.SKUNo),t.xp6(7),t.Q6J("ngModel",e.screenMakingLog.SKUName),t.xp6(5),t.Q6J("ngModel",e.screenMakingLog.SKUDescription),t.xp6(2),t.Q6J("data",t.l5B(15,ct,e.page,e.pageSize,e.collection,e.search)),t.xp6(22),t.Q6J("ngForOf",t.Dn7(57,8,t.xi3(58,12,e.screenMakingLog.screenMakingLogDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(6),t.Q6J("ngIf",!t.DdM(20,dt).includes(e.action)))},dependencies:[u.sg,u.O5,N.P,m._L,c.Fj,c.Wl,c.JJ,c.On,u.OU,S.G],encapsulation:2}),l})();var L=p(25116);function pt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",38)(1,"div",39)(2,"div",12)(3,"div",13)(4,"input",40),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.date=e)}),t.qZA()()()(),t.TgZ(5,"div",41)(6,"div",12)(7,"div",42)(8,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.inProcessNonConformance=e)}),t.qZA()(),t.TgZ(9,"div",16)(10,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.inProcessCorrection=e)}),t.qZA()()()()()}if(2&s){const i=l.$implicit;t.xp6(4),t.Q6J("ngModel",i.date),t.xp6(4),t.Q6J("ngModel",i.inProcessNonConformance),t.xp6(2),t.Q6J("ngModel",i.inProcessCorrection)}}const ut=function(){return{standalone:!0}};let _t=(()=>{var s;class l{constructor(n,e){this.activeModal=n,this.utilityService=e,this.action="create",this.IPQAInfoList={},this.sourceOfMfg=L.mt}ngOnInit(){this.IPQAInfoList.inProcessInfo=this.IPQAInfoList.inProcessInfo.map(n=>(n.date&&(n.date=this.utilityService.getFormatDate(n.date,"YYYY-MM-DD")),n))}deleteTableRow(){this.IPQAInfoList?.inProcessInfo?.length>1&&this.IPQAInfoList.inProcessInfo.pop()}addTableRow(){this.IPQAInfoList.inProcessInfo.push({date:this.utilityService.getTodayDate("YYYY-MM-DD"),inProcessCorrection:"",inProcessNonConformance:null})}dismissModel(){this.activeModal.close({IPQAInfoList:this.IPQAInfoList})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.Kz),t.Y36(Z.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ipqa-log-model"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{action:"action",IPQAInfoList:"IPQAInfoList"},decls:60,vars:6,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"label"],[1,"text-secondary"],["type","checkbox",1,"form-check-input","pointer","label",3,"ngModel","ngModelOptions","ngModelChange"],[1,"line-border"],[1,"col-3"],[1,"row"],[1,"col","pe-4"],[1,"form-label"],[1,"col-9"],[1,"col-6","ps-0"],["type","text",1,"form-label"],[1,"text-primary","span"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","mx-4","px-3",2,"min-height","10rem"],[1,"col-12"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"ms-1","me-2"],["placeholder","Note down any critical incident/Deviation/Concerns during production","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"col-5","pe-0"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"row","mx-4","px-3","mb-2"],[1,"col-3","pe-1"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-9","ps-1"],[1,"col-6","pe-1"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"IPQA Log"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"label",7)(10,"h5",8),t._uU(11,'Adherence to Process Standards (Check the box if "yes")'),t.qZA(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(o){return e.IPQAInfoList.adherenceToProcessStd=o}),t.qZA()()(),t._UZ(13,"hr",10),t.TgZ(14,"div",6)(15,"div",11)(16,"div",12)(17,"div",13)(18,"label",14),t._uU(19,"Date"),t.qZA()()()(),t.TgZ(20,"div",15)(21,"div",12)(22,"div",16)(23,"label",17),t._uU(24," In-process Non-conformance "),t.TgZ(25,"span",18),t._uU(26,"(if any)"),t.qZA()()(),t.TgZ(27,"div",16)(28,"label",17),t._uU(29,"In-process Correction "),t.qZA()()()()(),t.YNc(30,pt,11,3,"div",19),t.TgZ(31,"div",20)(32,"div",21)(33,"div",22)(34,"img",23),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()(),t._UZ(35,"hr",10),t.TgZ(36,"div",24)(37,"img",25),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()()()(),t.TgZ(38,"div",26)(39,"div",27)(40,"div",28)(41,"div",29),t._uU(42," Remarks "),t.TgZ(43,"span",30),t._uU(44,"\u25b6"),t.qZA()(),t.TgZ(45,"input",31),t.NdJ("ngModelChange",function(o){return e.IPQAInfoList.remarks=o}),t.qZA()()()(),t.TgZ(46,"div",12)(47,"div",32),t._UZ(48,"hr",10),t.qZA()(),t.TgZ(49,"div",33)(50,"div",34)(51,"div",28)(52,"div",29),t._uU(53," IPQA In-charge "),t.TgZ(54,"span",30),t._uU(55,"\u25b6"),t.qZA()(),t.TgZ(56,"input",35),t.NdJ("ngModelChange",function(o){return e.IPQAInfoList.IPQAInCharge=o}),t.qZA()()(),t.TgZ(57,"div",36)(58,"button",37),t.NdJ("click",function(){return e.dismissModel()}),t._uU(59,"Save & Close"),t.qZA()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",e.IPQAInfoList.adherenceToProcessStd)("ngModelOptions",t.DdM(5,ut)),t.xp6(18),t.Q6J("ngForOf",e.IPQAInfoList.inProcessInfo),t.xp6(15),t.Q6J("ngModel",e.IPQAInfoList.remarks),t.xp6(11),t.Q6J("ngModel",e.IPQAInfoList.IPQAInCharge))},dependencies:[u.sg,c.Fj,c.Wl,c.JJ,c.On],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}.row.mx-4.px-3[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center}.row.mx-4.px-3[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-left:10px}.form-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px}.label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border-color:#fa0096}"]}),l})();const J=function(){return["view","approve"]};function mt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",37)(1,"div",16)(2,"div",17)(3,"div",18)(4,"input",38),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.prodDate=e)}),t.qZA()(),t.TgZ(5,"div",20)(6,"ng-select",39),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.prodShift=e)}),t.qZA()()()(),t.TgZ(7,"div",21)(8,"div",17)(9,"div",18)(10,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.operatingStaff=e)}),t.qZA()(),t.TgZ(11,"div",20)(12,"input",40),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.prodQty=e)})("input",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.calCumulativeCount())}),t.qZA()()()()()}if(2&s){const i=l.$implicit,n=t.oxw();t.xp6(4),t.Q6J("ngModel",i.prodDate),t.xp6(2),t.Q6J("items",n.shiftOptions)("clearable",!1)("ngModel",i.prodShift)("disabled",t.DdM(9,J).includes(n.action)),t.xp6(4),t.Q6J("ngModel",i.operatingStaff)("disabled",t.DdM(10,J).includes(n.action)),t.xp6(2),t.Q6J("ngModel",i.prodQty)("disabled",t.DdM(11,J).includes(n.action))}}function ht(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.dismissModel())}),t._uU(2,"Save & Close"),t.qZA()()}}const Ct=function(){return["create","edit"]};let ft=(()=>{var s;class l{constructor(n,e){this.activeModal=n,this.utilityService=e,this.action="create",this.logEntry={},this.shiftOptions=[],this.sourceOfMfg=L.mt}ngOnInit(){console.log("logEntry",this.logEntry),this.logEntry.logEntryDetails=this.logEntry.logEntryDetails.length>0?JSON.parse(JSON.stringify(this.logEntry?.logEntryDetails))?.map(n=>(n.prodDate&&(n.prodDate=this.utilityService.getFormatDate(n.prodDate,"YYYY-MM-DD")),n)):[{prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null}]}deleteTableRow(){["create","edit"].includes(this.action)&&this.logEntry.logEntryDetails.length>1&&(this.logEntry.logEntryDetails.pop(),this.calCumulativeCount())}addTableRow(){["create","edit"].includes(this.action)&&this.logEntry.logEntryDetails.push({prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null})}dismissModel(){this.activeModal.close({logEntry:this.logEntry})}calCumulativeCount(){let n=this.logEntry.logEntryDetails.reduce((e,r)=>+e+ +r.prodQty,0);this.logEntry.cumulativeCount=+n.toFixed(2)}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.Kz),t.Y36(Z.tI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-log-entry-modal"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{action:"action",logEntry:"logEntry",shiftOptions:"shiftOptions"},decls:70,vars:15,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","mt-4","px-0"],[1,"row","mx-4","px-3"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap","col-4"],[1,"ms-1","me-2"],[1,"col-7","ps-1"],["bindLabel","sourceOfMfg","bindValue","sourceOfMfg",3,"items","clearable","ngModel","disabled","ngModelChange"],[1,"col-form-label","text-nowrap"],["type","number","readonly","",1,"form-control","bg-magenta-black",3,"ngModel","ngModelChange"],[1,"line-border"],[1,"col-6","pe-1"],[1,"row"],[1,"col-7","pe-1"],[1,"form-label"],[1,"col-5","ps-0"],[1,"col-6","ps-1"],["class","row mx-4 px-3 mb-2",4,"ngFor","ngForOf"],[1,"row","mt-4","mb-2","px-5","mx-1"],[1,"col-12","set-image","px-0","seperate-row"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","mx-4","px-3",2,"min-height","10rem"],[1,"col-12"],["placeholder","Note down any critical incident/Deviation/Concerns during production","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col","mt-1"],[1,"row","mb-4","mt-2","mx-4","px-3"],[1,"col-6","pe-0"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-6 d-flex justify-content-end",4,"ngIf"],[1,"row","mx-4","px-3","mb-2"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],["bindLabel","parameterName","bindValue","parameterLabel",3,"items","clearable","ngModel","disabled","ngModelChange"],["type","number",1,"form-control",3,"ngModel","disabled","ngModelChange","input"],[1,"col-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","px-4",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Log Entry"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t._uU(12," Prod. Source "),t.TgZ(13,"span",10),t._uU(14,"\u25b6"),t.qZA()(),t.TgZ(15,"div",11)(16,"ng-select",12),t.NdJ("ngModelChange",function(o){return e.logEntry.prodSource=o}),t.qZA()()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",13),t._uU(20," Cumulative Count "),t.TgZ(21,"span",10),t._uU(22,"\u25b6"),t.qZA()(),t.TgZ(23,"input",14),t.NdJ("ngModelChange",function(o){return e.logEntry.cumulativeCount=o}),t.qZA()()()(),t._UZ(24,"hr",15),t.TgZ(25,"div",6)(26,"div",16)(27,"div",17)(28,"div",18)(29,"label",19),t._uU(30,"Prod. Date"),t.qZA()(),t.TgZ(31,"div",20)(32,"label",19),t._uU(33,"Prod. Shift"),t.qZA()()()(),t.TgZ(34,"div",21)(35,"div",17)(36,"div",18)(37,"label",19),t._uU(38,"Operating Staff "),t.qZA()(),t.TgZ(39,"div",20)(40,"label",19),t._uU(41,"Prod. Qty"),t.qZA()()()()(),t.YNc(42,mt,13,12,"div",22),t.TgZ(43,"div",23)(44,"div",24)(45,"div",25)(46,"img",26),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()(),t._UZ(47,"hr",15),t.TgZ(48,"div",27)(49,"img",28),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()()()(),t.TgZ(50,"div",29)(51,"div",30)(52,"div",8)(53,"div",13),t._uU(54," Remarks "),t.TgZ(55,"span",10),t._uU(56,"\u25b6"),t.qZA()(),t.TgZ(57,"input",31),t.NdJ("ngModelChange",function(o){return e.logEntry.remarks=o}),t.qZA()()()(),t.TgZ(58,"div",17)(59,"div",32),t._UZ(60,"hr",15),t.qZA()(),t.TgZ(61,"div",33)(62,"div",34)(63,"div",8)(64,"div",13),t._uU(65," Prod. Authorised by "),t.TgZ(66,"span",10),t._uU(67,"\u25b6"),t.qZA()(),t.TgZ(68,"input",35),t.NdJ("ngModelChange",function(o){return e.logEntry.prodAuthorizedBy=o}),t.qZA()()(),t.YNc(69,ht,3,0,"div",36),t.qZA()()()),2&n&&(t.xp6(16),t.Q6J("items",e.sourceOfMfg)("clearable",!1)("ngModel",e.logEntry.prodSource)("disabled",t.DdM(11,J).includes(e.action)),t.xp6(7),t.Q6J("ngModel",e.logEntry.cumulativeCount),t.xp6(19),t.Q6J("ngForOf",e.logEntry.logEntryDetails),t.xp6(15),t.Q6J("ngModel",e.logEntry.remarks)("disabled",t.DdM(12,J).includes(e.action)),t.xp6(11),t.Q6J("ngModel",e.logEntry.prodAuthorizedBy)("disabled",t.DdM(13,J).includes(e.action)),t.xp6(1),t.Q6J("ngIf",t.DdM(14,Ct).includes(e.action)))},dependencies:[u.sg,u.O5,c.Fj,c.wV,c.JJ,c.On,h.w9],styles:[".set-image[_ngcontent-%COMP%]{width:100%;margin-top:-1rem!important}.seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:.2rem}"]}),l})(),j=(()=>{var s;class l{constructor(n){this.http=n,this.routes={createOrUpdatePath:"/production/stockCutting/createOrUpdate",getAllPath:"/production/stockCutting/getAll",getAllMasterDataPath:"/production/stockCutting/getAllMasterData",getByIdPath:e=>`/production/stockCutting/getById/${e}`}}createOrUpdate(n){return this.http.post(this.routes.createOrUpdatePath,n).pipe((0,y.U)(e=>e))}getAll(n){return this.http.get(this.routes.getAllPath,n).pipe((0,y.U)(e=>e))}getAllMasterData(n){return this.http.get(this.routes.getAllMasterDataPath,n).pipe((0,y.U)(e=>e))}getById(n){return this.http.get(this.routes.getByIdPath(n)).pipe((0,y.U)(e=>e))}}return(s=l).\u0275fac=function(n){return new(n||s)(t.LFG(Z.sM))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),l})();function Zt(s,l){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",15,49)(7,"span",50),t._uU(8),t.qZA()(),t.TgZ(9,"td",15,51)(11,"span",50),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"number"),t.qZA()()),2&s){const i=l.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(null==i?null:i.MRNNo),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(2),t.hij(" ",t.xi3(17,21,null==i?null:i.U1Qty,"1.2-2")," "),t.xp6(3),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.length," "),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(32,24,null==i?null:i.U2Qty,"1.2-2")," ")}}const q=function(){return{standalone:!0}};function Mt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",52)(3,"input",53),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.MRNNo=e)}),t.qZA()()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15,49)(8,"span",50),t._uU(9),t.qZA()(),t.TgZ(10,"td",15,51),t._UZ(12,"span",50),t.TgZ(13,"div",52)(14,"input",54),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.itemDescription=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"div",52)(19,"input",55),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.U1Qty=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()(),t.TgZ(20,"td")(21,"div",52)(22,"input",55),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.width=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td")(26,"div",52)(27,"input",55),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.length=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td")(31,"div",52)(32,"input",55),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.MF=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()(),t.TgZ(33,"td"),t._uU(34),t.qZA(),t.TgZ(35,"td")(36,"div",52)(37,"input",55),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.U2Qty=e)})("input",function(){const e=t.CHM(i),r=e.$implicit,o=e.index,d=t.oxw();return t.KtG(d.setActualClosingStock(r,o))}),t.qZA()()()()}if(2&s){const i=l.$implicit,n=t.MAs(7),e=t.MAs(11);t.xp6(3),t.Q6J("ngModel",i.MRNNo)("ngModelOptions",t.DdM(28,q)),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(2),t.Q6J("ngModel",i.itemDescription)("ngModelOptions",t.DdM(29,q)),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(3),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(30,q)),t.xp6(3),t.Q6J("ngModel",i.width)("ngModelOptions",t.DdM(31,q)),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(3),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(32,q)),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(3),t.Q6J("ngModel",i.MF)("ngModelOptions",t.DdM(33,q)),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(3),t.Q6J("ngModel",i.U2Qty)("ngModelOptions",t.DdM(34,q))}}let bt=(()=>{var s;class l{trackByFn(n,e){return e?._id}constructor(n,e,r,o,d,M){this.modalService=n,this.stockCuttingService=e,this.activeModal=r,this.toastService=o,this.spinner=d,this.router=M,this.selectedStockCuttingData={},this.shiftOptions=[],this.action="create",this.PPICClosingStockActual=[],this.processNames="slit"}ngOnInit(){console.log("selectedStockCuttingData",this.selectedStockCuttingData);let n=this.selectedStockCuttingData.PPICOpeningStock.map(o=>o?.MF),e=Math.max(...n),r=this.selectedStockCuttingData.PPICOpeningStock.find(o=>o?.MF==e);console.log("maxObject",r),this.selectedStockCuttingData.PPICClosingStockCalculated=this.selectedStockCuttingData?.PPICClosingStockCalculated?.map(o=>(o.MRNNo=r?.MRNNo,o.MRN=r?.MRN,o.item=r?.item??r?.reference,o.itemCode=r?.itemCode,o.itemName=r?.itemName,o.itemDescription=r?.itemDescription,o.U1=r?.U1,o.width=r?.width,o.widthUnit=r?.widthUnit,o.length=r?.length,o.lengthUnit=r?.lengthUnit,o.MF=+r?.MF.toFixed(2),o.U2=r?.U2,o.U2Qty=+(this.selectedStockCuttingData?.U2TotalQty-this.selectedStockCuttingData?.PPICToProductionGT[0]?.U2Qty).toFixed(2),o.U1Qty=+(o?.U2Qty/o?.MF).toFixed(2),o)),this.selectedStockCuttingData.PPICClosingStockActual=this.selectedStockCuttingData?.PPICClosingStockActual?.map(o=>(o.MRNNo=r?.MRNNo,o.MRN=r?.MRN,o.item=r?.item??r?.reference,o.itemCode=r?.itemCode,o.itemName=r?.itemName,o.itemDescription=`${r?.width} ${r?.widthUnit} X ${r?.length} ${r?.lengthUnit}`,o.U1=r?.U1,o.width=r?.width,o.widthUnit=r?.widthUnit,o.length=r?.length,o.lengthUnit=r?.lengthUnit,o.MF=0,o.U2=r?.U2,o.U2Qty=0,o.U1Qty=0,o)),this.PPICClosingStockActual=JSON.parse(JSON.stringify(this.selectedStockCuttingData.PPICClosingStockActual))}deleteTableRow(){this.selectedStockCuttingData.PPICClosingStockActual.length>1&&(this.selectedStockCuttingData.PPICClosingStockActual.pop(),this.calActualClosingStock())}addTableRow(){this.selectedStockCuttingData.PPICClosingStockActual=[...this.selectedStockCuttingData.PPICClosingStockActual,...JSON.parse(JSON.stringify(this.PPICClosingStockActual))]}setActualClosingStock(n,e){this.selectedStockCuttingData.PPICClosingStockActual[e].MF=+(+n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.selectedStockCuttingData.PPICClosingStockActual[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2),this.selectedStockCuttingData.PPICClosingStockActual[e].itemDescription=`${n?.width} ${n?.widthUnit} X ${n?.length} ${n?.lengthUnit}`,this.calActualClosingStock()}calActualClosingStock(){let n=this.selectedStockCuttingData?.PPICClosingStockActual?.reduce((e,r)=>+e+ +r?.U2Qty,0).toFixed(2);this.selectedStockCuttingData.rejectionQty=+(this.selectedStockCuttingData.PPICClosingStockCalculated[0]?.U2Qty-+n).toFixed(2),this.selectedStockCuttingData.rejectionPercent=+(this.selectedStockCuttingData.rejectionQty/this.selectedStockCuttingData.PPICClosingStockCalculated[0]?.U2Qty*100).toFixed(2)}totalAddition(n,e){return n.reduce((r,o)=>+r+ +o,0).toFixed(+e)}submit(){0!=this.selectedStockCuttingData?.PPICClosingStockActual?.reduce((e,r)=>+e+ +r?.U2Qty,0).toFixed(2)?+this.selectedStockCuttingData.rejectionPercent>100||+this.selectedStockCuttingData.rejectionPercent<0?this.toastService.error("Recovery must be between 0 and 100% !!"):(console.log("this.selectedStockCuttingData",this.selectedStockCuttingData),this.selectedStockCuttingData&&(this.spinner.show(),this.stockCuttingService.createOrUpdate(this.selectedStockCuttingData).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.activeModal.dismiss(),this.modalService.dismissAll()}))):this.toastService.warning("Fill PPIC Actual Closing Stock !!")}reset(){this.selectedStockCuttingData.PPICClosingStockActual=JSON.parse(JSON.stringify(this.PPICClosingStockActual)),this.selectedStockCuttingData.rejectionQty=0,this.selectedStockCuttingData.rejectionPercent=0}openLogEntryDetailsModal(){const n=this.modalService.open(ft,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.logEntry=this.selectedStockCuttingData?.logEntry,n.componentInstance.shiftOptions=this.shiftOptions,n.result.then(e=>{},e=>{})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(m.FF),t.Y36(j),t.Y36(m.Kz),t.Y36(Z.kl),t.Y36(Z.V),t.Y36(a.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-stock-cutting-ppic-process"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{selectedStockCuttingData:"selectedStockCuttingData",shiftOptions:"shiftOptions",action:"action"},decls:121,vars:6,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"row","mb-0"],[1,"mt-1","line-border-with-title"],[1,"px-4"],[1,"row","d-flex","justify-content-center","mt-5"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mt-4"],[1,"mt-5","line-border-with-title"],[1,"table-responsive",2,"min-height","17rem"],[1,"table","table-bordered","table-sticky","mb-0"],[1,"row","px-4"],[1,"col-12","set-image","px-0","seperate-row"],[1,"minus-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/delete_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"line-border"],[1,"add-icon"],["data-tip","","data-for","infoTip","src","./assets/new_icons/add_row.svg","width","14","alt","",1,"pointer",3,"click"],[1,"row","line-border","mt-5"],[1,"row","mb-3"],[1,"col-3","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"col-4","ps-0","d-flex","align-items-center"],[1,"form-label","text-nowrap"],[1,"ms-1","me-2"],[1,"d-flex"],[1,"col-7","d-flex","pe-1"],[1,"input-group-text","combine-INR","text-secondary","bg-magenta-black"],[1,"text-black"],[1,"vr","ms-3"],["type","number","readonly","",1,"form-control","ps-2","pe-0","border-start-0","bg-magenta-black",3,"ngModel","ngModelChange"],[1,"col-5","d-flex"],["type","text","readonly","",1,"form-control","ps-2","pe-0","bg-magenta-black","border-end-0",3,"value"],[1,"input-group-text","combine-INR","text-secondary","bg-magenta-black","border","border-1","border-start-0"],[1,"vr","me-3"],[1,"col-1","ps-0","d-flex","align-items-center"],[1,"col-4","mb-0","d-flex","align-self-end","justify-content-end"],["type","button",1,"btn","btn-primary","px-5","me-4",3,"click"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],[1,"d-flex","justify-content-center"],["type","text",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control","text-center","form-control-size-sm",3,"ngModel","ngModelOptions","ngModelChange","input"],["type","number",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange","input"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Stock Cutting"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"span",8),t._uU(11," PPIC Closing Stock "),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"table",12)(16,"thead",13)(17,"tr",14)(18,"th"),t._uU(19,"MRN No."),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Item Code"),t.qZA(),t.TgZ(22,"th",15),t._uU(23,"Item Name"),t.qZA(),t.TgZ(24,"th",15),t._uU(25,"Item Description"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"U1"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"U1 Qty"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Width"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Unit"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Length"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Unit"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"U2 qty/U1"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"U2"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"U2 Qty"),t.qZA()()(),t.TgZ(44,"tbody"),t.YNc(45,Zt,33,27,"tr",16),t.qZA()()()()(),t.TgZ(46,"div",17)(47,"div",18)(48,"span",8),t._uU(49," PPIC Closing Stock "),t.qZA()()(),t.TgZ(50,"div",9)(51,"div",10)(52,"div",19)(53,"table",20)(54,"thead",13)(55,"tr",14)(56,"th"),t._uU(57,"MRN No."),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Item Code"),t.qZA(),t.TgZ(60,"th",15),t._uU(61,"Item Name"),t.qZA(),t.TgZ(62,"th",15),t._uU(63,"Item Description"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"U1"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"U1 Qty"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Width"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Unit"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Length"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Unit"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"U2 qty/U1"),t.qZA(),t.TgZ(78,"th"),t._uU(79,"U2"),t.qZA(),t.TgZ(80,"th"),t._uU(81,"U2 Qty"),t.qZA()()(),t.TgZ(82,"tbody"),t.YNc(83,Mt,38,35,"tr",16),t.qZA()(),t.TgZ(84,"div",21)(85,"div",22)(86,"div",23)(87,"img",24),t.NdJ("click",function(){return e.deleteTableRow()}),t.qZA()(),t._UZ(88,"hr",25),t.TgZ(89,"div",26)(90,"img",27),t.NdJ("click",function(){return e.addTableRow()}),t.qZA()()()()()()(),t._UZ(91,"hr",28),t.TgZ(92,"div",29)(93,"div",30),t._UZ(94,"button",31),t.TgZ(95,"button",32),t.NdJ("click",function(){return e.openLogEntryDetailsModal()}),t._uU(96," Log Entry "),t.qZA()(),t.TgZ(97,"div",33)(98,"label",34),t._uU(99," Rejection Qty "),t.TgZ(100,"span",35),t._uU(101,"\u25b6"),t.qZA()(),t.TgZ(102,"div",36)(103,"div",37)(104,"span",38)(105,"span",39),t._uU(106,"sqm"),t.qZA(),t._UZ(107,"div",40),t.qZA(),t.TgZ(108,"input",41),t.NdJ("ngModelChange",function(o){return e.selectedStockCuttingData.rejectionQty=o}),t.qZA()(),t.TgZ(109,"div",42),t._UZ(110,"input",43),t.TgZ(111,"span",44),t._UZ(112,"div",45),t.TgZ(113,"span",39),t._uU(114,"%"),t.qZA()()()()(),t._UZ(115,"div",46),t.TgZ(116,"div",47)(117,"button",48),t.NdJ("click",function(){return e.reset()}),t._uU(118,"Reset"),t.qZA(),t.TgZ(119,"button",32),t.NdJ("click",function(){return e.submit()}),t._uU(120,"Save"),t.qZA()()()()()),2&n&&(t.xp6(45),t.Q6J("ngForOf",e.selectedStockCuttingData.PPICClosingStockCalculated)("ngForTrackBy",e.trackByFn),t.xp6(38),t.Q6J("ngForOf",e.selectedStockCuttingData.PPICClosingStockActual)("ngForTrackBy",e.trackByFn),t.xp6(25),t.Q6J("ngModel",e.selectedStockCuttingData.rejectionQty),t.xp6(2),t.Q6J("value",e.selectedStockCuttingData.rejectionPercent))},dependencies:[u.sg,m._L,c.Fj,c.wV,c.JJ,c.On,u.JJ],styles:[".seperate-row[_ngcontent-%COMP%]{position:relative}.seperate-row[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:-.2rem}.seperate-row[_ngcontent-%COMP%]   .minus-icon[_ngcontent-%COMP%]{position:absolute;left:-1rem;top:-.2rem}"]}),l})();var B=p(53421);function Tt(s,l){1&s&&t._UZ(0,"img",54)}function kt(s,l){1&s&&t._UZ(0,"img",55)}function Ut(s,l){if(1&s&&(t.TgZ(0,"li",57)(1,"span",58),t._uU(2),t.qZA()()),2&s){const i=t.oxw(),n=i.$implicit,e=i.pages;t.xp6(2),t.AsE(" Page ",n," of ",e[e.length-1]," ")}}function St(s,l){1&s&&t.YNc(0,Ut,3,2,"li",56),2&s&&t.Q6J("ngIf",l.pages.length>0)}const O=function(){return{standalone:!0}};function vt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",59,60)(7,"span",61),t._uU(8),t.qZA()(),t.TgZ(9,"td",59,62)(11,"span",61),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td")(34,"input",63),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.select=e)})("change",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.setSelectData(r))}),t.qZA()()()}if(2&s){const i=l.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(null==i?null:i.MRNNo),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.Oqu(null==i?null:i.U1),t.xp6(2),t.Oqu(t.xi3(17,23,null==i?null:i.U1Qty,"1.2-2")),t.xp6(3),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.length," "),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(32,26,null==i?null:i.U2Qty,"1.2-2")," "),t.xp6(3),t.Q6J("ngModel",i.select)("ngModelOptions",t.DdM(29,O))}}function yt(s,l){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.U1Qty,"1.2-2")," ")}}function At(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",66)(1,"input",67),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.U1Qty=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.changeU2Qty(e))}),t.qZA()()}if(2&s){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(2,O))}}function qt(s,l){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.length,"1.2-2")," ")}}function Dt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",66)(1,"input",67),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.length=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.changeU2Qty(e))}),t.qZA()()}if(2&s){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(2,O))}}const K=function(){return["RL"]},G=function(){return["SHT"]};function Pt(s,l){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",59,60)(7,"span",61),t._uU(8),t.qZA()(),t.TgZ(9,"td",59,62)(11,"span",61),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,yt,3,4,"span",64),t.YNc(17,At,2,3,"div",65),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t.YNc(23,qt,3,4,"span",64),t.YNc(24,Dt,2,3,"div",65),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"number"),t.qZA()()),2&s){const i=l.$implicit,n=t.MAs(6),e=t.MAs(10);t.xp6(2),t.Oqu(null==i?null:i.MRNNo),t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.hij(" ",null==i?null:i.U1," "),t.xp6(2),t.Q6J("ngIf",t.DdM(26,K).includes(null==i?null:i.U1)),t.xp6(1),t.Q6J("ngIf",t.DdM(27,G).includes(null==i?null:i.U1)),t.xp6(2),t.hij(" ",null==i?null:i.width," "),t.xp6(2),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.Q6J("ngIf",t.DdM(28,G).includes(null==i?null:i.U1)),t.xp6(1),t.Q6J("ngIf",t.DdM(29,K).includes(null==i?null:i.U1)),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",t.xi3(33,23,null==i?null:i.U2Qty,"1.2-2")," ")}}let Nt=(()=>{var s;class l{trackByFn(n,e){return e?._id}constructor(n,e,r){this.toastService=n,this.modalService=e,this.activeModal=r,this.action="create",this.selectedStockCuttingData={},this.shiftOptions=[],this.oldSelectedStockCuttingData={},this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.submitted=!1,this.isPreview=!1,this.isESCPreview=!1,this.ESCPreviewArr=[],this.rolePermissionActions=L.a1}ngOnInit(){this.selectedStockCuttingData&&(this.selectedStockCuttingData.PPICOpeningStock=this.selectedStockCuttingData?.PPICOpeningStock?.filter(n=>n?.itemCode==this.selectedStockCuttingData?.itemCode),this.selectedStockCuttingData.PPICToProductionGT=this.selectedStockCuttingData?.PPICToProductionGT?.map(n=>(n.MRNNo=this.selectedStockCuttingData?.MRNNo??"-",n.MRN=this.selectedStockCuttingData?.MRN,n.item=this.selectedStockCuttingData?.item??this.selectedStockCuttingData?.reference,n.itemCode=this.selectedStockCuttingData?.itemCode,n.itemName=this.selectedStockCuttingData?.itemName,n.itemDescription=this.selectedStockCuttingData?.itemDescription,n.U1=this.selectedStockCuttingData?.U1,n.U1Qty=+this.selectedStockCuttingData?.U1Qty.toFixed(2),n.width=this.selectedStockCuttingData?.width,n.widthUnit=this.selectedStockCuttingData?.widthUnit,n.length=this.selectedStockCuttingData?.length,n.lengthUnit=this.selectedStockCuttingData?.lengthUnit,n.MF=this.selectedStockCuttingData?.MF,n.U2=this.selectedStockCuttingData?.U2,n.U2Qty=this.selectedStockCuttingData?.U2Qty,n)),this.oldSelectedStockCuttingData=JSON.parse(JSON.stringify(this.selectedStockCuttingData)))}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}setPagination(){this.page=1}setSelectData(n){let e=this.selectedStockCuttingData?.PPICOpeningStock?.map(r=>1==r?.select?r?.U2Qty:0).reduce((r,o)=>+r+ +o,0).toFixed(2);this.selectedStockCuttingData.U2TotalQty=+e}reset(){this.selectedStockCuttingData=JSON.parse(JSON.stringify(this.oldSelectedStockCuttingData))}preview(){this.isESCPreview=!0,this.search="",this.ESCPreviewArr=this.selectedStockCuttingData.PPICOpeningStock,this.selectedStockCuttingData.PPICOpeningStock=this.selectedStockCuttingData.PPICOpeningStock.filter(n=>n.select),this.selectedStockCuttingData.PPICOpeningStock.length>0?this.isPreview=!0:(this.toastService.warning("At least One Row is Required"),this.isPreview=!1),this.collection=this.selectedStockCuttingData.PPICOpeningStock.length}ESCPreview(){this.search="",this.isPreview=!1,this.selectedStockCuttingData.PPICOpeningStock=this.ESCPreviewArr,this.collection=this.selectedStockCuttingData?.PPICOpeningStock?.length}changeU2Qty(n){let e=this.selectedStockCuttingData?.PPICToProductionGT?.map(d=>d.reference).indexOf(n?.reference);this.selectedStockCuttingData.PPICToProductionGT[e].MF=+(n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.selectedStockCuttingData.PPICToProductionGT[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2)}openStockCuttingPPICClosingDetailsModal(){if(this.selectedStockCuttingData.U2TotalQty<this.selectedStockCuttingData.PPICToProductionGT[0].U2Qty)return void this.toastService.warning("U2 Total must be greater than PPIC to Production GT U2 Qty ");this.preview();const n=this.modalService.open(bt,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedStockCuttingData=this.selectedStockCuttingData,n.componentInstance.shiftOptions=this.shiftOptions,n.result.then(e=>{},e=>{})}onSort({column:n,direction:e}){this.headers.forEach(r=>{r.sortable!==n&&(r.direction="")}),this.selectedStockCuttingData.PPICOpeningStock=""===e||""===n?this.selectedStockCuttingData.PPICOpeningStock:[...this.selectedStockCuttingData.PPICOpeningStock].sort((r,o)=>{let d="string"==typeof r[n]?r[n].toLowerCase():r[n],M="string"==typeof o[n]?o[n].toLowerCase():o[n];const k=d<M?-1:d>M?1:0;return"asc"===e?k:-k})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(Z.kl),t.Y36(m.FF),t.Y36(m.Kz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-stock-cutting-process"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{action:"action",selectedStockCuttingData:"selectedStockCuttingData",shiftOptions:"shiftOptions"},decls:120,vars:28,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"row","mb-0"],[1,"mt-1","line-border-with-title"],[1,"px-4"],[1,"form-body","pt-0"],[1,"row","justify-content-between","my-3","px-3"],[1,"col-4","d-flex","align-items-center","px-3"],[1,"d-flex"],["id","basic-addon1",1,"input-group-text","bg-primary"],["aria-hidden","true",1,"fa","fa-search","text-white"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","input"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],[1,"col-2"],[1,"col-2","ps-0","pe-3"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,""],[1,"ms-1","me-2","col-form-label","text-nowrap"],["type","text","readonly","",1,"form-control","bg-magenta-black",3,"ngModel","ngModelChange"],[1,"table-responsive","text-wrap",2,"min-height","17rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","MRNNumber",3,"sort"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","closedIRQty",3,"sort"],["sortable","width",3,"sort"],["sortable","length",3,"sort"],["sortable","SQM",3,"sort"],["sortable","roll",3,"sort"],["sortable","status",3,"sort"],["sortable","select",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-3","line-border-with-title"],[1,"table-responsive","text-wrap","mt-5",2,"min-height","6rem"],[1,"row","line-border"],[1,"row","mb-4"],["appAccessControl","",1,"col","text-center",3,"accessType"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-3","me-1",3,"disabled","click"],["type","button",1,"btn","btn-primary","px-3","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","ngModelChange","change"],[4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Stock Cutting"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"span",8),t._uU(11," PPIC Opening Stock "),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),t._UZ(17,"i",14),t.qZA(),t.TgZ(18,"div")(19,"input",15),t.NdJ("ngModelChange",function(o){return e.search=o})("input",function(){return e.setPagination()}),t.qZA()()()(),t.TgZ(20,"div",16)(21,"ngb-pagination",17),t.NdJ("pageChange",function(o){return e.page=o}),t.YNc(22,Tt,1,0,"ng-template",18),t.YNc(23,kt,1,0,"ng-template",19),t.YNc(24,St,1,1,"ng-template",20),t.qZA()(),t._UZ(25,"div",21),t.TgZ(26,"div",22)(27,"div",23)(28,"div",24)(29,"div",25),t._uU(30," U2 Total "),t.TgZ(31,"span",26),t._uU(32,"\u25b6"),t.qZA()()(),t.TgZ(33,"input",27),t.NdJ("ngModelChange",function(o){return e.selectedStockCuttingData.U2TotalQty=o}),t.qZA()()()()(),t.TgZ(34,"div",28)(35,"table",29)(36,"thead",30)(37,"tr",31)(38,"th",32),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(39,"MRN No."),t.qZA(),t.TgZ(40,"th",33),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(41,"Item Code"),t.qZA(),t.TgZ(42,"th",34),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(43,"Item Name"),t.qZA(),t.TgZ(44,"th",35),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(45,"Item Description"),t.qZA(),t.TgZ(46,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(47,"U1"),t.qZA(),t.TgZ(48,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(49,"U1 Qty"),t.qZA(),t.TgZ(50,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(51,"Width"),t.qZA(),t.TgZ(52,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(53,"Unit"),t.qZA(),t.TgZ(54,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(55,"Length"),t.qZA(),t.TgZ(56,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(57,"Unit"),t.qZA(),t.TgZ(58,"th",39),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(59,"U2 qty/U1"),t.qZA(),t.TgZ(60,"th",40),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(61,"U2"),t.qZA(),t.TgZ(62,"th",41),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(63,"U2 Qty"),t.qZA(),t.TgZ(64,"th",42),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(65,"Select"),t.qZA()()(),t.TgZ(66,"tbody"),t.YNc(67,vt,35,30,"tr",43),t.ALo(68,"slice"),t.ALo(69,"searchFi1ter"),t.qZA()()(),t.TgZ(70,"div",6)(71,"div",44)(72,"span",8),t._uU(73," PPIC To Production GT "),t.qZA()()(),t.TgZ(74,"div",45)(75,"table",29)(76,"thead",30)(77,"tr",31)(78,"th",32),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(79,"MRN No."),t.qZA(),t.TgZ(80,"th",33),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(81,"Item Code"),t.qZA(),t.TgZ(82,"th",34),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(83,"Item Name"),t.qZA(),t.TgZ(84,"th",35),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(85,"Item Description"),t.qZA(),t.TgZ(86,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(87,"U1"),t.qZA(),t.TgZ(88,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(89,"U1 Qty"),t.qZA(),t.TgZ(90,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(91,"Width"),t.qZA(),t.TgZ(92,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(93,"Unit"),t.qZA(),t.TgZ(94,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(95,"Length"),t.qZA(),t.TgZ(96,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(97,"Unit"),t.qZA(),t.TgZ(98,"th",39),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(99,"U2 qty/U1"),t.qZA(),t.TgZ(100,"th",40),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(101,"U2"),t.qZA(),t.TgZ(102,"th",41),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(103,"U2 Qty"),t.qZA()()(),t.TgZ(104,"tbody"),t.YNc(105,Pt,34,30,"tr",43),t.ALo(106,"slice"),t.ALo(107,"searchFi1ter"),t.qZA()()(),t._UZ(108,"hr",46),t.TgZ(109,"div",47)(110,"div",48)(111,"div",49)(112,"button",50),t.NdJ("click",function(){return e.reset()}),t._uU(113,"Reset"),t.qZA(),t.TgZ(114,"button",51),t.NdJ("click",function(){return e.ESCPreview()}),t._uU(115," Esc "),t.qZA(),t.TgZ(116,"button",52),t.NdJ("click",function(){return e.preview()}),t._uU(117,"Preview"),t.qZA(),t.TgZ(118,"button",53),t.NdJ("click",function(){return e.openStockCuttingPPICClosingDetailsModal()}),t._uU(119," Process "),t.qZA()()()()()()),2&n&&(t.xp6(19),t.Q6J("ngModel",e.search)("ngModelOptions",t.DdM(27,O)),t.xp6(2),t.Q6J("collectionSize",null==e.selectedStockCuttingData?null:e.selectedStockCuttingData.PPICOpeningStock.length)("page",e.page)("pageSize",e.pageSize)("boundaryLinks",!1),t.xp6(12),t.Q6J("ngModel",e.selectedStockCuttingData.U2TotalQty),t.xp6(34),t.Q6J("ngForOf",t.Dn7(68,13,t.xi3(69,17,e.selectedStockCuttingData.PPICOpeningStock,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(38),t.Q6J("ngForOf",t.Dn7(106,20,t.xi3(107,24,e.selectedStockCuttingData.PPICToProductionGT,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(5),t.Q6J("accessType",e.rolePermissionActions.createAction),t.xp6(4),t.Q6J("disabled",!e.isESCPreview))},dependencies:[u.sg,u.O5,m.N9,m.GZ,m.ju,m.Qy,m._L,c.Fj,c.wV,c.Wl,c.JJ,c.On,T.j,B.J,u.OU,u.JJ,S.G],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}.input-group-text[_ngcontent-%COMP%]{border-radius:0!important;height:2.8rem!important;width:3rem}.fa[_ngcontent-%COMP%]{font-size:1.6rem!important}.demo[_ngcontent-%COMP%]{color:#00af7d!important}.offer[_ngcontent-%COMP%]{color:#ff0096!important}.greenStatus[_ngcontent-%COMP%]{color:#00af7d}.rating-color[_ngcontent-%COMP%]{color:#00afc8}.sub-text[_ngcontent-%COMP%]{font-size:1.2rem!important}"]}),l})();function Jt(s,l){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.U1Qty,"1.2-2")," ")}}const Y=function(){return{standalone:!0}};function xt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",57)(1,"input",58),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.U1Qty=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.changeU2Qty(e))}),t.qZA()()}if(2&s){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.U1Qty)("ngModelOptions",t.DdM(2,Y))}}function It(s,l){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==i?null:i.length,"1.2-2")," ")}}function wt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"div",57)(1,"input",58),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.length=e)})("ngModelChange",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.changeU2Qty(e))}),t.qZA()()}if(2&s){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",i.length)("ngModelOptions",t.DdM(2,Y))}}const z=function(){return["RL"]},H=function(){return["SHT"]},Lt=function(){return["Sheet To Sheet","Roll To Sheet",null,""]},Ot=function(){return["Roll To Roll",null,""]};function Qt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",50,51)(5,"span",52),t._uU(6),t.qZA()(),t.TgZ(7,"td",50,53)(9,"span",52),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Jt,3,4,"span",54),t.YNc(15,xt,2,3,"div",55),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t.YNc(22,It,3,4,"span",54),t.YNc(23,wt,2,3,"div",55),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td")(33,"input",56),t.NdJ("change",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.setSelectData(r))}),t.qZA()()()}if(2&s){const i=l.$implicit,n=l.index,e=t.MAs(4),r=t.MAs(8),o=t.oxw();t.xp6(2),t.Oqu(null==i?null:i.itemCode),t.xp6(1),t.Udp("width",e.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemName)("positionTarget",e),t.xp6(1),t.hij(" ",null==i?null:i.itemName," "),t.xp6(1),t.Udp("width",r.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.itemDescription)("positionTarget",r),t.xp6(1),t.hij(" ",null==i?null:i.itemDescription," "),t.xp6(2),t.Oqu(null==i?null:i.U1),t.xp6(2),t.Q6J("ngIf",t.DdM(28,z).includes(null==i?null:i.U1)),t.xp6(1),t.Q6J("ngIf",t.DdM(29,H).includes(null==i?null:i.U1)),t.xp6(2),t.hij(" ",t.xi3(18,25,null==i?null:i.width,"1.2-2")," "),t.xp6(3),t.hij(" ",null==i?null:i.widthUnit," "),t.xp6(2),t.Q6J("ngIf",t.DdM(30,H).includes(null==i?null:i.U1)),t.xp6(1),t.Q6J("ngIf",t.DdM(31,z).includes(null==i?null:i.U1)),t.xp6(2),t.hij(" ",null==i?null:i.lengthUnit," "),t.xp6(2),t.hij(" ",null==i?null:i.MF," "),t.xp6(2),t.hij(" ",null==i?null:i.U2," "),t.xp6(2),t.hij(" ",null==i?null:i.U2Qty," "),t.xp6(2),t.MGl("name","formValue",o.stockCutting.stockCuttingDetails[n],""),t.Q6J("checked",i.select)("disabled",t.DdM(32,Lt).includes(o.stockCutting.processName)&&"RL"==i.U1||t.DdM(33,Ot).includes(o.stockCutting.processName)&&"SHT"==i.U1)}}let Ft=(()=>{var s;class l{trackByFn(n,e){return e?._id}constructor(n,e,r,o,d){this.spinner=n,this.stockCuttingService=e,this.toastService=r,this.activeModal=o,this.modalService=d,this.selectedDetails={},this.stockCutting={},this.processNames=[],this.shiftOptions=[],this.page=1,this.pageSize=5,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.submitted=!1,this.action="create",this.selectedStockCuttingData={},this.processName="",this.rolePermissionActions=L.a1,this.sheetToSheetData=[]}ngOnInit(){this.getInitialData()}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}setProcessName(n){this.stockCutting.processName=n?.parameterName}setSelectData(n){this.selectedStockCuttingData=n,this.stockCutting.stockCuttingDetails=this.stockCutting?.stockCuttingDetails.map(e=>(e.select=!1,e.reference==this.selectedStockCuttingData.reference&&(e.select=!0),e))}changeU2Qty(n){let e=this.stockCutting.stockCuttingDetails.map(d=>d.reference).indexOf(n?.reference);this.stockCutting.stockCuttingDetails[e].MF=+(n.width*n.length/(("mm"==n?.widthUnit?1e3:1)*("mm"==n?.lengthUnit?1e3:1))).toFixed(2),this.stockCutting.stockCuttingDetails[e].U2Qty=+(n.U1Qty*n.MF).toFixed(2)}getInitialData(){this.spinner.show(),this.stockCuttingService.getAllMasterData(this.selectedDetails).subscribe(n=>{this.stockCutting=n.stockCutting,this.processNames=n.processNames,this.shiftOptions=n.shiftOptions,this.collection=this.stockCutting?.stockCuttingDetails?.length,this.spinner.hide()})}reset(){this.processName="",this.selectedStockCuttingData={},this.getInitialData()}openStockCuttingPPICOpeningDetailsModal(){if(1==this.stockCutting?.stockCuttingDetails?.every(e=>!e?.select))return void this.toastService.warning("MRP as per BOM At least One Row is Required");const n=this.modalService.open(Nt,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedStockCuttingData=this.selectedStockCuttingData,n.componentInstance.shiftOptions=this.shiftOptions,n.result.then(e=>{},e=>{})}onSort({column:n,direction:e}){this.headers.forEach(r=>{r.sortable!==n&&(r.direction="")}),this.stockCutting.stockCuttingDetails=""===e||""===n?this.stockCutting.stockCuttingDetails:[...this.stockCutting.stockCuttingDetails].sort((r,o)=>{let d="string"==typeof r[n]?r[n].toLowerCase():r[n],M="string"==typeof o[n]?o[n].toLowerCase():o[n];const k=d<M?-1:d>M?1:0;return"asc"===e?k:-k})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(Z.V),t.Y36(j),t.Y36(Z.kl),t.Y36(m.Kz),t.Y36(m.FF))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-stock-cutting-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(T.j,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},inputs:{selectedDetails:"selectedDetails"},decls:102,vars:19,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container"],[1,"form-body","py-3"],[1,"row","mb-0"],[1,"col-5","pe-5"],[1,"row"],[1,"col-5"],[1,"form-label","mb-0"],[1,"text-danger"],["bindValue","parameterName","bindLabel","parameterLabel",3,"items","clearable","ngModel","ngModelChange","change"],[1,"col-4","ps-0"],["for","",1,"form-label"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","px-0"],[1,"col-7","ps-2"],[1,"col-4","pe-0"],[1,"col-4"],[1,"col-5","pe-0"],[1,"col-7"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-3","line-border-with-title"],[1,"px-4"],[1,"table-responsive","text-wrap","mt-5",2,"min-height","22rem"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","U1",3,"sort"],["sortable","U1Qty",3,"sort"],["sortable","width",3,"sort"],["sortable","widthUnit",3,"sort"],["sortable","length",3,"sort"],["sortable","lengthUnit",3,"sort"],["sortable","MF",3,"sort"],["sortable","U2",3,"sort"],["sortable","U2Qty",3,"sort"],["sortable","select",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border"],[1,"row","mb-4"],["appAccessControl","",1,"col","text-center",3,"accessType"],[1,"d-grid","gap-2","d-md-block"],["type","button",1,"btn","btn-primary","px-5","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],[4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],["type","radio",1,"form-check-input","pointer",3,"name","checked","disabled","change"],[1,"d-flex","justify-content-center"],["type","number",1,"form-control","text-center","form-control-size-sx",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Stock Cutting"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),t._uU(14," Process Name"),t.TgZ(15,"span",12),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"ng-select",13),t.NdJ("ngModelChange",function(o){return e.processName=o})("change",function(o){return e.setProcessName(o)}),t.qZA()(),t.TgZ(18,"div",14)(19,"label",15),t._uU(20,"Job Card No. "),t.TgZ(21,"span",12),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"input",16),t.NdJ("ngModelChange",function(o){return e.stockCutting.jobCardNo=o}),t.qZA()(),t.TgZ(24,"div",17)(25,"label",11),t._uU(26," SKU No."),t.TgZ(27,"span",12),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"input",16),t.NdJ("ngModelChange",function(o){return e.stockCutting.SKUNo=o}),t.qZA()()()(),t.TgZ(30,"div",18)(31,"div",9)(32,"div",19)(33,"label",11),t._uU(34,"SKU Name "),t.TgZ(35,"span",12),t._uU(36,"*"),t.qZA()(),t.TgZ(37,"input",16),t.NdJ("ngModelChange",function(o){return e.stockCutting.SKUName=o}),t.qZA()(),t.TgZ(38,"div",19)(39,"label",11),t._uU(40," SKU Description "),t.TgZ(41,"span",12),t._uU(42,"*"),t.qZA()(),t.TgZ(43,"input",16),t.NdJ("ngModelChange",function(o){return e.stockCutting.SKUDescription=o}),t.qZA()(),t.TgZ(44,"div",20)(45,"div",9)(46,"div",21)(47,"label",11),t._uU(48," UoM"),t._UZ(49,"span",12),t.qZA(),t.TgZ(50,"input",16),t.NdJ("ngModelChange",function(o){return e.stockCutting.UOM=o}),t.qZA()(),t.TgZ(51,"div",22)(52,"label",11),t._uU(53," Batch Qty."),t._UZ(54,"span",12),t.qZA(),t.TgZ(55,"input",23),t.NdJ("ngModelChange",function(o){return e.stockCutting.SKUBatchQty=o}),t.qZA()()()()()()()(),t.TgZ(56,"div",7)(57,"div",24)(58,"span",25),t._uU(59," MRP as per BOM "),t.qZA()()(),t.TgZ(60,"div",26)(61,"table",27)(62,"thead",28)(63,"tr",29)(64,"th",30),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(65,"Item Code"),t.qZA(),t.TgZ(66,"th",31),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(67,"Item Name"),t.qZA(),t.TgZ(68,"th",32),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(69,"Item Description"),t.qZA(),t.TgZ(70,"th",33),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(71,"U1"),t.qZA(),t.TgZ(72,"th",34),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(73,"U1 Qty."),t.qZA(),t.TgZ(74,"th",35),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(75,"Width"),t.qZA(),t.TgZ(76,"th",36),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(77,"Unit"),t.qZA(),t.TgZ(78,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(79,"Length"),t.qZA(),t.TgZ(80,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(81,"Unit"),t.qZA(),t.TgZ(82,"th",39),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(83,"U2 qty/U1"),t.qZA(),t.TgZ(84,"th",40),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(85,"U2"),t.qZA(),t.TgZ(86,"th",41),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(87,"U2 Qty"),t.qZA(),t.TgZ(88,"th",42),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(89,"Select"),t.qZA()()(),t.TgZ(90,"tbody"),t.YNc(91,Qt,34,34,"tr",43),t.ALo(92,"slice"),t.ALo(93,"searchFi1ter"),t.qZA()()(),t._UZ(94,"hr",44),t.TgZ(95,"div",45)(96,"div",46)(97,"div",47)(98,"button",48),t.NdJ("click",function(){return e.reset()}),t._uU(99,"Reset"),t.qZA(),t.TgZ(100,"button",49),t.NdJ("click",function(){return e.openStockCuttingPPICOpeningDetailsModal()}),t._uU(101," Next "),t.qZA()()()()()()),2&n&&(t.xp6(17),t.Q6J("items",e.processNames)("clearable",!1)("ngModel",e.processName),t.xp6(6),t.Q6J("ngModel",e.stockCutting.jobCardNo),t.xp6(6),t.Q6J("ngModel",e.stockCutting.SKUNo),t.xp6(8),t.Q6J("ngModel",e.stockCutting.SKUName),t.xp6(6),t.Q6J("ngModel",e.stockCutting.SKUDescription),t.xp6(7),t.Q6J("ngModel",e.stockCutting.UOM),t.xp6(5),t.Q6J("ngModel",e.stockCutting.SKUBatchQty),t.xp6(36),t.Q6J("ngForOf",t.Dn7(92,12,t.xi3(93,16,e.stockCutting.stockCuttingDetails,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(5),t.Q6J("accessType",e.rolePermissionActions.createAction))},dependencies:[u.sg,u.O5,m._L,c.Fj,c.wV,c.JJ,c.On,h.w9,T.j,B.J,u.OU,u.JJ,S.G]}),l})();var Et=p(16897);function Rt(s,l){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==i?null:i.seq," ")}}const $=function(){return{standalone:!0}};function jt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"input",57),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw().$implicit;return t.KtG(r.seq=e)}),t.qZA()}if(2&s){const i=t.oxw().$implicit;t.Q6J("ngModel",i.seq)("ngModelOptions",t.DdM(2,$))}}const V=function(){return["view","Converted to SKU","approve"]},Bt=function(){return["view","approve"]};function Kt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",47),t.YNc(3,Rt,2,1,"span",48),t.YNc(4,jt,1,3,"input",49),t.qZA()(),t.TgZ(5,"td",50,51)(7,"span",52),t._uU(8),t.qZA()(),t.TgZ(9,"td")(10,"div",53),t._UZ(11,"button",54),t.TgZ(12,"button",55),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openProdInfoModal(r))}),t._uU(13," Prod. Log "),t.qZA()()(),t.TgZ(14,"td")(15,"div",53),t._UZ(16,"button",54),t.TgZ(17,"button",55),t.NdJ("click",function(){const r=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.openIPQAModal(r))}),t._uU(18," IPQA Log "),t.qZA()()(),t.TgZ(19,"td")(20,"input",56),t.NdJ("ngModelChange",function(e){const o=t.CHM(i).$implicit;return t.KtG(o.processStatus=e)}),t.qZA()()()}if(2&s){const i=l.$implicit,n=t.MAs(6),e=t.oxw();t.xp6(3),t.Q6J("ngIf",t.DdM(10,V).includes(e.action)),t.xp6(1),t.Q6J("ngIf",!t.DdM(11,V).includes(e.action)),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",i.processName)("positionTarget",n),t.xp6(1),t.hij(" ",null==i?null:i.processName," "),t.xp6(12),t.Q6J("ngModel",i.processStatus)("ngModelOptions",t.DdM(12,$))("disabled",t.DdM(13,Bt).includes(e.action))}}function Gt(s,l){if(1&s){const i=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.submit())}),t._uU(1," Save "),t.qZA()}}const Yt=function(){return["reject","approve","view"]};let zt=(()=>{var s;class l{constructor(n,e,r,o,d,M,k,Wt){this.jobCardEntryService=n,this.activatedRoute=e,this.spinner=r,this.toastService=o,this.validationService=d,this.modalService=M,this.utilityService=k,this.location=Wt,this.isPreview=!1,this.submitted=!1,this.isESCPreview=!1,this.action="create",this.page=1,this.pageSize=10,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.selectedJobCardDetails={},this.processDetailsList=[],this.ESCPreviewArr=[],this.masterData={autoIncrementNo:"",JCOptions:[],billFromLocationOptions:[],shiftOptions:[]},this.JCEntryDetailsList=[],this.prodInfoList=[{prodDate:this.utilityService.getTodayDate("YYYY-MM-DD"),prodShift:"",operatingStaff:"",prodQty:null}],this.IPQAInfoList={},this.componentModal={"Stock Preparation":Ft,"Ink Mixing":rt,"Screen Making":gt,"Printing on CPI":null,"Kiss-cutting":null,Weeding:null,Lamination:null,"Through Punching":null,Packing:null},this.form=new c.nJ({jobCardEntryCode:new c.p4(null),jobCard:new c.p4(null,[c.kI.required]),jobCardNo:new c.p4(null),SKU:new c.p4(null),SKUStage:new c.p4(null),SKUNo:new c.p4(null),SKUName:new c.p4(null),SKUDescription:new c.p4(null),UOM:new c.p4(null),batchQty:new c.p4(null),batchDate:new c.p4(null),customer:new c.p4(null),customerName:new c.p4(null),location:new c.p4(null),batchOutputQty:new c.p4(null),batchNumber:new c.p4(null),generateReport:new c.p4({}),status:new c.p4("In-Process"),productionEntry:new c.p4([])})}get f(){return this.form.controls}ngOnInit(){this.getInitialData()}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.form,D.m5))return;this.form.enable();let n=this.form.value;"approve"==this.action&&(n.status="Approved"),n.productionEntry=this.JCEntryDetailsList,console.log("formData.productionEntry",n.productionEntry),this.create(n)}trackByFn(n,e){return e?._id}create(n){this.spinner.show(),this.jobCardEntryService.createOrUpdate(n).subscribe(e=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(e.message),this.location.back()})}reset(){this.form.reset(),this.JCEntryDetailsList=[],this.collection=this.JCEntryDetailsList.length,this.getInitialData(),this.isESCPreview=!1}getInitialData(){this.spinner.show(),this.jobCardEntryService.getAllMasterData({}).subscribe(n=>{this.masterData=n,this.form.controls.jobCardEntryCode.setValue(this.masterData?.autoIncrementNo),this.form.controls.status.setValue("In-Process"),this.activatedRoute.queryParams.pipe((0,A.z)(e=>e.id?this.jobCardEntryService.getById(e.id):(0,x.of)({}))).subscribe(e=>{this.spinner.hide(),0!=Object.keys(e).length&&(e.productionEntry&&(this.JCEntryDetailsList=e?.productionEntry?.map(r=>(r.isMachineToggle=!1,r)).sort((r,o)=>r.seq-o.seq)),this.collection=this.JCEntryDetailsList.length,this.form.patchValue(e),this.f.jobCardNo.disable(),["view","approve"].includes(this.action)&&this.form.disable())})})}setMachineId(n,e){if(["create","edit"].includes(this.action)){let r=this.JCEntryDetailsList.findIndex(o=>o.process==n?.process);this.JCEntryDetailsList[r].machine=e?.machine,this.JCEntryDetailsList[r].machineName=e?.machineName}}changeMachineDetails(n){if(["create","edit"].includes(this.action)){let e=this.JCEntryDetailsList.findIndex(r=>r.process==n?.process);this.JCEntryDetailsList[e].isMachineToggle=!n.isMachineToggle}}setJobCardId(n){this.selectedJobCardDetails=n,this.f.jobCardNo.setValue(n?.jobCardNo),this.f.jobCard.setValue(n?._id),this.spinner.show(),this.jobCardEntryService.getJCEntryDataByJobCardId({jobCard:n?._id,SKU:n?.SKU}).subscribe(e=>{this.f.SKU.setValue(e?.jobCardEntryData?.SKU),this.f.SKUNo.setValue(e?.jobCardEntryData?.SKUNo),this.f.SKUName.setValue(e?.jobCardEntryData?.SKUName),this.f.SKUStage.setValue(e?.jobCardEntryData?.SKUStage),this.f.SKUDescription.setValue(e?.jobCardEntryData?.SKUDescription),this.f.UOM.setValue(e?.jobCardEntryData?.UOM),this.f.batchQty.setValue(e?.jobCardEntryData?.batchQty),this.f.batchDate.setValue(e?.jobCardEntryData?.batchDate?this.utilityService.getFormatDate(e?.jobCardEntryData?.batchDate,"YYYY-MM-DD"):null),this.f.customer.setValue(e?.jobCardEntryData?.customer),this.f.customerName.setValue(e?.jobCardEntryData?.customerName),this.JCEntryDetailsList=e?.jobCardEntryData?.productionEntry?e?.jobCardEntryData?.productionEntry:e?.SKUProcessList,this.f.generateReport.setValue(e?.jobCardEntryData?.generateReport),this.spinner.hide(),0==this.JCEntryDetailsList.length&&this.toastService.warning("SKU has no defined processes. Please set them up in SKU Process Flow.")})}preview(){this.search="",this.isESCPreview=!0,this.ESCPreviewArr=this.JCEntryDetailsList,this.JCEntryDetailsList=this.JCEntryDetailsList.filter(n=>n.seq>0),0==this.JCEntryDetailsList.length?this.toastService.warning("At least One Row is Required!"):this.isPreview=!0,this.collection=this.JCEntryDetailsList.length}ESCPreview(){this.search="",this.isPreview=!1,this.JCEntryDetailsList=this.ESCPreviewArr,this.collection=this.JCEntryDetailsList.length}openJobCardDetailsModal(){const n=this.modalService.open(I.Q,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.selectedJobCardDetails=this.selectedJobCardDetails,n.componentInstance.JCOptions=this.masterData.JCOptions,n.componentInstance.jobCard=this.form.controls.jobCard.value,n.result.then(e=>{e&&(this.selectedJobCardDetails=e?.selectedJobCardDetails,this.setJobCardId(e?.selectedJobCardDetails))},e=>{})}openProdInfoModal(n){this.componentModal[n.processName]&&(this.modalService.open(this.componentModal[n.processName],{centered:!0,size:"xl",backdrop:"static",keyboard:!1}).componentInstance.selectedDetails={jobCard:this.selectedJobCardDetails?._id,jobCardNo:this.selectedJobCardDetails?.jobCardNo,SKU:this.selectedJobCardDetails?.SKU,batchQty:this.selectedJobCardDetails?.batchQty})}openIPQAModal(n){const e=this.modalService.open(_t,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.action=this.action,e.componentInstance.IPQAInfoList=n?.IPQALog,e.result.then(r=>{if(r){console.log("success",r),console.log("JCEntryDetailsList",this.JCEntryDetailsList);let o=this.JCEntryDetailsList.findIndex(d=>d.process==n?.process);this.IPQAInfoList=r?.IPQAInfoList,this.JCEntryDetailsList[o].releaseQty=r?.IPQA?.cumulativeCount,this.JCEntryDetailsList[o].IPQA=r?.IPQA}},r=>{})}openBatchInfoModal(){const n=this.modalService.open(_,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});n.componentInstance.action=this.action,n.componentInstance.billFromLocationOptions=this.masterData.billFromLocationOptions,n.componentInstance.generateReport=this.form.controls.generateReport.value,n.result.then(e=>{e&&(console.log("success",e),this.form.controls.generateReport.setValue(e))},e=>{})}eventHeader(n){switch(n.key){case"SEARCH":this.search=n.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=n.value}}onSort({column:n,direction:e}){this.headers.forEach(r=>{r.sortable!==n&&(r.direction="")}),this.JCEntryDetailsList=""===e||""===n?this.JCEntryDetailsList:[...this.JCEntryDetailsList].sort((r,o)=>{let d="string"==typeof r[n]?r[n].toLowerCase():r[n],M="string"==typeof o[n]?o[n].toLowerCase():o[n];const k=d<M?-1:d>M?1:0;return"asc"===e?k:-k})}}return(s=l).\u0275fac=function(n){return new(n||s)(t.Y36(E.G3),t.Y36(a.gz),t.Y36(Z.V),t.Y36(Z.kl),t.Y36(Et.RJ),t.Y36(m.FF),t.Y36(Z.tI),t.Y36(u.Ye))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-jc-production-entry-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(w.j_,5),2&n){let r;t.iGM(r=t.CRH())&&(e.headers=r)}},decls:128,vars:15,consts:[[1,"row"],[1,"col-5","pe-0"],[1,"formCard","card","mt-3",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,""],[1,"form-body"],[1,"row","mt-3"],[1,"col-4","pe-0","d-flex","justify-content-between","align-items-center"],[1,"form-label"],[1,"text-danger"],[1,"text-secondary","fs-5"],[1,"col-8","ps-3","pe-5"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","jobCardNo","bindValue","jobCardNo","formControlName","jobCardNo",3,"items","clearable","change"],["id","basic-addon1",1,"set-input-group-text","input-group-text","bg-primary","pointer","col-auto","ms-1",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white","fs-4"],[1,"row","mt-4"],[1,"col-8","ps-3"],["type","text","formControlName","SKUStage","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUNo","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUName","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","SKUDescription","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","UOM","readonly","",1,"form-control","bg-white-smoke"],["type","text","formControlName","batchQty","readonly","",1,"form-control","bg-white-smoke"],["type","date","formControlName","batchDate","readonly","",1,"form-control","bg-white-smoke"],[1,"row","my-4"],["type","text","formControlName","customerName","readonly","",1,"form-control","bg-white-smoke"],[1,"col-7","ps-0"],[1,"formCard","ms-0","card","mt-3",3,"formGroup"],[1,"row","form-header","mb-4"],[1,"table-responsive","pt-2",2,"min-height","34.35rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","seq",3,"sort"],["sortable","processName",1,"text-start",3,"sort"],["sortable","processStatus",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","line-border"],[1,"col-6"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"col-md-auto","ms-auto","d-flex","align-items-end"],["type","button","class","btn btn-primary px-5",3,"click",4,"ngIf"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["class","form-control form-control-size-xs w-25","type","number",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"text-start"],["processName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],[1,"d-flex","justify-content-center","align-items-center"],[1,"plusSmallIconSvg","btn","btn-primary","py-0","me-1"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","checkbox",1,"form-check-input","pointer",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["type","number",1,"form-control","form-control-size-xs","w-25",3,"ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","btn-primary","px-5",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Job Card Details "),t.qZA()()(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12," Job Card No. "),t.TgZ(13,"span",11),t._uU(14," * "),t.qZA()(),t.TgZ(15,"span",12),t._uU(16,"\u25b6"),t.qZA()(),t.TgZ(17,"div",13)(18,"div",14)(19,"div",15)(20,"ng-select",16),t.NdJ("change",function(o){return e.setJobCardId(o)}),t.qZA()(),t.TgZ(21,"div",17),t.NdJ("click",function(){return e.openJobCardDetailsModal()}),t._UZ(22,"i",18),t.qZA()()()(),t.TgZ(23,"div",19)(24,"div",9)(25,"label",10),t._uU(26," SKU Stage "),t._UZ(27,"span",11),t.qZA(),t.TgZ(28,"span",12),t._uU(29,"\u25b6"),t.qZA()(),t.TgZ(30,"div",20),t._UZ(31,"input",21),t.qZA()(),t.TgZ(32,"div",19)(33,"div",9)(34,"label",10),t._uU(35," SKU Number "),t._UZ(36,"span",11),t.qZA(),t.TgZ(37,"span",12),t._uU(38,"\u25b6"),t.qZA()(),t.TgZ(39,"div",20),t._UZ(40,"input",22),t.qZA()(),t.TgZ(41,"div",19)(42,"div",9)(43,"label",10),t._uU(44," SKU Name "),t._UZ(45,"span",11),t.qZA(),t.TgZ(46,"span",12),t._uU(47,"\u25b6"),t.qZA()(),t.TgZ(48,"div",20),t._UZ(49,"input",23),t.qZA()(),t.TgZ(50,"div",19)(51,"div",9)(52,"label",10),t._uU(53," SKU Description "),t._UZ(54,"span",11),t.qZA(),t.TgZ(55,"span",12),t._uU(56,"\u25b6"),t.qZA()(),t.TgZ(57,"div",20),t._UZ(58,"input",24),t.qZA()(),t.TgZ(59,"div",19)(60,"div",9)(61,"label",10),t._uU(62," SKU UoM "),t._UZ(63,"span",11),t.qZA(),t.TgZ(64,"span",12),t._uU(65,"\u25b6"),t.qZA()(),t.TgZ(66,"div",20),t._UZ(67,"input",25),t.qZA()(),t.TgZ(68,"div",19)(69,"div",9)(70,"label",10),t._uU(71,"Batch Quantity"),t._UZ(72,"span",11),t.qZA(),t.TgZ(73,"span",12),t._uU(74,"\u25b6"),t.qZA()(),t.TgZ(75,"div",20),t._UZ(76,"input",26),t.qZA()(),t.TgZ(77,"div",19)(78,"div",9)(79,"label",10),t._uU(80," Batch Date "),t._UZ(81,"span",11),t.qZA(),t.TgZ(82,"span",12),t._uU(83,"\u25b6"),t.qZA()(),t.TgZ(84,"div",20),t._UZ(85,"input",27),t.qZA()(),t.TgZ(86,"div",28)(87,"div",9)(88,"label",10),t._uU(89," SKU Customer "),t._UZ(90,"span",11),t.qZA(),t.TgZ(91,"span",12),t._uU(92,"\u25b6"),t.qZA()(),t.TgZ(93,"div",20),t._UZ(94,"input",29),t.qZA()()()()()(),t.TgZ(95,"div",30)(96,"form",31)(97,"div",3)(98,"div",32)(99,"div",5)(100,"label",6),t._uU(101," Production Entry "),t.qZA()()(),t.TgZ(102,"div",33)(103,"table",34)(104,"thead",35)(105,"tr",36)(106,"th",37),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(107,"PRC Seq."),t.qZA(),t.TgZ(108,"th",38),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(109,"Process Name"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Production"),t.qZA(),t.TgZ(112,"th"),t._uU(113,"Quality"),t.qZA(),t.TgZ(114,"th",39),t.NdJ("sort",function(o){return e.onSort(o)}),t._uU(115,"Status"),t.qZA()()(),t.TgZ(116,"tbody"),t.YNc(117,Kt,21,14,"tr",40),t.ALo(118,"slice"),t.ALo(119,"searchFi1ter"),t.qZA()()(),t._UZ(120,"hr",41),t.TgZ(121,"div",0)(122,"div",42),t._UZ(123,"button",43),t.TgZ(124,"button",44),t.NdJ("click",function(){return e.openBatchInfoModal()}),t._uU(125," Generate Report "),t.qZA()(),t.TgZ(126,"div",45),t.YNc(127,Gt,2,0,"button",46),t.qZA()()()()()()),2&n&&(t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(18),t.Q6J("items",e.masterData.JCOptions)("clearable",!1),t.xp6(76),t.Q6J("formGroup",e.form),t.xp6(21),t.Q6J("ngForOf",t.Dn7(118,7,t.xi3(119,11,e.JCEntryDetailsList,e.search),(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize))("ngForTrackBy",e.trackByFn),t.xp6(10),t.Q6J("ngIf",!t.DdM(14,Yt).includes(e.action)))},dependencies:[u.sg,u.O5,m._L,c._Y,c.Fj,c.wV,c.Wl,c.JJ,c.JL,c.sg,c.u,c.On,h.w9,T.j,u.OU,S.G],encapsulation:2}),l})();var Ht=p(56208);const $t=[{path:"",redirectTo:"form",pathMatch:"full"},{path:"form",component:zt}];let Vt=(()=>{var s;class l{}return(s=l).\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.ez,a.Bz.forChild($t),Ht.m]}),l})()},68922:(Q,v,p)=>{p.d(v,{T:()=>u});const u=[{message:"Location is Required",key:"deliveryLocation"}]},3959:(Q,v,p)=>{p.d(v,{Gu:()=>A,kq:()=>c,JH:()=>a,Nh:()=>x,m5:()=>w,sg:()=>I}),p(68922);const a=[{message:"SKU No. is Required",key:"SKUId"},{message:"FGIN Quantity is Required",key:"FGINQuantity"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"Manufacturing Date is Required",key:"manufacturingDate"},{message:"Batch No. is Required",key:"batchNo"}],c=[{message:"SKU No. is Required",key:"SKU"},{message:"SKU Description is Required",key:"SKUDescription"},{message:"Correction Category is Required",key:"correctionCategory"},{message:"Source Batch (From) is Required",key:"sourceBatch"}],A=[{message:"Process Name is Required",key:"processName"},{message:"Machine Name is Required",key:"machineName"},{message:"Production Date is Required",key:"productionDate"},{message:"Production Shift is Required",key:"productionShift"}],x=[{message:"Item Code is Required",key:"itemCode"},{message:"Item Name is Required",key:"itemName"},{message:"Item Description is Required",key:"itemDescription"},{message:"UoM is Required",key:"UoM"}],I=[{message:"Job Card No. is Required",key:"jobCard"},{message:"Batch Output Qty is Required",key:"batchOutputQty"}],w=[{message:"Job Card No. is Required",key:"jobCard"}]}}]);