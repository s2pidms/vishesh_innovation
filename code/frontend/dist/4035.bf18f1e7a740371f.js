"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4035],{44035:(q,d,a)=>{a.r(d),a.d(d,{SubmodulePermissionsModule:()=>J});var u=a(96814),_=a(1076),e=a(65879),p=a(88354),m=a(99328),c=a(60095),g=a(50363);function h(i,l){1&i&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25)(4,"h5"),e._uU(5," Note: C \u2013 Create, V \u2013 View, E \u2013 Edit, D \u2013 Download, A \u2013 Approve, G \u2013 Generate Report "),e.qZA()()()()())}function C(i,l){1&i&&e._UZ(0,"hr",26)}function b(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectMasterSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.createAction=n)}),e.qZA()(),e.TgZ(5,"td")(6,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectMasterSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.viewAction=n)}),e.qZA()(),e.TgZ(7,"td")(8,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectMasterSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.editAction=n)}),e.qZA()(),e.TgZ(9,"td")(10,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectMasterSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.downloadAction=n)}),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.hij(" ",t.subModuleName," "),e.xp6(2),e.Q6J("ngModel",t.createAction),e.xp6(2),e.Q6J("ngModel",t.viewAction),e.xp6(2),e.Q6J("ngModel",t.editAction),e.xp6(2),e.Q6J("ngModel",t.downloadAction)}}function A(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",17)(3,"h3",27),e._uU(4,"Masters"),e.qZA()(),e.TgZ(5,"div",29)(6,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectAllMasters=n)})("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.setAllMastersChecked(n))}),e.qZA()(),e.TgZ(7,"div",31)(8,"h5",32),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",33)(11,"table",34)(12,"thead",35)(13,"tr",36)(14,"th",37),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"C"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"V"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"E"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"D"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,b,11,5,"tr",38),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectAllMasters),e.xp6(19),e.Q6J("ngForOf",t.mastersData)}}function M(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.createAction=n)}),e.qZA()(),e.TgZ(5,"td")(6,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.viewAction=n)}),e.qZA()(),e.TgZ(7,"td")(8,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.editAction=n)}),e.qZA()(),e.TgZ(9,"td")(10,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.approveAction=n)}),e.qZA()(),e.TgZ(11,"td")(12,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.downloadAction=n)}),e.qZA()(),e.TgZ(13,"td")(14,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectTransactionSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.generateReportAction=n)}),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.hij(" ",t.subModuleName," "),e.xp6(2),e.Q6J("ngModel",t.createAction),e.xp6(2),e.Q6J("ngModel",t.viewAction),e.xp6(2),e.Q6J("ngModel",t.editAction),e.xp6(2),e.Q6J("ngModel",t.approveAction),e.xp6(2),e.Q6J("ngModel",t.downloadAction),e.xp6(2),e.Q6J("ngModel",t.generateReportAction)}}function f(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",17)(3,"h3",27),e._uU(4,"Transactions"),e.qZA()(),e.TgZ(5,"div",29)(6,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectAllTransaction=n)})("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.setAllTransactionsChecked(n))}),e.qZA()(),e.TgZ(7,"div",31)(8,"h5",32),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",33)(11,"table",34)(12,"thead",35)(13,"tr",36)(14,"th",37),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"C"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"V"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"E"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"A"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"D"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"G"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,M,15,7,"tr",38),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectAllTransaction),e.xp6(23),e.Q6J("ngForOf",t.transactionsData)}}function T(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectReportSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.viewAction=n)}),e.qZA()(),e.TgZ(5,"td")(6,"input",39),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectReportSubModule())})("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.downloadAction=n)}),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.hij(" ",t.subModuleName," "),e.xp6(2),e.Q6J("ngModel",t.viewAction),e.xp6(2),e.Q6J("ngModel",t.downloadAction)}}function v(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",40)(3,"h3",27),e._uU(4,"Reports"),e.qZA()(),e.TgZ(5,"div",29)(6,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectAllReports=n)})("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.setAllReportsChecked(n))}),e.qZA()(),e.TgZ(7,"div",41)(8,"h5",32),e._uU(9,"Select All"),e.qZA()()(),e.TgZ(10,"div",33)(11,"table",34)(12,"thead",35)(13,"tr",36)(14,"th",37),e._uU(15,"Sub-module Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"V"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"D"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,T,7,3,"tr",38),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectAllReports),e.xp6(15),e.Q6J("ngForOf",t.reportsData)}}function Z(i,l){1&i&&e._UZ(0,"hr",26)}const S=function(i){return{"d-none":i}};function F(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.reset())}),e._uU(2,"Reset"),e.qZA(),e.TgZ(3,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.submit())}),e._uU(4,"Save"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,S,"View"==t.action))}}function x(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F,5,3,"div",42),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","view"!=t.action)}}let D=(()=>{class i{constructor(t,o,n){this.subModulesPermissionService=t,this.spinner=o,this.toastService=n,this.submitted=!1,this.action="create",this.permissionId="",this.roles=[],this.tableData=[],this.roleList=[],this.menuItemList=[],this.mastersData=[],this.transactionsData=[],this.reportsData=[],this.view="",this.selectAllMasters=!1,this.selectAllReports=!1,this.selectAllTransaction=!1,this.role="",this.roleName="",this.menuItemId="",this.module="",this.existingRoles=[]}ngOnInit(){this.getInitialData()}setAllMastersChecked(t){this.mastersData=this.mastersData.map(o=>(o.createAction=t.target.checked,o.viewAction=t.target.checked,o.editAction=t.target.checked,o.downloadAction=t.target.checked,o))}setAllReportsChecked(t){this.reportsData=this.reportsData.map(o=>(o.viewAction=t.target.checked,o.downloadAction=t.target.checked,o))}setAllTransactionsChecked(t){this.transactionsData=this.transactionsData.map(o=>(o.createAction=t.target.checked,o.viewAction=t.target.checked,o.editAction=t.target.checked,o.approveAction=t.target.checked,o.downloadAction=t.target.checked,o.generateReportAction=t.target.checked,o))}submit(){this.spinner.show();let t={};t.masters=this.mastersData,t.transactions=this.transactionsData,t.reports=this.reportsData,this.subModulesPermissionService.update(this.permissionId,t).subscribe(o=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(o.message),this.reset()})}selectMasterSubModule(){this.selectAllMasters=!!this.mastersData.every(t=>t.createAction&&t.viewAction&&t.editAction&&t.downloadAction)}selectTransactionSubModule(){this.selectAllTransaction=!!this.transactionsData.every(t=>t.createAction&&t.viewAction&&t.editAction&&t.approveAction&&t.downloadAction&&t.generateReportAction)}selectReportSubModule(){this.selectAllReports=!!this.reportsData.every(t=>t.viewAction&&t.downloadAction)}getFilterData(){this.role?this.menuItemId?(this.spinner.show(),this.subModulesPermissionService.getAllFilterData({module:this.module,menuItemId:this.menuItemId,role:this.role,roleName:this.roleName}).subscribe(o=>{this.permissionId=o._id,this.mastersData=o.masters,this.selectMasterSubModule(),this.transactionsData=o.transactions,this.selectTransactionSubModule(),this.reportsData=o.reports,this.selectReportSubModule()}),this.spinner.hide()):this.toastService.warning("Business Function/Module is Required !"):this.toastService.warning("Role is Required !")}reset(){this.role="",this.menuItemId="",this.selectAllMasters=!1,this.selectAllReports=!1,this.selectAllTransaction=!1,this.mastersData=[],this.transactionsData=[],this.reportsData=[]}getInitialData(){this.spinner.show(),this.subModulesPermissionService.getAllMasterData({}).subscribe(t=>{this.roleList=t.roleList,this.menuItemList=t.menuItemList}),this.spinner.hide()}setRoleId(t){this.roleName=t.roleName}setModuleName(t){this.module=t.title}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(p.kY),e.Y36(m.V),e.Y36(m.kl))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-submodule-permissions-form"]],decls:37,vars:13,consts:[[1,"formCard","card","mb-4"],[1,"set-remaining-margin"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col"],[1,"form-label"],[1,"text-danger"],["bindLabel","roleName","bindValue","_id",3,"items","ngModel","clearable","change","ngModelChange"],["bindLabel","title","bindValue","_id",3,"items","ngModel","clearable","change","ngModelChange"],[1,"col-auto","align-self-end","ps-3","pe-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-auto","align-self-end","ps-3"],["class","row justify-content-center dashboard-page",4,"ngIf"],["class","row line-border",4,"ngIf"],[1,"row","mb-0"],[1,"col-4"],["class","",4,"ngIf"],[1,"col-5","px-0"],[1,"col-3"],[4,"ngIf"],[1,"row","justify-content-center","dashboard-page"],[1,"col-12","mb-4","mt-2"],[1,"card","h-100"],[1,"card-body","ms-3","align-items-start"],[1,"row","line-border"],[1,""],[1,"row","mb-0","justify-content-center"],[1,"col-2","text-end","pe-0"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"col-2","text-start","ps-2"],[1,"mt-1","text-nowrap"],[1,"table-responsive"],[1,"table","table-bordered","mt-4"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"ngModel","change","ngModelChange"],[1,"col-5"],[1,"col-3","text-start","ps-2"],["class","d-grid gap-2 d-md-flex justify-content-md-center mb-3",3,"ngClass",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-center","mb-3",3,"ngClass"],["type","button",1,"btn","bg-primary","px-5","me-3",3,"click"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),e._uU(5,"Submodule Permissions "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10," Role "),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA()(),e.TgZ(13,"ng-select",9),e.NdJ("change",function(s){return n.setRoleId(s)})("ngModelChange",function(s){return n.role=s}),e.qZA()(),e.TgZ(14,"div",6)(15,"label",7),e._uU(16," Business Function/Module "),e.TgZ(17,"span",8),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"ng-select",10),e.NdJ("change",function(s){return n.setModuleName(s)})("ngModelChange",function(s){return n.menuItemId=s}),e.qZA()(),e.TgZ(20,"div",11)(21,"button",12),e.NdJ("click",function(){return n.getFilterData()}),e._uU(22,"Apply Filter"),e.qZA()(),e.TgZ(23,"div",13)(24,"button",12),e.NdJ("click",function(){return n.reset()}),e._uU(25,"Reset Filter"),e.qZA()()(),e.YNc(26,h,6,0,"div",14),e.qZA(),e.YNc(27,C,1,0,"hr",15),e.TgZ(28,"div",16)(29,"div",17),e.YNc(30,A,26,2,"div",18),e.qZA(),e.TgZ(31,"div",19),e.YNc(32,f,30,2,"div",18),e.qZA(),e.TgZ(33,"div",20),e.YNc(34,v,22,2,"div",18),e.qZA()(),e.YNc(35,Z,1,0,"hr",15),e.YNc(36,x,2,1,"div",21),e.qZA()()),2&o&&(e.xp6(13),e.Q6J("items",n.roleList)("ngModel",n.role)("clearable",!1),e.xp6(6),e.Q6J("items",n.menuItemList)("ngModel",n.menuItemId)("clearable",!1),e.xp6(7),e.Q6J("ngIf",(null==n.mastersData?null:n.mastersData.length)>0||(null==n.transactionsData?null:n.transactionsData.length)>0||(null==n.reportsData?null:n.reportsData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.mastersData?null:n.mastersData.length)>0||(null==n.transactionsData?null:n.transactionsData.length)>0||(null==n.reportsData?null:n.reportsData.length)>0),e.xp6(3),e.Q6J("ngIf",(null==n.mastersData?null:n.mastersData.length)>0),e.xp6(2),e.Q6J("ngIf",(null==n.transactionsData?null:n.transactionsData.length)>0),e.xp6(2),e.Q6J("ngIf",(null==n.reportsData?null:n.reportsData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.mastersData?null:n.mastersData.length)>0||(null==n.transactionsData?null:n.transactionsData.length)>0||(null==n.reportsData?null:n.reportsData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.mastersData?null:n.mastersData.length)>0||(null==n.transactionsData?null:n.transactionsData.length)>0||(null==n.reportsData?null:n.reportsData.length)>0))},dependencies:[u.mk,u.sg,u.O5,c.Wl,c.JJ,c.On,g.w9],encapsulation:2})}return i})();var w=a(56208);const P=[{path:"form",component:D}];let J=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[u.ez,_.Bz.forChild(P),w.m]})}return i})()}}]);