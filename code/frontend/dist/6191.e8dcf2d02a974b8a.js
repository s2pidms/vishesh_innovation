"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6191],{26191:(w,c,l)=>{l.r(c),l.d(c,{InventoryReportModule:()=>L});var u=l(96814),h=l(1076),g=l(43818),_=l(25116),v=l(31655),t=l(65879),I=l(73374),d=l(98977),f=l(88059),Z=l(37285),p=l(60095),y=l(50363),b=l(83344),T=l(59103);function A(r,a){if(1&r&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function N(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",47)(1,"label",7),t._uU(2,"Report Specific Search"),t.qZA(),t.TgZ(3,"ng-select",48),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.supplierId=n)}),t.qZA(),t.TgZ(4,"span",10),t._UZ(5,"img",11),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("items",e.suppliersArr)("clearable",!1)("ngModel",e.supplierId)}}function C(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",47)(1,"label",7),t._uU(2,"Report Specific Search"),t.qZA(),t.TgZ(3,"ng-select",49),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.itemId=n)}),t.qZA(),t.TgZ(4,"span",10),t._UZ(5,"img",11),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("items",e.itemsListArr)("clearable",!1)("ngModel",e.itemId)}}function R(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",47)(1,"label",7),t._uU(2,"Report Specific Search"),t.qZA(),t.TgZ(3,"ng-select",50),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.location=n)}),t.qZA(),t.TgZ(4,"span",10),t._UZ(5,"img",11),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("items",e.locationArr)("clearable",!1)("ngModel",e.location)}}function U(r,a){1&r&&t._UZ(0,"div",58)}function M(r,a){1&r&&t._UZ(0,"div",59)}function x(r,a){1&r&&t._UZ(0,"div",60)}function q(r,a){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",51,52)(5,"span",53),t._uU(6),t.qZA()(),t.TgZ(7,"td",51,54)(9,"span",53),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"UOMUnitsMaster"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"number"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"date"),t.qZA(),t.TgZ(28,"td")(29,"span",41),t.YNc(30,U,1,0,"div",55),t.YNc(31,M,1,0,"div",56),t.YNc(32,x,1,0,"div",57),t.qZA()(),t.TgZ(33,"td"),t._uU(34),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.qZA(),t.TgZ(37,"td"),t._uU(38),t.qZA()()),2&r){const e=a.$implicit,s=t.MAs(4),n=t.MAs(8);t.xp6(2),t.Oqu(null==e?null:e.itemCode),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",e.itemName)("positionTarget",s),t.xp6(1),t.hij(" ",null==e?null:e.itemName," "),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("ngbTooltip",e.itemDescription)("positionTarget",n),t.xp6(1),t.hij(" ",null==e?null:e.itemDescription," "),t.xp6(2),t.Oqu(t.lcZ(13,23,null==e?null:e.UOM)),t.xp6(3),t.Oqu(t.xi3(16,25,null==e?null:e.closedIRQty,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(19,28,null==e?null:e.purchaseRatINR,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(22,31,null==e?null:e.lineValue,"1.2-2")),t.xp6(3),t.hij(" ",null==e?null:e.MRNNumber," "),t.xp6(2),t.Oqu(t.xi3(27,34,null==e?null:e.batchDate,"dd-MM-YYYY")),t.xp6(4),t.Q6J("ngIf","green"==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf","red"==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf","orange"==(null==e?null:e.status)),t.xp6(2),t.hij(" ",null==e?null:e.expiryDate," "),t.xp6(2),t.Oqu(null==e?null:e.supplierName),t.xp6(2),t.hij(" ",null==e?null:e.deliveryLocation," ")}}const m=function(r){return[r]},J=function(r,a,e,s){return{page:r,pageSize:a,collection:e,search:s,type:"list",pdfDisplay:!0}};let S=(()=>{class r{constructor(e,s,n,o,i,F,Q){this.inventoryCorrectionService=e,this.exportToPDFService=s,this.spinner=n,this.exportExcelService=o,this.utilityService=i,this.activatedRoute=F,this.appGlobalService=Q,this.page=1,this.pageSize=12,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.tableData=[],this.suppliersArr=[],this.locationArr=[],this.itemsListArr=[],this.toDate="",this.reportNameObj=_._X,this.reportNameArr=this.reportNameObj.getAllInventoryReportName(),this.reportName=this.reportNameObj.aodInventory,this.itemId="",this.supplierId="",this.location="",this.inventoryValue=0,this.rolePermissionActions=_.a1,this.accessType=this.rolePermissionActions.downloadAction,this.menuItemId="",this.menuItemName="",this.planningMenuItemId="64a6c1e33339d4dc9d8141a4",this.purchaseMenuItemId="64a6c1e33339d4dc9d8141a5",this.storesMenuItemId="64a6c1e33339d4dc9d8141a6",this.productionMenuItemId="64a6c1e33339d4dc9d8141a8"}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.menuItemId=this.appGlobalService.menuItemId,this.menuItemId==this.planningMenuItemId?this.menuItemName="Planning":this.menuItemId==this.purchaseMenuItemId||this.menuItemId==this.storesMenuItemId?this.menuItemName="Stores":this.menuItemId==this.productionMenuItemId&&(this.menuItemName="Production"),this.getFiscalDate(),this.getAll()}getFiscalDate(){let e=this.utilityService.getCurrentMonthDates();this.toDate=e.toDate}trackByFn(e,s){return s?._id}reset(){this.getFiscalDate(),this.reportName=this.reportNameObj.aodInventory,this.supplierId="",this.location="",this.getAll()}setReportName(){this.reportName==this.reportNameObj.aodInventoryBySupplier?(this.location="",this.itemId=""):this.reportName==this.reportNameObj.aodInventoryByLocation?(this.supplierId="",this.itemId=""):this.reportName==this.reportNameObj.aodInventoryByItem?(this.supplierId="",this.location=""):(this.location="",this.supplierId="")}eventHeader(e){switch(e.key){case"SEARCH":this.search=e.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=e.value,this.getAll()}}getAll(e=!1,s=""){this.spinner.show();let n={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:e,supplierId:this.supplierId,location:this.location,itemId:this.itemId,toDate:this.toDate,department:this.menuItemName};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.inventoryCorrectionService.getAllLocationSupplierItemWiseReports(n).subscribe(o=>{"EXCEL"==s?this.excelDownload(o.rows):"PDF"==s?this.pdfDownload(o.rows):(this.tableData=o.rows,this.suppliersArr=o.suppliersList,this.itemsListArr=o.itemsList,this.locationArr=o.locations,this.collection=o.count,this.inventoryValue=o?.totalAmounts?.value),this.spinner.hide()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(e){let s=(0,v.Jz)(e);this.exportToPDFService.generatePdf(s.tableData,s.title)}excelDownload(e){this.exportExcelService.exportExcel((0,v.CT)(e))}onSort({column:e,direction:s}){this.headers.forEach(n=>{n.sortable!==e&&(n.direction="")}),this.column=e,this.direction="asc"==s?1:-1,this.getAll()}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(I.Ee),t.Y36(d.$L),t.Y36(d.V),t.Y36(d.Ol),t.Y36(d.tI),t.Y36(h.gz),t.Y36(d.P0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-inventory-report"]],viewQuery:function(s,n){if(1&s&&t.Gf(g.j,5),2&s){let o;t.iGM(o=t.CRH())&&(n.headers=o)}},decls:76,vars:27,consts:[[1,"reportTablePage"],[1,"table-body","pb-0","shadow-none"],[1,"row","table-header"],[1,"col"],[1,"heading"],[1,"row","my-4"],[1,"col-3","ps-5","separate-row"],[1,"form-label"],[1,"form-select",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"set-position"],["src","./assets/new_icons/redstroke.svg","alt","","height","27","width","8"],["class","col-3 separate-row",4,"ngIf"],[1,"col-3"],[1,"text-danger"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3","align-self-end","separate-image"],[1,"image-position"],["type","button",1,"btn","btn-primary","px-4","me-3",3,"click"],["type","button",1,"btn","btn-primary","px-4","ms-4",3,"click"],[1,"row","line-border"],[1,"table-responsive","mb-0"],[3,"data","dataChange"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","itemCode",3,"sort"],["sortable","itemName",1,"text-start",3,"sort"],["sortable","itemDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","closedIRQty",3,"sort"],["sortable","purchaseRatINR",3,"sort"],["sortable","lineValue",3,"sort"],["sortable","MRNNumber",3,"sort"],["sortable","batchDate",3,"sort"],["sortable","expiryDate",3,"sort"],["sortable","supplierName",3,"sort"],["sortable","deliveryLocation",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-footer"],[1,"row","align-items-center","mt-3"],[1,"d-flex","justify-content-center"],[1,"col-form-label","text-nowrap","pe-1","pt-0","ms-3"],[1,"fa","fa-caret-right","fa-5x","mx-2"],["type","button",1,"btn","btn-info","py-1","ms-2"],["type","text","readonly","",1,"form-control",3,"value"],[3,"value"],[1,"col-3","separate-row"],["bindLabel","supplierName","bindValue","_id",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","itemName","bindValue","_id",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","label","bindValue","value",3,"items","clearable","ngModel","ngModelChange"],[1,"text-start"],["itemName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["itemDescription",""],["style","height: 1.8rem","class","flaggreen",4,"ngIf"],["style","height: 1.8rem","class","flagred",4,"ngIf"],["style","height: 1.8rem","class","flagYellow",4,"ngIf"],[1,"flaggreen",2,"height","1.8rem"],[1,"flagred",2,"height","1.8rem"],[1,"flagYellow",2,"height","1.8rem"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Inventory Report (IR) - Stores"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Report Name"),t.qZA(),t.TgZ(10,"select",8),t.NdJ("change",function(){return n.setReportName()})("ngModelChange",function(i){return n.reportName=i}),t.YNc(11,A,2,2,"option",9),t.qZA(),t.TgZ(12,"span",10),t._UZ(13,"img",11),t.qZA()(),t.YNc(14,N,6,3,"div",12),t.YNc(15,C,6,3,"div",12),t.YNc(16,R,6,3,"div",12),t.TgZ(17,"div",13)(18,"label",7),t._uU(19," As on Date "),t._UZ(20,"span",14),t.qZA(),t.TgZ(21,"input",15),t.NdJ("ngModelChange",function(i){return n.toDate=i}),t.qZA()(),t.TgZ(22,"div",16)(23,"span",17),t._UZ(24,"img",11),t.qZA(),t.TgZ(25,"button",18),t.NdJ("click",function(){return n.getAll()}),t._uU(26,"Apply Filter"),t.qZA(),t.TgZ(27,"button",19),t.NdJ("click",function(){return n.reset()}),t._uU(28,"Reset Filter"),t.qZA()()(),t._UZ(29,"hr",20),t.TgZ(30,"div",21)(31,"app-setting-header",22),t.NdJ("dataChange",function(i){return n.eventHeader(i)}),t.qZA(),t.TgZ(32,"table",23)(33,"thead",24)(34,"tr",25)(35,"th",26),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(36,"Item Code"),t.qZA(),t.TgZ(37,"th",27),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(38,"Item Name"),t.qZA(),t.TgZ(39,"th",28),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(40,"Item Description"),t.qZA(),t.TgZ(41,"th",29),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(42,"UoM"),t.qZA(),t.TgZ(43,"th",30),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(44,"Quantity"),t.qZA(),t.TgZ(45,"th",31),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(46,"Unit Rate"),t.qZA(),t.TgZ(47,"th",32),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(48,"Line Value"),t.qZA(),t.TgZ(49,"th",33),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(50,"MRN No."),t.qZA(),t.TgZ(51,"th",34),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(52,"Batch Date"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Aging"),t.qZA(),t.TgZ(55,"th",35),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(56,"B/B Date"),t.qZA(),t.TgZ(57,"th",36),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(58,"Supplier N'/Name"),t.qZA(),t.TgZ(59,"th",37),t.NdJ("sort",function(i){return n.onSort(i)}),t._uU(60,"Location"),t.qZA()()(),t.TgZ(61,"tbody"),t.YNc(62,q,39,37,"tr",38),t.qZA()()(),t.TgZ(63,"div",39),t._UZ(64,"hr",20),t.TgZ(65,"div",40)(66,"div",13)(67,"div",41)(68,"div",42),t._uU(69," Inventory Value "),t._UZ(70,"i",43),t.TgZ(71,"button",44),t._uU(72),t.ALo(73,"companyCurrency"),t.qZA()(),t._UZ(74,"input",45),t.ALo(75,"number"),t.qZA()()()()()()),2&s&&(t.xp6(10),t.Q6J("ngModel",n.reportName),t.xp6(1),t.Q6J("ngForOf",n.reportNameArr),t.xp6(3),t.Q6J("ngIf",t.VKq(16,m,n.reportNameObj.aodInventoryBySupplier).includes(n.reportName)),t.xp6(1),t.Q6J("ngIf",t.VKq(18,m,n.reportNameObj.aodInventoryByItem).includes(n.reportName)),t.xp6(1),t.Q6J("ngIf",t.VKq(20,m,n.reportNameObj.aodInventoryByLocation).includes(n.reportName)),t.xp6(5),t.Q6J("ngModel",n.toDate),t.xp6(10),t.Q6J("data",t.l5B(22,J,n.page,n.pageSize,n.collection,n.search)),t.xp6(31),t.Q6J("ngForOf",n.tableData)("ngForTrackBy",n.trackByFn),t.xp6(10),t.Oqu(t.lcZ(73,11,"INR")),t.xp6(2),t.Q6J("value",t.xi3(75,13,n.inventoryValue,"1.2-2")))},dependencies:[u.sg,u.O5,f.P,Z._L,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On,y.w9,g.j,u.JJ,u.uU,b.f,T.S],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]})}return r})();var D=l(56208);const O=[{path:"",component:S}];let L=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[u.ez,h.Bz.forChild(O),D.m]})}return r})()}}]);