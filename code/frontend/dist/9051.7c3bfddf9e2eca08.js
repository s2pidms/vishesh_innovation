"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9051],{9202:(H,k,d)=>{d.d(k,{K:()=>h});var S=d(43818),e=d(65879),I=d(37285),Z=d(96814),N=d(88059),t=d(95346);function U(i,_){if(1&i){const m=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",24,25)(5,"span",26),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"input",27),e.NdJ("change",function(){const v=e.CHM(m).$implicit,C=e.oxw();return e.KtG(C.setSelectData(v))}),e.qZA()()()}if(2&i){const m=_.$implicit,c=_.index,u=e.MAs(4),v=e.oxw();e.xp6(2),e.Oqu(null==m?null:m.value),e.xp6(1),e.Udp("width",u.clientWidth),e.xp6(2),e.Q6J("positionTarget",u)("ngbTooltip",m.goodsDescription),e.xp6(1),e.hij(" ",null==m?null:m.goodsDescription," "),e.xp6(2),e.Oqu(null==m?null:m.gstRate),e.xp6(2),e.Oqu(null==m?null:m.igstRate),e.xp6(2),e.Oqu(null==m?null:m.cgstRate),e.xp6(2),e.Oqu(null==m?null:m.sgstRate),e.xp6(2),e.MGl("name","formValue",v.HSNCodeArr[c],""),e.Q6J("disabled","view"==v.action)("checked",m.select)}}function M(i,_){1&i&&e._UZ(0,"hr",32)}function w(i,_){if(1&i){const m=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(m);const u=e.oxw(2);return e.KtG(u.dismissModel())}),e._uU(2," Save & Close "),e.qZA()()}}const A=function(){return["create"]};function x(i,_){if(1&i&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,M,1,0,"hr",30),e.qZA()(),e.YNc(4,w,3,0,"div",31),e.BQk()),2&i){const m=e.oxw();e.xp6(3),e.Q6J("ngIf",e.DdM(2,A).includes(m.action)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,A).includes(m.action))}}function K(i,_){1&i&&e._UZ(0,"hr",32)}function y(i,_){if(1&i){const m=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(m);const u=e.oxw(2);return e.KtG(u.dismissModel())}),e._uU(2," Save & Close "),e.qZA()()}}const T=function(){return["view"]};function f(i,_){if(1&i&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,K,1,0,"hr",30),e.qZA()(),e.YNc(4,y,3,0,"div",31),e.BQk()),2&i){const m=e.oxw();e.xp6(3),e.Q6J("ngIf",!e.DdM(2,T).includes(m.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(3,T).includes(m.action))}}const p=function(i,_,m,c){return{page:i,pageSize:_,collection:m,search:c,excelDisplay:"none"}};let h=(()=>{var i;class _{constructor(c){this.activeModal=c,this.action="edit",this.HSNValue="",this.HSNCode="",this.editScreen="",this.HSNCodeArr=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.HSNSelect=null,this.HSNSelectCode=null}ngOnInit(){(this.HSNValue||this.HSNCode)&&(this.HSNSelect=this.HSNValue,this.HSNSelectCode=this.HSNCode,this.HSNCodeArr=this.HSNCodeArr.map(c=>(c.select=!1,c.value==this.HSNCode&&(c.select=!0),c))),this.collection=this.HSNCodeArr.length}setSelectData(c){this.HSNSelect=c?._id,this.HSNSelectCode=c?.value}dismissModel(){let c={};c.HSNSelect=this.HSNSelect,c.HSNSelectCode=this.HSNSelectCode,this.activeModal.close(c)}eventHeader(c){switch(c.key){case"SEARCH":this.search=c.value;break;case"EXCEL":default:break;case"PAGE":this.page=c.value}}onSort({column:c,direction:u}){this.headers.forEach(v=>{v.sortable!==c&&(v.direction="")}),this.HSNCodeArr=""===u||""===c?this.HSNCodeArr:[...this.HSNCodeArr].sort((v,C)=>{let P="string"==typeof v[c]?v[c].toLowerCase():v[c],J="string"==typeof C[c]?C[c].toLowerCase():C[c];const q=P<J?-1:P>J?1:0;return"asc"===u?q:-q})}}return(i=_).\u0275fac=function(c){return new(c||i)(e.Y36(I.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ink-hsn-modal"]],viewQuery:function(c,u){if(1&c&&e.Gf(S.j,5),2&c){let v;e.iGM(v=e.CRH())&&(u.headers=v)}},inputs:{action:"action",HSNValue:"HSNValue",HSNCode:"HSNCode",editScreen:"editScreen",HSNCodeArr:"HSNCodeArr"},decls:37,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","value",3,"sort"],["sortable","goodsDescription",1,"text-start",3,"sort"],["sortable","gstRate",3,"sort"],["sortable","igstRate",3,"sort"],["sortable","cgstRate",3,"sort"],["sortable","sgstRate",3,"sort"],["sortable","UOM",3,"sort"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-start"],["goodsDescription",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(c,u){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"HSN Master"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return u.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(C){return u.eventHeader(C)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th",15),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(18,"HSN Code"),e.qZA(),e.TgZ(19,"th",16),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(20," Description of Goods "),e.qZA(),e.TgZ(21,"th",17),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(22,"GST Rate %"),e.qZA(),e.TgZ(23,"th",18),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(24,"IGST Rate %"),e.qZA(),e.TgZ(25,"th",19),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(26,"CGST Rate %"),e.qZA(),e.TgZ(27,"th",20),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(28,"SGST Rate %"),e.qZA(),e.TgZ(29,"th",21),e.NdJ("sort",function(C){return u.onSort(C)}),e._uU(30,"Select"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,U,17,13,"tr",22),e.ALo(33,"slice"),e.ALo(34,"searchFi1ter"),e.qZA()()()()(),e.YNc(35,x,5,4,"ng-container",23),e.YNc(36,f,5,4,"ng-container",23),e.qZA()()()),2&c&&(e.xp6(12),e.Q6J("data",e.l5B(11,p,u.page,u.pageSize,u.collection,u.search)),e.xp6(20),e.Q6J("ngForOf",e.Dn7(33,4,e.xi3(34,8,u.HSNCodeArr,u.search),(u.page-1)*u.pageSize,(u.page-1)*u.pageSize+u.pageSize)),e.xp6(3),e.Q6J("ngIf","Edit Screen"!=u.editScreen),e.xp6(1),e.Q6J("ngIf","Edit Screen"==u.editScreen))},dependencies:[Z.sg,Z.O5,N.P,I._L,S.j,Z.OU,t.G],encapsulation:2}),_})()},6244:(H,k,d)=>{d.d(k,{Z:()=>K});var S=d(43818),e=d(65879),I=d(37285),Z=d(96814),N=d(88059),t=d(95346);const U=function(){return["view","edit"]};function M(y,T){if(1&y){const f=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",24)(8,"span",25),e._uU(9),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"input",26),e.NdJ("change",function(){const i=e.CHM(f).$implicit,_=e.oxw();return e.KtG(_.setSelectData(i))}),e.qZA()()()}if(2&y){const f=T.$implicit,p=T.index,h=e.oxw();e.xp6(2),e.Oqu(1+p+(h.page-1)*h.pageSize),e.xp6(2),e.Oqu(null==f?null:f.productNumber),e.xp6(2),e.Oqu(null==f?null:f.productCode),e.xp6(2),e.Q6J("ngbTooltip",null==f?null:f.label),e.xp6(1),e.hij(" ",null!=f&&f.label?null==f?null:f.label:null," "),e.xp6(2),e.Oqu(null==f?null:f.application),e.xp6(2),e.MGl("name","formValue",h.productCategoryList[p],""),e.Q6J("disabled",e.DdM(9,U).includes(h.action))("checked",f.select)}}function w(y,T){1&y&&e._UZ(0,"hr",27)}function A(y,T){if(1&y){const f=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){e.CHM(f);const h=e.oxw();return e.KtG(h.dismissModel())}),e._uU(2,"Save & Close"),e.qZA()()}}const x=function(y,T,f,p){return{page:y,pageSize:T,collection:f,search:p,excelDisplay:"none"}};let K=(()=>{var y;class T{constructor(p){this.activeModal=p,this.action="edit",this.productCategory="",this.productCategoryList=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedProductCategory=null}ngOnInit(){this.productCategory&&(this.selectedProductCategory=this.productCategory,this.productCategoryList=this.productCategoryList.map(p=>(p.select=!1,p.value==this.productCategory&&(p.select=!0),p))),this.collection=this.productCategoryList.length}setSelectData(p){this.selectedProductCategory=p?.value}dismissModel(){let p={};p.selectedProductCategory=this.selectedProductCategory,this.activeModal.close(p)}eventHeader(p){switch(p.key){case"SEARCH":this.search=p.value;break;case"EXCEL":default:break;case"PAGE":this.page=p.value}}onSort({column:p,direction:h}){this.headers.forEach(i=>{i.sortable!==p&&(i.direction="")}),this.productCategoryList=""===h||""===p?this.productCategoryList:[...this.productCategoryList].sort((i,_)=>{let m="string"==typeof i[p]?i[p].toLowerCase():i[p],c="string"==typeof _[p]?_[p].toLowerCase():_[p];const u=m<c?-1:m>c?1:0;return"asc"===h?u:-u})}}return(y=T).\u0275fac=function(p){return new(p||y)(e.Y36(I.Kz))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-product-category-modal"]],viewQuery:function(p,h){if(1&p&&e.Gf(S.j,5),2&p){let i;e.iGM(i=e.CRH())&&(h.headers=i)}},inputs:{action:"action",productCategory:"productCategory",productCategoryList:"productCategoryList"},decls:37,vars:18,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUCategoryName",3,"sort"],["sortable","productCode",3,"sort"],["sortable","displayProductCategoryName",1,"text-start",3,"sort"],["sortable","application",3,"sort"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","px-0","mb-3"],["class","line-border",4,"ngIf"],["class","text-center mb-2",4,"ngIf"],[1,"text-start"],["placement","right",1,"pointer",3,"ngbTooltip"],["type","radio",1,"form-check-input","pointer",3,"disabled","name","checked","change"],[1,"line-border"],[1,"text-center","mb-2"],["type","button",1,"btn","bg-primary","px-5","mb-4",3,"click"]],template:function(p,h){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Product Category"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return h.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(_){return h.eventHeader(_)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14)(17,"th"),e._uU(18,"Sr. No."),e.qZA(),e.TgZ(19,"th",15),e.NdJ("sort",function(_){return h.onSort(_)}),e._uU(20,"Product No."),e.qZA(),e.TgZ(21,"th",16),e.NdJ("sort",function(_){return h.onSort(_)}),e._uU(22,"Product Code"),e.qZA(),e.TgZ(23,"th",17),e.NdJ("sort",function(_){return h.onSort(_)}),e._uU(24," Display Name "),e.qZA(),e.TgZ(25,"th",18),e.NdJ("sort",function(_){return h.onSort(_)}),e._uU(26,"Application"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Select"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,M,14,10,"tr",19),e.ALo(31,"slice"),e.ALo(32,"searchFi1ter"),e.qZA()()()()(),e.TgZ(33,"div",20)(34,"div",21),e.YNc(35,w,1,0,"hr",22),e.qZA()(),e.YNc(36,A,3,0,"div",23),e.qZA()()()),2&p&&(e.xp6(12),e.Q6J("data",e.l5B(11,x,h.page,h.pageSize,h.collection,h.search)),e.xp6(18),e.Q6J("ngForOf",e.Dn7(31,4,e.xi3(32,8,h.productCategoryList,h.search),(h.page-1)*h.pageSize,(h.page-1)*h.pageSize+h.pageSize)),e.xp6(5),e.Q6J("ngIf",!e.DdM(16,U).includes(h.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(17,U).includes(h.action)))},dependencies:[Z.sg,Z.O5,N.P,I._L,S.j,Z.OU,t.G],encapsulation:2}),T})()},59051:(H,k,d)=>{d.r(k),d.d(k,{SKUModule:()=>rt});var S=d(96814),e=d(1076),I=d(43818),Z=d(25116),N=d(66558),t=d(65879),U=d(98977),M=d(59840),w=d(88059),A=d(37285),x=d(53421),K=d(14906);function y(l,g){1&l&&t._UZ(0,"div",36)}function T(l,g){1&l&&t._UZ(0,"div",37)}function f(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",22,23)(5,"span",24),t._uU(6),t.qZA()(),t.TgZ(7,"td",22,15)(9,"span",24),t._uU(10),t.qZA()(),t.TgZ(11,"td",22,25)(13,"span",24),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td")(22,"span",26),t.YNc(23,y,1,0,"div",27),t.YNc(24,T,1,0,"div",28),t.qZA()(),t.TgZ(25,"td")(26,"div",29),t._UZ(27,"button",30),t.TgZ(28,"div",31)(29,"a",32),t.NdJ("click",function(){const a=t.CHM(s).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",a,"view"))}),t._UZ(30,"i",33),t._uU(31," View "),t.qZA(),t.TgZ(32,"a",32),t.NdJ("click",function(){const a=t.CHM(s).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",a,"edit"))}),t._UZ(33,"i",34),t._uU(34," Edit "),t.qZA(),t.TgZ(35,"a",32),t.NdJ("click",function(){const a=t.CHM(s).$implicit,r=t.oxw();return t.KtG(r.navigateTo("../form",a,"copy"))}),t._UZ(36,"i",35),t._uU(37," Copy "),t.qZA()()()()()}if(2&l){const s=g.$implicit,o=t.MAs(4),n=t.MAs(8),a=t.MAs(12),r=t.oxw();t.xp6(2),t.Oqu(null==s?null:s.SKUNo),t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",s.SKUName),t.xp6(1),t.hij(" ",s.SKUName," "),t.xp6(1),t.Udp("width",n.clientWidth),t.xp6(2),t.Q6J("positionTarget",n)("ngbTooltip",s.SKUDescription),t.xp6(1),t.hij(" ",s.SKUDescription," "),t.xp6(1),t.Udp("width",a.clientWidth),t.xp6(2),t.Q6J("positionTarget",a)("ngbTooltip",s.productCategory),t.xp6(1),t.hij(" ",s.productCategory," "),t.xp6(2),t.Oqu(null==s?null:s.hsn),t.xp6(2),t.Oqu(null==s?null:s.primaryUnit),t.xp6(2),t.Oqu(s.SKUStage),t.xp6(3),t.Q6J("ngIf","A"==s.isActive),t.xp6(1),t.Q6J("ngIf","I"==s.isActive),t.xp6(5),t.Q6J("accessType",r.rolePermissionActions.viewAction),t.xp6(3),t.Q6J("accessType",r.rolePermissionActions.editAction),t.xp6(3),t.ekj("disable","I"==s.isActive),t.Q6J("accessType",r.rolePermissionActions.editAction)}}const p=function(l,g,s,o){return{page:l,pageSize:g,collection:s,search:o,type:"list"}};let h=(()=>{var l;class g{constructor(o,n,a,r,b,D){this.exportExcelService=o,this.SKUServices=n,this.router=a,this.spinner=r,this.activatedRoute=b,this.exportToPDFService=D,this.page=1,this.pageSize=8,this.collection=0,this.column="SKUNo",this.direction=-1,this.search="",this.tableData=[],this.originTableData=[],this.imgIcon=!1,this.rolePermissionActions=Z.a1}ngOnInit(){this.page=Number(this.activatedRoute.snapshot.queryParamMap.get("page")??1),this.getAll()}navigateTo(o,n,a){if("I"==n.isActive&&"copy"==a)return null;this.router.navigate([o],{relativeTo:this.activatedRoute,queryParams:{id:n?._id,action:a}})}trackByFn(o,n){return n?._id}eventHeader(o){switch(o.key){case"SEARCH":this.search=o.value,this.getAll();break;case"PDF":this.getAll(!0,"PDF");break;case"EXCEL":this.getAll(!0,"EXCEL");break;case"PAGE":this.page=o.value,this.getAll()}}getAll(o=!1,n=""){this.spinner.show();let a={page:this.page,pageSize:this.pageSize,search:this.search,column:this.column,direction:this.direction,excel:o};this.subscription&&this.subscription.unsubscribe(),this.subscription=this.SKUServices.getAll(a).subscribe(r=>{"EXCEL"==n?this.excelDownload(r.rows):"PDF"==n?this.pdfDownload(r.rows):(this.tableData=r.rows,this.collection=r.count,this.spinner.hide())})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}pdfDownload(o){let n=(0,N.p9)(o);this.exportToPDFService.generatePdf(n.tableData,n.title)}excelDownload(o){this.exportExcelService.exportExcel((0,N.JL)(o))}onSort({column:o,direction:n}){this.headers.forEach(a=>{a.sortable!==o&&(a.direction="")}),this.column=o,this.direction="asc"==n?1:-1,this.getAll()}}return(l=g).\u0275fac=function(o){return new(o||l)(t.Y36(U.Ol),t.Y36(M.cG),t.Y36(e.F0),t.Y36(U.V),t.Y36(e.gz),t.Y36(U.$L))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-list"]],viewQuery:function(o,n){if(1&o&&t.Gf(I.j,5),2&o){let a;t.iGM(a=t.CRH())&&(n.headers=a)}},decls:37,vars:17,consts:[[1,"listCard","card"],[1,"table-header"],[1,"heading"],["appAccessControl","",1,"text-center",3,"accessType"],[1,"plusIconSvg","btn","btn-primary","me-1"],["type","button",1,"btn","btn-primary","btn-add","px-5",3,"click"],[1,"line-border"],[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered"],[1,"bg-primary"],[1,"text-white"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["SKUDescription",""],["sortable","productCategory",1,"text-start",3,"sort"],["sortable","hsn",3,"sort"],["sortable","primaryUnit",3,"sort"],["sortable","SKUStage",3,"sort"],["sortable","isActive",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],["SKUName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["productCategory",""],[1,"d-flex","justify-content-center"],["class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["appAccessControl","","href","javascript:void(0)",3,"accessType","click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-clone","fa-lg","me-2","text-primary"],[1,"statusActive"],[1,"statusInActive"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"SKU Summary"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"button",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.navigateTo("../form",{},"create")}),t._uU(7," SKU "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"div",7)(10,"app-setting-header",8),t.NdJ("dataChange",function(r){return n.eventHeader(r)}),t.qZA(),t.TgZ(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th",12),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(15,"SKU No."),t.qZA(),t.TgZ(16,"th",13),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(17),t.ALo(18,"labelTranslate"),t.qZA(),t.TgZ(19,"th",14,15),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(21),t.ALo(22,"labelTranslate"),t.qZA(),t.TgZ(23,"th",16),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(24,"Product"),t.qZA(),t.TgZ(25,"th",17),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(26,"HSN Code"),t.qZA(),t.TgZ(27,"th",18),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(28,"UoM"),t.qZA(),t.TgZ(29,"th",19),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(30,"Stage"),t.qZA(),t.TgZ(31,"th",20),t.NdJ("sort",function(r){return n.onSort(r)}),t._uU(32,"Status"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,f,38,26,"tr",21),t.qZA()()()()),2&o){const a=t.MAs(20);t.xp6(4),t.Q6J("accessType",n.rolePermissionActions.createAction),t.xp6(6),t.Q6J("data",t.l5B(12,p,n.page,n.pageSize,n.collection,n.search)),t.xp6(7),t.hij(" ",t.lcZ(18,8,"SKU Name")," "),t.xp6(2),t.Udp("width",a.clientWidth),t.xp6(2),t.hij(" ",t.lcZ(22,10,"SKU Description")," "),t.xp6(15),t.Q6J("ngForOf",n.tableData)("ngForTrackBy",n.trackByFn)}},dependencies:[S.sg,S.O5,w.P,A._L,I.j,x.J,K.c],encapsulation:2}),g})();var i=d(60095),_=d(21631),m=d(22096),c=d(77609),u=d(4092),v=d(82108),C=d(9202),P=d(6244);const J=[{value:"productMasterNo",label:"Product Code",class:"text-start"},{value:"productCategory",label:"Product Category",class:"text-start"},{value:"shoulderType",label:"Shoulder",class:""},{value:"capDia",label:"Diameter mm",class:""},{value:"capHeight",label:"Height mm",class:""},{value:"capFinish",label:"Finish",class:""},{value:"threadType",label:"Thread",class:""},{value:"orifice",label:"Orifice mm",class:""},{value:"weight",label:"Weight g",class:""}];var q=d(16897),O=d(50363),L=d(95346);function F(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"tr")(1,"td",33,39)(3,"span",40),t._uU(4),t.qZA()(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",41),t._UZ(15,"button",42),t.TgZ(16,"div",43)(17,"a",44),t.NdJ("click",function(){const n=t.CHM(s),a=n.$implicit,r=n.index,b=t.oxw();return t.KtG(b.patchItem(a,r,"view"))}),t._UZ(18,"i",45),t._uU(19," View "),t.qZA(),t.TgZ(20,"a",44),t.NdJ("click",function(){const n=t.CHM(s),a=n.$implicit,r=n.index,b=t.oxw();return t.KtG(b.patchItem(a,r,"edit"))}),t._UZ(21,"i",46),t._uU(22," Edit "),t.qZA(),t.TgZ(23,"a",44),t.NdJ("click",function(){const a=t.CHM(s).index,r=t.oxw();return t.KtG(r.deleteItem(a))}),t._UZ(24,"i",47),t._uU(25," Delete "),t.qZA()()()()()}if(2&l){const s=g.$implicit,o=t.MAs(2),n=t.oxw();t.xp6(1),t.Udp("width",o.clientWidth),t.xp6(2),t.Q6J("positionTarget",o)("ngbTooltip",s.customerName),t.xp6(1),t.hij(" ",null==s?null:s.customerName," "),t.xp6(2),t.Oqu(null==s?null:s.customerPartDescription),t.xp6(2),t.Oqu(null==s?null:s.customerPartNo),t.xp6(2),t.Oqu(null==s?null:s.customerCurrency),t.xp6(2),t.Oqu(null==s?null:s.standardSellingRate),t.xp6(11),t.ekj("disable","view"==n.action)}}const E=function(l,g,s,o){return{page:l,pageSize:g,collection:s,search:o,excelDisplay:"none"}};let j=(()=>{var l;class g{constructor(o,n,a,r){this.activeModal=o,this.validationService=n,this.toastService=a,this.modalService=r,this.action="",this.customerInfoArray=[],this.cusInfo=[],this.btnDisable=!1,this.page=1,this.pageSize=6,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedCustomerDetails={},this.form=new i.nJ({index:new i.p4(-1),customerName:new i.p4(null,[i.kI.required]),customer:new i.p4(null),customerPartDescription:new i.p4(null,[i.kI.required]),customerPartNo:new i.p4(null,[i.kI.required]),customerCurrency:new i.p4(null),standardSellingRate:new i.p4(null)}),this.findFormErrors=[{message:"Customer Name",key:"customerName"},{message:"Customer Part Description.",key:"customerPartDescription"},{message:"Customer Part No.",key:"customerPartNo"}]}ngOnInit(){this.collection=this.customerInfoArray.length}eventHeader(o){switch(o.key){case"SEARCH":this.search=o.value;break;case"EXCEL":default:break;case"PAGE":this.page=o.value}}addCustomer(){if(this.validationService.checkErrors(this.form,this.findFormErrors))return;let o=this.form.value;o.standardSellingRate?((o.index||0==o.index)&&o.index>=0?this.customerInfoArray.splice(o.index,1,o):this.customerInfoArray.push(o),this.collection=this.customerInfoArray.length,this.selectedCustomerDetails={},this.form.reset()):this.toastService.warning("Rate/U1 is required !")}patchItem(o,n,a){o.index=n,this.form.patchValue(o),"view"==a?(this.btnDisable=!0,this.form.disable()):(this.form.enable(),this.btnDisable=!1)}deleteItem(o){"view"!=this.action&&(this.customerInfoArray.splice(o+(this.page-1)*this.pageSize,1),this.collection=this.customerInfoArray.length)}setSupplierCurrency(o){o.currency&&this.form.controls.customerCurrency.setValue(o?.currency),o.label&&this.form.controls.customerName.setValue(o?.label)}openCustomersDetailsModal(){const o=this.modalService.open(c.e7,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});o.componentInstance.action="edit"==this.action?"create":this.action,o.componentInstance.selectedCustomerDetails=this.selectedCustomerDetails,o.componentInstance.customerOptions=this.cusInfo,o.componentInstance.customer=this.form.controls.customer.value,o.result.then(n=>{n&&(this.selectedCustomerDetails=n?.selectedCustomerDetails,this.form.controls.customer.setValue(n?.selectedCustomerDetails?._id),this.setSupplierCurrency(this.selectedCustomerDetails))},n=>{})}}return(l=g).\u0275fac=function(o){return new(o||l)(t.Y36(A.Kz),t.Y36(q.RJ),t.Y36(U.kl),t.Y36(A.FF))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-customer-injection-molding"]],inputs:{action:"action",customerInfoArray:"customerInfoArray",cusInfo:"cusInfo"},decls:77,vars:19,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[3,"formGroup"],[1,"row","mb-4","px-5","mt-4"],[1,"col-3","pe-5"],[1,"form-label","mb-1"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","customer",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto","fs-4",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"col-md-3"],["type","text","formControlName","customerPartDescription",1,"form-control"],["type","text","formControlName","customerPartNo",1,"form-control"],[1,"row"],[1,"col-4","pe-0"],["type","text","formControlName","customerCurrency","readonly","",1,"form-control"],[1,"col-5","ps-2","pe-0"],["type","text","formControlName","standardSellingRate",1,"form-control"],[1,"col-2","d-flex","align-items-end"],["type","button",1,"plusIconSvg","btn","btn-primary",3,"disabled","click"],[1,"line-border","mt-4","px-0","mb-0"],[1,"px-5"],[3,"data","dataChange"],[1,"table-responsive","mt-0","px-5",2,"min-height","23.5rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"line-border","mt-3","px-5"],[1,"col"],[1,"text-center","mt-3","mb-4"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],["customerName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["href","javascript:void(0)",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg","me-2","text-primary"],["aria-hidden","true",1,"fa","fa-trash","me-2","text-primary"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Add Customers"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return n.activeModal.close(n.customerInfoArray)}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),t._uU(12,"Customer Name "),t.TgZ(13,"span",10),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"ng-select",13),t.NdJ("change",function(r){return n.setSupplierCurrency(r)}),t.qZA()(),t.TgZ(18,"div",14),t.NdJ("click",function(){return n.openCustomersDetailsModal()}),t._UZ(19,"i",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"label",9),t._uU(22," Customer Part Description "),t.TgZ(23,"span",10),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",17),t.qZA(),t.TgZ(26,"div",16)(27,"label",9),t._uU(28," Customer Part No. "),t.TgZ(29,"span",10),t._uU(30,"*"),t.qZA()(),t._UZ(31,"input",18),t.qZA(),t.TgZ(32,"div",16)(33,"div",19)(34,"div",20)(35,"label",9),t._uU(36," Ccy "),t.TgZ(37,"span",10),t._uU(38,"*"),t.qZA()(),t._UZ(39,"input",21),t.qZA(),t.TgZ(40,"div",22)(41,"label",9),t._uU(42," Rate/U1 "),t.TgZ(43,"span",10),t._uU(44,"*"),t.qZA()(),t._UZ(45,"input",23),t.qZA(),t.TgZ(46,"div",24)(47,"button",25),t.NdJ("click",function(){return n.addCustomer()}),t.qZA()()()()()(),t._UZ(48,"hr",26),t.TgZ(49,"div",27)(50,"app-setting-header",28),t.NdJ("dataChange",function(r){return n.eventHeader(r)}),t.qZA()(),t.TgZ(51,"div",29)(52,"table",30)(53,"thead",31)(54,"tr",32)(55,"th",33),t._uU(56,"Customer Name"),t.qZA(),t.TgZ(57,"th",33),t._uU(58,"Customer Part Description"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Customer Part No."),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Ccy"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Rate/U1"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Action"),t.qZA()()(),t.TgZ(67,"tbody"),t.YNc(68,F,26,11,"tr",34),t.ALo(69,"slice"),t.ALo(70,"searchFi1ter"),t.qZA()()(),t._UZ(71,"hr",35),t.TgZ(72,"div",19)(73,"div",36)(74,"div",37)(75,"button",38),t.NdJ("click",function(){return n.activeModal.close(n.customerInfoArray)}),t._uU(76," Save & Close "),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(9),t.Q6J("items",n.cusInfo)("clearable",!1),t.xp6(30),t.Q6J("disabled",n.btnDisable||"view"==n.action),t.xp6(3),t.Q6J("data",t.l5B(14,E,n.page,n.pageSize,n.collection,n.search)),t.xp6(18),t.Q6J("ngForOf",t.Dn7(69,7,t.xi3(70,11,n.customerInfoArray,n.search),(n.page-1)*n.pageSize,(n.page-1)*n.pageSize+n.pageSize)),t.xp6(7),t.Q6J("disabled",n.btnDisable||"view"==n.action))},dependencies:[S.sg,w.P,A._L,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,O.w9,S.OU,L.G],encapsulation:2}),g})();function Q(l,g){if(1&l&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&l){const s=g.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}function R(l,g){1&l&&(t.TgZ(0,"div",6)(1,"label",7),t._uU(2),t.ALo(3,"labelTranslate"),t.TgZ(4,"span",8),t._uU(5,"*"),t.qZA()(),t._UZ(6,"input",53),t.qZA()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SKU Name"),""))}function Y(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"div",12)(1,"label",7),t._uU(2," SKU Name/Product Code "),t.TgZ(3,"span",8),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"div",13)(6,"div",14),t._UZ(7,"input",53),t.qZA(),t.TgZ(8,"div",16),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.openSKUNameModal())}),t._UZ(9,"i",17),t.qZA()()()}}function V(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"label",54),t._uU(1," Unit of Measurement"),t.TgZ(2,"span",8),t._uU(3,"*"),t.qZA(),t._UZ(4,"span")(5,"span")(6,"span")(7,"span")(8,"span"),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.openUOMDetailsModal())}),t._uU(10," Dual Units "),t.qZA()()}}function z(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"label",54),t._uU(1," Primary UoM (U1)"),t.TgZ(2,"span",8),t._uU(3,"*"),t.qZA(),t._UZ(4,"span")(5,"span")(6,"span")(7,"span")(8,"span"),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.openUOMDetailsModal())}),t._uU(10," Dual Units "),t.qZA()()}}function G(l,g){if(1&l&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&l){const s=g.$implicit;t.Q6J("value",s.value),t.xp6(1),t.hij(" ",null==s?null:s.label," ")}}function W(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.openCustomerDetailsModel())}),t._uU(1," Customers "),t.qZA()}}function B(l,g){if(1&l){const s=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.openInjectionMoldingCustomerDetailsModel())}),t._uU(1," Customers "),t.qZA()}}function X(l,g){1&l&&t._UZ(0,"div",57)}function $(l,g){1&l&&t._UZ(0,"div",58)}function tt(l,g){1&l&&(t.TgZ(0,"div",59)(1,"div",13)(2,"div",39)(3,"button",40),t._uU(4,"Remarks"),t.qZA()(),t._UZ(5,"input",60),t.qZA()())}let et=(()=>{var l;class g{get f(){return this.form.controls}get addressPermanent(){return this.form.get("empPermanentAddress")}get addressPresent(){return this.form.get("empPresentAddress")}get dimensionsDetailsData(){return this.form.get("dimensionsDetails")}get bomDimData(){return this.form.get("BOMDimensionInfo")}get offTakeData(){return this.form.get("offTakeInfo")}get toolInfoData(){return this.form.get("toolInfo")}get specsAttributeData(){return this.form.get("specsAttribute")}get mouldsIDAttributeData(){return this.form.get("mouldsIDAttribute")}get packingStdAttributeData(){return this.form.get("packingStdAttribute")}constructor(o,n,a,r,b,D,st,lt){this.skuService=o,this.activatedRoute=n,this.spinner=a,this.toastService=r,this.validationService=b,this.modalService=D,this.utilityService=st,this.location=lt,this.unsavedChanges=!1,this.active=1,this.submitted=!1,this.action="create",this.tableData=[],this.mouldData=[],this.customerInfoArray=[],this.photoFile=null,this.companyTypeInjectionMolding=Z.x3,this.SKUCategoryValues={},this.selectedDetails={},this.tableHead=J,this.SKUStageObj=Z.mR,this.SKUStageArr=this.SKUStageObj.getAllSKUStage(),this.masterData={companyType:"",attributesList:[],customersOptions:[],productCategoryOptions:[],UOMOptions:[],materialList:[],inkList:[],hsnCodesOptions:[],mapHSNCategoryList:[],WXLDimensionsUnit:[],mouldInfo:[],shoulderTypeOptions:[]},this.form=new i.nJ({_id:new i.p4(null),SKUStage:new i.p4(null,[i.kI.required]),productCategory:new i.p4(null,[i.kI.required]),SKUNo:new i.p4(null,[i.kI.required]),productCode:new i.p4(null),SKUName:new i.p4(null,[i.kI.required]),SKUDescription:new i.p4(null,[i.kI.required]),hsn:new i.p4(null,[i.kI.required]),primaryUnit:new i.p4(null,[i.kI.required]),secondaryUnit:new i.p4(null),primaryConversion:new i.p4(1),secondaryConversion:new i.p4(1),conversionFactor:new i.p4(null),unitConversionFlag:new i.p4(1),primaryToSecondaryConversion:new i.p4(null),secondaryToPrimaryConversion:new i.p4(null),locationId:new i.p4(null),locationName:new i.p4(null),internalPartNo:new i.p4(null),artWorkNo:new i.p4(null),artWorkHyperLink:new i.p4(null),shelfLife:new i.p4(null),storageTemp:new i.p4(null),storageHumidity:new i.p4(null),specialStorageInstruction:new i.p4(null),generalSpecifications:new i.p4(null),inkDetails:new i.p4([]),specificationInfo:new i.p4([]),totalNoOfColors:new i.p4(null),remarks:new i.p4(null),isActive:new i.p4("A"),customerInfo:new i.p4([]),BOMDimensionInfo:new i.nJ({unit1:new i.p4("mm"),unit2:new i.p4("mm"),width:new i.p4(null),length:new i.p4(null),mSqArea:new i.p4(null)}),dimensionsDetails:new i.nJ({actualDimensions:new i.nJ({unit:new i.p4("mm"),width:new i.p4(null),length:new i.p4(null),ups:new i.p4(1),area:new i.p4(null),mSqArea:new i.p4(null)}),layoutDimensions:new i.nJ({unit:new i.p4("mm"),width:new i.p4(null),length:new i.p4(null),ups:new i.p4(null),area:new i.p4(null),mSqArea:new i.p4(null),wastePercentage:new i.p4(null)})}),offTakeInfo:new i.nJ({annualOffTake:new i.p4(0),offTakeFrequency:new i.p4(0),avgMonthlyOffTake:new i.p4(0),proposedBatchQty:new i.p4(0),processCAQty:new i.p4(0),toolingCAQty:new i.p4(0)}),toolInfo:new i.nJ({tool1Id:new i.p4(null),tool2Id:new i.p4(null),tool3Id:new i.p4(null)}),specsAttribute:new i.nJ({diameter:new i.p4(null),height:new i.p4(null),finish:new i.p4(null),shoulderType:new i.p4(null),threadType:new i.p4(null),orifice:new i.p4(null),weight:new i.p4(null),placeHolder:new i.p4(null)}),mouldsIDAttribute:new i.p4([]),packingStdAttribute:new i.nJ({primaryPacking:new i.p4(null),secondaryPacking:new i.p4(null)}),materialInfo:new i.p4([]),costSheetInfo:new i.p4([])})}ngOnInit(){this.getInitialData(),this.form.valueChanges.subscribe(o=>{this.unsavedChanges=!0})}canDeactivate(){return!this.unsavedChanges||this.openCanDeactivateModal()}openCanDeactivateModal(){return new Promise((o,n)=>{const a=this.modalService.open(c.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});a.componentInstance.action=this.action,a.componentInstance.heading="Warning Message",a.componentInstance.cancelText="Do you want to leave this page without saving data ?",a.result.then(r=>{o("Yes"==r)},r=>{})})}reset(){this.form.reset(),this.getInitialData()}submit(){if(this.submitted=!0,this.form.enable(),this.validationService.checkErrors(this.form,u.Sy))return;if(0==this.customerInfoArray.length)return void this.toastService.warning("Please add atleast one customer detail !");let o=this.form.value;"copy"==this.action&&delete o._id,o.customerInfo=this.customerInfoArray,o.inkDetails=this.masterData?.inkList.filter(a=>a.colSeq>0),o.materialInfo=this.masterData?.materialList.filter(a=>1==a.isSelect).map(a=>(a.ups=this.dimensionsDetailsData?.value?.layoutDimensions?.ups,a));let n=new FormData;n.append("key","Sku");for(let a=0;a<Object.keys(o).length;a++){const r=Object.keys(o)[a];o[r]&&"object"==typeof o[r]?o[r]&&n.append(r,JSON.stringify(o[r])):o[r]&&n.append(r,o[r])}this.unsavedChanges=!1,o._id?this.update(o._id,n):(delete o._id,this.create(n))}create(o){this.spinner.show(),this.skuService.create(o).subscribe(n=>{this.submitted=!1,this.spinner.hide(),this.toastService.success(n.message),this.location.back()})}update(o,n){this.spinner.show(),this.skuService.update(o,n).subscribe(a=>{this.spinner.hide(),this.submitted=!1,this.toastService.success(a.message),this.location.back()})}setAutoIncrementNo(o){this.form.controls.SKUNo.setValue(this.SKUCategoryValues[o.value]),this.masterData?.mapHSNCategoryList.length>0&&this.form.controls.hsn.setValue(this.masterData?.mapHSNCategoryList.find(n=>n.productCategory==o.value)?.HSNCode??null),this.getMouldDataBySKUId(o.value)}getInitialData(){this.spinner.show(),this.skuService.getAllMasterData({}).subscribe(o=>{this.masterData=o,this.form.controls.isActive.setValue("A"),this.form.controls.unitConversionFlag.setValue(1),this.form.controls.primaryConversion.setValue(1),this.form.controls.secondaryConversion.setValue(1),this.SKUCategoryValues=o?.autoIncValues,this.activatedRoute.queryParams.pipe((0,_.z)(n=>(this.action=n.action,this.utilityService.accessDenied(this.action),n.id?this.skuService.getById(n.id):(0,m.of)({})))).subscribe(n=>{if(this.spinner.hide(),0==Object.keys(n).length)return void(this.unsavedChanges=!1);n.customerInfo.length&&(this.customerInfoArray=n.customerInfo.map(b=>(b.PODate&&(b.PODate=this.utilityService.getFormatDate(b.PODate,"YYYY-MM-DD")),b.POValidDate&&(b.POValidDate=this.utilityService.getFormatDate(b.POValidDate,"YYYY-MM-DD")),b))),this.getMouldDataBySKUId(n.productCategory),n.isActive=n.isActive,n.inkDetails=n.inkDetails;let a=this.masterData?.inkList;for(const b of n.inkDetails)a=a.filter(D=>D.itemCode!=b.itemCode),this.masterData.inkList=[...n.inkDetails,...a];n.materialInfo=n.materialInfo;let r=this.masterData?.materialList;for(const b of n.materialInfo)r=r.filter(D=>D.itemCode!=b.itemCode),this.masterData.materialList=[...n.materialInfo,...r];this.form.patchValue(n),this.form.controls.productCategory.disable(),"edit"!=this.action&&this.form.disable(),"copy"==this.action&&(this.form.enable(),this.setAutoIncrementNo({value:n?.productCategory}),delete n._id),this.unsavedChanges=!1})})}openCustomerDetailsModel(){const o=this.modalService.open(c.S9,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});o.componentInstance.action=this.action,o.componentInstance.customerInfoArray=this.customerInfoArray,o.componentInstance.cusInfo=this.masterData?.customersOptions,o.result.then(n=>{["create","edit","copy"].includes(this.action)&&(this.customerInfoArray=n,this.unsavedChanges=!0)},n=>{})}openInjectionMoldingCustomerDetailsModel(){const o=this.modalService.open(j,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});o.componentInstance.action=this.action,o.componentInstance.customerInfoArray=this.customerInfoArray,o.componentInstance.cusInfo=this.masterData?.customersOptions,o.result.then(n=>{["create","edit","copy"].includes(this.action)&&(this.customerInfoArray=n,this.unsavedChanges=!0)},n=>{})}openUOMDetailsModal(){const o=this.modalService.open(c.dQ,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});o.componentInstance.ModalUOMsUnit=this.masterData?.UOMOptions,o.componentInstance.WXLDimensionsUnit=this.masterData?.WXLDimensionsUnit,o.componentInstance.dualUnits={primaryUnit:this.form.value.primaryUnit,secondaryUnit:this.form.value.secondaryUnit,unitConversionFlag:this.form.value.unitConversionFlag,primaryConversion:this.form.value.primaryConversion,secondaryConversion:this.form.value.secondaryConversion,primaryToSecondaryConversion:this.form.value.primaryToSecondaryConversion,secondaryToPrimaryConversion:this.form.value.secondaryToPrimaryConversion},o.result.then(n=>{["create","edit","copy"].includes(this.action)&&(this.form.patchValue(n),this.unsavedChanges=!0)},n=>{})}openAttributesModal(){let o=this.dimensionsDetailsData.value;const n=this.modalService.open(v.n,{centered:!0,size:"xl",backdrop:"static",keyboard:!1,windowClass:"modelPage"});n.componentInstance.action=this.action,n.componentInstance.primaryUnit=this.form.controls.primaryUnit.value,n.componentInstance.storage={storageTemp:this.form.controls.storageTemp.value,storageHumidity:this.form.controls.storageHumidity.value,specialStorageInstruction:this.form.controls.specialStorageInstruction.value},n.componentInstance.dimensionsDetails=this.form.controls.dimensionsDetails.value,n.componentInstance.bomDimData=this.bomDimData.value,n.componentInstance.offTakeData=this.offTakeData.value,n.componentInstance.SKUAttributes=this.masterData?.attributesList.map((a,r)=>(a.order=r+1,a)),n.componentInstance.totalNoOfColors=this.form.controls.totalNoOfColors.value,n.componentInstance.inkDetailsArr=this.masterData?.inkList.sort((a,r)=>a.colSeq+r.colSeq),n.componentInstance.materialInfoArr=this.masterData?.materialList,n.componentInstance.materialSKUUnit=o?.layoutDimensions?.mSqArea,n.componentInstance.drawingArtWork={internalPartNo:this.form.value.internalPartNo,artWorkNo:this.form.value.artWorkNo,artWorkHyperLink:this.form.value.artWorkHyperLink},n.componentInstance.companyType=this.masterData.companyType,n.componentInstance.shoulderTypeOptions=this.masterData.shoulderTypeOptions,n.componentInstance.mouldData=this.mouldData,n.componentInstance.toolInfo=this.toolInfoData.value,n.componentInstance.specsAttribute=this.specsAttributeData.value,n.componentInstance.mouldsIDAttribute=this.mouldsIDAttributeData.value,n.componentInstance.packingStdAttribute=this.packingStdAttributeData.value,n.result.then(a=>{a&&["create","edit","copy"].includes(this.action)&&(this.form.controls.dimensionsDetails.patchValue(a.dimensionsDetails),this.form.controls.BOMDimensionInfo.patchValue(a.bomDimData),this.form.controls.offTakeInfo.patchValue(a.offTakeData),this.form.patchValue(a.genSpecs),this.form.patchValue(a.storage),this.masterData.materialList=a.materialInfoArr,this.masterData.inkList=a.inkDetailsArr,this.f.artWorkNo.setValue(a?.drawingArtWork?.artWorkNo),this.f.internalPartNo.setValue(a?.drawingArtWork?.internalPartNo),this.f.artWorkHyperLink.setValue(a?.drawingArtWork?.artWorkHyperLink),this.toolInfoData.patchValue(a?.toolInfo),this.specsAttributeData.patchValue(a?.specsAttribute),this.mouldsIDAttributeData.patchValue(a?.mouldsIDAttribute),this.packingStdAttributeData.patchValue(a?.packingStdAttribute),this.form.controls.totalNoOfColors.setValue(a.totalNoOfColors),this.unsavedChanges=!0)},a=>{})}openFormulationHSNModal(){const o=this.modalService.open(C.K,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});o.componentInstance.action=this.action,o.componentInstance.HSNCodeArr=this.masterData?.hsnCodesOptions,o.componentInstance.editScreen="Edit Screen",o.componentInstance.HSNCode=this.form.controls.hsn.value,o.result.then(n=>{n&&this.form.controls.hsn.setValue(n?.HSNSelectCode)},n=>{})}openProductCategoryModal(){const o=this.modalService.open(P.Z,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});o.componentInstance.action=this.action,o.componentInstance.productCategoryList=this.masterData?.productCategoryOptions,o.componentInstance.productCategory=this.form.controls.productCategory.value,o.result.then(n=>{n&&(this.form.controls.productCategory.setValue(n?.selectedProductCategory),this.setAutoIncrementNo({value:n?.selectedProductCategory}),this.getMouldDataBySKUId(n?.selectedProductCategory))},n=>{})}openCancelModal(){if("I"!=this.f.isActive.value||this.f.remarks.value)this.submit();else{const o=this.modalService.open(c.er,{centered:!0,size:"md",backdrop:"static",keyboard:!1});o.componentInstance.action="create",o.componentInstance.forNPDReview="NPD Review for Feasibility",o.componentInstance.heading="Inactive SKU Data",o.componentInstance.labelText="Reason to Inactive",o.componentInstance.cancelText="Do you want to Inactive SKU Data ?",o.result.then(n=>{"Yes"==n.title?(this.f.remarks.setValue(n?.reasonToConvert),this.submit()):this.location.back()},n=>{})}}openSKUNameModal(){if(!this.form.controls.productCategory.value)return void this.toastService.warning("Please select Product Category first!");const o=this.modalService.open(c.xv,{centered:!0,windowClass:"modelPage",backdrop:"static",keyboard:!1});o.componentInstance.action="edit"==this.action?"create":this.action,o.componentInstance.title="SKU Name/Product Code",o.componentInstance.selectedDetails=this.selectedDetails,o.componentInstance.tableHead=this.tableHead,o.componentInstance.bodyList=this.masterData?.mouldInfo,o.componentInstance._id=this.form.controls.SKUName.value,console.log("this.masterData?.mouldInfo",this.masterData?.mouldInfo),o.result.then(n=>{n&&(this.selectedDetails=n?.selectedDetails,this.form.controls.SKUName.setValue(n?.selectedDetails?.productMasterNo),this.form.controls.specsAttribute.patchValue({diameter:n?.selectedDetails?.capDia,height:n?.selectedDetails?.capHeight,finish:n?.selectedDetails?.capFinish,shoulderType:n?.selectedDetails?.shoulderType,threadType:n?.selectedDetails?.threadType,orifice:n?.selectedDetails?.orifice,weight:n?.selectedDetails?.weight,placeHolder:n?.selectedDetails?.productMasterNo}),this.form.controls.packingStdAttribute.patchValue({primaryPacking:n?.selectedDetails?.packingStdDetails?.qtyPerPrimaryPack,secondaryPacking:n?.selectedDetails?.packingStdDetails?.qtyPerSecondaryPack}),console.log("success---",n))},n=>{})}getMouldDataBySKUId(o){this.spinner.show(),this.skuService.getMouldDataBySKUId({category:o}).subscribe(n=>{this.mouldData=n.mouldData,this.masterData.mouldInfo=n.mouldInfo,this.spinner.hide()})}}return(l=g).\u0275fac=function(o){return new(o||l)(t.Y36(M.cG),t.Y36(e.gz),t.Y36(U.V),t.Y36(U.kl),t.Y36(q.RJ),t.Y36(A.FF),t.Y36(U.tI),t.Y36(S.Ye))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-sku-form"]],decls:98,vars:25,consts:[[1,"formCard","card",3,"formGroup"],[1,"container"],[1,"row","form-header"],[1,"col","heading"],[1,"form-body"],[1,"row"],[1,"col-3"],[1,"form-label","mb-1"],[1,"text-danger"],["formControlName","SKUStage",1,"form-select"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-3","pe-5"],[1,"d-flex","align-items-center"],[1,"col-11"],["bindLabel","label","bindValue","value","formControlName","productCategory",3,"items","clearable","change"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer","col-auto",2,"height","2.9rem",3,"click"],["aria-hidden","true",1,"fa","fa-search","text-white"],[1,"flex-grow-1"],["bindLabel","hsnCode","bindValue","hsnCode","formControlName","hsn",3,"items","clearable"],["id","basic-addon1",1,"input-group-text","bg-primary","pointer",2,"height","2.9rem",3,"click"],["type","text","formControlName","SKUNo","readonly","",1,"form-control"],[1,"row","mt-5"],["class","col-3",4,"ngIf"],["class","col-3 pe-5",4,"ngIf"],["type","text","formControlName","SKUDescription",1,"form-control"],["class","form-label mb-1 d-flex justify-content-between",4,"ngIf"],["formControlName","primaryUnit",1,"form-select"],["type","number","formControlName","shelfLife",1,"form-control"],[1,"row","line-border","mt-4"],[1,"row","my-4"],[1,"col-4","pe-0"],[1,"plusIconSvg","btn","btn-primary","me-1",3,"disabled"],["type","button",1,"btn","btn-primary","me-5","px-4",3,"disabled","click"],[1,"plusIconSvg","btn","btn-primary","me-1"],["class","btn btn-primary me-4 px-4","type","button",3,"click",4,"ngIf"],[1,"col-5","px-0"],[1,"row","mb-0"],[1,"col-6","ps-0"],[1,"col-md-auto","text-nowrap"],["type","button",1,"btn","btn-primary","px-3"],["formControlName","isActive",1,"form-select","statusSelectBorder"],["selected","","disabled","",3,"value"],["value","A"],["value","I"],[1,"input-group-text","statusSpanHeight"],["class","statusActive","class","statusActive",4,"ngIf"],["class","statusInActive",4,"ngIf"],["class","col-6 pe-0",4,"ngIf"],[1,"col-3","text-end"],["type","button",1,"btn","btn-primary","px-5","me-5",3,"click"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[3,"value"],["type","text","formControlName","SKUName",1,"form-control"],[1,"form-label","mb-1","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","form-btn-sm","py-0",3,"click"],["type","button",1,"btn","btn-primary","me-4","px-4",3,"click"],[1,"statusActive"],[1,"statusInActive"],[1,"col-6","pe-0"],["type","text","formControlName","remarks","readonly","",1,"form-control"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11," SKU Stage"),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",9)(15,"option",10),t._uU(16,"Select SKU Stage"),t.qZA(),t.YNc(17,Q,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",12)(19,"label",7),t._uU(20," Product Category "),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"div",13)(24,"div",14)(25,"ng-select",15),t.NdJ("change",function(r){return n.setAutoIncrementNo(r)}),t.qZA()(),t.TgZ(26,"div",16),t.NdJ("click",function(){return n.openProductCategoryModal()}),t._UZ(27,"i",17),t.qZA()()(),t.TgZ(28,"div",6)(29,"label",7),t._uU(30," HSN Code "),t.TgZ(31,"span",8),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"div",13)(34,"div",18),t._UZ(35,"ng-select",19),t.qZA(),t.TgZ(36,"div",20),t.NdJ("click",function(){return n.openFormulationHSNModal()}),t._UZ(37,"i",17),t.qZA()()(),t.TgZ(38,"div",6)(39,"label",7),t._uU(40," SKU No. "),t.TgZ(41,"span",8),t._uU(42,"*"),t.qZA()(),t._UZ(43,"input",21),t.qZA()(),t.TgZ(44,"div",22),t.YNc(45,R,7,3,"div",23),t.YNc(46,Y,10,0,"div",24),t.TgZ(47,"div",6)(48,"label",7),t._uU(49),t.ALo(50,"labelTranslate"),t.TgZ(51,"span",8),t._uU(52,"*"),t.qZA()(),t._UZ(53,"input",25),t.qZA(),t.TgZ(54,"div",6),t.YNc(55,V,11,0,"label",26),t.YNc(56,z,11,0,"label",26),t.TgZ(57,"select",27)(58,"option",10),t._uU(59,"Select Primary Unit"),t.qZA(),t.YNc(60,G,2,2,"option",11),t.qZA()(),t.TgZ(61,"div",6)(62,"label",7),t._uU(63," Shelf Life (Months) "),t._UZ(64,"span",8),t.qZA(),t._UZ(65,"input",28),t.qZA()()(),t._UZ(66,"hr",29),t.TgZ(67,"div",30)(68,"div",31),t._UZ(69,"button",32),t.TgZ(70,"button",33),t.NdJ("click",function(){return n.openAttributesModal()}),t._uU(71," Attributes "),t.qZA(),t._UZ(72,"button",34),t.YNc(73,W,2,0,"button",35),t.YNc(74,B,2,0,"button",35),t.qZA(),t.TgZ(75,"div",36)(76,"div",37)(77,"div",38)(78,"div",13)(79,"div",39)(80,"button",40),t._uU(81,"Status"),t.qZA()(),t.TgZ(82,"select",41)(83,"option",42),t._uU(84,"Select Status"),t.qZA(),t.TgZ(85,"option",43),t._uU(86,"Active"),t.qZA(),t.TgZ(87,"option",44),t._uU(88,"Inactive"),t.qZA()(),t.TgZ(89,"span",45),t.YNc(90,X,1,0,"div",46),t.YNc(91,$,1,0,"div",47),t.qZA()()(),t.YNc(92,tt,6,0,"div",48),t.qZA()(),t.TgZ(93,"div",49)(94,"button",50),t.NdJ("click",function(){return n.reset()}),t._uU(95,"Reset"),t.qZA(),t.TgZ(96,"button",51),t.NdJ("click",function(){return n.openCancelModal()}),t._uU(97,"Save"),t.qZA()()()()()),2&o&&(t.Q6J("formGroup",n.form),t.xp6(5),t.hij("SKU (",t.lcZ(6,21,n.action),")"),t.xp6(12),t.Q6J("ngForOf",n.SKUStageArr),t.xp6(8),t.Q6J("items",n.masterData.productCategoryOptions)("clearable",!1),t.xp6(10),t.Q6J("items",n.masterData.hsnCodesOptions)("clearable",!1),t.xp6(10),t.Q6J("ngIf",n.masterData.companyType!=n.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",n.masterData.companyType==n.companyTypeInjectionMolding),t.xp6(3),t.hij(" ",t.lcZ(50,23,"SKU Description")," "),t.xp6(6),t.Q6J("ngIf",n.masterData.companyType!=n.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",n.masterData.companyType==n.companyTypeInjectionMolding),t.xp6(4),t.Q6J("ngForOf",null==n.masterData?null:n.masterData.UOMOptions),t.xp6(9),t.Q6J("disabled",n.masterData.companyType==n.companyTypeInjectionMolding&&!n.f.productCategory.value&&!n.f.SKUName.value),t.xp6(1),t.Q6J("disabled",n.masterData.companyType==n.companyTypeInjectionMolding&&!n.f.productCategory.value&&!n.f.SKUName.value),t.xp6(3),t.Q6J("ngIf",n.masterData.companyType!=n.companyTypeInjectionMolding),t.xp6(1),t.Q6J("ngIf",n.masterData.companyType==n.companyTypeInjectionMolding),t.xp6(9),t.Q6J("value","null"),t.xp6(7),t.Q6J("ngIf","A"==n.form.value.isActive),t.xp6(1),t.Q6J("ngIf","I"==n.form.value.isActive),t.xp6(1),t.Q6J("ngIf",n.f.remarks.value))},dependencies:[S.sg,S.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.sg,i.u,O.w9,S.rS,K.c],styles:[".fa[_ngcontent-%COMP%]{font-size:1.6rem!important}"]}),g})();var nt=d(56208),ot=d(65876),it=d(19964);const at=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:h},{path:"form",component:et,resolve:{accessScreen:ot.x},canDeactivate:[it.Ox]}];let rt=(()=>{var l;class g{}return(l=g).\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[S.ez,e.Bz.forChild(at),nt.m]}),g})()}}]);