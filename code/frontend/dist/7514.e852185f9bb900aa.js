"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7514],{57514:(Q,h,l)=>{l.r(h),l.d(h,{UploadDataModule:()=>z});var d=l(96814),u=l(1076),g=l(25116),e=l(65879),p=l(99328),C=l(88354);function y(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4),e.NdJ("click",function(){const n=e.CHM(t).$implicit,o=e.oxw();return e.KtG(o.navigateTo(n.url,n.disabled,n.displayName))}),e.TgZ(2,"div",5)(3,"h5",6),e._uU(4),e.qZA()()()()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",t.disabled?"disabled":""),e.xp6(3),e.Oqu(t.displayName)}}let x=(()=>{class i{constructor(t,a,s,n,o,c){this.menuTitleService=t,this.appGlobalService=a,this.subModulesService=s,this.spinner=n,this.storageService=o,this.router=c,this.title="",this.menuItemId="",this.cards={},this.cardsData=[]}ngOnInit(){this.title=this.appGlobalService.moduleName,this.menuItemId=this.appGlobalService.menuItemId,this.getAll()}getAll(){this.spinner.show(),this.subModulesService.getAll({menuID:this.menuItemId,tabType:g.Cv.MASTER}).subscribe(a=>{this.cards=a?.rows.find(o=>"Uploads Master"==o.title),this.cardsData=this.cards.items.sort((o,c)=>o.order-c.order);let s=4-this.cards.items.length;if(s>0)for(var n=0;n<s;n++)this.cards.items.push({displayName:"Place Holder",disabled:!0,url:null});this.menuTitleService.set({title:`${this.cards.displayName}`,subTitle:null,type:null,subModuleId:this.cards._id})}),this.spinner.hide()}navigateTo(t,a,s){let n={title:s,subTitle:null,type:null,subModuleId:this.cards._id};this.storageService.set("menuTitle",n),a||(this.menuTitleService.set(n),this.router.navigate([t]))}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(p.Uh),e.Y36(p.P0),e.Y36(C.M5),e.Y36(p.V),e.Y36(p.V1),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-data"]],decls:3,vars:1,consts:[[1,"container-fluid","tabs-card-page",2,"width","80.5rem"],[1,"row","row-cols-1","row-cols-md-4"],["class","col d-flex justify-content-center",4,"ngFor","ngForOf"],[1,"col","d-flex","justify-content-center"],[1,"card","masterCard",3,"ngClass","click"],[1,"card-body","d-flex","align-content-center"],[1,"card-title","align-self-center"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,y,5,2,"div",2),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("ngForOf",s.cardsData))},dependencies:[d.mk,d.sg],encapsulation:2})}return i})();var _=l(56208),v=l(43818),m=l(97106),f=l(37285),M=l(88059),S=l(95346);function U(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",17),e.NdJ("sort",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onSort(s))}),e._uU(1),e.qZA()}if(2&i){const t=r.$implicit;e.Tol(t.class),e.Q6J("sortable",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function P(i,r){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=r.$implicit,a=e.oxw().$implicit;e.Tol(t.class),e.xp6(1),e.hij(" ",a[t.value]," ")}}function I(i,r){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,P,2,3,"td",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tableHead)}}const A=function(i,r,t,a){return{page:i,pageSize:r,collection:t,search:a}};let O=(()=>{class i{constructor(t,a){this.activeModal=t,this.exportExcelService=a,this.title="",this.type="",this.inValidRecords=[],this.tableHead=[],this.btnDisable=!1,this.page=1,this.pageSize=9,this.collection=0,this.search="",this.column="createdAt",this.direction=-1}ngOnInit(){this.collection=this.inValidRecords.length}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value;break;case"EXCEL":"Supplier"==this.type?this.excelDownloadForSupplier():"Items"==this.type?this.excelDownloadForItem():"Customer"==this.type?this.excelDownloadForCustomer():"InventoryCorrection"==this.type?this.excelDownloadForInventory():"SKUMaster"==this.type&&this.excelDownloadForSKU();break;case"PAGE":this.page=t.value}}excelDownloadForInventory(){this.exportExcelService.exportExcel((0,m.T2)(this.inValidRecords))}excelDownloadForSKU(){this.exportExcelService.exportExcel((0,m.iC)(this.inValidRecords))}excelDownloadForItem(){this.exportExcelService.exportExcel((0,m.yV)(this.inValidRecords))}excelDownloadForCustomer(){this.exportExcelService.exportExcel((0,m.ti)(this.inValidRecords))}excelDownloadForSupplier(){this.exportExcelService.exportExcel((0,m.Nd)(this.inValidRecords))}onSort({column:t,direction:a}){this.headers.forEach(s=>{s.sortable!==t&&(s.direction="")}),this.inValidRecords=""===a||""===t?this.inValidRecords:[...this.inValidRecords].sort((s,n)=>{let o="string"==typeof s[t]?s[t].toLowerCase():s[t],c="string"==typeof n[t]?n[t].toLowerCase():n[t];const b=o<c?-1:o>c?1:0;return"asc"===a?b:-b})}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(f.Kz),e.Y36(p.Ol))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-custom-upload-details"]],viewQuery:function(a,s){if(1&a&&e.Gf(v.j,5),2&a){let n;e.iGM(n=e.CRH())&&(s.headers=n)}},inputs:{title:"title",type:"type",inValidRecords:"inValidRecords",tableHead:"tableHead"},decls:22,vars:16,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,""],[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","px-0","mt-4"],[1,"px-5","mt-0"],[3,"data","dataChange"],[1,"table-responsive","px-5",2,"min-height","33rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[3,"class","sortable","sort",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"sortable","sort"],[3,"class",4,"ngFor","ngForOf"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return s.activeModal.close()}),e._UZ(6,"i",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"app-setting-header",10),e.NdJ("dataChange",function(o){return s.eventHeader(o)}),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"thead",13)(16,"tr",14),e.YNc(17,U,2,4,"th",15),e.qZA()(),e.TgZ(18,"tbody"),e.YNc(19,I,2,1,"tr",16),e.ALo(20,"slice"),e.ALo(21,"searchFi1ter"),e.qZA()()()()()()()()),2&a&&(e.xp6(3),e.Oqu(s.title),e.xp6(9),e.Q6J("data",e.l5B(11,A,s.page,s.pageSize,s.collection,s.search)),e.xp6(5),e.Q6J("ngForOf",s.tableHead),e.xp6(2),e.Q6J("ngForOf",e.Dn7(20,4,e.xi3(21,8,s.inValidRecords,s.search),(s.page-1)*s.pageSize,(s.page-1)*s.pageSize+s.pageSize)))},dependencies:[d.sg,M.P,v.j,d.OU,S.G],encapsulation:2})}return i})();var T=l(77609);const F=[{value:"supplierName",label:"Supplier Name",class:"text-start"},{value:"supplierGST",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],N=[{value:"itemName",label:"Item Name",class:"text-start"},{value:"hsn",label:"HSN Code",class:""},{value:"message",label:"Message",class:"text-start"}],w=[{value:"customerName",label:"Customer Name",class:"text-start"},{value:"GSTIN",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],D=[{value:"supplierCode",label:"Supplier Code",class:""},{value:"itemCode",label:"Item Code",class:""},{value:"message",label:"Message",class:"text-start"}],Z=[{value:"empFirstName",label:"Emp First Name",class:"text-start"},{value:"empLastName",label:"Emp Last Name",class:""},{value:"message",label:"Message",class:"text-start"}],R=[{value:"SKUName",label:"SKU Name",class:"text-start"},{value:"customerName",label:"Customer Name",class:"text-start"},{value:"message",label:"Message",class:"text-start"}],V=[{value:"customerName",label:"Customer Name",class:"text-start"},{value:"GSTIN",label:"GSTIN",class:""},{value:"message",label:"Message",class:"text-start"}],H=[{value:"assetName",label:"Asset Name",class:"text-start"},{value:"assetDescription",label:"Asset Description",class:""},{value:"message",label:"Message",class:"text-start"}],k=[{value:"SKUNo",label:"SKU No.",class:"text-start"},{value:"message",label:"Message",class:"text-start"}],E=[{value:"SKUNo",label:"SKU No.",class:"text-start"},{value:"message",label:"Message",class:"text-start"}];var K=l(74659),G=l(53421);function J(i,r){1&i&&e._UZ(0,"img",27)}function Y(i,r){1&i&&(e.TgZ(0,"div",28)(1,"div",29),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"div",31)(4,"span"),e._uU(5,"Upload Successful"),e.qZA()()())}const j=[{path:"tab_list",component:x},{path:"form/:uploadParameter",component:(()=>{class i{constructor(t,a,s,n,o){this.spinner=t,this.suppliersService=a,this.toastService=s,this.modalService=n,this.activatedRoute=o,this.file=null,this.fileName="",this.fileSuccessUpload=!1,this.dataSuccessUpload=!1,this.approvedFlag=!1,this.rolePermissionActions=g.a1,this.inValidRecords=[],this.validRecords=[],this.tableHead=[],this.type=""}ngOnInit(){this.type=this.activatedRoute.snapshot.paramMap.get("uploadParameter"),"Supplier"==this.type?this.tableHead=F:"Items"==this.type?this.tableHead=N:"Customer"==this.type?this.tableHead=w:"InventoryCorrection"==this.type?this.tableHead=D:"Employee"==this.type?this.tableHead=Z:"SKUMaster"==this.type?this.tableHead=R:"FGIN"==this.type?this.tableHead=V:"Asset"==this.type?this.tableHead=H:"SKUDimensions"==this.type?this.tableHead=k:"SKUMaterial"==this.type&&(this.tableHead=E)}fileChosen(t){if(t.target.value){if(t.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 2MB");this.file=t.target.files[0],this.fileName=this.file.name}}removeFile(){this.fileName="",this.file="",this.inValidRecords=[],this.validRecords=[]}submit(){let t=new FormData;this.file&&"object"==typeof this.file?(t.append("key","excelData"),t.append("collectionName",this.type),t.append("uploadFile",this.file,this.file.name),this.spinner.show(),this.suppliersService.uploadAndCheckCSVFile(t).subscribe(a=>{this.inValidRecords=a?.inValidRecords,this.validRecords=a?.validRecords,this.inValidRecords?.length>0?this.openInvalidSupplierRecordsModal():this.openValidRecordsModal(),this.spinner.hide()})):this.toastService.warning("Please Upload File")}uploadData(){this.spinner.show(),this.suppliersService.bulkInsertByCSVFile({collectionName:this.type,validRecords:this.validRecords}).subscribe(a=>{console.log("success",a),this.toastService.success(a.message),this.removeFile(),this.spinner.hide()})}downloadCSVFormat(){let t="",a="";"Supplier"==this.type?(t="./assets/upload-data-excel-csv/supplier.csv",a="Upload Suppliers"):"Items"==this.type?(t="./assets/upload-data-excel-csv/item.csv",a="Upload Items"):"Customer"==this.type?(t="./assets/upload-data-excel-csv/customer.csv",a="Upload Customer"):"InventoryCorrection"==this.type?(t="./assets/upload-data-excel-csv/inventory.csv",a="Validate Inventory"):"Employee"==this.type?(t="./assets/upload-data-excel-csv/employee.csv",a="Upload Employee"):"SKUMaster"==this.type?(t="./assets/upload-data-excel-csv/SKU.csv",a="Upload SKU Master"):"FGIN"==this.type?(t="./assets/upload-data-excel-csv/FGIN.csv",a="Upload FGIN"):"Asset"==this.type?(t="./assets/upload-data-excel-csv/asset.csv",a="Upload Asset"):"SKUDimensions"==this.type?(t="./assets/upload-data-excel-csv/SKUDimension.csv",a="Upload SKU Dimensions"):"SKUMaterial"==this.type&&(t="./assets/upload-data-excel-csv/SKUMaterial.csv",a="Upload SKU Material");const s=document.createElement("a");s.href=t,s.download=`${a}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}openInvalidSupplierRecordsModal(){const t=this.modalService.open(O,{centered:!0,size:"xl",backdrop:"static",keyboard:!1});t.componentInstance.title=`Invalid ${"InventoryCorrection"==this.type?"Validate Inventory":this.type} Records`,t.componentInstance.type=this.type,t.componentInstance.tableHead=this.tableHead,t.componentInstance.inValidRecords=this.inValidRecords,t.result.then(a=>{},a=>{})}openValidRecordsModal(){const t=this.modalService.open(T.er,{centered:!0,size:"sm",backdrop:"static",keyboard:!1});t.componentInstance.heading="Upload Data",t.componentInstance.cancelText=`Do You Want to Upload ${"InventoryCorrection"==this.type?"Validate Inventory":this.type} Records ?`,t.result.then(a=>{"Yes"==a&&this.uploadData()},a=>{})}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(p.V),e.Y36(K.RA),e.Y36(p.kl),e.Y36(f.FF),e.Y36(u.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-custom-upload-data"]],decls:37,vars:10,consts:[[1,"row","justify-content-center","biometricAttendancePage"],[1,"col-md-8","mt-3"],[3,"ngClass"],[1,"biometricContainer"],[1,"row","my-2","justify-content-center"],[1,"col-md-10","px-5"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["appAccessControl","",1,"align-self-end",3,"accessType"],["type","button",1,"btn","btn-primary","px-4","btn-width",3,"click"],[1,"row","row-box","mb-5"],[1,"col-12","data-box","text-center","blue-text"],[1,"row","mb-5"],[1,"col-md-12"],[1,"d-flex","justify-content-center"],[1,"me-3","align-self-end","align-items-baseline"],["type","button",1,"btn","btn-primary","px-4",3,"click"],["type","file","hidden","","accept",".csv",3,"change"],["fileInput",""],[1,"me-3","w-50"],[1,"text-center"],[1,"text-primary","mb-2"],[1,"d-flex","inputGroup"],["type","text","readonly","",1,"form-control","iBASInput-field",3,"value"],[1,"input-group-text","pe-4",3,"click"],["class","closeIcon","src","../../../../../assets/new_icons/remove_attachment.svg","alt","",4,"ngIf"],["class","row mb-4 row-3",4,"ngIf"],["src","../../../../../assets/new_icons/remove_attachment.svg","alt","",1,"closeIcon"],[1,"row","mb-4","row-3"],[1,"col-auto"],["src","../../../../../assets/new_icons/successful_icon.svg","alt","successImg",1,"successImg"],[1,"col-auto","align-self-center"]],template:function(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){return s.downloadCSVFormat()}),e._uU(11," Download "),e.qZA()()()()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"div",10)(15,"div",11),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"button",16),e.NdJ("click",function(){e.CHM(n);const c=e.MAs(24);return e.KtG(c.click())}),e._uU(22," Select File "),e.qZA(),e.TgZ(23,"input",17,18),e.NdJ("change",function(c){return s.fileChosen(c)}),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"label",21),e._uU(28),e.qZA()(),e.TgZ(29,"div",22),e._UZ(30,"input",23),e.TgZ(31,"span",24),e.NdJ("click",function(){return s.removeFile()}),e.YNc(32,J,1,0,"img",25),e.qZA()()(),e.TgZ(33,"div",8)(34,"button",9),e.NdJ("click",function(){return s.submit()}),e._uU(35," Upload "),e.qZA()()()()(),e.YNc(36,Y,6,0,"div",26),e.qZA()()()()}2&a&&(e.xp6(2),e.Q6J("ngClass",s.fileSuccessUpload?"card activeCard mb-4":"card mb-4"),e.xp6(6),e.hij(" Download ","InventoryCorrection"==s.type?"Validate Inventory":s.type,".csv File Sample Template "),e.xp6(1),e.Q6J("accessType",s.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngClass",s.fileSuccessUpload?"card activeCard":"card"),e.xp6(4),e.hij(" Upload ","InventoryCorrection"==s.type?"Validate Inventory":s.type," "),e.xp6(12),e.hij(" Upload ","InventoryCorrection"==s.type?"Validate Inventory":s.type," in Excel format [.csv] "),e.xp6(2),e.Q6J("value",s.fileName),e.xp6(2),e.Q6J("ngIf",s.fileName),e.xp6(1),e.Q6J("accessType",s.rolePermissionActions.createAction),e.xp6(3),e.Q6J("ngIf",s.fileSuccessUpload))},dependencies:[d.mk,d.O5,G.J],styles:[".biometricAttendancePage[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #fff!important;border-radius:0!important}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{font-size:1.2rem;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow:0 0 7px #0006}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .biometricContainer[_ngcontent-%COMP%]{--bs-gutter-x: 3.7rem;--bs-gutter-y: 0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .row-box[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .data-box[_ngcontent-%COMP%]{align-self:center;vertical-align:middle!important;padding:.2rem 0 .2rem .9rem;color:#5a5a5a;background-color:#eaecf2;border-radius:2px}.biometricAttendancePage[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue-text[_ngcontent-%COMP%]{background-color:#007daf!important;color:#fff;font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .btn-width[_ngcontent-%COMP%]{width:7.5vw}.biometricAttendancePage[_ngcontent-%COMP%]   .arrowDownImg[_ngcontent-%COMP%]{width:4vh;height:4vh}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{display:flex;justify-content:center}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%]{padding:.5rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .successImg[_ngcontent-%COMP%]{width:3rem;height:3rem}.biometricAttendancePage[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.biometricAttendancePage[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .closeIcon[_ngcontent-%COMP%]{width:2vh}.biometricAttendancePage[_ngcontent-%COMP%]   .iBASInput-field[_ngcontent-%COMP%]{width:100%;padding:10px}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]{background-color:#f2f8fb}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:transparent!important}.biometricAttendancePage[_ngcontent-%COMP%]   .activeCard[_ngcontent-%COMP%]   .inputGroup[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{cursor:pointer;border-left:none;background:transparent!important}"]})}return i})()}];let z=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#a=this.\u0275inj=e.cJS({imports:[d.ez,u.Bz.forChild(j),_.m]})}return i})()}}]);