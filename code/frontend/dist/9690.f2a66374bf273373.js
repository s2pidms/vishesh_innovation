"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9690],{22751:(Q,A,c)=>{c.d(A,{B:()=>I});var e=c(43818),n=c(65879),x=c(37285),Z=c(96814),y=c(60095),v=c(59103);function M(_,m){1&_&&n._UZ(0,"div",26)}function O(_,m){1&_&&n._UZ(0,"div",27)}function S(_,m){1&_&&n._UZ(0,"div",28)}function U(_,m){if(1&_&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"UOMUnitsMaster"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"number"),n.qZA(),n.TgZ(12,"td")(13,"span",22),n.YNc(14,M,1,0,"div",23),n.YNc(15,O,1,0,"div",24),n.YNc(16,S,1,0,"div",25),n.qZA()()()),2&_){const t=m.$implicit;n.xp6(2),n.Oqu(null==t?null:t.batchNo),n.xp6(2),n.hij(" ",null!=t&&t.batchDate?n.xi3(5,7,null==t?null:t.batchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",n.lcZ(8,10,null==t?null:t.UOM)," "),n.xp6(3),n.hij(" ",n.xi3(11,12,null==t?null:t.FGQty,"1.2-2")," "),n.xp6(4),n.Q6J("ngIf","green"==(null==t?null:t.aging)),n.xp6(1),n.Q6J("ngIf","red"==(null==t?null:t.aging)),n.xp6(1),n.Q6J("ngIf","yellow"==(null==t?null:t.aging))}}let I=(()=>{class _{constructor(t){this.activeModal=t,this.FGInventoryInfo=[],this.action="",this.totalFGQty=0,this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){}dismissModel(){let t={};t.FGInventoryInfo=this.FGInventoryInfo,t.totalFGQty=this.totalFGQty,this.activeModal.close(t)}eventHeader(t){switch(t.key){case"SEARCH":this.search=t.value;break;case"EXCEL":default:break;case"PAGE":this.page=t.value}}trackByFn(t,h){return h?._id}static#t=this.\u0275fac=function(h){return new(h||_)(n.Y36(x.Kz))};static#e=this.\u0275cmp=n.Xpm({type:_,selectors:[["app-fg-inventory-modal"]],viewQuery:function(h,b){if(1&h&&n.Gf(e.j,5),2&h){let T;n.iGM(T=n.CRH())&&(b.headers=T)}},inputs:{FGInventoryInfo:"FGInventoryInfo",action:"action",totalFGQty:"totalFGQty",customerContactInfoArray:"customerContactInfoArray"},decls:37,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-5"],[1,"table-responsive",2,"min-height","19rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-border","my-4"],[1,"row","px-5"],[1,"col-5","ps-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-7","text-end","mb-4","pe-5"],["type","button",1,"btn","bg-primary","px-5",3,"disabled","click"],[1,"d-flex","justify-content-center"],["class","flaggreen",4,"ngIf"],["class","flagred",4,"ngIf"],["class","flagYellow",4,"ngIf"],[1,"flaggreen"],[1,"flagred"],[1,"flagYellow"]],template:function(h,b){1&h&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"FG Inventory"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return b.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead",10)(13,"tr",11)(14,"th"),n._uU(15,"Batch No."),n.qZA(),n.TgZ(16,"th"),n._uU(17,"Batch Date"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"UoM"),n.qZA(),n.TgZ(20,"th"),n._uU(21,"FG Qty"),n.qZA(),n.TgZ(22,"th"),n._uU(23,"Aging"),n.qZA()()(),n.TgZ(24,"tbody"),n.YNc(25,U,17,15,"tr",12),n.qZA()()()()(),n._UZ(26,"hr",13),n.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"div",17),n._uU(31," Total FG Qty. "),n._UZ(32,"i",18),n.qZA(),n.TgZ(33,"input",19),n.NdJ("ngModelChange",function(F){return b.totalFGQty=F}),n.qZA()()(),n.TgZ(34,"div",20)(35,"button",21),n.NdJ("click",function(){return b.dismissModel()}),n._uU(36," Save & Close "),n.qZA()()()()()),2&h&&(n.xp6(25),n.Q6J("ngForOf",b.FGInventoryInfo)("ngForTrackBy",b.trackByFn),n.xp6(8),n.Q6J("ngModel",b.totalFGQty)("disabled","view"==b.action),n.xp6(2),n.Q6J("disabled",b.btnDisable||"view"==b.action))},dependencies:[Z.sg,Z.O5,y.Fj,y.wV,y.JJ,y.On,Z.JJ,Z.uU,v.S],encapsulation:2})}return _})()},6573:(Q,A,c)=>{c.d(A,{_0:()=>J,B$:()=>i.B,tC:()=>r.t,$G:()=>w});var e=c(43818),x=c(98977);c(88059),c(52464);var t=c(65879),h=c(37285),b=c(96814),T=c(60095);function F(d,C){1&d&&t._UZ(0,"hr",19)}function K(d,C){if(1&d){const a=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.dismissModel())}),t._uU(1," Save & Close "),t.qZA()}}const f=function(){return["create","edit"]};let J=(()=>{class d{constructor(a,s){this.activeModal=a,this.utilityService=s,this.action="",this.totalBatchQuantity=null,this.batchInfo={},this.btnDisable=!1,this.page=1,this.pageSize=5,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.manufacturingDate="",this.batchNumber="",this.customerContactInfoArray=[]}ngOnInit(){this.totalBatchQuantity=this.batchInfo?.totalBatchQuantity,this.manufacturingDate=this.batchInfo?.manufacturingDate,this.batchNumber=this.batchInfo?.batchNumber}dismissModel(){let a={};a.totalBatchQuantity=this.totalBatchQuantity,a.manufacturingDate=this.manufacturingDate,a.batchNumber=this.batchNumber,this.activeModal.close(a)}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value;break;case"EXCEL":default:break;case"PAGE":this.page=a.value}}trackByFn(a,s){return s?._id}static#t=this.\u0275fac=function(s){return new(s||d)(t.Y36(h.Kz),t.Y36(x.tI))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-batch-info-modal"]],viewQuery:function(s,l){if(1&s&&t.Gf(e.j,5),2&s){let g;t.iGM(g=t.CRH())&&(l.headers=g)}},inputs:{action:"action",totalBatchQuantity:"totalBatchQuantity",batchInfo:"batchInfo",customerContactInfoArray:"customerContactInfoArray"},decls:33,vars:13,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center"],[1,"col-5"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-3","mx-2"],["type","number","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"row","justify-content-center","mt-4"],["type","date",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","line-border my-4",4,"ngIf"],[1,"row"],[1,"col","text-center","mb-4"],["class","btn bg-primary px-5","type","button",3,"click",4,"ngIf"],[1,"line-border","my-4"],["type","button",1,"btn","bg-primary","px-5",3,"click"]],template:function(s,l){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Batch Info"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return l.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t._uU(12," Total Batch Qty. "),t._UZ(13,"i",10),t.qZA(),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(D){return l.totalBatchQuantity=D}),t.qZA()()()(),t.TgZ(15,"div",12)(16,"div",7)(17,"div",8)(18,"div",9),t._uU(19," Batch/Mfg Date "),t._UZ(20,"i",10),t.qZA(),t.TgZ(21,"input",13),t.NdJ("ngModelChange",function(D){return l.manufacturingDate=D}),t.qZA()()()(),t.TgZ(22,"div",12)(23,"div",7)(24,"div",8)(25,"div",9),t._uU(26," Batch Number # "),t._UZ(27,"i",10),t.qZA(),t.TgZ(28,"input",14),t.NdJ("ngModelChange",function(D){return l.batchNumber=D}),t.qZA()()()(),t.YNc(29,F,1,0,"hr",15),t.TgZ(30,"div",16)(31,"div",17),t.YNc(32,K,2,0,"button",18),t.qZA()()()()),2&s&&(t.xp6(14),t.Q6J("ngModel",l.totalBatchQuantity)("disabled",!t.DdM(8,f).includes(l.action)),t.xp6(7),t.Q6J("ngModel",l.manufacturingDate)("disabled",!t.DdM(9,f).includes(l.action)),t.xp6(7),t.Q6J("ngModel",l.batchNumber)("disabled",!t.DdM(10,f).includes(l.action)),t.xp6(1),t.Q6J("ngIf",t.DdM(11,f).includes(l.action)),t.xp6(3),t.Q6J("ngIf",t.DdM(12,f).includes(l.action)))},dependencies:[b.O5,T.Fj,T.wV,T.JJ,T.On],encapsulation:2})}return d})();var i=c(22751),r=c(16250),o=c(95346);function p(d,C){1&d&&t._UZ(0,"img",28)}function u(d,C){1&d&&t._UZ(0,"img",29)}function P(d,C){if(1&d&&(t.TgZ(0,"li",31)(1,"span",32),t._uU(2),t.qZA()()),2&d){const a=t.oxw(),s=a.$implicit,l=a.pages;t.xp6(2),t.AsE(" Page ",s," of ",l[l.length-1]," ")}}function N(d,C){1&d&&t.YNc(0,P,3,2,"li",30),2&d&&t.Q6J("ngIf",C.pages.length>0)}function E(d,C){if(1&d){const a=t.EpF();t.TgZ(0,"ngb-pagination",24),t.NdJ("pageChange",function(l){t.CHM(a);const g=t.oxw();return t.KtG(g.page=l)}),t.YNc(1,p,1,0,"ng-template",25),t.YNc(2,u,1,0,"ng-template",26),t.YNc(3,N,1,1,"ng-template",27),t.qZA()}if(2&d){const a=t.oxw();t.Q6J("collectionSize",a.tableData.length)("page",a.page)("pageSize",a.pageSize)("boundaryLinks",!1)}}function B(d,C){if(1&d&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",22,33)(5,"span",34),t._uU(6),t.qZA()(),t.TgZ(7,"td",22,35)(9,"span",34),t._uU(10),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&d){const a=C.$implicit,s=t.MAs(4),l=t.MAs(8);t.xp6(2),t.Oqu(null==a?null:a.itemCode),t.xp6(1),t.Udp("width",s.clientWidth),t.xp6(2),t.Q6J("positionTarget",s)("ngbTooltip",a.itemName),t.xp6(1),t.hij(" ",a.itemName," "),t.xp6(1),t.Udp("width",l.clientWidth),t.xp6(2),t.Q6J("positionTarget",l)("ngbTooltip",a.itemDescription),t.xp6(1),t.hij(" ",a.itemDescription," "),t.xp6(2),t.hij(" ",null==a?null:a.UOM," "),t.xp6(2),t.Oqu(null!=a&&a.partCount?t.xi3(15,13,null==a?null:a.partCount,"1.2-2"):null)}}let w=(()=>{class d{constructor(a){this.activeModal=a,this.itemDetailsList=[],this.action="",this.totalBatchQuantity=0,this.tableData=[],this.btnDisable=!1,this.page=1,this.pageSize=12,this.collection=0,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.customerContactInfoArray=[]}ngOnInit(){this.tableData=structuredClone(this.itemDetailsList),this.tableData.length>0&&(this.tableData=this.tableData?.map(a=>(a.partCount=a.partCount*this.totalBatchQuantity,a)))}dismissModel(){let a={};a.tableData=this.tableData,this.activeModal.close(a)}setPagination(){this.page=1}eventHeader(a){switch(a.key){case"SEARCH":this.search=a.value;break;case"EXCEL":default:break;case"PAGE":this.page=a.value}}trackByFn(a,s){return s?._id}static#t=this.\u0275fac=function(s){return new(s||d)(t.Y36(h.Kz))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-job-card-mrp-modal"]],viewQuery:function(s,l){if(1&s&&t.Gf(e.j,5),2&s){let g;t.iGM(g=t.CRH())&&(l.headers=g)}},inputs:{itemDetailsList:"itemDetailsList",action:"action",totalBatchQuantity:"totalBatchQuantity",customerContactInfoArray:"customerContactInfoArray"},decls:40,vars:11,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid","px-0","mt-5"],[1,"row","justify-content-center","px-5"],[1,"col-12","px-4"],[1,"row","justify-content-between","mb-3"],[1,"col-4","d-flex","align-items-center"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"ms-1","me-2","col-form-label","text-nowrap"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange",4,"ngIf"],[1,"col-1"],[1,"col-3"],[1,"table-responsive",2,"min-height","44rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[1,"text-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"collectionSize","page","pageSize","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationPages",""],["src","./assets/new_icons/pagination_prev.svg","width","20rem"],["src","./assets/new_icons/pagination_next.svg","width","20rem"],["class","ngb-custom-pages-item align-self-center",4,"ngIf"],[1,"ngb-custom-pages-item","align-self-center"],[1,"page-label","me-2","ms-1"],["itemName",""],[1,"pointer",3,"positionTarget","ngbTooltip"],["itemDescription",""]],template:function(s,l){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Material Requirement Planning (MRP)"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return l.activeModal.close()}),t._UZ(6,"i",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),t._uU(14," Total Batch Quantity "),t.TgZ(15,"span",12),t._uU(16,"\u25b6"),t.qZA()(),t.TgZ(17,"input",13),t.NdJ("ngModelChange",function(D){return l.totalBatchQuantity=D}),t.qZA()()(),t.TgZ(18,"div",14),t.YNc(19,E,4,4,"ngb-pagination",15),t.qZA(),t._UZ(20,"div",16)(21,"div",17),t.qZA(),t.TgZ(22,"div",18)(23,"table",19)(24,"thead",20)(25,"tr",21)(26,"th"),t._uU(27,"Item Code"),t.qZA(),t.TgZ(28,"th",22),t._uU(29,"Item Name"),t.qZA(),t.TgZ(30,"th",22),t._uU(31,"Item Description"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"UoM"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Qty/Part Count"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,B,16,16,"tr",23),t.ALo(38,"slice"),t.ALo(39,"searchFi1ter"),t.qZA()()()()()()()),2&s&&(t.xp6(17),t.Q6J("ngModel",l.totalBatchQuantity),t.xp6(2),t.Q6J("ngIf",l.tableData.length>0),t.xp6(18),t.Q6J("ngForOf",t.Dn7(38,4,t.xi3(39,8,l.tableData,l.search),(l.page-1)*l.pageSize,(l.page-1)*l.pageSize+l.pageSize))("ngForTrackBy",l.trackByFn))},dependencies:[b.sg,b.O5,h.N9,h.GZ,h.ju,h.Qy,h._L,T.Fj,T.JJ,T.On,b.OU,b.JJ,o.G],styles:[".pagination[_ngcontent-%COMP%]{margin-bottom:0!important}ngb-pagination[_ngcontent-%COMP%]     ul.pagination{margin:0!important}.page-label[_ngcontent-%COMP%]{color:var(--bs-dark);padding:0 1rem;font-size:1.4rem}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{border:none!important;color:var(--bs-white)!important;background-color:#fff!important;box-shadow:none}"]})}return d})()},16250:(Q,A,c)=>{c.d(A,{t:()=>S});var e=c(43818),n=c(65879),x=c(37285),Z=c(98977),y=c(96814),v=c(60095);function M(U,I){if(1&U&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"number"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"date"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"date"),n.qZA()()),2&U){const _=I.$implicit;n.xp6(2),n.Oqu(null==_?null:_.scheduleNo),n.xp6(2),n.hij(" ",n.xi3(5,5,null==_?null:_.quantity,"1.2-2")," "),n.xp6(3),n.Oqu(null==_?null:_.UOM),n.xp6(2),n.hij(" ",null!=_&&_.dispatchDate?n.xi3(10,8,null==_?null:_.dispatchDate,"dd-MM-YYYY"):null," "),n.xp6(3),n.hij(" ",null!=_&&_.PPICDate?n.xi3(13,11,null==_?null:_.PPICDate,"dd-MM-YYYY"):null," ")}}const O=function(){return["create","edit"]};let S=(()=>{class U{constructor(_,m){this.activeModal=_,this.toastService=m,this.action="edit",this.SOQty=0,this.deliveryCount=0,this.UOM=null,this.deliveryScheduleArr=[],this.btnDisable=!1,this.minDate=new Date}ngOnInit(){if(this.deliveryScheduleArr.length>0){this.deliveryScheduleArr=this.deliveryScheduleArr.map(m=>(m.UOM=this.UOM,m)),this.deliveryCount=this.deliveryScheduleArr.length;let _=this.deliveryScheduleArr.map(m=>m.quantity||0).reduce((m,t)=>+m+ +t,0);this.SOQty=_}}static#t=this.\u0275fac=function(m){return new(m||U)(n.Y36(x.Kz),n.Y36(Z.kl))};static#e=this.\u0275cmp=n.Xpm({type:U,selectors:[["app-job-card-disp-modal"]],viewQuery:function(m,t){if(1&m&&n.Gf(e.j,5),2&m){let h;n.iGM(h=n.CRH())&&(t.headers=h)}},inputs:{action:"action",UOM:"UOM",deliveryScheduleArr:"deliveryScheduleArr"},decls:41,vars:5,consts:[[1,"modelPage"],[1,"modal-header"],[1,"heading"],["type","button","aria-label","Close",1,"btn","btn-cross","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"container-fluid"],[1,"row","px-5","mt-5"],[1,"ps-0","col-6"],[1,"d-flex","align-items-center"],[1,"col-form-label","text-nowrap"],[1,"fa","fa-caret-right","fs-4","mx-1"],["type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6","pe-0"],["for","deliveryCount",1,"col-form-label","text-nowrap"],["type","number","id","deliveryCount","name","deliveryCount","min","1","max","5","readonly","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"row"],[1,"col-12","my-3","px-0"],[1,"line-border"],[1,"row","px-5"],[1,"table-responsive","ps-0","pe-0",2,"min-height","25rem"],[1,"table","table-bordered","table-sticky"],[1,"bg-primary"],[1,"text-white"],[4,"ngFor","ngForOf"]],template:function(m,t){1&m&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"Dispatch Schedule"),n.qZA(),n.TgZ(4,"div")(5,"button",3),n.NdJ("click",function(){return t.activeModal.close()}),n._UZ(6,"i",4),n.qZA()()(),n.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),n._uU(12," Quantity "),n._UZ(13,"i",10),n.qZA(),n.TgZ(14,"input",11),n.NdJ("ngModelChange",function(b){return t.SOQty=b}),n.qZA()()(),n.TgZ(15,"div",12)(16,"div",8)(17,"div",13),n._uU(18," Delivery Count "),n._UZ(19,"i",10),n.qZA(),n.TgZ(20,"input",14),n.NdJ("ngModelChange",function(b){return t.deliveryCount=b}),n.qZA()()()(),n.TgZ(21,"div",15)(22,"div",16),n._UZ(23,"hr",17),n.qZA()(),n.TgZ(24,"div",18)(25,"div",19)(26,"table",20)(27,"thead",21)(28,"tr",22)(29,"th"),n._uU(30,"Schedule #"),n.qZA(),n.TgZ(31,"th"),n._uU(32,"Quantity"),n.qZA(),n.TgZ(33,"th"),n._uU(34,"UoM"),n.qZA(),n.TgZ(35,"th"),n._uU(36,"Expected Dispatch Date"),n.qZA(),n.TgZ(37,"th"),n._uU(38,"PPIC Date"),n.qZA()()(),n.TgZ(39,"tbody"),n.YNc(40,M,14,14,"tr",23),n.qZA()()()()()()),2&m&&(n.xp6(14),n.Q6J("ngModel",t.SOQty),n.xp6(6),n.Q6J("disabled",!n.DdM(4,O).includes(t.action))("ngModel",t.deliveryCount),n.xp6(20),n.Q6J("ngForOf",t.deliveryScheduleArr))},dependencies:[y.sg,v.Fj,v.wV,v.JJ,v.qQ,v.Fd,v.On,y.JJ,y.uU],encapsulation:2})}return U})()},52464:(Q,A,c)=>{c.d(A,{U:()=>K});var e=c(65879),n=c(43818),x=c(22751),Z=c(16250),y=c(37285),v=c(98977),M=c(96814),O=c(88059),S=c(60095),U=c(95346),I=c(14906),_=c(84231);function m(f,J){if(1&f&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&f){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==i?null:i.batchQty,"1.2-2")," ")}}const t=function(){return{standalone:!0}};function h(f,J){if(1&f){const i=e.EpF();e.TgZ(0,"input",29),e.NdJ("ngModelChange",function(o){e.CHM(i);const p=e.oxw().$implicit;return e.KtG(p.batchQty=o)})("input",function(){e.CHM(i);const o=e.oxw().$implicit,p=e.oxw();return e.KtG(p.setBatchQty(o))}),e.qZA()}if(2&f){const i=e.oxw().$implicit,r=e.oxw();e.Q6J("ngModel",i.batchQty)("ngModelOptions",e.DdM(3,t))("disabled",r.selectDSKU&&r.selectDSKU!=i.SKUNo)}}const b=function(){return["approve","reject","view","generate","cancel"]};function T(f,J){if(1&f){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",15)(7,"div",16),e._UZ(8,"div"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",15,17)(13,"span",18),e._uU(14),e.qZA()(),e.TgZ(15,"td",15,19)(17,"span",18),e._uU(18),e.qZA()(),e.TgZ(19,"td",null,20)(21,"span",21)(22,"div",22),e.NdJ("click",function(){const p=e.CHM(i).$implicit,u=e.oxw();return e.KtG(u.openDrawing(p.drawing))}),e.qZA()()(),e.TgZ(23,"td"),e._uU(24),e.ALo(25,"SalesUOMUnitMaster"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"td")(30,"span",23)(31,"div",24),e.NdJ("click",function(){const p=e.CHM(i).$implicit,u=e.oxw();return e.KtG(u.openFGInventoryModal(p))}),e.qZA()()(),e.TgZ(32,"td")(33,"div",25),e.YNc(34,m,3,4,"span",26),e.YNc(35,h,1,4,"input",27),e.qZA()(),e.TgZ(36,"td")(37,"span",23)(38,"div",28),e.NdJ("click",function(){const p=e.CHM(i).$implicit,u=e.oxw();return e.KtG(u.openSOScheduleModal(p))}),e.qZA()()()()}if(2&f){const i=J.$implicit,r=e.MAs(12),o=e.MAs(16),p=e.MAs(20),u=e.oxw();e.xp6(2),e.Oqu(null==i?null:i.SO_FCNumber),e.xp6(2),e.hij(" ",null!=i&&i.SO_FCDate?e.xi3(5,21,null==i?null:i.SO_FCDate,"dd-MM-YYYY"):null," "),e.xp6(4),e.Udp("background-color",null==i?null:i.code),e.xp6(2),e.hij(" ",null==i?null:i.SKUNo," "),e.xp6(1),e.Udp("width",r.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",i.SKUName)("positionTarget",r),e.xp6(1),e.hij(" ",null==i?null:i.SKUName," "),e.xp6(1),e.Udp("width",o.clientWidth),e.xp6(2),e.Q6J("ngbTooltip",i.SKUDescription)("positionTarget",o),e.xp6(1),e.hij(" ",null==i?null:i.SKUDescription," "),e.xp6(3),e.Q6J("ngbTooltip",i.internalPartNo)("positionTarget",p),e.xp6(3),e.hij(" ",e.lcZ(25,24,null==i?null:i.UOM)," "),e.xp6(3),e.Oqu(e.xi3(28,26,null==i?null:i.balQty,"1.2-2")),e.xp6(7),e.Q6J("ngIf",e.DdM(29,b).includes(u.action)),e.xp6(1),e.Q6J("ngIf",!e.DdM(30,b).includes(u.action))}}const F=function(f,J,i,r){return{page:f,pageSize:J,collection:i,search:r,excelDisplay:"none"}};let K=(()=>{class f{constructor(i,r,o,p){this.activeModal=i,this.toastService=r,this.modalService=o,this.utilityService=p,this.action="",this.totalBatchQty=null,this.orderType=null,this.collection=0,this.SKUDetailsOfJC=[],this.btnDisable=!1,this.page=1,this.pageSize=5,this.search="",this.column="createdAt",this.direction=-1,this.selectedData={},this.SODetailsArray=[],this.selectDSKU=null,this.saveData=new e.vpe,this.customerContactInfoArray=[]}ngOnInit(){this.collection=this.SKUDetailsOfJC.length}eventHeader(i){switch(i.key){case"SEARCH":this.search=i.value,this.page=1;break;case"EXCEL":default:break;case"PAGE":this.page=i.value}}trackByFn(i,r){return r?._id}openDrawing(i){i?window.open(i,"_blank"):this.toastService.warning("Drawing File Not Present")}openFGInventoryModal(i){if(!this.selectDSKU||this.selectDSKU==i.SKUNo){const r=this.modalService.open(x.B,{centered:!0,size:"lg",backdrop:"static",keyboard:!1});r.componentInstance.action=this.action,r.componentInstance.FGInventoryInfo=i?.FGInventoryInfo,r.componentInstance.totalFGQty=i?.totalFGQty,r.result.then(o=>{if(o&&["create","edit"].includes(this.action)){let p=-1;p=this.SKUDetailsOfJC.findIndex("SalesOrder"==i.referenceModel?u=>u.reference==i?.reference&&u.SKU==i.SKU&&u.SO_FCLineTargetDate==i?.SO_FCLineTargetDate:u=>u.reference==i?.reference&&u.SKU==i.SKU),this.SKUDetailsOfJC[p].FGInventoryInfo=o?.FGInventoryInfo,i.balQty>o.totalFGQty?(this.SKUDetailsOfJC[p].batchQty=+i.balQty-+o.totalFGQty,this.SKUDetailsOfJC[p].previousQty=+i.balQty-+o.totalFGQty):this.SKUDetailsOfJC[p].batchQty=0,this.selectDSKU="number"==typeof+i.batchQty&&+i.batchQty>0?i?.SKUNo:null,this.calTotalBatchQuantity()}},o=>{})}}openSOScheduleModal(i){if(i.dispatchSchedule&&i.dispatchSchedule.length>0&&(!this.selectDSKU||this.selectDSKU==i.SKUNo)){const r=this.modalService.open(Z.t,{centered:!0,windowClass:"custom-modal-sm",backdrop:"static",keyboard:!1});r.componentInstance.action=this.action,r.componentInstance.UOM=i.UOM,r.componentInstance.deliveryScheduleArr=i?.dispatchSchedule,r.result.then(o=>{o&&["create","edit"].includes(this.action)},o=>{})}}setBatchQty(i){let r=-1;r=this.SKUDetailsOfJC.findIndex("SalesOrder"==i.referenceModel?o=>o.reference==i?.reference&&o.SKU==i.SKU&&o.SO_FCLineTargetDate==i?.SO_FCLineTargetDate:o=>o.reference==i?.reference&&o.SKU==i.SKU),i.balQty>i.totalFGQty&&(this.SKUDetailsOfJC[r].previousQty=+i.balQty-+i.totalFGQty),+i.batchQty<+i.previousQty&&(this.selectDSKU=null),this.selectDSKU="number"==typeof+i.batchQty&&+i.batchQty>0?i?.SKUNo:null,this.calTotalBatchQuantity(),this.collection=this.SKUDetailsOfJC.length}calTotalBatchQuantity(){let i=this.SKUDetailsOfJC.map(r=>r.batchQty||0).reduce((r,o)=>+r+ +o,0);this.saveData.emit({data:i,key:"totalBatchQuantitySKU"})}onSort({column:i,direction:r}){this.headers.forEach(o=>{o.sortable!==i&&(o.direction="")}),this.SKUDetailsOfJC=""===r||""===i?this.SKUDetailsOfJC:[...this.SKUDetailsOfJC].sort((o,p)=>{let u="string"==typeof o[i]?o[i].toLowerCase():o[i],P="string"==typeof p[i]?p[i].toLowerCase():p[i];const N=u<P?-1:u>P?1:0;return"asc"===r?N:-N})}static#t=this.\u0275fac=function(r){return new(r||f)(e.Y36(y.Kz),e.Y36(v.kl),e.Y36(y.FF),e.Y36(v.tI))};static#e=this.\u0275cmp=e.Xpm({type:f,selectors:[["app-job-card-sku-details-table"]],viewQuery:function(r,o){if(1&r&&e.Gf(n.j,5),2&r){let p;e.iGM(p=e.CRH())&&(o.headers=p)}},inputs:{action:"action",totalBatchQty:"totalBatchQty",orderType:"orderType",collection:"collection",SKUDetailsOfJC:"SKUDetailsOfJC",customerContactInfoArray:"customerContactInfoArray"},outputs:{saveData:"saveData"},decls:35,vars:24,consts:[[1,"table-responsive"],[3,"data","dataChange"],[1,"table","table-bordered","mt-0","table-sm"],[1,"bg-info"],[1,"text-white"],["sortable","SO_FCNumber",3,"sort"],["sortable","SO_FCDate",3,"sort"],["sortable","code",3,"sort"],["sortable","SKUNo",3,"sort"],["sortable","SKUName",1,"text-start",3,"sort"],["sortable","SKUDescription",1,"text-start",3,"sort"],["sortable","UOM",3,"sort"],["sortable","balQty",3,"sort"],["sortable","batchQty",3,"sort"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-start"],[1,"box"],["SKUName",""],[1,"pointer",3,"ngbTooltip","positionTarget"],["SKUDescription",""],["internalPartNo",""],[1,"d-flex","justify-content-center","pointer",3,"ngbTooltip","positionTarget"],[1,"drawingIcon",3,"click"],[1,"d-flex","justify-content-center","pointer"],[1,"FGMip",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],["type","number","class","form-control form-control-xs w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input",4,"ngIf"],[1,"assetCalendarTD",3,"click"],["type","number",1,"form-control","form-control-xs","w-25",3,"ngModel","ngModelOptions","disabled","ngModelChange","input"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"app-setting-header",1),e.NdJ("dataChange",function(u){return o.eventHeader(u)}),e.qZA(),e.TgZ(2,"table",2)(3,"thead",3)(4,"tr",4)(5,"th",5),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(6),e.qZA(),e.TgZ(7,"th",6),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(8),e.qZA(),e.TgZ(9,"th",7),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(10,"Code"),e.qZA(),e.TgZ(11,"th",8),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(12,"SKU Code"),e.qZA(),e.TgZ(13,"th",9),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(14),e.ALo(15,"labelTranslate"),e.qZA(),e.TgZ(16,"th",10),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(17),e.ALo(18,"labelTranslate"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"DWG"),e.qZA(),e.TgZ(21,"th",11),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(22,"UoM"),e.qZA(),e.TgZ(23,"th",12),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(24),e.qZA(),e.TgZ(25,"th"),e._uU(26,"FG Inv"),e.qZA(),e.TgZ(27,"th",13),e.NdJ("sort",function(u){return o.onSort(u)}),e._uU(28,"Batch Qty"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Disp."),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,T,39,31,"tr",14),e.ALo(33,"slice"),e.ALo(34,"searchFi1ter"),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("data",e.l5B(19,F,o.page,o.pageSize,o.collection,o.search)),e.xp6(5),e.hij(" ","All"===o.orderType?"SO/FC No.":"FC"===o.orderType?"FC No.":"SO"===o.orderType?"SO No.":"NPD"===o.orderType?"SR No.":"SO No."," "),e.xp6(2),e.hij(" ","All"===o.orderType?"SO/FC Date":"FC"===o.orderType?"FC Date":"SO"===o.orderType?"SO Date":"NPD"===o.orderType?"SR Date":"SO Date"," "),e.xp6(6),e.hij(" ",e.lcZ(15,8,"SKU Name")," "),e.xp6(3),e.hij(" ",e.lcZ(18,10,"SKU Description")," "),e.xp6(7),e.hij(" ","All"===o.orderType?"Bal SO/FC Qty":"FC"===o.orderType?"Bal FC Qty":"SO"===o.orderType?"Bal SO Qty":"NPD"===o.orderType?"Bal SR Qty":"Bal SO Qty"," "),e.xp6(8),e.Q6J("ngForOf",e.Dn7(33,12,e.xi3(34,16,o.SKUDetailsOfJC,o.search),(o.page-1)*o.pageSize,(o.page-1)*o.pageSize+o.pageSize))("ngForTrackBy",o.trackByFn))},dependencies:[M.sg,M.O5,O.P,y._L,S.Fj,S.wV,S.JJ,S.On,n.j,M.OU,M.JJ,M.uU,U.G,I.c,_.Q],styles:[".box[_ngcontent-%COMP%]{display:grid;place-items:center}.box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:1rem;width:1rem}"]})}return f})()},13107:(Q,A,c)=>{c.d(A,{t:()=>e});const e={width:24,style:{alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}},28402:(Q,A,c)=>{c.d(A,{J:()=>e});const e=({data:n,headers:x,widths:Z,title:y})=>({tableData:{widths:Z,headerRows:1,body:[x.map(O=>({text:O.header,style:"header"})),...n.map(O=>x.map(S=>({style:"subheader",text:O[S.key]})))]},title:y})}}]);