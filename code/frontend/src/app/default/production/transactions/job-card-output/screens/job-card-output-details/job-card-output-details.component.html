<div class="modelPage">
    <div class="modal-header">
        <div class="heading">Output Details</div>
        <div>
            <button type="button" class="btn btn-cross btn-sm" aria-label="Close" (click)="this.activeModal.close()">
                <i class="fa fa-times-circle" aria-hidden="true"></i>
            </button>
        </div>
    </div>

    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12 px-5">
                <div class="table-responsive" style="min-height: 22rem">
                    <table class="table table-bordered table-sticky mt-1">
                        <thead class="bg-primary">
                            <tr class="text-white border-0">
                                <th>SN</th>
                                <th>Inspection Date</th>

                                <th>UoM</th>
                                <th>Output Qty</th>
                                <th>Inspected By</th>
                                <th>QC Approved By</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-0" *ngFor="let g of outputDetailsList; let i = index; trackBy: trackByFn">
                                <td>{{ i + 1 }}</td>
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <span *ngIf="['approve', 'view', 'generate'].includes(action)">
                                            {{ g?.inspectionDate | date : "dd-MM-YYYY" }}
                                        </span>
                                        <input
                                            *ngIf="!['approve', 'view', 'generate'].includes(action)"
                                            class="form-control form-control-sm w-25"
                                            type="date"
                                            [(ngModel)]="g.inspectionDate"
                                            [ngModelOptions]="{standalone: true}"
                                        />
                                    </div>
                                </td>
                                <td>{{ g.UOM }}</td>
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <span *ngIf="['approve', 'view', 'generate'].includes(action)">
                                            {{ g?.outputQty }}
                                        </span>
                                        <input
                                            *ngIf="!['approve', 'view', 'generate'].includes(action)"
                                            class="form-control form-control-sm w-25"
                                            type="number"
                                            [(ngModel)]="g.outputQty"
                                            [ngModelOptions]="{standalone: true}"
                                            (input)="setOutputQty()"
                                        />
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <span *ngIf="['approve', 'view', 'generate'].includes(action)">
                                            {{ g?.inspectedBy }}
                                        </span>
                                        <input
                                            *ngIf="!['approve', 'view', 'generate'].includes(action)"
                                            class="form-control form-control-sm w-25"
                                            type="text"
                                            [(ngModel)]="g.inspectedBy"
                                            [ngModelOptions]="{standalone: true}"
                                        />
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <span *ngIf="['approve', 'view', 'generate'].includes(action)">
                                            {{ g?.QCApprovedBy }}
                                        </span>
                                        <input
                                            *ngIf="!['approve', 'view', 'generate'].includes(action)"
                                            class="form-control form-control-sm w-25"
                                            type="text"
                                            [(ngModel)]="g.QCApprovedBy"
                                            [ngModelOptions]="{standalone: true}"
                                        />
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-0 seperator-row">
                                <td class="border-0" colspan="6">
                                    <div class="add-icon">
                                        <img
                                            (click)="addTableRow()"
                                            class="pointer"
                                            src="./assets/new_icons/add_row.svg"
                                            width="14"
                                            alt=""
                                        />
                                    </div>
                                </td>
                                <td class="border-0" colspan="6">
                                    <div class="minus-icon">
                                        <img
                                            (click)="deleteTableRow()"
                                            class="pointer"
                                            src="./assets/new_icons/delete_row.svg"
                                            width="14"
                                            alt=""
                                        />
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col px-0">
                <hr class="line-border mt-0" />
            </div>
        </div>
        <div class="row px-4 mb-3">
            <div class="col-9">
                <div class="row">
                    <div class="col-6 pe-0 d-flex">
                        <label class="form-label text-nowrap mt-1"
                            >Cumulative Count <span class="ms-1 me-2">&#9654;</span>
                        </label>
                        <input
                            [disabled]="['approve', 'rejection', 'view', 'generate', 'cancel'].includes(action)"
                            class="form-control"
                            type="text"
                            [(ngModel)]="cumulativeCount"
                            readonly
                        />
                    </div>
                    <div class="col-6 d-flex">
                        <label class="form-label text-nowrap mt-1">
                            Location <span class="ms-1 me-2">&#9654;</span>
                        </label>
                        <select
                            [disabled]="['approve', 'rejection', 'view', 'generate', 'cancel'].includes(action)"
                            class="form-select"
                            [(ngModel)]="location"
                        >
                            <option selected disabled [value]="null">Select Location</option>
                            <option *ngFor="let item of locationOptions" [value]="item.value">
                                {{ item.label }}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-3 pe-4 d-flex justify-content-end">
                <button
                    type="button"
                    class="btn btn-primary px-4"
                    (click)="dismissModel()"
                    [disabled]="['approve', 'rejection', 'view', 'generate', 'cancel'].includes(action)"
                >
                    Save & close
                </button>
            </div>
        </div>
    </div>
</div>
