<div class="container-fluid printScreen">
    <div class="row">
        <div class="col-12 text-center px-0">
            <div *ngIf="buttonCondition == 'true'">
                <button
                    appAccessControl
                    [accessType]="rolePermissionActions.downloadAction"
                    class="btn btn-primary"
                    type="button"
                    (click)="windowPrint()"
                    *ngIf="pdfAction != 'pdf'"
                >
                    <img src="./assets/images/print.png" width="20px" height="14px" class="mb-2" />&nbsp;&nbsp; Print
                </button>
            </div>
            <div class="page py-3">
                <div class="table-responsive shadow">
                    <table class="table">
                        <tr>
                            <td colspan="12">
                                <div class="text-center">
                                    <img src="{{ tableData?.company?.companyPdfHeaderUrl }}" class="img-pdfHeader" />
                                </div>
                            </td>
                        </tr>

                        <tr class="head-row">
                            <td colspan="12" class="text-center">
                                <h1 class="fs-1">Purchase Indent</h1>
                            </td>
                        </tr>
                        <tr class="head-row">
                            <th colspan="4" class="bg-grey">
                                <label class="heading">Channel Partner [Channel Partner's Details]</label>
                            </th>
                            <th colspan="4" class="bg-grey">
                                <label class="heading">Consignee [Receiver's Details]</label>
                            </th>
                            <th colspan="4" class="bg-grey">
                                <label class="heading">IO Details</label>
                            </th>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <p class="">
                                    {{ tableData?.channelPartnerName }}
                                </p>
                                <p>
                                    {{ tableData?.channelPartner?.billingAddress?.line1 }}
                                </p>
                                <p>{{ tableData?.channelPartner?.billingAddress?.line2 }}</p>
                                <p>{{ tableData?.channelPartner?.billingAddress?.line3 }}</p>
                                <p>
                                    {{ tableData?.channelPartner?.billingAddress?.city }} ,
                                    {{ tableData?.channelPartner?.billingAddress?.state }}
                                    , {{ tableData?.channelPartner?.billingAddress?.pinCode }}
                                    {{ tableData?.channelPartner?.billingAddress?.country }}
                                </p>
                                <p>GSTIN: {{ tableData?.channelPartner?.GSTIN }}</p>
                            </td>
                            <td colspan="4">
                                <p>{{ tableData?.company?.companyName }}</p>
                                <p>
                                    {{ tableData?.company?.companyBillingAddress?.addressLine1 }}
                                </p>
                                <p>
                                    {{ tableData?.company?.companyBillingAddress?.addressLine2 }}
                                </p>
                                <p>
                                    {{ tableData?.company?.companyBillingAddress?.addressLine3 }}
                                </p>
                                <p>
                                    {{ tableData?.company?.companyBillingAddress?.city }},
                                    {{ tableData?.company?.companyBillingAddress?.state }} ,
                                    {{ tableData?.company?.companyBillingAddress?.pinCode }},
                                    {{ tableData?.company?.companyBillingAddress?.country }}
                                </p>
                                <p>
                                    GSTIN:
                                    {{ tableData?.company?.GSTIN }}
                                </p>
                            </td>
                            <td colspan="4">
                                <div class="h-100">
                                    <p class="">IO No.: {{ tableData?.indentOrderNo }}</p>
                                    <p class="mt-1">
                                        IO Date:
                                        {{ tableData?.indentOrderDate | date : "dd/MM/YYYY" }}
                                    </p>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <p class="sub-text">
                                    Mobile No.:
                                    {{ tableData?.channelPartner?.contactMatrix?.contactPersonNumber }}
                                </p>
                                <p class="sub-text">
                                    E-mail:
                                    {{ tableData?.channelPartner?.contactMatrix?.contactPersonEmail }}
                                </p>
                            </td>
                            <td colspan="4">
                                <p class="sub-text">
                                    Mobile No.:
                                    {{ tableData?.company?.companyContactPersonNumber }}
                                </p>
                                <p class="sub-text">
                                    E-mail:
                                    {{ tableData?.company?.companyContactPersonEmail }}
                                </p>
                            </td>
                            <td colspan="4">
                                <p class="sub-text">
                                    Currency:
                                    {{ tableData?.currency }}
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="12">
                                <p class="sub-text">Dear Sir/Madam,</p>
                                <p class="sub-text">
                                    Please supply following goods/material in accordance with agreed terms and
                                    conditions or contract purchase agreement.
                                </p>

                                <p class="sub-text">
                                    Please mention our Item code &amp; Purchase Indent number on your tax invoice
                                    without which invoice will not be processed.
                                </p>
                                <p class="sub-text">Please send the material along with a valid Test Report.</p>
                            </td>
                        </tr>
                        <tr class="head-row text-center w-100 text-nowrap">
                            <th colspan="1" class="text-center">#</th>
                            <th colspan="3" class="text-start">Item Description</th>
                            <th colspan="1" class="text-center">Delivery Date</th>
                            <th colspan="2" class="text-center">HSN Code</th>
                            <th colspan="1" class="text-center">UoM</th>
                            <th colspan="1" class="text-center">Quantity</th>
                            <th colspan="1" class="text-center">Rate/Unit</th>
                            <th colspan="2" class="text-center">Amount</th>
                        </tr>
                        <tr class="text-wrap" *ngFor="let p of tableData.indentDetails; let i = index">
                            <td colspan="1" class="text-center">
                                <label>{{ i + 1 }}</label>
                            </td>
                            <td colspan="3">
                                <p>
                                    Item Code:
                                    {{ p?.item?.itemCode }} | Channel Partner's Part No.:
                                    {{ p?.item?.channelPartNo }}
                                </p>
                                <p>Item Name: {{ p?.item?.itemName }}</p>
                                <p>Item Description: {{ p?.item?.itemDescription }}</p>
                            </td>
                            <td
                                *ngIf="
                                    !tableData?.indentCategory ||
                                    tableData?.indentCategory == indentCategoryObj.STANDARD
                                "
                                colspan="1"
                                class="text-center"
                            >
                                {{ p?.deliverySchedule[0]?.deliveryDate | date : "dd-MM-YYYY" }}
                            </td>
                            <td
                                *ngIf="
                                    !tableData?.indentCategory || tableData?.indentCategory == indentCategoryObj.PLANNED
                                "
                                colspan="1"
                                class="text-center"
                            >
                                Refer Schedule
                            </td>
                            <td colspan="2" class="text-center">
                                {{ p?.item?.hsn }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ (p?.UOM ? p?.UOM : p.primaryUnit) | UOMUnitsMaster }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ p?.IOQty | number : ".2-2" }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ p?.purchaseRate | number : ".2-2" }}
                            </td>
                            <td colspan="2" class="text-center">
                                {{ p?.lineValue | number : ".2-2" }}
                            </td>
                        </tr>
                        <tr *ngFor="let d of tableData.rowRepeat; let j = index">
                            <td colspan="1" class="text-center">
                                <p class="py-3">
                                    {{ tableData.indentDetails.length + j + 1 }}
                                </p>
                            </td>
                            <td colspan="3" class="text-center"><p></p></td>
                            <td colspan="1" class="text-center"><p></p></td>
                            <td colspan="2" class="text-center"><p></p></td>
                            <td colspan="1" class="text-center"><p></p></td>
                            <td colspan="1" class="text-center"><p></p></td>
                            <td colspan="1" class="text-center"><p></p></td>
                            <td colspan="2" class="text-center"><p></p></td>
                        </tr>

                        <tr>
                            <td colspan="11 " class="py-4"></td>
                            <td colspan="1" class="text-center"></td>
                        </tr>
                        <tr class="">
                            <th colspan="11" class="text-end">
                                <p>Total Taxable Amount</p>
                            </th>
                            <th colspan="1" class="text-center">
                                {{ tableData?.netPIValue | number : ".2-2" }}
                            </th>
                        </tr>

                        <tr class="py-1">
                            <td colspan="12">
                                <div class="row justify-content-between my-5">
                                    <div class="col-12 d-flex px-5">
                                        <span class="d-flex align-items-center me-3">Remarks: </span>
                                        <input
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="tableData.remarks"
                                            readonly
                                        />
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="12">
                                <span style="min-height: 25rem" class="d-flex justify-content-center align-items-end">
                                    This is a system-generated document, and hence no signature required.
                                </span>
                            </td>
                        </tr>
                    </table>
                    <app-pi-schedule-print-screen
                        class="page-break"
                        *ngIf="[indentCategoryObj.PLANNED].includes(tableData.indentCategory)"
                        [tableData]="tableData"
                    ></app-pi-schedule-print-screen>
                </div>
            </div>
        </div>
    </div>
</div>
