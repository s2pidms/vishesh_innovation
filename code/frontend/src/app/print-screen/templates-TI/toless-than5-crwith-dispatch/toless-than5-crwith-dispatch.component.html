<div class="container-fluid printScreen">
    <div class="row">
        <div class="col-12 text-center px-0">
            <div class="page py-3">
                <div class="table-responsive shadow">
                    <table class="table">
                        <tr>
                            <td colspan="12">
                                <div class="text-center">
                                    <img src="{{ tableData?.company?.SOPdfHeaderUrl }}" class="img-pdfHeader" />
                                </div>
                            </td>
                        </tr>
                        <tr class="head-row">
                            <td colspan="12" class="text-center">
                                <label class="page-title">Tax Invoice</label>
                            </td>
                        </tr>
                        <tr class="head-row">
                            <th colspan="4" class="bg-grey">
                                <label class="heading">Buyer's Details [Bill To]</label>
                            </th>
                            <th colspan="4" class="bg-grey">
                                <label class="heading">Consignee Details [Ship To]</label>
                            </th>
                            <th colspan="4" class="bg-grey">
                                <label class="heading">Document Details</label>
                            </th>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <p class="fw-bold">
                                    {{ tableData?.customerBillingAddress?.contactPersonName }}
                                </p>
                                <p>
                                    {{ tableData?.customerBillingAddress?.line1 }}
                                </p>
                                <p>
                                    {{ tableData?.customerBillingAddress?.line2 }}
                                </p>
                                <p>
                                    {{ tableData?.customerBillingAddress?.line3 }}
                                </p>
                                <p>
                                    {{
                                        tableData?.customerBillingAddress?.city
                                            ? tableData?.customerBillingAddress?.city
                                            : tableData?.customerBillingAddress?.district
                                    }}, {{ tableData?.customerBillingAddress?.state }},
                                    {{ tableData?.customerBillingAddress?.pinCode }},
                                    {{ tableData?.customerBillingAddress?.country }}
                                </p>

                                <p>GSTIN: {{ tableData?.customer?.GSTIN }}</p>
                            </td>
                            <td colspan="4">
                                <p class="fw-bold">
                                    {{ tableData?.customerShippingAddress?.contactPersonName }}
                                </p>
                                <p>
                                    {{ tableData?.customerShippingAddress?.line1 }}
                                </p>
                                <p>
                                    {{ tableData?.customerShippingAddress?.line2 }}
                                </p>
                                <p>
                                    {{ tableData?.customerShippingAddress?.line3 }}
                                </p>
                                <p>
                                    {{
                                        tableData?.customerShippingAddress?.city
                                            ? tableData?.customerShippingAddress?.city
                                            : tableData?.customerShippingAddress?.district
                                    }}, {{ tableData?.customerShippingAddress?.state }},
                                    {{ tableData?.customerShippingAddress?.pinCode }},
                                    {{ tableData?.customerShippingAddress?.country }}
                                </p>
                            </td>
                            <td colspan="4">
                                <p>Tax Invoice No.: {{ tableData?.salesInvoiceNumber }}</p>
                                <p>
                                    Tax Invoice Date:
                                    {{ tableData?.salesInvoiceDate | date : "dd-MMM-yy" }}
                                </p>
                                <p>Supply Type Code: B2B</p>
                                <p>
                                    Place of Supply :
                                    {{ tableData?.customerBillingAddress?.state }}
                                    [{{ tableData?.customer?.GSTIN?.slice(0, 2) }}]
                                </p>

                                <p>RCM Applicable: No</p>
                                <p>
                                    Currency:
                                    {{ tableData?.customer?.customerCurrency ?? "INR" }}
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <p class="sub-text">
                                    Mobile No.:
                                    {{ tableData?.customer?.customerContactInfo?.contactPersonNumber }}
                                </p>
                                <p class="sub-text">
                                    E-mail:
                                    {{ tableData?.customer?.customerContactInfo?.contactPersonEmail }}
                                </p>
                            </td>
                            <td colspan="4">
                                <p class="sub-text">
                                    Mobile No.:
                                    {{ tableData?.customer?.customerContactInfo?.contactPersonNumber }}
                                </p>
                                <p class="sub-text">
                                    E-mail:
                                    {{ tableData?.customer?.customerContactInfo?.contactPersonEmail }}
                                </p>
                            </td>
                            <td colspan="4">
                                <p class="sub-text">
                                    <i class="fa fa-square-o fs-3 me-2 align-middle" aria-hidden="true"></i>
                                    Original for Buyer
                                </p>
                                <p class="sub-text">
                                    <i class="fa fa-square-o fs-3 me-2 align-middle" aria-hidden="true"></i>
                                    Duplicate for Transporter
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="12">
                                <div class="py-4"></div>
                            </td>
                        </tr>
                        <tr class="head-row text-center w-100 text-nowrap">
                            <th colspan="1" class="text-center">#</th>
                            <th colspan="3" class="text-start">Product Description</th>
                            <th colspan="1" class="text-center">Order Ref.</th>
                            <th colspan="1" class="text-center">HSN Code</th>
                            <th colspan="1" class="text-center">UoM</th>
                            <th colspan="1" class="text-center">Quantity</th>
                            <th colspan="1" class="text-center">Rate/Unit</th>
                            <th colspan="1" class="text-center">Disc %</th>
                            <th colspan="1" class="text-center">Net Rate</th>
                            <th colspan="1" class="text-center">Taxable Amount</th>
                        </tr>
                        <tr class="text-wrap" *ngFor="let s of tableData?.salesInvoiceDetails; let i = index">
                            <td colspan="1" class="text-center">
                                {{ s?.salesInvoiceLineNumber }}
                            </td>
                            <td colspan="3">
                                <p>{{ s?.SKU?.SKUName }}</p>
                                <p *ngIf="tableData?.customer?.showSKUDescription != 'No'">
                                    {{ s?.SKU?.SKUDescription }}
                                </p>
                                <p>
                                    Part No.
                                    {{
                                        s?.SKU?.customerInfo[0]?.customerPartNo
                                            ? s?.SKU?.customerInfo[0]?.customerPartNo
                                            : s?.SKU?.SKUNo
                                    }}
                                    | Batch No./Date :
                                    {{ s?.batchDate ? (s?.batchDate | date : "dd-MM-yy") : s?.tBatchNo }}
                                </p>
                            </td>

                            <td colspan="1" class="text-center">
                                <p>
                                    {{ s?.SOId?.PONumber }}
                                </p>
                                <p>
                                    {{ s?.SOId?.PODate | date : "dd-MMM-yy" }}
                                </p>
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.SKU?.hsn }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.unit }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.dispatchQty | number : ".2-2" }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.purchaseRate | number : ".2-2" }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.discount | number : ".2-2" }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.salesInvoiceUnitRate | number : ".2-2" }}
                            </td>
                            <td colspan="1" class="text-center">
                                {{ s?.salesInvoiceLineValue | number : ".2-2" }}
                            </td>
                        </tr>
                        <tr *ngFor="let d of tableData.rowRepeat; let j = index">
                            <td colspan="1" class="text-center">
                                <p class="py-3">
                                    {{ tableData.salesInvoiceDetails.length + j + 1 }}
                                </p>
                            </td>
                            <td colspan="3" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                            <td colspan="1" class="text-center"></td>
                        </tr>
                        <tr>
                            <td colspan="11 " class="text-end">
                                <p class="sub-text">SAC 996511 - Freight & Forwarding Charges</p>
                            </td>
                            <td colspan="1" class="text-center sub-text">
                                {{ tableData?.otherCharges?.totalAmount | number : ".2-2" }}
                            </td>
                        </tr>
                        <tr class="border-btm">
                            <th colspan="11" class="text-end">
                                <p>Total Taxable Amount</p>
                            </th>
                            <th colspan="1" class="text-center">
                                {{ tableData?.salesInvoiceTotalAmount | number : ".2-2" }}
                            </th>
                        </tr>

                        <tr>
                            <td colspan="12">
                                <div class="row justify-content-between">
                                    <div class="col-9 h-100 p-0 pe-4">
                                        <h4 class="my-2">
                                            GST Summary | Currency
                                            {{ tableData?.customer?.customerCurrency }}
                                        </h4>
                                        <table class="table table-sm">
                                            <tr>
                                                <th class="text-center">HSN/SAC</th>
                                                <th class="text-center">Taxable Amt.</th>
                                                <th class="text-center">CGST %</th>
                                                <th class="text-center">CGST Amt.</th>
                                                <th class="text-center">SGST %</th>
                                                <th class="text-center">SGST Amt.</th>
                                                <th class="text-center">IGST %</th>
                                                <th class="text-center">IGST Amt.</th>
                                                <th class="text-center">Total Tax</th>
                                            </tr>
                                            <tr *ngFor="let s of tableData.GSTDetails">
                                                <td class="text-center sub-text">{{ s?.HSNCode }}</td>
                                                <td class="text-center sub-text">
                                                    {{ s?.taxableValue ? (s?.taxableValue | number : ".2-2") : "-" }}
                                                </td>

                                                <td class="text-center sub-text">
                                                    {{ s?.cgstRate ? s?.cgstRate : "-" }}
                                                </td>
                                                <td class="text-center sub-text">
                                                    {{ s?.cgstAmount ? (s?.cgstAmount | number : ".2-2") : "-" }}
                                                </td>

                                                <td class="text-center sub-text">
                                                    {{ s?.sgstRate ? s?.sgstRate : "-" }}
                                                </td>
                                                <td class="text-center sub-text">
                                                    {{ s?.sgstAmount ? (s?.sgstAmount | number : ".2-2") : "-" }}
                                                </td>

                                                <td class="text-center sub-text">
                                                    {{ s?.igstRate ? s?.igstRate : "-" }}
                                                </td>
                                                <td class="text-center sub-text">
                                                    {{ s?.igstAmount ? (s?.igstAmount | number : ".2-2") : "-" }}
                                                </td>

                                                <td class="text-center sub-text">
                                                    {{
                                                        +s?.cgstAmount + +s?.sgstAmount + +s?.igstAmount
                                                            | number : ".2-2"
                                                    }}
                                                </td>
                                            </tr>
                                            <tr *ngFor="let d of tableData.summaryRowRepeat">
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                            </tr>

                                            <tr
                                                *ngIf="
                                                    tableData?.customer?.TCSOnScrap == 'Yes' ||
                                                    tableData?.customer?.TCSOnVendor == 'Yes'
                                                "
                                            >
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">-</td>
                                            </tr>
                                            <tr>
                                                <td class="text-center sub-text">Total >></td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalAmount
                                                            ? (tableData?.salesInvoiceTotalAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalCGSTAmount
                                                            ? (tableData?.salesInvoiceTotalCGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalSGSTAmount
                                                            ? (tableData?.salesInvoiceTotalSGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                                <td class="text-center sub-text">-</td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalIGSTAmount
                                                            ? (tableData?.salesInvoiceTotalIGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        +tableData?.salesInvoiceTotalCGSTAmount +
                                                            +tableData?.salesInvoiceTotalSGSTAmount +
                                                            +tableData?.salesInvoiceTotalIGSTAmount | number : ".2-2"
                                                    }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <th colspan="9" class="text-start">
                                                    Total Tax Amount (In words):
                                                    {{ tableData?.customer?.customerCurrency }}
                                                    {{ tableData.salesInvoiceTotalTaxAmount ?? 0 | toWords }}
                                                </th>
                                            </tr>
                                        </table>
                                        <div class="py-3"></div>
                                        <table class="table">
                                            <tr>
                                                <th>
                                                    <b
                                                        >Total Invoice Amount (In words):
                                                        {{ tableData?.customer?.customerCurrency }}</b
                                                    >
                                                    {{ tableData.salesInvoiceTotalAmountWithTax ?? 0 | toWords }}
                                                </th>
                                            </tr>
                                        </table>
                                        <div class="py-2"></div>
                                    </div>
                                    <div class="col-3 h-100 p-0">
                                        <h4 class="my-2">
                                            Tax Invoice Summary | Currency
                                            {{ tableData?.customer?.customerCurrency }}
                                        </h4>
                                        <table class="table">
                                            <tr>
                                                <th>Total Taxable Amount</th>
                                                <th class="text-center">
                                                    {{
                                                        tableData?.salesInvoiceTotalAmount
                                                            ? (tableData?.salesInvoiceTotalAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </th>
                                            </tr>
                                            <tr>
                                                <td class="sub-text">Output S-GST</td>
                                                <td colspan="2" class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalSGSTAmount
                                                            ? (tableData?.salesInvoiceTotalSGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="sub-text">Output C-GST</td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalCGSTAmount
                                                            ? (tableData?.salesInvoiceTotalCGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="sub-text">Output I-GST</td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.salesInvoiceTotalIGSTAmount
                                                            ? (tableData?.salesInvoiceTotalIGSTAmount | number : ".2-2")
                                                            : "-"
                                                    }}
                                                </td>
                                            </tr>
                                            <tr
                                                *ngIf="
                                                    tableData?.customer?.TCSOnScrap == 'Yes' ||
                                                    tableData?.customer?.TCSOnVendor == 'Yes'
                                                "
                                            >
                                                <td class="sub-text">
                                                    {{
                                                        tableData?.customer?.TCSOnScrap == "Yes"
                                                            ? "TCS 1% for Scrap"
                                                            : tableData?.customer?.TCSOnVendor == "Yes"
                                                            ? "TCS 0.1% for Goods"
                                                            : "TCS 1% for Scrap"
                                                    }}
                                                </td>
                                                <td class="text-center sub-text">
                                                    {{
                                                        tableData?.customer?.TCSOnScrap == "Yes"
                                                            ? tableData?.TCSOnScrap
                                                            : tableData?.customer?.TCSOnVendor == "Yes"
                                                            ? tableData?.TCSOnVendor
                                                            : tableData?.TCSOnScrap
                                                    }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="sub-text">Rounded off [+/-]</td>
                                                <td class="text-center sub-text">
                                                    {{ tableData?.roundedOff | number : ".2-2" }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>
                                                    <b>Total Invoice Amount</b>
                                                </th>
                                                <th class="text-center">
                                                    <b>
                                                        {{
                                                            tableData?.salesInvoiceTotalAmountWithTax | number : ".2-2"
                                                        }}
                                                    </b>
                                                </th>
                                            </tr>
                                        </table>
                                        <div class="py-3"></div>
                                        <table class="table">
                                            <tr>
                                                <th>
                                                    <b> Payment Terms</b>
                                                </th>
                                                <th class="text-center">
                                                    {{ tableData?.paymentTerms }}
                                                </th>
                                            </tr>
                                        </table>
                                        <div class="py-2"></div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="12">
                                <p class="sub-text">
                                    Declaration: We certify that the particulars given above are true and correct and
                                    the amount indicated represents the price actually charged and that there is no flow
                                    or additional consideration directly or indirectly from the buyer.
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5" class="">
                                <p>Bank Details:</p>
                                <p>Beneficiary: {{ tableData?.company?.companyBefName }}</p>
                                <p>Bank Name: {{ tableData?.company?.companyBankName }}</p>
                                <p>Branch: {{ tableData?.company?.companyBankBranch }}</p>
                                <p>
                                    Account No.:
                                    {{ tableData?.company?.companyAccountNumber }}
                                </p>
                                <p>IFS Code: {{ tableData?.company?.companyBankIFSCCode }}</p>
                            </td>
                            <td colspan="5" class="">
                                <p>Dispatch Details:</p>
                                <p>
                                    Transporter:
                                    {{ tableData?.transporter }}
                                </p>
                                <p>Destination: {{ tableData?.destination }}</p>
                                <p>Freight Terms: {{ tableData?.frightTerms }}</p>
                                <p>AWB/Docket no.:</p>
                                <p>AWB/Docket Date:</p>
                            </td>
                            <td colspan="2">
                                <div class="text-center">
                                    <img src="{{ tableData?.company?.TISignatureUrl }}" class="img-sign" />
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
